ðŸš« .git/ (× ×¤×¡×œ ×œ×¡×¨×™×§×”)
ðŸ“„ .gitignore
ðŸ“„ README.md
ðŸ“ client/
  ðŸ“„ components.json
  ðŸ“ dist/
    ðŸ“ assets/
      ðŸ“„ index-BDMUJ5hm.css
        *,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:Assistant,sans-serif;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.inset-y-0{top:0;bottom:0}.-right-3{right:-.75rem}.-top-2{top:-.5rem}.bottom-0{bottom:0}.left-0{left:0}.right-0{right:0}.right-4{right:1rem}.top-0{top:0}.top-4{top:1rem}.z-40{z-index:40}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:.25rem}.mb-10{margin-bottom:2.5rem}.mb-12{margin-bottom:3rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mr-2{margin-right:.5rem}.mr-4{margin-right:1rem}.mt-1{margin-top:.25rem}.mt-10{margin-top:2.5rem}.mt-12{margin-top:3rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.aspect-\[4\/5\]{aspect-ratio:4/5}.h-10{height:2.5rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-20{height:5rem}.h-48{height:12rem}.h-5{height:1.25rem}.h-8{height:2rem}.h-full{height:100%}.min-h-screen{min-height:100vh}.w-14{width:3.5rem}.w-16{width:4rem}.w-20{width:5rem}.w-24{width:6rem}.w-28{width:7rem}.w-32{width:8rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-8{width:2rem}.w-80{width:20rem}.w-96{width:24rem}.w-full{width:100%}.max-w-3xl{max-width:48rem}.max-w-lg{max-width:32rem}.max-w-md{max-width:28rem}.max-w-xl{max-width:36rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-full{--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-10{gap:2.5rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-y-12>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(3rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(3rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.25rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(229 231 235 / var(--tw-divide-opacity, 1))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.bg-amber-600{--tw-bg-opacity: 1;background-color:rgb(217 119 6 / var(--tw-bg-opacity, 1))}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-indigo-100{--tw-bg-opacity: 1;background-color:rgb(224 231 255 / var(--tw-bg-opacity, 1))}.bg-pink-100{--tw-bg-opacity: 1;background-color:rgb(252 231 243 / var(--tw-bg-opacity, 1))}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-sky-100{--tw-bg-opacity: 1;background-color:rgb(224 242 254 / var(--tw-bg-opacity, 1))}.bg-teal-100{--tw-bg-opacity: 1;background-color:rgb(204 251 241 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/80{background-color:#fffc}.bg-white\/95{background-color:#fffffff2}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-opacity-60{--tw-bg-opacity: .6}.bg-cover{background-size:cover}.bg-center{background-position:center}.object-cover{-o-object-fit:cover;object-fit:cover}.p-10{padding:2.5rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.py-16{padding-top:4rem;padding-bottom:4rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-20{padding-top:5rem;padding-bottom:5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pl-10{padding-left:2.5rem}.pl-3{padding-left:.75rem}.pr-10{padding-right:2.5rem}.pr-3{padding-right:.75rem}.pt-2{padding-top:.5rem}.pt-4{padding-top:1rem}.text-left{text-align:left}.text-center{text-align:center}.text-start{text-align:start}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:Assistant,sans-serif}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-6xl{font-size:3.75rem;line-height:1}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-medium{font-weight:500}.font-semibold{font-weight:600}.italic{font-style:italic}.not-italic{font-style:normal}.leading-none{line-height:1}.leading-tight{line-height:1.25}.text-amber-600{--tw-text-opacity: 1;color:rgb(217 119 6 / var(--tw-text-opacity, 1))}.text-amber-700{--tw-text-opacity: 1;color:rgb(180 83 9 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-indigo-800{--tw-text-opacity: 1;color:rgb(55 48 163 / var(--tw-text-opacity, 1))}.text-pink-800{--tw-text-opacity: 1;color:rgb(157 23 77 / var(--tw-text-opacity, 1))}.text-purple-800{--tw-text-opacity: 1;color:rgb(107 33 168 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-sky-800{--tw-text-opacity: 1;color:rgb(7 89 133 / var(--tw-text-opacity, 1))}.text-teal-800{--tw-text-opacity: 1;color:rgb(17 94 89 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-600{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.text-yellow-800{--tw-text-opacity: 1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.opacity-20{opacity:.2}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur: blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}body{font-family:Assistant,sans-serif}.file\:mr-4::file-selector-button{margin-right:1rem}.file\:rounded-full::file-selector-button{border-radius:9999px}.file\:border-0::file-selector-button{border-width:0px}.file\:bg-blue-50::file-selector-button{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.file\:px-4::file-selector-button{padding-left:1rem;padding-right:1rem}.file\:py-2::file-selector-button{padding-top:.5rem;padding-bottom:.5rem}.file\:text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\:font-semibold::file-selector-button{font-weight:600}.file\:text-blue-700::file-selector-button{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.last\:border-b-0:last-child{border-bottom-width:0px}.hover\:-translate-y-2:hover{--tw-translate-y: -.5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-105:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-amber-500:hover{--tw-border-opacity: 1;border-color:rgb(245 158 11 / var(--tw-border-opacity, 1))}.hover\:border-blue-500:hover{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-50\/50:hover{background-color:#f9fafb80}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:text-amber-600:hover{--tw-text-opacity: 1;color:rgb(217 119 6 / var(--tw-text-opacity, 1))}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\:underline:hover{text-decoration-line:underline}.hover\:shadow-lg:hover{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:file\:bg-blue-100::file-selector-button:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-amber-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(245 158 11 / var(--tw-ring-opacity, 1))}.group:hover .group-hover\:scale-105{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:underline{text-decoration-line:underline}@media (min-width: 640px){.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.sm\:flex-row{flex-direction:row}.sm\:items-center{align-items:center}.sm\:gap-4{gap:1rem}.sm\:gap-6{gap:1.5rem}.sm\:p-6{padding:1.5rem}.sm\:p-8{padding:2rem}.sm\:text-3xl{font-size:1.875rem;line-height:2.25rem}}@media (min-width: 768px){.md\:inline{display:inline}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\:py-24{padding-top:6rem;padding-bottom:6rem}.md\:py-32{padding-top:8rem;padding-bottom:8rem}.md\:text-4xl{font-size:2.25rem;line-height:2.5rem}.md\:text-6xl{font-size:3.75rem;line-height:1}.md\:text-xl{font-size:1.25rem;line-height:1.75rem}}@media (min-width: 1024px){.lg\:block{display:block}.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\:p-8{padding:2rem}}
      ðŸ“„ index-BjI7IzFT.js
        var Hc=e=>{throw TypeError(e)};var Fo=(e,t,n)=>t.has(e)||Hc("Cannot "+n);var k=(e,t,n)=>(Fo(e,t,"read from private field"),n?n.call(e):t.get(e)),H=(e,t,n)=>t.has(e)?Hc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),M=(e,t,n,r)=>(Fo(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),xe=(e,t,n)=>(Fo(e,t,"access private method"),n);var bl=(e,t,n,r)=>({set _(i){M(e,t,i,n)},get _(){return k(e,t,r)}});function lv(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const l=Object.getOwnPropertyDescriptor(r,i);l&&Object.defineProperty(e,i,l.get?l:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function ah(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uh={exports:{}},Ys={},ch={exports:{}},z={};/**
         * @license React
         * react.production.min.js
         *
         * Copyright (c) Facebook, Inc. and its affiliates.
         *
         * This source code is licensed under the MIT license found in the
         * LICENSE file in the root directory of this source tree.
         */var ml=Symbol.for("react.element"),sv=Symbol.for("react.portal"),ov=Symbol.for("react.fragment"),av=Symbol.for("react.strict_mode"),uv=Symbol.for("react.profiler"),cv=Symbol.for("react.provider"),dv=Symbol.for("react.context"),fv=Symbol.for("react.forward_ref"),hv=Symbol.for("react.suspense"),pv=Symbol.for("react.memo"),mv=Symbol.for("react.lazy"),Vc=Symbol.iterator;function gv(e){return e===null||typeof e!="object"?null:(e=Vc&&e[Vc]||e["@@iterator"],typeof e=="function"?e:null)}var dh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fh=Object.assign,hh={};function li(e,t,n){this.props=e,this.context=t,this.refs=hh,this.updater=n||dh}li.prototype.isReactComponent={};li.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};li.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ph(){}ph.prototype=li.prototype;function Lu(e,t,n){this.props=e,this.context=t,this.refs=hh,this.updater=n||dh}var Mu=Lu.prototype=new ph;Mu.constructor=Lu;fh(Mu,li.prototype);Mu.isPureReactComponent=!0;var Qc=Array.isArray,mh=Object.prototype.hasOwnProperty,Au={current:null},gh={key:!0,ref:!0,__self:!0,__source:!0};function vh(e,t,n){var r,i={},l=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(l=""+t.key),t)mh.call(t,r)&&!gh.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:ml,type:e,key:l,ref:s,props:i,_owner:Au.current}}function vv(e,t){return{$$typeof:ml,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Uu(e){return typeof e=="object"&&e!==null&&e.$$typeof===ml}function yv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var qc=/\/+/g;function Lo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yv(""+e.key):t.toString(36)}function Gl(e,t,n,r,i){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case ml:case sv:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+Lo(s,0):r,Qc(i)?(n="",e!=null&&(n=e.replace(qc,"$&/")+"/"),Gl(i,t,n,"",function(u){return u})):i!=null&&(Uu(i)&&(i=vv(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(qc,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",Qc(e))for(var o=0;o<e.length;o++){l=e[o];var a=r+Lo(l,o);s+=Gl(l,t,n,a,i)}else if(a=gv(e),typeof a=="function")for(e=a.call(e),o=0;!(l=e.next()).done;)l=l.value,a=r+Lo(l,o++),s+=Gl(l,t,n,a,i);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Pl(e,t,n){if(e==null)return e;var r=[],i=0;return Gl(e,r,"","",function(l){return t.call(n,l,i++)}),r}function xv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _e={current:null},Xl={transition:null},wv={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:Xl,ReactCurrentOwner:Au};function yh(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:Pl,forEach:function(e,t,n){Pl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Pl(e,function(){t++}),t},toArray:function(e){return Pl(e,function(t){return t})||[]},only:function(e){if(!Uu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};z.Component=li;z.Fragment=ov;z.Profiler=uv;z.PureComponent=Lu;z.StrictMode=av;z.Suspense=hv;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wv;z.act=yh;z.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=fh({},e.props),i=e.key,l=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,s=Au.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(a in t)mh.call(t,a)&&!gh.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&o!==void 0?o[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:ml,type:e.type,key:i,ref:l,props:r,_owner:s}};z.createContext=function(e){return e={$$typeof:dv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cv,_context:e},e.Consumer=e};z.createElement=vh;z.createFactory=function(e){var t=vh.bind(null,e);return t.type=e,t};z.createRef=function(){return{current:null}};z.forwardRef=function(e){return{$$typeof:fv,render:e}};z.isValidElement=Uu;z.lazy=function(e){return{$$typeof:mv,_payload:{_status:-1,_result:e},_init:xv}};z.memo=function(e,t){return{$$typeof:pv,type:e,compare:t===void 0?null:t}};z.startTransition=function(e){var t=Xl.transition;Xl.transition={};try{e()}finally{Xl.transition=t}};z.unstable_act=yh;z.useCallback=function(e,t){return _e.current.useCallback(e,t)};z.useContext=function(e){return _e.current.useContext(e)};z.useDebugValue=function(){};z.useDeferredValue=function(e){return _e.current.useDeferredValue(e)};z.useEffect=function(e,t){return _e.current.useEffect(e,t)};z.useId=function(){return _e.current.useId()};z.useImperativeHandle=function(e,t,n){return _e.current.useImperativeHandle(e,t,n)};z.useInsertionEffect=function(e,t){return _e.current.useInsertionEffect(e,t)};z.useLayoutEffect=function(e,t){return _e.current.useLayoutEffect(e,t)};z.useMemo=function(e,t){return _e.current.useMemo(e,t)};z.useReducer=function(e,t,n){return _e.current.useReducer(e,t,n)};z.useRef=function(e){return _e.current.useRef(e)};z.useState=function(e){return _e.current.useState(e)};z.useSyncExternalStore=function(e,t,n){return _e.current.useSyncExternalStore(e,t,n)};z.useTransition=function(){return _e.current.useTransition()};z.version="18.3.1";ch.exports=z;var p=ch.exports;const F=ah(p),Sa=lv({__proto__:null,default:F},[p]);/**
         * @license React
         * react-jsx-runtime.production.min.js
         *
         * Copyright (c) Facebook, Inc. and its affiliates.
         *
         * This source code is licensed under the MIT license found in the
         * LICENSE file in the root directory of this source tree.
         */var Sv=p,Ev=Symbol.for("react.element"),Cv=Symbol.for("react.fragment"),kv=Object.prototype.hasOwnProperty,Nv=Sv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jv={key:!0,ref:!0,__self:!0,__source:!0};function xh(e,t,n){var r,i={},l=null,s=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)kv.call(t,r)&&!jv.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Ev,type:e,key:l,ref:s,props:i,_owner:Nv.current}}Ys.Fragment=Cv;Ys.jsx=xh;Ys.jsxs=xh;uh.exports=Ys;var c=uh.exports,Ea={},wh={exports:{}},Ye={},Sh={exports:{}},Eh={};/**
         * @license React
         * scheduler.production.min.js
         *
         * Copyright (c) Facebook, Inc. and its affiliates.
         *
         * This source code is licensed under the MIT license found in the
         * LICENSE file in the root directory of this source tree.
         */(function(e){function t(T,D){var L=T.length;T.push(D);e:for(;0<L;){var V=L-1>>>1,ie=T[V];if(0<i(ie,D))T[V]=D,T[L]=ie,L=V;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var D=T[0],L=T.pop();if(L!==D){T[0]=L;e:for(var V=0,ie=T.length,B=ie>>>1;V<B;){var Ge=2*(V+1)-1,Rt=T[Ge],_t=Ge+1,nn=T[_t];if(0>i(Rt,L))_t<ie&&0>i(nn,Rt)?(T[V]=nn,T[_t]=L,V=_t):(T[V]=Rt,T[Ge]=L,V=Ge);else if(_t<ie&&0>i(nn,L))T[V]=nn,T[_t]=L,V=_t;else break e}}return D}function i(T,D){var L=T.sortIndex-D.sortIndex;return L!==0?L:T.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var a=[],u=[],d=1,f=null,h=3,g=!1,v=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=T)r(u),D.sortIndex=D.expirationTime,t(a,D);else break;D=n(u)}}function E(T){if(w=!1,x(T),!v)if(n(a)!==null)v=!0,Bn(N);else{var D=n(u);D!==null&&tn(E,D.startTime-T)}}function N(T,D){v=!1,w&&(w=!1,y(O),O=-1),g=!0;var L=h;try{for(x(D),f=n(a);f!==null&&(!(f.expirationTime>D)||T&&!U());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var ie=V(f.expirationTime<=D);D=e.unstable_now(),typeof ie=="function"?f.callback=ie:f===n(a)&&r(a),x(D)}else r(a);f=n(a)}if(f!==null)var B=!0;else{var Ge=n(u);Ge!==null&&tn(E,Ge.startTime-D),B=!1}return B}finally{f=null,h=L,g=!1}}var j=!1,P=null,O=-1,$=5,_=-1;function U(){return!(e.unstable_now()-_<$)}function ue(){if(P!==null){var T=e.unstable_now();_=T;var D=!0;try{D=P(!0,T)}finally{D?re():(j=!1,P=null)}}else j=!1}var re;if(typeof m=="function")re=function(){m(ue)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,zn=yt.port2;yt.port1.onmessage=ue,re=function(){zn.postMessage(null)}}else re=function(){S(ue,0)};function Bn(T){P=T,j||(j=!0,re())}function tn(T,D){O=S(function(){T(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,Bn(N))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var L=h;h=D;try{return T()}finally{h=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,D){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=h;h=T;try{return D()}finally{h=L}},e.unstable_scheduleCallback=function(T,D,L){var V=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?V+L:V):L=V,T){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=L+ie,T={id:d++,callback:D,priorityLevel:T,startTime:L,expirationTime:ie,sortIndex:-1},L>V?(T.sortIndex=L,t(u,T),n(a)===null&&T===n(u)&&(w?(y(O),O=-1):w=!0,tn(E,L-V))):(T.sortIndex=ie,t(a,T),v||g||(v=!0,Bn(N))),T},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(T){var D=h;return function(){var L=h;h=D;try{return T.apply(this,arguments)}finally{h=L}}}})(Eh);Sh.exports=Eh;var bv=Sh.exports;/**
         * @license React
         * react-dom.production.min.js
         *
         * Copyright (c) Facebook, Inc. and its affiliates.
         *
         * This source code is licensed under the MIT license found in the
         * LICENSE file in the root directory of this source tree.
         */var Pv=p,qe=bv;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ch=new Set,Vi={};function yr(e,t){Gr(e,t),Gr(e+"Capture",t)}function Gr(e,t){for(Vi[e]=t,e=0;e<t.length;e++)Ch.add(t[e])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ca=Object.prototype.hasOwnProperty,Ov=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yc={},Kc={};function Tv(e){return Ca.call(Kc,e)?!0:Ca.call(Yc,e)?!1:Ov.test(e)?Kc[e]=!0:(Yc[e]=!0,!1)}function Rv(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _v(e,t,n,r){if(t===null||typeof t>"u"||Rv(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $e(e,t,n,r,i,l,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=s}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ye[e]=new $e(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ye[t]=new $e(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ye[e]=new $e(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ye[e]=new $e(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ye[e]=new $e(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ye[e]=new $e(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ye[e]=new $e(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ye[e]=new $e(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ye[e]=new $e(e,5,!1,e.toLowerCase(),null,!1,!1)});var Iu=/[\-:]([a-z])/g;function zu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Iu,zu);ye[t]=new $e(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Iu,zu);ye[t]=new $e(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Iu,zu);ye[t]=new $e(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ye[e]=new $e(e,1,!1,e.toLowerCase(),null,!1,!1)});ye.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ye[e]=new $e(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bu(e,t,n,r){var i=ye.hasOwnProperty(t)?ye[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_v(t,n,i,r)&&(n=null),r||i===null?Tv(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Kt=Pv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ol=Symbol.for("react.element"),kr=Symbol.for("react.portal"),Nr=Symbol.for("react.fragment"),Wu=Symbol.for("react.strict_mode"),ka=Symbol.for("react.profiler"),kh=Symbol.for("react.provider"),Nh=Symbol.for("react.context"),Hu=Symbol.for("react.forward_ref"),Na=Symbol.for("react.suspense"),ja=Symbol.for("react.suspense_list"),Vu=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),jh=Symbol.for("react.offscreen"),Gc=Symbol.iterator;function mi(e){return e===null||typeof e!="object"?null:(e=Gc&&e[Gc]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Object.assign,Mo;function ji(e){if(Mo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mo=t&&t[1]||""}return`
        `+Mo+e}var Ao=!1;function Uo(e,t){if(!e||Ao)return"";Ao=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
        `),l=r.stack.split(`
        `),s=i.length-1,o=l.length-1;1<=s&&0<=o&&i[s]!==l[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==l[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==l[o]){var a=`
        `+i[s].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=s&&0<=o);break}}}finally{Ao=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ji(e):""}function $v(e){switch(e.tag){case 5:return ji(e.type);case 16:return ji("Lazy");case 13:return ji("Suspense");case 19:return ji("SuspenseList");case 0:case 2:case 15:return e=Uo(e.type,!1),e;case 11:return e=Uo(e.type.render,!1),e;case 1:return e=Uo(e.type,!0),e;default:return""}}function ba(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nr:return"Fragment";case kr:return"Portal";case ka:return"Profiler";case Wu:return"StrictMode";case Na:return"Suspense";case ja:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nh:return(e.displayName||"Context")+".Consumer";case kh:return(e._context.displayName||"Context")+".Provider";case Hu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Vu:return t=e.displayName||null,t!==null?t:ba(e.type)||"Memo";case an:t=e._payload,e=e._init;try{return ba(e(t))}catch{}}return null}function Dv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ba(t);case 8:return t===Wu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fv(e){var t=bh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,l.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tl(e){e._valueTracker||(e._valueTracker=Fv(e))}function Ph(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=bh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pa(e,t){var n=t.checked;return ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Oh(e,t){t=t.checked,t!=null&&Bu(e,"checked",t,!1)}function Oa(e,t){Oh(e,t);var n=Fn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ta(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ta(e,t.type,Fn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ta(e,t,n){(t!=="number"||fs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var bi=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ra(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(b(91));return ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(b(92));if(bi(n)){if(1<n.length)throw Error(b(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fn(n)}}function Th(e,t){var n=Fn(t.value),r=Fn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ed(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Rh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _a(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Rh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rl,_h=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rl=Rl||document.createElement("div"),Rl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lv=["Webkit","ms","Moz","O"];Object.keys($i).forEach(function(e){Lv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$i[t]=$i[e]})});function $h(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$i.hasOwnProperty(e)&&$i[e]?(""+t).trim():t+"px"}function Dh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$h(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Mv=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $a(e,t){if(t){if(Mv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(b(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(b(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(b(61))}if(t.style!=null&&typeof t.style!="object")throw Error(b(62))}}function Da(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fa=null;function Qu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var La=null,Mr=null,Ar=null;function td(e){if(e=yl(e)){if(typeof La!="function")throw Error(b(280));var t=e.stateNode;t&&(t=Zs(t),La(e.stateNode,e.type,t))}}function Fh(e){Mr?Ar?Ar.push(e):Ar=[e]:Mr=e}function Lh(){if(Mr){var e=Mr,t=Ar;if(Ar=Mr=null,td(e),t)for(e=0;e<t.length;e++)td(t[e])}}function Mh(e,t){return e(t)}function Ah(){}var Io=!1;function Uh(e,t,n){if(Io)return e(t,n);Io=!0;try{return Mh(e,t,n)}finally{Io=!1,(Mr!==null||Ar!==null)&&(Ah(),Lh())}}function qi(e,t){var n=e.stateNode;if(n===null)return null;var r=Zs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(b(231,t,typeof n));return n}var Ma=!1;if(Wt)try{var gi={};Object.defineProperty(gi,"passive",{get:function(){Ma=!0}}),window.addEventListener("test",gi,gi),window.removeEventListener("test",gi,gi)}catch{Ma=!1}function Av(e,t,n,r,i,l,s,o,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Di=!1,hs=null,ps=!1,Aa=null,Uv={onError:function(e){Di=!0,hs=e}};function Iv(e,t,n,r,i,l,s,o,a){Di=!1,hs=null,Av.apply(Uv,arguments)}function zv(e,t,n,r,i,l,s,o,a){if(Iv.apply(this,arguments),Di){if(Di){var u=hs;Di=!1,hs=null}else throw Error(b(198));ps||(ps=!0,Aa=u)}}function xr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ih(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nd(e){if(xr(e)!==e)throw Error(b(188))}function Bv(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(b(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var l=i.alternate;if(l===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===n)return nd(i),e;if(l===r)return nd(i),t;l=l.sibling}throw Error(b(188))}if(n.return!==r.return)n=i,r=l;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=l;break}if(o===r){s=!0,r=i,n=l;break}o=o.sibling}if(!s){for(o=l.child;o;){if(o===n){s=!0,n=l,r=i;break}if(o===r){s=!0,r=l,n=i;break}o=o.sibling}if(!s)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?e:t}function zh(e){return e=Bv(e),e!==null?Bh(e):null}function Bh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bh(e);if(t!==null)return t;e=e.sibling}return null}var Wh=qe.unstable_scheduleCallback,rd=qe.unstable_cancelCallback,Wv=qe.unstable_shouldYield,Hv=qe.unstable_requestPaint,ae=qe.unstable_now,Vv=qe.unstable_getCurrentPriorityLevel,qu=qe.unstable_ImmediatePriority,Hh=qe.unstable_UserBlockingPriority,ms=qe.unstable_NormalPriority,Qv=qe.unstable_LowPriority,Vh=qe.unstable_IdlePriority,Ks=null,bt=null;function qv(e){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Ks,e,void 0,(e.current.flags&128)===128)}catch{}}var pt=Math.clz32?Math.clz32:Gv,Yv=Math.log,Kv=Math.LN2;function Gv(e){return e>>>=0,e===0?32:31-(Yv(e)/Kv|0)|0}var _l=64,$l=4194304;function Pi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,l=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=Pi(o):(l&=s,l!==0&&(r=Pi(l)))}else s=n&~i,s!==0?r=Pi(s):l!==0&&(r=Pi(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-pt(t),i=1<<n,r|=e[n],t&=~i;return r}function Xv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jv(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,l=e.pendingLanes;0<l;){var s=31-pt(l),o=1<<s,a=i[s];a===-1?(!(o&n)||o&r)&&(i[s]=Xv(o,t)):a<=t&&(e.expiredLanes|=o),l&=~o}}function Ua(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qh(){var e=_l;return _l<<=1,!(_l&4194240)&&(_l=64),e}function zo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-pt(t),e[t]=n}function Zv(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-pt(n),l=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~l}}function Yu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var q=0;function qh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yh,Ku,Kh,Gh,Xh,Ia=!1,Dl=[],kn=null,Nn=null,jn=null,Yi=new Map,Ki=new Map,cn=[],ey="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function id(e,t){switch(e){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Yi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(t.pointerId)}}function vi(e,t,n,r,i,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[i]},t!==null&&(t=yl(t),t!==null&&Ku(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ty(e,t,n,r,i){switch(t){case"focusin":return kn=vi(kn,e,t,n,r,i),!0;case"dragenter":return Nn=vi(Nn,e,t,n,r,i),!0;case"mouseover":return jn=vi(jn,e,t,n,r,i),!0;case"pointerover":var l=i.pointerId;return Yi.set(l,vi(Yi.get(l)||null,e,t,n,r,i)),!0;case"gotpointercapture":return l=i.pointerId,Ki.set(l,vi(Ki.get(l)||null,e,t,n,r,i)),!0}return!1}function Jh(e){var t=Yn(e.target);if(t!==null){var n=xr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ih(n),t!==null){e.blockedOn=t,Xh(e.priority,function(){Kh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=za(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Fa=r,n.target.dispatchEvent(r),Fa=null}else return t=yl(n),t!==null&&Ku(t),e.blockedOn=n,!1;t.shift()}return!0}function ld(e,t,n){Jl(e)&&n.delete(t)}function ny(){Ia=!1,kn!==null&&Jl(kn)&&(kn=null),Nn!==null&&Jl(Nn)&&(Nn=null),jn!==null&&Jl(jn)&&(jn=null),Yi.forEach(ld),Ki.forEach(ld)}function yi(e,t){e.blockedOn===t&&(e.blockedOn=null,Ia||(Ia=!0,qe.unstable_scheduleCallback(qe.unstable_NormalPriority,ny)))}function Gi(e){function t(i){return yi(i,e)}if(0<Dl.length){yi(Dl[0],e);for(var n=1;n<Dl.length;n++){var r=Dl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(kn!==null&&yi(kn,e),Nn!==null&&yi(Nn,e),jn!==null&&yi(jn,e),Yi.forEach(t),Ki.forEach(t),n=0;n<cn.length;n++)r=cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<cn.length&&(n=cn[0],n.blockedOn===null);)Jh(n),n.blockedOn===null&&cn.shift()}var Ur=Kt.ReactCurrentBatchConfig,vs=!0;function ry(e,t,n,r){var i=q,l=Ur.transition;Ur.transition=null;try{q=1,Gu(e,t,n,r)}finally{q=i,Ur.transition=l}}function iy(e,t,n,r){var i=q,l=Ur.transition;Ur.transition=null;try{q=4,Gu(e,t,n,r)}finally{q=i,Ur.transition=l}}function Gu(e,t,n,r){if(vs){var i=za(e,t,n,r);if(i===null)Xo(e,t,r,ys,n),id(e,r);else if(ty(i,e,t,n,r))r.stopPropagation();else if(id(e,r),t&4&&-1<ey.indexOf(e)){for(;i!==null;){var l=yl(i);if(l!==null&&Yh(l),l=za(e,t,n,r),l===null&&Xo(e,t,r,ys,n),l===i)break;i=l}i!==null&&r.stopPropagation()}else Xo(e,t,r,null,n)}}var ys=null;function za(e,t,n,r){if(ys=null,e=Qu(r),e=Yn(e),e!==null)if(t=xr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ih(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ys=e,null}function Zh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vv()){case qu:return 1;case Hh:return 4;case ms:case Qv:return 16;case Vh:return 536870912;default:return 16}default:return 16}}var xn=null,Xu=null,Zl=null;function ep(){if(Zl)return Zl;var e,t=Xu,n=t.length,r,i="value"in xn?xn.value:xn.textContent,l=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[l-r];r++);return Zl=i.slice(e,1<r?1-r:void 0)}function es(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fl(){return!0}function sd(){return!1}function Ke(e){function t(n,r,i,l,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=l,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Fl:sd,this.isPropagationStopped=sd,this}return ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),t}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ju=Ke(si),vl=ne({},si,{view:0,detail:0}),ly=Ke(vl),Bo,Wo,xi,Gs=ne({},vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xi&&(xi&&e.type==="mousemove"?(Bo=e.screenX-xi.screenX,Wo=e.screenY-xi.screenY):Wo=Bo=0,xi=e),Bo)},movementY:function(e){return"movementY"in e?e.movementY:Wo}}),od=Ke(Gs),sy=ne({},Gs,{dataTransfer:0}),oy=Ke(sy),ay=ne({},vl,{relatedTarget:0}),Ho=Ke(ay),uy=ne({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),cy=Ke(uy),dy=ne({},si,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fy=Ke(dy),hy=ne({},si,{data:0}),ad=Ke(hy),py={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},my={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gy[e])?!!t[e]:!1}function Zu(){return vy}var yy=ne({},vl,{key:function(e){if(e.key){var t=py[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=es(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?my[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zu,charCode:function(e){return e.type==="keypress"?es(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?es(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xy=Ke(yy),wy=ne({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ud=Ke(wy),Sy=ne({},vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zu}),Ey=Ke(Sy),Cy=ne({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),ky=Ke(Cy),Ny=ne({},Gs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jy=Ke(Ny),by=[9,13,27,32],ec=Wt&&"CompositionEvent"in window,Fi=null;Wt&&"documentMode"in document&&(Fi=document.documentMode);var Py=Wt&&"TextEvent"in window&&!Fi,tp=Wt&&(!ec||Fi&&8<Fi&&11>=Fi),cd=" ",dd=!1;function np(e,t){switch(e){case"keyup":return by.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jr=!1;function Oy(e,t){switch(e){case"compositionend":return rp(t);case"keypress":return t.which!==32?null:(dd=!0,cd);case"textInput":return e=t.data,e===cd&&dd?null:e;default:return null}}function Ty(e,t){if(jr)return e==="compositionend"||!ec&&np(e,t)?(e=ep(),Zl=Xu=xn=null,jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tp&&t.locale!=="ko"?null:t.data;default:return null}}var Ry={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ry[e.type]:t==="textarea"}function ip(e,t,n,r){Fh(r),t=xs(t,"onChange"),0<t.length&&(n=new Ju("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Li=null,Xi=null;function _y(e){mp(e,0)}function Xs(e){var t=Or(e);if(Ph(t))return e}function $y(e,t){if(e==="change")return t}var lp=!1;if(Wt){var Vo;if(Wt){var Qo="oninput"in document;if(!Qo){var hd=document.createElement("div");hd.setAttribute("oninput","return;"),Qo=typeof hd.oninput=="function"}Vo=Qo}else Vo=!1;lp=Vo&&(!document.documentMode||9<document.documentMode)}function pd(){Li&&(Li.detachEvent("onpropertychange",sp),Xi=Li=null)}function sp(e){if(e.propertyName==="value"&&Xs(Xi)){var t=[];ip(t,Xi,e,Qu(e)),Uh(_y,t)}}function Dy(e,t,n){e==="focusin"?(pd(),Li=t,Xi=n,Li.attachEvent("onpropertychange",sp)):e==="focusout"&&pd()}function Fy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xs(Xi)}function Ly(e,t){if(e==="click")return Xs(t)}function My(e,t){if(e==="input"||e==="change")return Xs(t)}function Ay(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gt=typeof Object.is=="function"?Object.is:Ay;function Ji(e,t){if(gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ca.call(t,i)||!gt(e[i],t[i]))return!1}return!0}function md(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gd(e,t){var n=md(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=md(n)}}function op(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?op(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ap(){for(var e=window,t=fs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fs(e.document)}return t}function tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Uy(e){var t=ap(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&op(n.ownerDocument.documentElement,n)){if(r!==null&&tc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,l=Math.min(r.start,i);r=r.end===void 0?l:Math.min(r.end,i),!e.extend&&l>r&&(i=r,r=l,l=i),i=gd(n,l);var s=gd(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Iy=Wt&&"documentMode"in document&&11>=document.documentMode,br=null,Ba=null,Mi=null,Wa=!1;function vd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wa||br==null||br!==fs(r)||(r=br,"selectionStart"in r&&tc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mi&&Ji(Mi,r)||(Mi=r,r=xs(Ba,"onSelect"),0<r.length&&(t=new Ju("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}function Ll(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},qo={},up={};Wt&&(up=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function Js(e){if(qo[e])return qo[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in up)return qo[e]=t[n];return e}var cp=Js("animationend"),dp=Js("animationiteration"),fp=Js("animationstart"),hp=Js("transitionend"),pp=new Map,yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(e,t){pp.set(e,t),yr(t,[e])}for(var Yo=0;Yo<yd.length;Yo++){var Ko=yd[Yo],zy=Ko.toLowerCase(),By=Ko[0].toUpperCase()+Ko.slice(1);Mn(zy,"on"+By)}Mn(cp,"onAnimationEnd");Mn(dp,"onAnimationIteration");Mn(fp,"onAnimationStart");Mn("dblclick","onDoubleClick");Mn("focusin","onFocus");Mn("focusout","onBlur");Mn(hp,"onTransitionEnd");Gr("onMouseEnter",["mouseout","mouseover"]);Gr("onMouseLeave",["mouseout","mouseover"]);Gr("onPointerEnter",["pointerout","pointerover"]);Gr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function xd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,zv(r,t,void 0,e),e.currentTarget=null}function mp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==l&&i.isPropagationStopped())break e;xd(i,o,u),l=a}else for(s=0;s<r.length;s++){if(o=r[s],a=o.instance,u=o.currentTarget,o=o.listener,a!==l&&i.isPropagationStopped())break e;xd(i,o,u),l=a}}}if(ps)throw e=Aa,ps=!1,Aa=null,e}function G(e,t){var n=t[Ya];n===void 0&&(n=t[Ya]=new Set);var r=e+"__bubble";n.has(r)||(gp(t,e,2,!1),n.add(r))}function Go(e,t,n){var r=0;t&&(r|=4),gp(n,e,r,t)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Zi(e){if(!e[Ml]){e[Ml]=!0,Ch.forEach(function(n){n!=="selectionchange"&&(Wy.has(n)||Go(n,!1,e),Go(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ml]||(t[Ml]=!0,Go("selectionchange",!1,t))}}function gp(e,t,n,r){switch(Zh(t)){case 1:var i=ry;break;case 4:i=iy;break;default:i=Gu}n=i.bind(null,t,n,e),i=void 0,!Ma||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Xo(e,t,n,r,i){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Yn(o),s===null)return;if(a=s.tag,a===5||a===6){r=l=s;continue e}o=o.parentNode}}r=r.return}Uh(function(){var u=l,d=Qu(n),f=[];e:{var h=pp.get(e);if(h!==void 0){var g=Ju,v=e;switch(e){case"keypress":if(es(n)===0)break e;case"keydown":case"keyup":g=xy;break;case"focusin":v="focus",g=Ho;break;case"focusout":v="blur",g=Ho;break;case"beforeblur":case"afterblur":g=Ho;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ey;break;case cp:case dp:case fp:g=cy;break;case hp:g=ky;break;case"scroll":g=ly;break;case"wheel":g=jy;break;case"copy":case"cut":case"paste":g=fy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ud}var w=(t&4)!==0,S=!w&&e==="scroll",y=w?h!==null?h+"Capture":null:h;w=[];for(var m=u,x;m!==null;){x=m;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,y!==null&&(E=qi(m,y),E!=null&&w.push(el(m,E,x)))),S)break;m=m.return}0<w.length&&(h=new g(h,v,null,n,d),f.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==Fa&&(v=n.relatedTarget||n.fromElement)&&(Yn(v)||v[Ht]))break e;if((g||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Yn(v):null,v!==null&&(S=xr(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(w=od,E="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(w=ud,E="onPointerLeave",y="onPointerEnter",m="pointer"),S=g==null?h:Or(g),x=v==null?h:Or(v),h=new w(E,m+"leave",g,n,d),h.target=S,h.relatedTarget=x,E=null,Yn(d)===u&&(w=new w(y,m+"enter",v,n,d),w.target=x,w.relatedTarget=S,E=w),S=E,g&&v)t:{for(w=g,y=v,m=0,x=w;x;x=Er(x))m++;for(x=0,E=y;E;E=Er(E))x++;for(;0<m-x;)w=Er(w),m--;for(;0<x-m;)y=Er(y),x--;for(;m--;){if(w===y||y!==null&&w===y.alternate)break t;w=Er(w),y=Er(y)}w=null}else w=null;g!==null&&wd(f,h,g,w,!1),v!==null&&S!==null&&wd(f,S,v,w,!0)}}e:{if(h=u?Or(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var N=$y;else if(fd(h))if(lp)N=My;else{N=Fy;var j=Dy}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Ly);if(N&&(N=N(e,u))){ip(f,N,n,d);break e}j&&j(e,h,u),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&Ta(h,"number",h.value)}switch(j=u?Or(u):window,e){case"focusin":(fd(j)||j.contentEditable==="true")&&(br=j,Ba=u,Mi=null);break;case"focusout":Mi=Ba=br=null;break;case"mousedown":Wa=!0;break;case"contextmenu":case"mouseup":case"dragend":Wa=!1,vd(f,n,d);break;case"selectionchange":if(Iy)break;case"keydown":case"keyup":vd(f,n,d)}var P;if(ec)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else jr?np(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(tp&&n.locale!=="ko"&&(jr||O!=="onCompositionStart"?O==="onCompositionEnd"&&jr&&(P=ep()):(xn=d,Xu="value"in xn?xn.value:xn.textContent,jr=!0)),j=xs(u,O),0<j.length&&(O=new ad(O,e,null,n,d),f.push({event:O,listeners:j}),P?O.data=P:(P=rp(n),P!==null&&(O.data=P)))),(P=Py?Oy(e,n):Ty(e,n))&&(u=xs(u,"onBeforeInput"),0<u.length&&(d=new ad("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=P))}mp(f,t)})}function el(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xs(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=qi(e,n),l!=null&&r.unshift(el(e,l,i)),l=qi(e,t),l!=null&&r.push(el(e,l,i))),e=e.return}return r}function Er(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wd(e,t,n,r,i){for(var l=t._reactName,s=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=qi(n,l),a!=null&&s.unshift(el(n,a,o))):i||(a=qi(n,l),a!=null&&s.push(el(n,a,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Hy=/\r\n?/g,Vy=/\u0000|\uFFFD/g;function Sd(e){return(typeof e=="string"?e:""+e).replace(Hy,`
        `).replace(Vy,"")}function Al(e,t,n){if(t=Sd(t),Sd(e)!==t&&n)throw Error(b(425))}function ws(){}var Ha=null,Va=null;function Qa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qa=typeof setTimeout=="function"?setTimeout:void 0,Qy=typeof clearTimeout=="function"?clearTimeout:void 0,Ed=typeof Promise=="function"?Promise:void 0,qy=typeof queueMicrotask=="function"?queueMicrotask:typeof Ed<"u"?function(e){return Ed.resolve(null).then(e).catch(Yy)}:qa;function Yy(e){setTimeout(function(){throw e})}function Jo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Gi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Gi(t)}function bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Cd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var oi=Math.random().toString(36).slice(2),jt="__reactFiber$"+oi,tl="__reactProps$"+oi,Ht="__reactContainer$"+oi,Ya="__reactEvents$"+oi,Ky="__reactListeners$"+oi,Gy="__reactHandles$"+oi;function Yn(e){var t=e[jt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ht]||n[jt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Cd(e);e!==null;){if(n=e[jt])return n;e=Cd(e)}return t}e=n,n=e.parentNode}return null}function yl(e){return e=e[jt]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Or(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(b(33))}function Zs(e){return e[tl]||null}var Ka=[],Tr=-1;function An(e){return{current:e}}function X(e){0>Tr||(e.current=Ka[Tr],Ka[Tr]=null,Tr--)}function K(e,t){Tr++,Ka[Tr]=e.current,e.current=t}var Ln={},je=An(Ln),Ae=An(!1),cr=Ln;function Xr(e,t){var n=e.type.contextTypes;if(!n)return Ln;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in n)i[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ue(e){return e=e.childContextTypes,e!=null}function Ss(){X(Ae),X(je)}function kd(e,t,n){if(je.current!==Ln)throw Error(b(168));K(je,t),K(Ae,n)}function vp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(b(108,Dv(e)||"Unknown",i));return ne({},n,r)}function Es(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ln,cr=je.current,K(je,e),K(Ae,Ae.current),!0}function Nd(e,t,n){var r=e.stateNode;if(!r)throw Error(b(169));n?(e=vp(e,t,cr),r.__reactInternalMemoizedMergedChildContext=e,X(Ae),X(je),K(je,e)):X(Ae),K(Ae,n)}var Lt=null,eo=!1,Zo=!1;function yp(e){Lt===null?Lt=[e]:Lt.push(e)}function Xy(e){eo=!0,yp(e)}function Un(){if(!Zo&&Lt!==null){Zo=!0;var e=0,t=q;try{var n=Lt;for(q=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Lt=null,eo=!1}catch(i){throw Lt!==null&&(Lt=Lt.slice(e+1)),Wh(qu,Un),i}finally{q=t,Zo=!1}}return null}var Rr=[],_r=0,Cs=null,ks=0,Ze=[],et=0,dr=null,Ut=1,It="";function Wn(e,t){Rr[_r++]=ks,Rr[_r++]=Cs,Cs=e,ks=t}function xp(e,t,n){Ze[et++]=Ut,Ze[et++]=It,Ze[et++]=dr,dr=e;var r=Ut;e=It;var i=32-pt(r)-1;r&=~(1<<i),n+=1;var l=32-pt(t)+i;if(30<l){var s=i-i%5;l=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ut=1<<32-pt(t)+i|n<<i|r,It=l+e}else Ut=1<<l|n<<i|r,It=e}function nc(e){e.return!==null&&(Wn(e,1),xp(e,1,0))}function rc(e){for(;e===Cs;)Cs=Rr[--_r],Rr[_r]=null,ks=Rr[--_r],Rr[_r]=null;for(;e===dr;)dr=Ze[--et],Ze[et]=null,It=Ze[--et],Ze[et]=null,Ut=Ze[--et],Ze[et]=null}var Qe=null,Ve=null,J=!1,ft=null;function wp(e,t){var n=tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function jd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qe=e,Ve=bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qe=e,Ve=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=dr!==null?{id:Ut,overflow:It}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Qe=e,Ve=null,!0):!1;default:return!1}}function Ga(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xa(e){if(J){var t=Ve;if(t){var n=t;if(!jd(e,t)){if(Ga(e))throw Error(b(418));t=bn(n.nextSibling);var r=Qe;t&&jd(e,t)?wp(r,n):(e.flags=e.flags&-4097|2,J=!1,Qe=e)}}else{if(Ga(e))throw Error(b(418));e.flags=e.flags&-4097|2,J=!1,Qe=e}}}function bd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qe=e}function Ul(e){if(e!==Qe)return!1;if(!J)return bd(e),J=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qa(e.type,e.memoizedProps)),t&&(t=Ve)){if(Ga(e))throw Sp(),Error(b(418));for(;t;)wp(e,t),t=bn(t.nextSibling)}if(bd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ve=bn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ve=null}}else Ve=Qe?bn(e.stateNode.nextSibling):null;return!0}function Sp(){for(var e=Ve;e;)e=bn(e.nextSibling)}function Jr(){Ve=Qe=null,J=!1}function ic(e){ft===null?ft=[e]:ft.push(e)}var Jy=Kt.ReactCurrentBatchConfig;function wi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,e));var i=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(s){var o=i.refs;s===null?delete o[l]:o[l]=s},t._stringRef=l,t)}if(typeof e!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,e))}return e}function Il(e,t){throw e=Object.prototype.toString.call(t),Error(b(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pd(e){var t=e._init;return t(e._payload)}function Ep(e){function t(y,m){if(e){var x=y.deletions;x===null?(y.deletions=[m],y.flags|=16):x.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Rn(y,m),y.index=0,y.sibling=null,y}function l(y,m,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<m?(y.flags|=2,m):x):(y.flags|=2,m)):(y.flags|=1048576,m)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,m,x,E){return m===null||m.tag!==6?(m=sa(x,y.mode,E),m.return=y,m):(m=i(m,x),m.return=y,m)}function a(y,m,x,E){var N=x.type;return N===Nr?d(y,m,x.props.children,E,x.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===an&&Pd(N)===m.type)?(E=i(m,x.props),E.ref=wi(y,m,x),E.return=y,E):(E=os(x.type,x.key,x.props,null,y.mode,E),E.ref=wi(y,m,x),E.return=y,E)}function u(y,m,x,E){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=oa(x,y.mode,E),m.return=y,m):(m=i(m,x.children||[]),m.return=y,m)}function d(y,m,x,E,N){return m===null||m.tag!==7?(m=or(x,y.mode,E,N),m.return=y,m):(m=i(m,x),m.return=y,m)}function f(y,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=sa(""+m,y.mode,x),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ol:return x=os(m.type,m.key,m.props,null,y.mode,x),x.ref=wi(y,null,m),x.return=y,x;case kr:return m=oa(m,y.mode,x),m.return=y,m;case an:var E=m._init;return f(y,E(m._payload),x)}if(bi(m)||mi(m))return m=or(m,y.mode,x,null),m.return=y,m;Il(y,m)}return null}function h(y,m,x,E){var N=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:o(y,m,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ol:return x.key===N?a(y,m,x,E):null;case kr:return x.key===N?u(y,m,x,E):null;case an:return N=x._init,h(y,m,N(x._payload),E)}if(bi(x)||mi(x))return N!==null?null:d(y,m,x,E,null);Il(y,x)}return null}function g(y,m,x,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(x)||null,o(m,y,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ol:return y=y.get(E.key===null?x:E.key)||null,a(m,y,E,N);case kr:return y=y.get(E.key===null?x:E.key)||null,u(m,y,E,N);case an:var j=E._init;return g(y,m,x,j(E._payload),N)}if(bi(E)||mi(E))return y=y.get(x)||null,d(m,y,E,N,null);Il(m,E)}return null}function v(y,m,x,E){for(var N=null,j=null,P=m,O=m=0,$=null;P!==null&&O<x.length;O++){P.index>O?($=P,P=null):$=P.sibling;var _=h(y,P,x[O],E);if(_===null){P===null&&(P=$);break}e&&P&&_.alternate===null&&t(y,P),m=l(_,m,O),j===null?N=_:j.sibling=_,j=_,P=$}if(O===x.length)return n(y,P),J&&Wn(y,O),N;if(P===null){for(;O<x.length;O++)P=f(y,x[O],E),P!==null&&(m=l(P,m,O),j===null?N=P:j.sibling=P,j=P);return J&&Wn(y,O),N}for(P=r(y,P);O<x.length;O++)$=g(P,y,O,x[O],E),$!==null&&(e&&$.alternate!==null&&P.delete($.key===null?O:$.key),m=l($,m,O),j===null?N=$:j.sibling=$,j=$);return e&&P.forEach(function(U){return t(y,U)}),J&&Wn(y,O),N}function w(y,m,x,E){var N=mi(x);if(typeof N!="function")throw Error(b(150));if(x=N.call(x),x==null)throw Error(b(151));for(var j=N=null,P=m,O=m=0,$=null,_=x.next();P!==null&&!_.done;O++,_=x.next()){P.index>O?($=P,P=null):$=P.sibling;var U=h(y,P,_.value,E);if(U===null){P===null&&(P=$);break}e&&P&&U.alternate===null&&t(y,P),m=l(U,m,O),j===null?N=U:j.sibling=U,j=U,P=$}if(_.done)return n(y,P),J&&Wn(y,O),N;if(P===null){for(;!_.done;O++,_=x.next())_=f(y,_.value,E),_!==null&&(m=l(_,m,O),j===null?N=_:j.sibling=_,j=_);return J&&Wn(y,O),N}for(P=r(y,P);!_.done;O++,_=x.next())_=g(P,y,O,_.value,E),_!==null&&(e&&_.alternate!==null&&P.delete(_.key===null?O:_.key),m=l(_,m,O),j===null?N=_:j.sibling=_,j=_);return e&&P.forEach(function(ue){return t(y,ue)}),J&&Wn(y,O),N}function S(y,m,x,E){if(typeof x=="object"&&x!==null&&x.type===Nr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ol:e:{for(var N=x.key,j=m;j!==null;){if(j.key===N){if(N=x.type,N===Nr){if(j.tag===7){n(y,j.sibling),m=i(j,x.props.children),m.return=y,y=m;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===an&&Pd(N)===j.type){n(y,j.sibling),m=i(j,x.props),m.ref=wi(y,j,x),m.return=y,y=m;break e}n(y,j);break}else t(y,j);j=j.sibling}x.type===Nr?(m=or(x.props.children,y.mode,E,x.key),m.return=y,y=m):(E=os(x.type,x.key,x.props,null,y.mode,E),E.ref=wi(y,m,x),E.return=y,y=E)}return s(y);case kr:e:{for(j=x.key;m!==null;){if(m.key===j)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){n(y,m.sibling),m=i(m,x.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else t(y,m);m=m.sibling}m=oa(x,y.mode,E),m.return=y,y=m}return s(y);case an:return j=x._init,S(y,m,j(x._payload),E)}if(bi(x))return v(y,m,x,E);if(mi(x))return w(y,m,x,E);Il(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(n(y,m.sibling),m=i(m,x),m.return=y,y=m):(n(y,m),m=sa(x,y.mode,E),m.return=y,y=m),s(y)):n(y,m)}return S}var Zr=Ep(!0),Cp=Ep(!1),Ns=An(null),js=null,$r=null,lc=null;function sc(){lc=$r=js=null}function oc(e){var t=Ns.current;X(Ns),e._currentValue=t}function Ja(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ir(e,t){js=e,lc=$r=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Me=!0),e.firstContext=null)}function rt(e){var t=e._currentValue;if(lc!==e)if(e={context:e,memoizedValue:t,next:null},$r===null){if(js===null)throw Error(b(308));$r=e,js.dependencies={lanes:0,firstContext:e}}else $r=$r.next=e;return t}var Kn=null;function ac(e){Kn===null?Kn=[e]:Kn.push(e)}function kp(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,ac(t)):(n.next=i.next,i.next=n),t.interleaved=n,Vt(e,r)}function Vt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var un=!1;function uc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Np(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,W&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Vt(e,n)}return i=r.interleaved,i===null?(t.next=t,ac(r)):(t.next=i.next,i.next=t),r.interleaved=t,Vt(e,n)}function ts(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yu(e,n)}}function Od(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?i=l=s:l=l.next=s,n=n.next}while(n!==null);l===null?i=l=t:l=l.next=t}else i=l=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bs(e,t,n,r){var i=e.updateQueue;un=!1;var l=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,s===null?l=u:s.next=u,s=a;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=a))}if(l!==null){var f=i.baseState;s=0,d=u=a=null,o=l;do{var h=o.lane,g=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,w=o;switch(h=t,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){f=v.call(g,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,h=typeof v=="function"?v.call(g,f,h):v,h==null)break e;f=ne({},f,h);break e;case 2:un=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else g={eventTime:g,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=g,a=f):d=d.next=g,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);hr|=s,e.lanes=s,e.memoizedState=f}}function Td(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(b(191,i));i.call(r)}}}var xl={},Pt=An(xl),nl=An(xl),rl=An(xl);function Gn(e){if(e===xl)throw Error(b(174));return e}function cc(e,t){switch(K(rl,t),K(nl,e),K(Pt,xl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_a(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_a(t,e)}X(Pt),K(Pt,t)}function ei(){X(Pt),X(nl),X(rl)}function jp(e){Gn(rl.current);var t=Gn(Pt.current),n=_a(t,e.type);t!==n&&(K(nl,e),K(Pt,n))}function dc(e){nl.current===e&&(X(Pt),X(nl))}var Z=An(0);function Ps(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=[];function fc(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var ns=Kt.ReactCurrentDispatcher,ta=Kt.ReactCurrentBatchConfig,fr=0,ee=null,de=null,he=null,Os=!1,Ai=!1,il=0,Zy=0;function we(){throw Error(b(321))}function hc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gt(e[n],t[n]))return!1;return!0}function pc(e,t,n,r,i,l){if(fr=l,ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ns.current=e===null||e.memoizedState===null?r0:i0,e=n(r,i),Ai){l=0;do{if(Ai=!1,il=0,25<=l)throw Error(b(301));l+=1,he=de=null,t.updateQueue=null,ns.current=l0,e=n(r,i)}while(Ai)}if(ns.current=Ts,t=de!==null&&de.next!==null,fr=0,he=de=ee=null,Os=!1,t)throw Error(b(300));return e}function mc(){var e=il!==0;return il=0,e}function Et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?ee.memoizedState=he=e:he=he.next=e,he}function it(){if(de===null){var e=ee.alternate;e=e!==null?e.memoizedState:null}else e=de.next;var t=he===null?ee.memoizedState:he.next;if(t!==null)he=t,de=e;else{if(e===null)throw Error(b(310));de=e,e={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},he===null?ee.memoizedState=he=e:he=he.next=e}return he}function ll(e,t){return typeof t=="function"?t(e):t}function na(e){var t=it(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var r=de,i=r.baseQueue,l=n.pending;if(l!==null){if(i!==null){var s=i.next;i.next=l.next,l.next=s}r.baseQueue=i=l,n.pending=null}if(i!==null){l=i.next,r=r.baseState;var o=s=null,a=null,u=l;do{var d=u.lane;if((fr&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=f,s=r):a=a.next=f,ee.lanes|=d,hr|=d}u=u.next}while(u!==null&&u!==l);a===null?s=r:a.next=o,gt(r,t.memoizedState)||(Me=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do l=i.lane,ee.lanes|=l,hr|=l,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ra(e){var t=it(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,l=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do l=e(l,s.action),s=s.next;while(s!==i);gt(l,t.memoizedState)||(Me=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function bp(){}function Pp(e,t){var n=ee,r=it(),i=t(),l=!gt(r.memoizedState,i);if(l&&(r.memoizedState=i,Me=!0),r=r.queue,gc(Rp.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||he!==null&&he.memoizedState.tag&1){if(n.flags|=2048,sl(9,Tp.bind(null,n,r,i,t),void 0,null),pe===null)throw Error(b(349));fr&30||Op(n,t,i)}return i}function Op(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Tp(e,t,n,r){t.value=n,t.getSnapshot=r,_p(t)&&$p(e)}function Rp(e,t,n){return n(function(){_p(t)&&$p(e)})}function _p(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gt(e,n)}catch{return!0}}function $p(e){var t=Vt(e,1);t!==null&&mt(t,e,1,-1)}function Rd(e){var t=Et();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:e},t.queue=e,e=e.dispatch=n0.bind(null,ee,e),[t.memoizedState,e]}function sl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Dp(){return it().memoizedState}function rs(e,t,n,r){var i=Et();ee.flags|=e,i.memoizedState=sl(1|t,n,void 0,r===void 0?null:r)}function to(e,t,n,r){var i=it();r=r===void 0?null:r;var l=void 0;if(de!==null){var s=de.memoizedState;if(l=s.destroy,r!==null&&hc(r,s.deps)){i.memoizedState=sl(t,n,l,r);return}}ee.flags|=e,i.memoizedState=sl(1|t,n,l,r)}function _d(e,t){return rs(8390656,8,e,t)}function gc(e,t){return to(2048,8,e,t)}function Fp(e,t){return to(4,2,e,t)}function Lp(e,t){return to(4,4,e,t)}function Mp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ap(e,t,n){return n=n!=null?n.concat([e]):null,to(4,4,Mp.bind(null,t,e),n)}function vc(){}function Up(e,t){var n=it();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ip(e,t){var n=it();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zp(e,t,n){return fr&21?(gt(n,t)||(n=Qh(),ee.lanes|=n,hr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Me=!0),e.memoizedState=n)}function e0(e,t){var n=q;q=n!==0&&4>n?n:4,e(!0);var r=ta.transition;ta.transition={};try{e(!1),t()}finally{q=n,ta.transition=r}}function Bp(){return it().memoizedState}function t0(e,t,n){var r=Tn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wp(e))Hp(t,n);else if(n=kp(e,t,n,r),n!==null){var i=Re();mt(n,e,r,i),Vp(n,t,r)}}function n0(e,t,n){var r=Tn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wp(e))Hp(t,i);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var s=t.lastRenderedState,o=l(s,n);if(i.hasEagerState=!0,i.eagerState=o,gt(o,s)){var a=t.interleaved;a===null?(i.next=i,ac(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=kp(e,t,i,r),n!==null&&(i=Re(),mt(n,e,r,i),Vp(n,t,r))}}function Wp(e){var t=e.alternate;return e===ee||t!==null&&t===ee}function Hp(e,t){Ai=Os=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yu(e,n)}}var Ts={readContext:rt,useCallback:we,useContext:we,useEffect:we,useImperativeHandle:we,useInsertionEffect:we,useLayoutEffect:we,useMemo:we,useReducer:we,useRef:we,useState:we,useDebugValue:we,useDeferredValue:we,useTransition:we,useMutableSource:we,useSyncExternalStore:we,useId:we,unstable_isNewReconciler:!1},r0={readContext:rt,useCallback:function(e,t){return Et().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:_d,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,rs(4194308,4,Mp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rs(4194308,4,e,t)},useInsertionEffect:function(e,t){return rs(4,2,e,t)},useMemo:function(e,t){var n=Et();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Et();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=t0.bind(null,ee,e),[r.memoizedState,e]},useRef:function(e){var t=Et();return e={current:e},t.memoizedState=e},useState:Rd,useDebugValue:vc,useDeferredValue:function(e){return Et().memoizedState=e},useTransition:function(){var e=Rd(!1),t=e[0];return e=e0.bind(null,e[1]),Et().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ee,i=Et();if(J){if(n===void 0)throw Error(b(407));n=n()}else{if(n=t(),pe===null)throw Error(b(349));fr&30||Op(r,t,n)}i.memoizedState=n;var l={value:n,getSnapshot:t};return i.queue=l,_d(Rp.bind(null,r,l,e),[e]),r.flags|=2048,sl(9,Tp.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Et(),t=pe.identifierPrefix;if(J){var n=It,r=Ut;n=(r&~(1<<32-pt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=il++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Zy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},i0={readContext:rt,useCallback:Up,useContext:rt,useEffect:gc,useImperativeHandle:Ap,useInsertionEffect:Fp,useLayoutEffect:Lp,useMemo:Ip,useReducer:na,useRef:Dp,useState:function(){return na(ll)},useDebugValue:vc,useDeferredValue:function(e){var t=it();return zp(t,de.memoizedState,e)},useTransition:function(){var e=na(ll)[0],t=it().memoizedState;return[e,t]},useMutableSource:bp,useSyncExternalStore:Pp,useId:Bp,unstable_isNewReconciler:!1},l0={readContext:rt,useCallback:Up,useContext:rt,useEffect:gc,useImperativeHandle:Ap,useInsertionEffect:Fp,useLayoutEffect:Lp,useMemo:Ip,useReducer:ra,useRef:Dp,useState:function(){return ra(ll)},useDebugValue:vc,useDeferredValue:function(e){var t=it();return de===null?t.memoizedState=e:zp(t,de.memoizedState,e)},useTransition:function(){var e=ra(ll)[0],t=it().memoizedState;return[e,t]},useMutableSource:bp,useSyncExternalStore:Pp,useId:Bp,unstable_isNewReconciler:!1};function ot(e,t){if(e&&e.defaultProps){t=ne({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Za(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ne({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var no={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Re(),i=Tn(e),l=zt(r,i);l.payload=t,n!=null&&(l.callback=n),t=Pn(e,l,i),t!==null&&(mt(t,e,i,r),ts(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Re(),i=Tn(e),l=zt(r,i);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Pn(e,l,i),t!==null&&(mt(t,e,i,r),ts(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Re(),r=Tn(e),i=zt(n,r);i.tag=2,t!=null&&(i.callback=t),t=Pn(e,i,r),t!==null&&(mt(t,e,r,n),ts(t,e,r))}};function $d(e,t,n,r,i,l,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,s):t.prototype&&t.prototype.isPureReactComponent?!Ji(n,r)||!Ji(i,l):!0}function Qp(e,t,n){var r=!1,i=Ln,l=t.contextType;return typeof l=="object"&&l!==null?l=rt(l):(i=Ue(t)?cr:je.current,r=t.contextTypes,l=(r=r!=null)?Xr(e,i):Ln),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=l),t}function Dd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function eu(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},uc(e);var l=t.contextType;typeof l=="object"&&l!==null?i.context=rt(l):(l=Ue(t)?cr:je.current,i.context=Xr(e,l)),i.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Za(e,t,l,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&no.enqueueReplaceState(i,i.state,null),bs(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ti(e,t){try{var n="",r=t;do n+=$v(r),r=r.return;while(r);var i=n}catch(l){i=`
        Error generating stack: `+l.message+`
        `+l.stack}return{value:e,source:t,stack:i,digest:null}}function ia(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function tu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var s0=typeof WeakMap=="function"?WeakMap:Map;function qp(e,t,n){n=zt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){_s||(_s=!0,du=r),tu(e,t)},n}function Yp(e,t,n){n=zt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){tu(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){tu(e,t),typeof r!="function"&&(On===null?On=new Set([this]):On.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Fd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new s0;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=w0.bind(null,e,t,n),t.then(e,e))}function Ld(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Md(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zt(-1,1),t.tag=2,Pn(n,t,1))),n.lanes|=1),e)}var o0=Kt.ReactCurrentOwner,Me=!1;function Oe(e,t,n,r){t.child=e===null?Cp(t,null,n,r):Zr(t,e.child,n,r)}function Ad(e,t,n,r,i){n=n.render;var l=t.ref;return Ir(t,i),r=pc(e,t,n,r,l,i),n=mc(),e!==null&&!Me?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qt(e,t,i)):(J&&n&&nc(t),t.flags|=1,Oe(e,t,r,i),t.child)}function Ud(e,t,n,r,i){if(e===null){var l=n.type;return typeof l=="function"&&!Nc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Kp(e,t,l,r,i)):(e=os(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&i)){var s=l.memoizedProps;if(n=n.compare,n=n!==null?n:Ji,n(s,r)&&e.ref===t.ref)return Qt(e,t,i)}return t.flags|=1,e=Rn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Kp(e,t,n,r,i){if(e!==null){var l=e.memoizedProps;if(Ji(l,r)&&e.ref===t.ref)if(Me=!1,t.pendingProps=r=l,(e.lanes&i)!==0)e.flags&131072&&(Me=!0);else return t.lanes=e.lanes,Qt(e,t,i)}return nu(e,t,n,r,i)}function Gp(e,t,n){var r=t.pendingProps,i=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},K(Fr,He),He|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,K(Fr,He),He|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,K(Fr,He),He|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,K(Fr,He),He|=r;return Oe(e,t,i,n),t.child}function Xp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function nu(e,t,n,r,i){var l=Ue(n)?cr:je.current;return l=Xr(t,l),Ir(t,i),n=pc(e,t,n,r,l,i),r=mc(),e!==null&&!Me?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qt(e,t,i)):(J&&r&&nc(t),t.flags|=1,Oe(e,t,n,i),t.child)}function Id(e,t,n,r,i){if(Ue(n)){var l=!0;Es(t)}else l=!1;if(Ir(t,i),t.stateNode===null)is(e,t),Qp(t,n,r),eu(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var a=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=rt(u):(u=Ue(n)?cr:je.current,u=Xr(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||a!==u)&&Dd(t,s,r,u),un=!1;var h=t.memoizedState;s.state=h,bs(t,r,s,i),a=t.memoizedState,o!==r||h!==a||Ae.current||un?(typeof d=="function"&&(Za(t,n,d,r),a=t.memoizedState),(o=un||$d(t,n,o,r,h,a,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),s.props=r,s.state=a,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Np(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:ot(t.type,o),s.props=u,f=t.pendingProps,h=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=rt(a):(a=Ue(n)?cr:je.current,a=Xr(t,a));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==a)&&Dd(t,s,r,a),un=!1,h=t.memoizedState,s.state=h,bs(t,r,s,i);var v=t.memoizedState;o!==f||h!==v||Ae.current||un?(typeof g=="function"&&(Za(t,n,g,r),v=t.memoizedState),(u=un||$d(t,n,u,r,h,v,a)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,a)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ru(e,t,n,r,l,i)}function ru(e,t,n,r,i,l){Xp(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&Nd(t,n,!1),Qt(e,t,l);r=t.stateNode,o0.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Zr(t,e.child,null,l),t.child=Zr(t,null,o,l)):Oe(e,t,o,l),t.memoizedState=r.state,i&&Nd(t,n,!0),t.child}function Jp(e){var t=e.stateNode;t.pendingContext?kd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kd(e,t.context,!1),cc(e,t.containerInfo)}function zd(e,t,n,r,i){return Jr(),ic(i),t.flags|=256,Oe(e,t,n,r),t.child}var iu={dehydrated:null,treeContext:null,retryLane:0};function lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zp(e,t,n){var r=t.pendingProps,i=Z.current,l=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),K(Z,i&1),e===null)return Xa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,l?(r=t.mode,l=t.child,s={mode:"hidden",children:s},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=s):l=lo(s,r,0,null),e=or(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=lu(n),t.memoizedState=iu,e):yc(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return a0(e,t,s,r,o,i,n);if(l){l=r.fallback,s=t.mode,i=e.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=Rn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?l=Rn(o,l):(l=or(l,s,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,s=e.child.memoizedState,s=s===null?lu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},l.memoizedState=s,l.childLanes=e.childLanes&~n,t.memoizedState=iu,r}return l=e.child,e=l.sibling,r=Rn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function yc(e,t){return t=lo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zl(e,t,n,r){return r!==null&&ic(r),Zr(t,e.child,null,n),e=yc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function a0(e,t,n,r,i,l,s){if(n)return t.flags&256?(t.flags&=-257,r=ia(Error(b(422))),zl(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,i=t.mode,r=lo({mode:"visible",children:r.children},i,0,null),l=or(l,i,s,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Zr(t,e.child,null,s),t.child.memoizedState=lu(s),t.memoizedState=iu,l);if(!(t.mode&1))return zl(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,l=Error(b(419)),r=ia(l,r,void 0),zl(e,t,s,r)}if(o=(s&e.childLanes)!==0,Me||o){if(r=pe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,Vt(e,i),mt(r,e,i,-1))}return kc(),r=ia(Error(b(421))),zl(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=S0.bind(null,e),i._reactRetry=t,null):(e=l.treeContext,Ve=bn(i.nextSibling),Qe=t,J=!0,ft=null,e!==null&&(Ze[et++]=Ut,Ze[et++]=It,Ze[et++]=dr,Ut=e.id,It=e.overflow,dr=t),t=yc(t,r.children),t.flags|=4096,t)}function Bd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ja(e.return,t,n)}function la(e,t,n,r,i){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=i)}function em(e,t,n){var r=t.pendingProps,i=r.revealOrder,l=r.tail;if(Oe(e,t,r.children,n),r=Z.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bd(e,n,t);else if(e.tag===19)Bd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(K(Z,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ps(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),la(t,!1,i,n,l);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ps(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}la(t,!0,n,null,l);break;case"together":la(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function is(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(b(153));if(t.child!==null){for(e=t.child,n=Rn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Rn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function u0(e,t,n){switch(t.tag){case 3:Jp(t),Jr();break;case 5:jp(t);break;case 1:Ue(t.type)&&Es(t);break;case 4:cc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;K(Ns,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(K(Z,Z.current&1),t.flags|=128,null):n&t.child.childLanes?Zp(e,t,n):(K(Z,Z.current&1),e=Qt(e,t,n),e!==null?e.sibling:null);K(Z,Z.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return em(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),K(Z,Z.current),r)break;return null;case 22:case 23:return t.lanes=0,Gp(e,t,n)}return Qt(e,t,n)}var tm,su,nm,rm;tm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};su=function(){};nm=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gn(Pt.current);var l=null;switch(n){case"input":i=Pa(e,i),r=Pa(e,r),l=[];break;case"select":i=ne({},i,{value:void 0}),r=ne({},r,{value:void 0}),l=[];break;case"textarea":i=Ra(e,i),r=Ra(e,r),l=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ws)}$a(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vi.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&o[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(l||(l=[]),l.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(l=l||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(l=l||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Vi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&G("scroll",e),l||o===a||(l=[])):(l=l||[]).push(u,a))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};rm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Si(e,t){if(!J)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Se(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function c0(e,t,n){var r=t.pendingProps;switch(rc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(t),null;case 1:return Ue(t.type)&&Ss(),Se(t),null;case 3:return r=t.stateNode,ei(),X(Ae),X(je),fc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ul(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ft!==null&&(pu(ft),ft=null))),su(e,t),Se(t),null;case 5:dc(t);var i=Gn(rl.current);if(n=t.type,e!==null&&t.stateNode!=null)nm(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(b(166));return Se(t),null}if(e=Gn(Pt.current),Ul(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[jt]=t,r[tl]=l,e=(t.mode&1)!==0,n){case"dialog":G("cancel",r),G("close",r);break;case"iframe":case"object":case"embed":G("load",r);break;case"video":case"audio":for(i=0;i<Oi.length;i++)G(Oi[i],r);break;case"source":G("error",r);break;case"img":case"image":case"link":G("error",r),G("load",r);break;case"details":G("toggle",r);break;case"input":Xc(r,l),G("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},G("invalid",r);break;case"textarea":Zc(r,l),G("invalid",r)}$a(n,l),i=null;for(var s in l)if(l.hasOwnProperty(s)){var o=l[s];s==="children"?typeof o=="string"?r.textContent!==o&&(l.suppressHydrationWarning!==!0&&Al(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Al(r.textContent,o,e),i=["children",""+o]):Vi.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&G("scroll",r)}switch(n){case"input":Tl(r),Jc(r,l,!0);break;case"textarea":Tl(r),ed(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=ws)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Rh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[jt]=t,e[tl]=r,tm(e,t,!1,!1),t.stateNode=e;e:{switch(s=Da(n,r),n){case"dialog":G("cancel",e),G("close",e),i=r;break;case"iframe":case"object":case"embed":G("load",e),i=r;break;case"video":case"audio":for(i=0;i<Oi.length;i++)G(Oi[i],e);i=r;break;case"source":G("error",e),i=r;break;case"img":case"image":case"link":G("error",e),G("load",e),i=r;break;case"details":G("toggle",e),i=r;break;case"input":Xc(e,r),i=Pa(e,r),G("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ne({},r,{value:void 0}),G("invalid",e);break;case"textarea":Zc(e,r),i=Ra(e,r),G("invalid",e);break;default:i=r}$a(n,i),o=i;for(l in o)if(o.hasOwnProperty(l)){var a=o[l];l==="style"?Dh(e,a):l==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&_h(e,a)):l==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Qi(e,a):typeof a=="number"&&Qi(e,""+a):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Vi.hasOwnProperty(l)?a!=null&&l==="onScroll"&&G("scroll",e):a!=null&&Bu(e,l,a,s))}switch(n){case"input":Tl(e),Jc(e,r,!1);break;case"textarea":Tl(e),ed(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Lr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ws)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Se(t),null;case 6:if(e&&t.stateNode!=null)rm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(b(166));if(n=Gn(rl.current),Gn(Pt.current),Ul(t)){if(r=t.stateNode,n=t.memoizedProps,r[jt]=t,(l=r.nodeValue!==n)&&(e=Qe,e!==null))switch(e.tag){case 3:Al(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Al(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jt]=t,t.stateNode=r}return Se(t),null;case 13:if(X(Z),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(J&&Ve!==null&&t.mode&1&&!(t.flags&128))Sp(),Jr(),t.flags|=98560,l=!1;else if(l=Ul(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(b(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(b(317));l[jt]=t}else Jr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Se(t),l=!1}else ft!==null&&(pu(ft),ft=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Z.current&1?fe===0&&(fe=3):kc())),t.updateQueue!==null&&(t.flags|=4),Se(t),null);case 4:return ei(),su(e,t),e===null&&Zi(t.stateNode.containerInfo),Se(t),null;case 10:return oc(t.type._context),Se(t),null;case 17:return Ue(t.type)&&Ss(),Se(t),null;case 19:if(X(Z),l=t.memoizedState,l===null)return Se(t),null;if(r=(t.flags&128)!==0,s=l.rendering,s===null)if(r)Si(l,!1);else{if(fe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ps(e),s!==null){for(t.flags|=128,Si(l,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,s=l.alternate,s===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,l.type=s.type,e=s.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return K(Z,Z.current&1|2),t.child}e=e.sibling}l.tail!==null&&ae()>ni&&(t.flags|=128,r=!0,Si(l,!1),t.lanes=4194304)}else{if(!r)if(e=Ps(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Si(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!J)return Se(t),null}else 2*ae()-l.renderingStartTime>ni&&n!==1073741824&&(t.flags|=128,r=!0,Si(l,!1),t.lanes=4194304);l.isBackwards?(s.sibling=t.child,t.child=s):(n=l.last,n!==null?n.sibling=s:t.child=s,l.last=s)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ae(),t.sibling=null,n=Z.current,K(Z,r?n&1|2:n&1),t):(Se(t),null);case 22:case 23:return Cc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?He&1073741824&&(Se(t),t.subtreeFlags&6&&(t.flags|=8192)):Se(t),null;case 24:return null;case 25:return null}throw Error(b(156,t.tag))}function d0(e,t){switch(rc(t),t.tag){case 1:return Ue(t.type)&&Ss(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ei(),X(Ae),X(je),fc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dc(t),null;case 13:if(X(Z),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(b(340));Jr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return X(Z),null;case 4:return ei(),null;case 10:return oc(t.type._context),null;case 22:case 23:return Cc(),null;case 24:return null;default:return null}}var Bl=!1,Ce=!1,f0=typeof WeakSet=="function"?WeakSet:Set,R=null;function Dr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(e,t,r)}else n.current=null}function ou(e,t,n){try{n()}catch(r){se(e,t,r)}}var Wd=!1;function h0(e,t){if(Ha=vs,e=ap(),tc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var s=0,o=-1,a=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==l||r!==0&&f.nodeType!==3||(a=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===e)break t;if(h===n&&++u===i&&(o=s),h===l&&++d===r&&(a=s),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Va={focusedElem:e,selectionRange:n},vs=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,S=v.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?w:ot(t.type,w),S);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(E){se(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return v=Wd,Wd=!1,v}function Ui(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var l=i.destroy;i.destroy=void 0,l!==void 0&&ou(t,n,l)}i=i.next}while(i!==r)}}function ro(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function im(e){var t=e.alternate;t!==null&&(e.alternate=null,im(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jt],delete t[tl],delete t[Ya],delete t[Ky],delete t[Gy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lm(e){return e.tag===5||e.tag===3||e.tag===4}function Hd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ws));else if(r!==4&&(e=e.child,e!==null))for(uu(e,t,n),e=e.sibling;e!==null;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(cu(e,t,n),e=e.sibling;e!==null;)cu(e,t,n),e=e.sibling}var me=null,dt=!1;function rn(e,t,n){for(n=n.child;n!==null;)sm(e,t,n),n=n.sibling}function sm(e,t,n){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Ks,n)}catch{}switch(n.tag){case 5:Ce||Dr(n,t);case 6:var r=me,i=dt;me=null,rn(e,t,n),me=r,dt=i,me!==null&&(dt?(e=me,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(dt?(e=me,n=n.stateNode,e.nodeType===8?Jo(e.parentNode,n):e.nodeType===1&&Jo(e,n),Gi(e)):Jo(me,n.stateNode));break;case 4:r=me,i=dt,me=n.stateNode.containerInfo,dt=!0,rn(e,t,n),me=r,dt=i;break;case 0:case 11:case 14:case 15:if(!Ce&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var l=i,s=l.destroy;l=l.tag,s!==void 0&&(l&2||l&4)&&ou(n,t,s),i=i.next}while(i!==r)}rn(e,t,n);break;case 1:if(!Ce&&(Dr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){se(n,t,o)}rn(e,t,n);break;case 21:rn(e,t,n);break;case 22:n.mode&1?(Ce=(r=Ce)||n.memoizedState!==null,rn(e,t,n),Ce=r):rn(e,t,n);break;default:rn(e,t,n)}}function Vd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new f0),t.forEach(function(r){var i=E0.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function st(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var l=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:me=o.stateNode,dt=!1;break e;case 3:me=o.stateNode.containerInfo,dt=!0;break e;case 4:me=o.stateNode.containerInfo,dt=!0;break e}o=o.return}if(me===null)throw Error(b(160));sm(l,s,i),me=null,dt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){se(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)om(t,e),t=t.sibling}function om(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(st(t,e),xt(e),r&4){try{Ui(3,e,e.return),ro(3,e)}catch(w){se(e,e.return,w)}try{Ui(5,e,e.return)}catch(w){se(e,e.return,w)}}break;case 1:st(t,e),xt(e),r&512&&n!==null&&Dr(n,n.return);break;case 5:if(st(t,e),xt(e),r&512&&n!==null&&Dr(n,n.return),e.flags&32){var i=e.stateNode;try{Qi(i,"")}catch(w){se(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var l=e.memoizedProps,s=n!==null?n.memoizedProps:l,o=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Oh(i,l),Da(o,s);var u=Da(o,l);for(s=0;s<a.length;s+=2){var d=a[s],f=a[s+1];d==="style"?Dh(i,f):d==="dangerouslySetInnerHTML"?_h(i,f):d==="children"?Qi(i,f):Bu(i,d,f,u)}switch(o){case"input":Oa(i,l);break;case"textarea":Th(i,l);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var g=l.value;g!=null?Lr(i,!!l.multiple,g,!1):h!==!!l.multiple&&(l.defaultValue!=null?Lr(i,!!l.multiple,l.defaultValue,!0):Lr(i,!!l.multiple,l.multiple?[]:"",!1))}i[tl]=l}catch(w){se(e,e.return,w)}}break;case 6:if(st(t,e),xt(e),r&4){if(e.stateNode===null)throw Error(b(162));i=e.stateNode,l=e.memoizedProps;try{i.nodeValue=l}catch(w){se(e,e.return,w)}}break;case 3:if(st(t,e),xt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gi(t.containerInfo)}catch(w){se(e,e.return,w)}break;case 4:st(t,e),xt(e);break;case 13:st(t,e),xt(e),i=e.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(Sc=ae())),r&4&&Vd(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ce=(u=Ce)||d,st(t,e),Ce=u):st(t,e),xt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(R=e,d=e.child;d!==null;){for(f=R=d;R!==null;){switch(h=R,g=h.child,h.tag){case 0:case 11:case 14:case 15:Ui(4,h,h.return);break;case 1:Dr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){se(r,n,w)}}break;case 5:Dr(h,h.return);break;case 22:if(h.memoizedState!==null){qd(f);continue}}g!==null?(g.return=h,R=g):qd(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=f.stateNode,a=f.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=$h("display",s))}catch(w){se(e,e.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){se(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:st(t,e),xt(e),r&4&&Vd(e);break;case 21:break;default:st(t,e),xt(e)}}function xt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(lm(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Qi(i,""),r.flags&=-33);var l=Hd(e);cu(e,l,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=Hd(e);uu(e,o,s);break;default:throw Error(b(161))}}catch(a){se(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function p0(e,t,n){R=e,am(e)}function am(e,t,n){for(var r=(e.mode&1)!==0;R!==null;){var i=R,l=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Bl;if(!s){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Ce;o=Bl;var u=Ce;if(Bl=s,(Ce=a)&&!u)for(R=i;R!==null;)s=R,a=s.child,s.tag===22&&s.memoizedState!==null?Yd(i):a!==null?(a.return=s,R=a):Yd(i);for(;l!==null;)R=l,am(l),l=l.sibling;R=i,Bl=o,Ce=u}Qd(e)}else i.subtreeFlags&8772&&l!==null?(l.return=i,R=l):Qd(e)}}function Qd(e){for(;R!==null;){var t=R;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ce||ro(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ce)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ot(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Td(t,l,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Td(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Gi(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}Ce||t.flags&512&&au(t)}catch(h){se(t,t.return,h)}}if(t===e){R=null;break}if(n=t.sibling,n!==null){n.return=t.return,R=n;break}R=t.return}}function qd(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var n=t.sibling;if(n!==null){n.return=t.return,R=n;break}R=t.return}}function Yd(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ro(4,t)}catch(a){se(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){se(t,i,a)}}var l=t.return;try{au(t)}catch(a){se(t,l,a)}break;case 5:var s=t.return;try{au(t)}catch(a){se(t,s,a)}}}catch(a){se(t,t.return,a)}if(t===e){R=null;break}var o=t.sibling;if(o!==null){o.return=t.return,R=o;break}R=t.return}}var m0=Math.ceil,Rs=Kt.ReactCurrentDispatcher,xc=Kt.ReactCurrentOwner,nt=Kt.ReactCurrentBatchConfig,W=0,pe=null,ce=null,ve=0,He=0,Fr=An(0),fe=0,ol=null,hr=0,io=0,wc=0,Ii=null,Fe=null,Sc=0,ni=1/0,Ft=null,_s=!1,du=null,On=null,Wl=!1,wn=null,$s=0,zi=0,fu=null,ls=-1,ss=0;function Re(){return W&6?ae():ls!==-1?ls:ls=ae()}function Tn(e){return e.mode&1?W&2&&ve!==0?ve&-ve:Jy.transition!==null?(ss===0&&(ss=Qh()),ss):(e=q,e!==0||(e=window.event,e=e===void 0?16:Zh(e.type)),e):1}function mt(e,t,n,r){if(50<zi)throw zi=0,fu=null,Error(b(185));gl(e,n,r),(!(W&2)||e!==pe)&&(e===pe&&(!(W&2)&&(io|=n),fe===4&&dn(e,ve)),Ie(e,r),n===1&&W===0&&!(t.mode&1)&&(ni=ae()+500,eo&&Un()))}function Ie(e,t){var n=e.callbackNode;Jv(e,t);var r=gs(e,e===pe?ve:0);if(r===0)n!==null&&rd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rd(n),t===1)e.tag===0?Xy(Kd.bind(null,e)):yp(Kd.bind(null,e)),qy(function(){!(W&6)&&Un()}),n=null;else{switch(qh(r)){case 1:n=qu;break;case 4:n=Hh;break;case 16:n=ms;break;case 536870912:n=Vh;break;default:n=ms}n=gm(n,um.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function um(e,t){if(ls=-1,ss=0,W&6)throw Error(b(327));var n=e.callbackNode;if(zr()&&e.callbackNode!==n)return null;var r=gs(e,e===pe?ve:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ds(e,r);else{t=r;var i=W;W|=2;var l=dm();(pe!==e||ve!==t)&&(Ft=null,ni=ae()+500,sr(e,t));do try{y0();break}catch(o){cm(e,o)}while(!0);sc(),Rs.current=l,W=i,ce!==null?t=0:(pe=null,ve=0,t=fe)}if(t!==0){if(t===2&&(i=Ua(e),i!==0&&(r=i,t=hu(e,i))),t===1)throw n=ol,sr(e,0),dn(e,r),Ie(e,ae()),n;if(t===6)dn(e,r);else{if(i=e.current.alternate,!(r&30)&&!g0(i)&&(t=Ds(e,r),t===2&&(l=Ua(e),l!==0&&(r=l,t=hu(e,l))),t===1))throw n=ol,sr(e,0),dn(e,r),Ie(e,ae()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(b(345));case 2:Hn(e,Fe,Ft);break;case 3:if(dn(e,r),(r&130023424)===r&&(t=Sc+500-ae(),10<t)){if(gs(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Re(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qa(Hn.bind(null,e,Fe,Ft),t);break}Hn(e,Fe,Ft);break;case 4:if(dn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-pt(r);l=1<<s,s=t[s],s>i&&(i=s),r&=~l}if(r=i,r=ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*m0(r/1960))-r,10<r){e.timeoutHandle=qa(Hn.bind(null,e,Fe,Ft),r);break}Hn(e,Fe,Ft);break;case 5:Hn(e,Fe,Ft);break;default:throw Error(b(329))}}}return Ie(e,ae()),e.callbackNode===n?um.bind(null,e):null}function hu(e,t){var n=Ii;return e.current.memoizedState.isDehydrated&&(sr(e,t).flags|=256),e=Ds(e,t),e!==2&&(t=Fe,Fe=n,t!==null&&pu(t)),e}function pu(e){Fe===null?Fe=e:Fe.push.apply(Fe,e)}function g0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],l=i.getSnapshot;i=i.value;try{if(!gt(l(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dn(e,t){for(t&=~wc,t&=~io,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-pt(t),r=1<<n;e[n]=-1,t&=~r}}function Kd(e){if(W&6)throw Error(b(327));zr();var t=gs(e,0);if(!(t&1))return Ie(e,ae()),null;var n=Ds(e,t);if(e.tag!==0&&n===2){var r=Ua(e);r!==0&&(t=r,n=hu(e,r))}if(n===1)throw n=ol,sr(e,0),dn(e,t),Ie(e,ae()),n;if(n===6)throw Error(b(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hn(e,Fe,Ft),Ie(e,ae()),null}function Ec(e,t){var n=W;W|=1;try{return e(t)}finally{W=n,W===0&&(ni=ae()+500,eo&&Un())}}function pr(e){wn!==null&&wn.tag===0&&!(W&6)&&zr();var t=W;W|=1;var n=nt.transition,r=q;try{if(nt.transition=null,q=1,e)return e()}finally{q=r,nt.transition=n,W=t,!(W&6)&&Un()}}function Cc(){He=Fr.current,X(Fr)}function sr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Qy(n)),ce!==null)for(n=ce.return;n!==null;){var r=n;switch(rc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ss();break;case 3:ei(),X(Ae),X(je),fc();break;case 5:dc(r);break;case 4:ei();break;case 13:X(Z);break;case 19:X(Z);break;case 10:oc(r.type._context);break;case 22:case 23:Cc()}n=n.return}if(pe=e,ce=e=Rn(e.current,null),ve=He=t,fe=0,ol=null,wc=io=hr=0,Fe=Ii=null,Kn!==null){for(t=0;t<Kn.length;t++)if(n=Kn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,l=n.pending;if(l!==null){var s=l.next;l.next=i,r.next=s}n.pending=r}Kn=null}return e}function cm(e,t){do{var n=ce;try{if(sc(),ns.current=Ts,Os){for(var r=ee.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Os=!1}if(fr=0,he=de=ee=null,Ai=!1,il=0,xc.current=null,n===null||n.return===null){fe=1,ol=t,ce=null;break}e:{var l=e,s=n.return,o=n,a=t;if(t=ve,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Ld(s);if(g!==null){g.flags&=-257,Md(g,s,o,l,t),g.mode&1&&Fd(l,u,t),t=g,a=u;var v=t.updateQueue;if(v===null){var w=new Set;w.add(a),t.updateQueue=w}else v.add(a);break e}else{if(!(t&1)){Fd(l,u,t),kc();break e}a=Error(b(426))}}else if(J&&o.mode&1){var S=Ld(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Md(S,s,o,l,t),ic(ti(a,o));break e}}l=a=ti(a,o),fe!==4&&(fe=2),Ii===null?Ii=[l]:Ii.push(l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var y=qp(l,a,t);Od(l,y);break e;case 1:o=a;var m=l.type,x=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(On===null||!On.has(x)))){l.flags|=65536,t&=-t,l.lanes|=t;var E=Yp(l,o,t);Od(l,E);break e}}l=l.return}while(l!==null)}hm(n)}catch(N){t=N,ce===n&&n!==null&&(ce=n=n.return);continue}break}while(!0)}function dm(){var e=Rs.current;return Rs.current=Ts,e===null?Ts:e}function kc(){(fe===0||fe===3||fe===2)&&(fe=4),pe===null||!(hr&268435455)&&!(io&268435455)||dn(pe,ve)}function Ds(e,t){var n=W;W|=2;var r=dm();(pe!==e||ve!==t)&&(Ft=null,sr(e,t));do try{v0();break}catch(i){cm(e,i)}while(!0);if(sc(),W=n,Rs.current=r,ce!==null)throw Error(b(261));return pe=null,ve=0,fe}function v0(){for(;ce!==null;)fm(ce)}function y0(){for(;ce!==null&&!Wv();)fm(ce)}function fm(e){var t=mm(e.alternate,e,He);e.memoizedProps=e.pendingProps,t===null?hm(e):ce=t,xc.current=null}function hm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=d0(n,t),n!==null){n.flags&=32767,ce=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fe=6,ce=null;return}}else if(n=c0(n,t,He),n!==null){ce=n;return}if(t=t.sibling,t!==null){ce=t;return}ce=t=e}while(t!==null);fe===0&&(fe=5)}function Hn(e,t,n){var r=q,i=nt.transition;try{nt.transition=null,q=1,x0(e,t,n,r)}finally{nt.transition=i,q=r}return null}function x0(e,t,n,r){do zr();while(wn!==null);if(W&6)throw Error(b(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(b(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Zv(e,l),e===pe&&(ce=pe=null,ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wl||(Wl=!0,gm(ms,function(){return zr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=nt.transition,nt.transition=null;var s=q;q=1;var o=W;W|=4,xc.current=null,h0(e,n),om(n,e),Uy(Va),vs=!!Ha,Va=Ha=null,e.current=n,p0(n),Hv(),W=o,q=s,nt.transition=l}else e.current=n;if(Wl&&(Wl=!1,wn=e,$s=i),l=e.pendingLanes,l===0&&(On=null),qv(n.stateNode),Ie(e,ae()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_s)throw _s=!1,e=du,du=null,e;return $s&1&&e.tag!==0&&zr(),l=e.pendingLanes,l&1?e===fu?zi++:(zi=0,fu=e):zi=0,Un(),null}function zr(){if(wn!==null){var e=qh($s),t=nt.transition,n=q;try{if(nt.transition=null,q=16>e?16:e,wn===null)var r=!1;else{if(e=wn,wn=null,$s=0,W&6)throw Error(b(331));var i=W;for(W|=4,R=e.current;R!==null;){var l=R,s=l.child;if(R.flags&16){var o=l.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(R=u;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:Ui(8,d,l)}var f=d.child;if(f!==null)f.return=d,R=f;else for(;R!==null;){d=R;var h=d.sibling,g=d.return;if(im(d),d===u){R=null;break}if(h!==null){h.return=g,R=h;break}R=g}}}var v=l.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}R=l}}if(l.subtreeFlags&2064&&s!==null)s.return=l,R=s;else e:for(;R!==null;){if(l=R,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ui(9,l,l.return)}var y=l.sibling;if(y!==null){y.return=l.return,R=y;break e}R=l.return}}var m=e.current;for(R=m;R!==null;){s=R;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,R=x;else e:for(s=m;R!==null;){if(o=R,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ro(9,o)}}catch(N){se(o,o.return,N)}if(o===s){R=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,R=E;break e}R=o.return}}if(W=i,Un(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Ks,e)}catch{}r=!0}return r}finally{q=n,nt.transition=t}}return!1}function Gd(e,t,n){t=ti(n,t),t=qp(e,t,1),e=Pn(e,t,1),t=Re(),e!==null&&(gl(e,1,t),Ie(e,t))}function se(e,t,n){if(e.tag===3)Gd(e,e,n);else for(;t!==null;){if(t.tag===3){Gd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(On===null||!On.has(r))){e=ti(n,e),e=Yp(t,e,1),t=Pn(t,e,1),e=Re(),t!==null&&(gl(t,1,e),Ie(t,e));break}}t=t.return}}function w0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Re(),e.pingedLanes|=e.suspendedLanes&n,pe===e&&(ve&n)===n&&(fe===4||fe===3&&(ve&130023424)===ve&&500>ae()-Sc?sr(e,0):wc|=n),Ie(e,t)}function pm(e,t){t===0&&(e.mode&1?(t=$l,$l<<=1,!($l&130023424)&&($l=4194304)):t=1);var n=Re();e=Vt(e,t),e!==null&&(gl(e,t,n),Ie(e,n))}function S0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pm(e,n)}function E0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(t),pm(e,n)}var mm;mm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ae.current)Me=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Me=!1,u0(e,t,n);Me=!!(e.flags&131072)}else Me=!1,J&&t.flags&1048576&&xp(t,ks,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;is(e,t),e=t.pendingProps;var i=Xr(t,je.current);Ir(t,n),i=pc(null,t,r,e,i,n);var l=mc();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ue(r)?(l=!0,Es(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uc(t),i.updater=no,t.stateNode=i,i._reactInternals=t,eu(t,r,e,n),t=ru(null,t,r,!0,l,n)):(t.tag=0,J&&l&&nc(t),Oe(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(is(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=k0(r),e=ot(r,e),i){case 0:t=nu(null,t,r,e,n);break e;case 1:t=Id(null,t,r,e,n);break e;case 11:t=Ad(null,t,r,e,n);break e;case 14:t=Ud(null,t,r,ot(r.type,e),n);break e}throw Error(b(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ot(r,i),nu(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ot(r,i),Id(e,t,r,i,n);case 3:e:{if(Jp(t),e===null)throw Error(b(387));r=t.pendingProps,l=t.memoizedState,i=l.element,Np(e,t),bs(t,r,null,n);var s=t.memoizedState;if(r=s.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=ti(Error(b(423)),t),t=zd(e,t,r,n,i);break e}else if(r!==i){i=ti(Error(b(424)),t),t=zd(e,t,r,n,i);break e}else for(Ve=bn(t.stateNode.containerInfo.firstChild),Qe=t,J=!0,ft=null,n=Cp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jr(),r===i){t=Qt(e,t,n);break e}Oe(e,t,r,n)}t=t.child}return t;case 5:return jp(t),e===null&&Xa(t),r=t.type,i=t.pendingProps,l=e!==null?e.memoizedProps:null,s=i.children,Qa(r,i)?s=null:l!==null&&Qa(r,l)&&(t.flags|=32),Xp(e,t),Oe(e,t,s,n),t.child;case 6:return e===null&&Xa(t),null;case 13:return Zp(e,t,n);case 4:return cc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zr(t,null,r,n):Oe(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ot(r,i),Ad(e,t,r,i,n);case 7:return Oe(e,t,t.pendingProps,n),t.child;case 8:return Oe(e,t,t.pendingProps.children,n),t.child;case 12:return Oe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,l=t.memoizedProps,s=i.value,K(Ns,r._currentValue),r._currentValue=s,l!==null)if(gt(l.value,s)){if(l.children===i.children&&!Ae.current){t=Qt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){s=l.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(l.tag===1){a=zt(-1,n&-n),a.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),Ja(l.return,n,t),o.lanes|=n;break}a=a.next}}else if(l.tag===10)s=l.type===t.type?null:l.child;else if(l.tag===18){if(s=l.return,s===null)throw Error(b(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Ja(s,n,t),s=l.sibling}else s=l.child;if(s!==null)s.return=l;else for(s=l;s!==null;){if(s===t){s=null;break}if(l=s.sibling,l!==null){l.return=s.return,s=l;break}s=s.return}l=s}Oe(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ir(t,n),i=rt(i),r=r(i),t.flags|=1,Oe(e,t,r,n),t.child;case 14:return r=t.type,i=ot(r,t.pendingProps),i=ot(r.type,i),Ud(e,t,r,i,n);case 15:return Kp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ot(r,i),is(e,t),t.tag=1,Ue(r)?(e=!0,Es(t)):e=!1,Ir(t,n),Qp(t,r,i),eu(t,r,i,n),ru(null,t,r,!0,e,n);case 19:return em(e,t,n);case 22:return Gp(e,t,n)}throw Error(b(156,t.tag))};function gm(e,t){return Wh(e,t)}function C0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tt(e,t,n,r){return new C0(e,t,n,r)}function Nc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function k0(e){if(typeof e=="function")return Nc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hu)return 11;if(e===Vu)return 14}return 2}function Rn(e,t){var n=e.alternate;return n===null?(n=tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function os(e,t,n,r,i,l){var s=2;if(r=e,typeof e=="function")Nc(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Nr:return or(n.children,i,l,t);case Wu:s=8,i|=8;break;case ka:return e=tt(12,n,t,i|2),e.elementType=ka,e.lanes=l,e;case Na:return e=tt(13,n,t,i),e.elementType=Na,e.lanes=l,e;case ja:return e=tt(19,n,t,i),e.elementType=ja,e.lanes=l,e;case jh:return lo(n,i,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kh:s=10;break e;case Nh:s=9;break e;case Hu:s=11;break e;case Vu:s=14;break e;case an:s=16,r=null;break e}throw Error(b(130,e==null?e:typeof e,""))}return t=tt(s,n,t,i),t.elementType=e,t.type=r,t.lanes=l,t}function or(e,t,n,r){return e=tt(7,e,r,t),e.lanes=n,e}function lo(e,t,n,r){return e=tt(22,e,r,t),e.elementType=jh,e.lanes=n,e.stateNode={isHidden:!1},e}function sa(e,t,n){return e=tt(6,e,null,t),e.lanes=n,e}function oa(e,t,n){return t=tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function N0(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zo(0),this.expirationTimes=zo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,l,s,o,a){return e=new N0(e,t,n,o,a),t===1?(t=1,l===!0&&(t|=8)):t=0,l=tt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uc(l),e}function j0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function vm(e){if(!e)return Ln;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(b(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ue(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(b(171))}if(e.tag===1){var n=e.type;if(Ue(n))return vp(e,n,t)}return t}function ym(e,t,n,r,i,l,s,o,a){return e=jc(n,r,!0,e,i,l,s,o,a),e.context=vm(null),n=e.current,r=Re(),i=Tn(n),l=zt(r,i),l.callback=t??null,Pn(n,l,i),e.current.lanes=i,gl(e,i,r),Ie(e,r),e}function so(e,t,n,r){var i=t.current,l=Re(),s=Tn(i);return n=vm(n),t.context===null?t.context=n:t.pendingContext=n,t=zt(l,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Pn(i,t,s),e!==null&&(mt(e,i,s,l),ts(e,i,s)),s}function Fs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function bc(e,t){Xd(e,t),(e=e.alternate)&&Xd(e,t)}function b0(){return null}var xm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Pc(e){this._internalRoot=e}oo.prototype.render=Pc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(b(409));so(e,t,null,null)};oo.prototype.unmount=Pc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pr(function(){so(null,e,null,null)}),t[Ht]=null}};function oo(e){this._internalRoot=e}oo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<cn.length&&t!==0&&t<cn[n].priority;n++);cn.splice(n,0,e),n===0&&Jh(e)}};function Oc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ao(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jd(){}function P0(e,t,n,r,i){if(i){if(typeof r=="function"){var l=r;r=function(){var u=Fs(s);l.call(u)}}var s=ym(t,r,e,0,null,!1,!1,"",Jd);return e._reactRootContainer=s,e[Ht]=s.current,Zi(e.nodeType===8?e.parentNode:e),pr(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Fs(a);o.call(u)}}var a=jc(e,0,!1,null,null,!1,!1,"",Jd);return e._reactRootContainer=a,e[Ht]=a.current,Zi(e.nodeType===8?e.parentNode:e),pr(function(){so(t,a,n,r)}),a}function uo(e,t,n,r,i){var l=n._reactRootContainer;if(l){var s=l;if(typeof i=="function"){var o=i;i=function(){var a=Fs(s);o.call(a)}}so(t,s,e,i)}else s=P0(n,t,e,i,r);return Fs(s)}Yh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Pi(t.pendingLanes);n!==0&&(Yu(t,n|1),Ie(t,ae()),!(W&6)&&(ni=ae()+500,Un()))}break;case 13:pr(function(){var r=Vt(e,1);if(r!==null){var i=Re();mt(r,e,1,i)}}),bc(e,1)}};Ku=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var n=Re();mt(t,e,134217728,n)}bc(e,134217728)}};Kh=function(e){if(e.tag===13){var t=Tn(e),n=Vt(e,t);if(n!==null){var r=Re();mt(n,e,t,r)}bc(e,t)}};Gh=function(){return q};Xh=function(e,t){var n=q;try{return q=e,t()}finally{q=n}};La=function(e,t,n){switch(t){case"input":if(Oa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Zs(r);if(!i)throw Error(b(90));Ph(r),Oa(r,i)}}}break;case"textarea":Th(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};Mh=Ec;Ah=pr;var O0={usingClientEntryPoint:!1,Events:[yl,Or,Zs,Fh,Lh,Ec]},Ei={findFiberByHostInstance:Yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T0={bundleType:Ei.bundleType,version:Ei.version,rendererPackageName:Ei.rendererPackageName,rendererConfig:Ei.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zh(e),e===null?null:e.stateNode},findFiberByHostInstance:Ei.findFiberByHostInstance||b0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{Ks=Hl.inject(T0),bt=Hl}catch{}}Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O0;Ye.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oc(t))throw Error(b(200));return j0(e,t,null,n)};Ye.createRoot=function(e,t){if(!Oc(e))throw Error(b(299));var n=!1,r="",i=xm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,null,n,!1,r,i),e[Ht]=t.current,Zi(e.nodeType===8?e.parentNode:e),new Pc(t)};Ye.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(b(188)):(e=Object.keys(e).join(","),Error(b(268,e)));return e=zh(t),e=e===null?null:e.stateNode,e};Ye.flushSync=function(e){return pr(e)};Ye.hydrate=function(e,t,n){if(!ao(t))throw Error(b(200));return uo(null,e,t,!0,n)};Ye.hydrateRoot=function(e,t,n){if(!Oc(e))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,i=!1,l="",s=xm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=ym(t,null,e,1,n??null,i,!1,l,s),e[Ht]=t.current,Zi(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new oo(t)};Ye.render=function(e,t,n){if(!ao(t))throw Error(b(200));return uo(null,e,t,!1,n)};Ye.unmountComponentAtNode=function(e){if(!ao(e))throw Error(b(40));return e._reactRootContainer?(pr(function(){uo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};Ye.unstable_batchedUpdates=Ec;Ye.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ao(n))throw Error(b(200));if(e==null||e._reactInternals===void 0)throw Error(b(38));return uo(e,t,n,!1,r)};Ye.version="18.3.1-next-f1338f8080-20240426";function wm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wm)}catch(e){console.error(e)}}wm(),wh.exports=Ye;var Sm=wh.exports,Zd=Sm;Ea.createRoot=Zd.createRoot,Ea.hydrateRoot=Zd.hydrateRoot;/**
         * @remix-run/router v1.23.0
         *
         * Copyright (c) Remix Software Inc.
         *
         * This source code is licensed under the MIT license found in the
         * LICENSE.md file in the root directory of this source tree.
         *
         * @license MIT
         */function al(){return al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},al.apply(this,arguments)}var Sn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Sn||(Sn={}));const ef="popstate";function R0(e){e===void 0&&(e={});function t(r,i){let{pathname:l,search:s,hash:o}=r.location;return mu("",{pathname:l,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ls(i)}return $0(t,n,null,e)}function te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Em(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _0(){return Math.random().toString(36).substr(2,8)}function tf(e,t){return{usr:e.state,key:e.key,idx:t}}function mu(e,t,n,r){return n===void 0&&(n=null),al({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ai(t):t,{state:n,key:t&&t.key||r||_0()})}function Ls(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ai(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function $0(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:l=!1}=r,s=i.history,o=Sn.Pop,a=null,u=d();u==null&&(u=0,s.replaceState(al({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=Sn.Pop;let S=d(),y=S==null?null:S-u;u=S,a&&a({action:o,location:w.location,delta:y})}function h(S,y){o=Sn.Push;let m=mu(w.location,S,y);u=d()+1;let x=tf(m,u),E=w.createHref(m);try{s.pushState(x,"",E)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(E)}l&&a&&a({action:o,location:w.location,delta:1})}function g(S,y){o=Sn.Replace;let m=mu(w.location,S,y);u=d();let x=tf(m,u),E=w.createHref(m);s.replaceState(x,"",E),l&&a&&a({action:o,location:w.location,delta:0})}function v(S){let y=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof S=="string"?S:Ls(S);return m=m.replace(/ $/,"%20"),te(y,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,y)}let w={get action(){return o},get location(){return e(i,s)},listen(S){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(ef,f),a=S,()=>{i.removeEventListener(ef,f),a=null}},createHref(S){return t(i,S)},createURL:v,encodeLocation(S){let y=v(S);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:g,go(S){return s.go(S)}};return w}var nf;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nf||(nf={}));function D0(e,t,n){return n===void 0&&(n="/"),F0(e,t,n)}function F0(e,t,n,r){let i=typeof t=="string"?ai(t):t,l=ri(i.pathname||"/",n);if(l==null)return null;let s=Cm(e);L0(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=q0(l);o=V0(s[a],u)}return o}function Cm(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(l,s,o)=>{let a={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:s,route:l};a.relativePath.startsWith("/")&&(te(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=_n([r,a.relativePath]),d=n.concat(a);l.children&&l.children.length>0&&(te(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Cm(l.children,t,d,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:W0(u,l.index),routesMeta:d})};return e.forEach((l,s)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))i(l,s);else for(let a of km(l.path))i(l,s,a)}),t}function km(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let s=km(r.join("/")),o=[];return o.push(...s.map(a=>a===""?l:[l,a].join("/"))),i&&o.push(...s),o.map(a=>e.startsWith("/")&&a===""?"/":a)}function L0(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:H0(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const M0=/^:[\w-]+$/,A0=3,U0=2,I0=1,z0=10,B0=-2,rf=e=>e==="*";function W0(e,t){let n=e.split("/"),r=n.length;return n.some(rf)&&(r+=B0),t&&(r+=U0),n.filter(i=>!rf(i)).reduce((i,l)=>i+(M0.test(l)?A0:l===""?I0:z0),r)}function H0(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function V0(e,t,n){let{routesMeta:r}=e,i={},l="/",s=[];for(let o=0;o<r.length;++o){let a=r[o],u=o===r.length-1,d=l==="/"?t:t.slice(l.length)||"/",f=gu({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},d),h=a.route;if(!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:_n([l,f.pathname]),pathnameBase:X0(_n([l,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(l=_n([l,f.pathnameBase]))}return s}function gu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Q0(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let l=i[0],s=l.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let w=o[f]||"";s=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const v=o[f];return g&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:s,pattern:e}}function Q0(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Em(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,a)=>(r.push({paramName:o,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function q0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Em(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ri(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Y0(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ai(e):e;return{pathname:n?n.startsWith("/")?n:K0(n,t):t,search:J0(r),hash:Z0(i)}}function K0(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function aa(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G0(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Tc(e,t){let n=G0(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Rc(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ai(e):(i=al({},e),te(!i.pathname||!i.pathname.includes("?"),aa("?","pathname","search",i)),te(!i.pathname||!i.pathname.includes("#"),aa("#","pathname","hash",i)),te(!i.search||!i.search.includes("#"),aa("#","search","hash",i)));let l=e===""||i.pathname==="",s=l?"/":i.pathname,o;if(s==null)o=n;else{let f=t.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}o=f>=0?t[f]:"/"}let a=Y0(i,o),u=s&&s!=="/"&&s.endsWith("/"),d=(l||s===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||d)&&(a.pathname+="/"),a}const _n=e=>e.join("/").replace(/\/\/+/g,"/"),X0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ex(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Nm=["post","put","patch","delete"];new Set(Nm);const tx=["get",...Nm];new Set(tx);/**
         * React Router v6.30.1
         *
         * Copyright (c) Remix Software Inc.
         *
         * This source code is licensed under the MIT license found in the
         * LICENSE.md file in the root directory of this source tree.
         *
         * @license MIT
         */function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ul.apply(this,arguments)}const co=p.createContext(null),jm=p.createContext(null),Gt=p.createContext(null),fo=p.createContext(null),Xt=p.createContext({outlet:null,matches:[],isDataRoute:!1}),bm=p.createContext(null);function nx(e,t){let{relative:n}=t===void 0?{}:t;ui()||te(!1);let{basename:r,navigator:i}=p.useContext(Gt),{hash:l,pathname:s,search:o}=ho(e,{relative:n}),a=s;return r!=="/"&&(a=s==="/"?r:_n([r,s])),i.createHref({pathname:a,search:o,hash:l})}function ui(){return p.useContext(fo)!=null}function ci(){return ui()||te(!1),p.useContext(fo).location}function Pm(e){p.useContext(Gt).static||p.useLayoutEffect(e)}function di(){let{isDataRoute:e}=p.useContext(Xt);return e?vx():rx()}function rx(){ui()||te(!1);let e=p.useContext(co),{basename:t,future:n,navigator:r}=p.useContext(Gt),{matches:i}=p.useContext(Xt),{pathname:l}=ci(),s=JSON.stringify(Tc(i,n.v7_relativeSplatPath)),o=p.useRef(!1);return Pm(()=>{o.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let f=Rc(u,JSON.parse(s),l,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:_n([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,s,l,e])}const ix=p.createContext(null);function lx(e){let t=p.useContext(Xt).outlet;return t&&p.createElement(ix.Provider,{value:e},t)}function ho(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(Gt),{matches:i}=p.useContext(Xt),{pathname:l}=ci(),s=JSON.stringify(Tc(i,r.v7_relativeSplatPath));return p.useMemo(()=>Rc(e,JSON.parse(s),l,n==="path"),[e,s,l,n])}function sx(e,t){return ox(e,t)}function ox(e,t,n,r){ui()||te(!1);let{navigator:i}=p.useContext(Gt),{matches:l}=p.useContext(Xt),s=l[l.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=ci(),d;if(t){var f;let S=typeof t=="string"?ai(t):t;a==="/"||(f=S.pathname)!=null&&f.startsWith(a)||te(!1),d=S}else d=u;let h=d.pathname||"/",g=h;if(a!=="/"){let S=a.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=D0(e,{pathname:g}),w=fx(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:_n([a,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?a:_n([a,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,n,r);return t&&w?p.createElement(fo.Provider,{value:{location:ul({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Sn.Pop}},w):w}function ax(){let e=gx(),t=ex(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:i},n):null,null)}const ux=p.createElement(ax,null);class cx extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(Xt.Provider,{value:this.props.routeContext},p.createElement(bm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dx(e){let{routeContext:t,match:n,children:r}=e,i=p.useContext(co);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(Xt.Provider,{value:t},r)}function fx(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,o=(i=n)==null?void 0:i.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||te(!1),s=s.slice(0,Math.min(s.length,d+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:g}=n,v=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){a=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,h)=>{let g,v=!1,w=null,S=null;n&&(g=o&&f.route.id?o[f.route.id]:void 0,w=f.route.errorElement||ux,a&&(u<0&&h===0?(yx("route-fallback"),v=!0,S=null):u===h&&(v=!0,S=f.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,h+1)),m=()=>{let x;return g?x=w:v?x=S:f.route.Component?x=p.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=d,p.createElement(dx,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?p.createElement(cx,{location:n.location,revalidation:n.revalidation,component:w,error:g,children:m(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):m()},null)}var Om=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Om||{}),Tm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Tm||{});function hx(e){let t=p.useContext(co);return t||te(!1),t}function px(e){let t=p.useContext(jm);return t||te(!1),t}function mx(e){let t=p.useContext(Xt);return t||te(!1),t}function Rm(e){let t=mx(),n=t.matches[t.matches.length-1];return n.route.id||te(!1),n.route.id}function gx(){var e;let t=p.useContext(bm),n=px(),r=Rm();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function vx(){let{router:e}=hx(Om.UseNavigateStable),t=Rm(Tm.UseNavigateStable),n=p.useRef(!1);return Pm(()=>{n.current=!0}),p.useCallback(function(i,l){l===void 0&&(l={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ul({fromRouteId:t},l)))},[e,t])}const lf={};function yx(e,t,n){lf[e]||(lf[e]=!0)}function xx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function _m(e){let{to:t,replace:n,state:r,relative:i}=e;ui()||te(!1);let{future:l,static:s}=p.useContext(Gt),{matches:o}=p.useContext(Xt),{pathname:a}=ci(),u=di(),d=Rc(t,Tc(o,l.v7_relativeSplatPath),a,i==="path"),f=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function _c(e){return lx(e.context)}function be(e){te(!1)}function wx(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Sn.Pop,navigator:l,static:s=!1,future:o}=e;ui()&&te(!1);let a=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:a,navigator:l,static:s,future:ul({v7_relativeSplatPath:!1},o)}),[a,o,l,s]);typeof r=="string"&&(r=ai(r));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:v="default"}=r,w=p.useMemo(()=>{let S=ri(d,a);return S==null?null:{location:{pathname:S,search:f,hash:h,state:g,key:v},navigationType:i}},[a,d,f,h,g,v,i]);return w==null?null:p.createElement(Gt.Provider,{value:u},p.createElement(fo.Provider,{children:n,value:w}))}function Sx(e){let{children:t,location:n}=e;return sx(vu(t),n)}new Promise(()=>{});function vu(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,i)=>{if(!p.isValidElement(r))return;let l=[...t,i];if(r.type===p.Fragment){n.push.apply(n,vu(r.props.children,l));return}r.type!==be&&te(!1),!r.props.index||!r.props.children||te(!1);let s={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=vu(r.props.children,l)),n.push(s)}),n}/**
         * React Router DOM v6.30.1
         *
         * Copyright (c) Remix Software Inc.
         *
         * This source code is licensed under the MIT license found in the
         * LICENSE.md file in the root directory of this source tree.
         *
         * @license MIT
         */function Ms(){return Ms=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ms.apply(this,arguments)}function $m(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,l;for(l=0;l<r.length;l++)i=r[l],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Ex(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Cx(e,t){return e.button===0&&(!t||t==="_self")&&!Ex(e)}const kx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Nx=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],jx="6";try{window.__reactRouterVersion=jx}catch{}const bx=p.createContext({isTransitioning:!1}),Px="startTransition",sf=Sa[Px];function Ox(e){let{basename:t,children:n,future:r,window:i}=e,l=p.useRef();l.current==null&&(l.current=R0({window:i,v5Compat:!0}));let s=l.current,[o,a]=p.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},d=p.useCallback(f=>{u&&sf?sf(()=>a(f)):a(f)},[a,u]);return p.useLayoutEffect(()=>s.listen(d),[s,d]),p.useEffect(()=>xx(r),[r]),p.createElement(wx,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s,future:r})}const Tx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ge=p.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:l,replace:s,state:o,target:a,to:u,preventScrollReset:d,viewTransition:f}=t,h=$m(t,kx),{basename:g}=p.useContext(Gt),v,w=!1;if(typeof u=="string"&&Rx.test(u)&&(v=u,Tx))try{let x=new URL(window.location.href),E=u.startsWith("//")?new URL(x.protocol+u):new URL(u),N=ri(E.pathname,g);E.origin===x.origin&&N!=null?u=N+E.search+E.hash:w=!0}catch{}let S=nx(u,{relative:i}),y=$x(u,{replace:s,state:o,target:a,preventScrollReset:d,relative:i,viewTransition:f});function m(x){r&&r(x),x.defaultPrevented||y(x)}return p.createElement("a",Ms({},h,{href:v||S,onClick:w||l?r:m,ref:n,target:a}))}),ua=p.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:l="",end:s=!1,style:o,to:a,viewTransition:u,children:d}=t,f=$m(t,Nx),h=ho(a,{relative:f.relative}),g=ci(),v=p.useContext(jm),{navigator:w,basename:S}=p.useContext(Gt),y=v!=null&&Dx(h)&&u===!0,m=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,x=g.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(x=x.toLowerCase(),E=E?E.toLowerCase():null,m=m.toLowerCase()),E&&S&&(E=ri(E,S)||E);const N=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let j=x===m||!s&&x.startsWith(m)&&x.charAt(N)==="/",P=E!=null&&(E===m||!s&&E.startsWith(m)&&E.charAt(m.length)==="/"),O={isActive:j,isPending:P,isTransitioning:y},$=j?r:void 0,_;typeof l=="function"?_=l(O):_=[l,j?"active":null,P?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(O):o;return p.createElement(ge,Ms({},f,{"aria-current":$,className:_,ref:n,style:U,to:a,viewTransition:u}),typeof d=="function"?d(O):d)});var yu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(yu||(yu={}));var of;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(of||(of={}));function _x(e){let t=p.useContext(co);return t||te(!1),t}function $x(e,t){let{target:n,replace:r,state:i,preventScrollReset:l,relative:s,viewTransition:o}=t===void 0?{}:t,a=di(),u=ci(),d=ho(e,{relative:s});return p.useCallback(f=>{if(Cx(f,n)){f.preventDefault();let h=r!==void 0?r:Ls(u)===Ls(d);a(e,{replace:h,state:i,preventScrollReset:l,relative:s,viewTransition:o})}},[u,a,d,r,i,n,e,l,s,o])}function Dx(e,t){t===void 0&&(t={});let n=p.useContext(bx);n==null&&te(!1);let{basename:r}=_x(yu.useViewTransitionState),i=ho(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=ri(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=ri(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gu(i.pathname,s)!=null||gu(i.pathname,l)!=null}var po=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mo=typeof window>"u"||"Deno"in globalThis;function at(){}function Fx(e,t){return typeof e=="function"?e(t):e}function Lx(e){return typeof e=="number"&&e>=0&&e!==1/0}function Mx(e,t){return Math.max(e+(t||0)-Date.now(),0)}function xu(e,t){return typeof e=="function"?e(t):e}function Ax(e,t){return typeof e=="function"?e(t):e}function af(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:l,queryKey:s,stale:o}=e;if(s){if(r){if(t.queryHash!==$c(s,t.options))return!1}else if(!dl(t.queryKey,s))return!1}if(n!=="all"){const a=t.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||l&&!l(t))}function uf(e,t){const{exact:n,status:r,predicate:i,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(n){if(cl(t.options.mutationKey)!==cl(l))return!1}else if(!dl(t.options.mutationKey,l))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function $c(e,t){return((t==null?void 0:t.queryKeyHashFn)||cl)(e)}function cl(e){return JSON.stringify(e,(t,n)=>wu(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function dl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>dl(e[n],t[n])):!1}function Dm(e,t){if(e===t)return e;const n=cf(e)&&cf(t);if(n||wu(e)&&wu(t)){const r=n?e:Object.keys(e),i=r.length,l=n?t:Object.keys(t),s=l.length,o=n?[]:{},a=new Set(r);let u=0;for(let d=0;d<s;d++){const f=n?d:l[d];(!n&&a.has(f)||n)&&e[f]===void 0&&t[f]===void 0?(o[f]=void 0,u++):(o[f]=Dm(e[f],t[f]),o[f]===e[f]&&e[f]!==void 0&&u++)}return i===s&&u===i?e:o}return t}function cf(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function wu(e){if(!df(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!df(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function df(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ux(e){return new Promise(t=>{setTimeout(t,e)})}function Ix(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Dm(e,t):t}function zx(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Bx(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Dc=Symbol();function Fm(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Dc?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var er,pn,Br,eh,Wx=(eh=class extends po{constructor(){super();H(this,er);H(this,pn);H(this,Br);M(this,Br,t=>{if(!mo&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){k(this,pn)||this.setEventListener(k(this,Br))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,pn))==null||t.call(this),M(this,pn,void 0))}setEventListener(t){var n;M(this,Br,t),(n=k(this,pn))==null||n.call(this),M(this,pn,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){k(this,er)!==t&&(M(this,er,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof k(this,er)=="boolean"?k(this,er):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},er=new WeakMap,pn=new WeakMap,Br=new WeakMap,eh),Lm=new Wx,Wr,mn,Hr,th,Hx=(th=class extends po{constructor(){super();H(this,Wr,!0);H(this,mn);H(this,Hr);M(this,Hr,t=>{if(!mo&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,mn)||this.setEventListener(k(this,Hr))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,mn))==null||t.call(this),M(this,mn,void 0))}setEventListener(t){var n;M(this,Hr,t),(n=k(this,mn))==null||n.call(this),M(this,mn,t(this.setOnline.bind(this)))}setOnline(t){k(this,Wr)!==t&&(M(this,Wr,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return k(this,Wr)}},Wr=new WeakMap,mn=new WeakMap,Hr=new WeakMap,th),As=new Hx;function Vx(){let e,t;const n=new Promise((i,l)=>{e=i,t=l});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}function Qx(e){return Math.min(1e3*2**e,3e4)}function Mm(e){return(e??"online")==="online"?As.isOnline():!0}var Am=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ca(e){return e instanceof Am}function Um(e){let t=!1,n=0,r=!1,i;const l=Vx(),s=w=>{var S;r||(h(new Am(w)),(S=e.abort)==null||S.call(e))},o=()=>{t=!0},a=()=>{t=!1},u=()=>Lm.isFocused()&&(e.networkMode==="always"||As.isOnline())&&e.canRun(),d=()=>Mm(e.networkMode)&&e.canRun(),f=w=>{var S;r||(r=!0,(S=e.onSuccess)==null||S.call(e,w),i==null||i(),l.resolve(w))},h=w=>{var S;r||(r=!0,(S=e.onError)==null||S.call(e,w),i==null||i(),l.reject(w))},g=()=>new Promise(w=>{var S;i=y=>{(r||u())&&w(y)},(S=e.onPause)==null||S.call(e)}).then(()=>{var w;i=void 0,r||(w=e.onContinue)==null||w.call(e)}),v=()=>{if(r)return;let w;const S=n===0?e.initialPromise:void 0;try{w=S??e.fn()}catch(y){w=Promise.reject(y)}Promise.resolve(w).then(f).catch(y=>{var j;if(r)return;const m=e.retry??(mo?0:3),x=e.retryDelay??Qx,E=typeof x=="function"?x(n,y):x,N=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,y);if(t||!N){h(y);return}n++,(j=e.onFail)==null||j.call(e,n,y),Ux(E).then(()=>u()?void 0:g()).then(()=>{t?h(y):v()})})};return{promise:l,cancel:s,continue:()=>(i==null||i(),l),cancelRetry:o,continueRetry:a,canStart:d,start:()=>(d()?v():g().then(v),l)}}var qx=e=>setTimeout(e,0);function Yx(){let e=[],t=0,n=o=>{o()},r=o=>{o()},i=qx;const l=o=>{t?e.push(o):i(()=>{n(o)})},s=()=>{const o=e;e=[],o.length&&i(()=>{r(()=>{o.forEach(a=>{n(a)})})})};return{batch:o=>{let a;t++;try{a=o()}finally{t--,t||s()}return a},batchCalls:o=>(...a)=>{l(()=>{o(...a)})},schedule:l,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{i=o}}}var Te=Yx(),tr,nh,Im=(nh=class{constructor(){H(this,tr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Lx(this.gcTime)&&M(this,tr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(mo?1/0:5*60*1e3))}clearGcTimeout(){k(this,tr)&&(clearTimeout(k(this,tr)),M(this,tr,void 0))}},tr=new WeakMap,nh),Vr,nr,Je,rr,Ee,hl,ir,ut,Dt,rh,Kx=(rh=class extends Im{constructor(t){super();H(this,ut);H(this,Vr);H(this,nr);H(this,Je);H(this,rr);H(this,Ee);H(this,hl);H(this,ir);M(this,ir,!1),M(this,hl,t.defaultOptions),this.setOptions(t.options),this.observers=[],M(this,rr,t.client),M(this,Je,k(this,rr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,M(this,Vr,Xx(this.options)),this.state=t.state??k(this,Vr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=k(this,Ee))==null?void 0:t.promise}setOptions(t){this.options={...k(this,hl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,Je).remove(this)}setData(t,n){const r=Ix(this.state.data,t,this.options);return xe(this,ut,Dt).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){xe(this,ut,Dt).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=k(this,Ee))==null?void 0:r.promise;return(i=k(this,Ee))==null||i.cancel(t),n?n.then(at).catch(at):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,Vr))}isActive(){return this.observers.some(t=>Ax(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dc||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>xu(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Mx(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,Ee))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,Ee))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),k(this,Je).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(k(this,Ee)&&(k(this,ir)?k(this,Ee).cancel({revert:!0}):k(this,Ee).cancelRetry()),this.scheduleGc()),k(this,Je).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xe(this,ut,Dt).call(this,{type:"invalidate"})}fetch(t,n){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(k(this,Ee))return k(this,Ee).continueRetry(),k(this,Ee).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(g=>g.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(M(this,ir,!0),r.signal)})},l=()=>{const h=Fm(this.options,n),v=(()=>{const w={client:k(this,rr),queryKey:this.queryKey,meta:this.meta};return i(w),w})();return M(this,ir,!1),this.options.persister?this.options.persister(h,v,this):h(v)},o=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:k(this,rr),state:this.state,fetchFn:l};return i(h),h})();(u=this.options.behavior)==null||u.onFetch(o,this),M(this,nr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&xe(this,ut,Dt).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta});const a=h=>{var g,v,w,S;ca(h)&&h.silent||xe(this,ut,Dt).call(this,{type:"error",error:h}),ca(h)||((v=(g=k(this,Je).config).onError)==null||v.call(g,h,this),(S=(w=k(this,Je).config).onSettled)==null||S.call(w,this.state.data,h,this)),this.scheduleGc()};return M(this,Ee,Um({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var g,v,w,S;if(h===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){a(y);return}(v=(g=k(this,Je).config).onSuccess)==null||v.call(g,h,this),(S=(w=k(this,Je).config).onSettled)==null||S.call(w,h,this.state.error,this),this.scheduleGc()},onError:a,onFail:(h,g)=>{xe(this,ut,Dt).call(this,{type:"failed",failureCount:h,error:g})},onPause:()=>{xe(this,ut,Dt).call(this,{type:"pause"})},onContinue:()=>{xe(this,ut,Dt).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),k(this,Ee).start()}},Vr=new WeakMap,nr=new WeakMap,Je=new WeakMap,rr=new WeakMap,Ee=new WeakMap,hl=new WeakMap,ir=new WeakMap,ut=new WeakSet,Dt=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Gx(r.data,this.options),fetchMeta:t.meta??null};case"success":return M(this,nr,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return ca(i)&&i.revert&&k(this,nr)?{...k(this,nr),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Te.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),k(this,Je).notify({query:this,type:"updated",action:t})})},rh);function Gx(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Mm(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Xx(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ct,ih,Jx=(ih=class extends po{constructor(t={}){super();H(this,Ct);this.config=t,M(this,Ct,new Map)}build(t,n,r){const i=n.queryKey,l=n.queryHash??$c(i,n);let s=this.get(l);return s||(s=new Kx({client:t,queryKey:i,queryHash:l,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){k(this,Ct).has(t.queryHash)||(k(this,Ct).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=k(this,Ct).get(t.queryHash);n&&(t.destroy(),n===t&&k(this,Ct).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Te.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return k(this,Ct).get(t)}getAll(){return[...k(this,Ct).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>af(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>af(t,r)):n}notify(t){Te.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Te.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Te.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ct=new WeakMap,ih),kt,Pe,lr,Nt,on,lh,Zx=(lh=class extends Im{constructor(t){super();H(this,Nt);H(this,kt);H(this,Pe);H(this,lr);this.mutationId=t.mutationId,M(this,Pe,t.mutationCache),M(this,kt,[]),this.state=t.state||ew(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){k(this,kt).includes(t)||(k(this,kt).push(t),this.clearGcTimeout(),k(this,Pe).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){M(this,kt,k(this,kt).filter(n=>n!==t)),this.scheduleGc(),k(this,Pe).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){k(this,kt).length||(this.state.status==="pending"?this.scheduleGc():k(this,Pe).remove(this))}continue(){var t;return((t=k(this,lr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,s,o,a,u,d,f,h,g,v,w,S,y,m,x,E,N,j,P,O;const n=()=>{xe(this,Nt,on).call(this,{type:"continue"})};M(this,lr,Um({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:($,_)=>{xe(this,Nt,on).call(this,{type:"failed",failureCount:$,error:_})},onPause:()=>{xe(this,Nt,on).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,Pe).canRun(this)}));const r=this.state.status==="pending",i=!k(this,lr).canStart();try{if(r)n();else{xe(this,Nt,on).call(this,{type:"pending",variables:t,isPaused:i}),await((s=(l=k(this,Pe).config).onMutate)==null?void 0:s.call(l,t,this));const _=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,t));_!==this.state.context&&xe(this,Nt,on).call(this,{type:"pending",context:_,variables:t,isPaused:i})}const $=await k(this,lr).start();return await((d=(u=k(this,Pe).config).onSuccess)==null?void 0:d.call(u,$,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,$,t,this.state.context)),await((v=(g=k(this,Pe).config).onSettled)==null?void 0:v.call(g,$,null,this.state.variables,this.state.context,this)),await((S=(w=this.options).onSettled)==null?void 0:S.call(w,$,null,t,this.state.context)),xe(this,Nt,on).call(this,{type:"success",data:$}),$}catch($){try{throw await((m=(y=k(this,Pe).config).onError)==null?void 0:m.call(y,$,t,this.state.context,this)),await((E=(x=this.options).onError)==null?void 0:E.call(x,$,t,this.state.context)),await((j=(N=k(this,Pe).config).onSettled)==null?void 0:j.call(N,void 0,$,this.state.variables,this.state.context,this)),await((O=(P=this.options).onSettled)==null?void 0:O.call(P,void 0,$,t,this.state.context)),$}finally{xe(this,Nt,on).call(this,{type:"error",error:$})}}finally{k(this,Pe).runNext(this)}}},kt=new WeakMap,Pe=new WeakMap,lr=new WeakMap,Nt=new WeakSet,on=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Te.batch(()=>{k(this,kt).forEach(r=>{r.onMutationUpdate(t)}),k(this,Pe).notify({mutation:this,type:"updated",action:t})})},lh);function ew(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mt,ct,pl,sh,tw=(sh=class extends po{constructor(t={}){super();H(this,Mt);H(this,ct);H(this,pl);this.config=t,M(this,Mt,new Set),M(this,ct,new Map),M(this,pl,0)}build(t,n,r){const i=new Zx({mutationCache:this,mutationId:++bl(this,pl)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){k(this,Mt).add(t);const n=Vl(t);if(typeof n=="string"){const r=k(this,ct).get(n);r?r.push(t):k(this,ct).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(k(this,Mt).delete(t)){const n=Vl(t);if(typeof n=="string"){const r=k(this,ct).get(n);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&k(this,ct).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Vl(t);if(typeof n=="string"){const r=k(this,ct).get(n),i=r==null?void 0:r.find(l=>l.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const n=Vl(t);if(typeof n=="string"){const i=(r=k(this,ct).get(n))==null?void 0:r.find(l=>l!==t&&l.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Te.batch(()=>{k(this,Mt).forEach(t=>{this.notify({type:"removed",mutation:t})}),k(this,Mt).clear(),k(this,ct).clear()})}getAll(){return Array.from(k(this,Mt))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>uf(n,r))}findAll(t={}){return this.getAll().filter(n=>uf(t,n))}notify(t){Te.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Te.batch(()=>Promise.all(t.map(n=>n.continue().catch(at))))}},Mt=new WeakMap,ct=new WeakMap,pl=new WeakMap,sh);function Vl(e){var t;return(t=e.options.scope)==null?void 0:t.id}function ff(e){return{onFetch:(t,n)=>{var d,f,h,g,v;const r=t.options,i=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,l=((g=t.state.data)==null?void 0:g.pages)||[],s=((v=t.state.data)==null?void 0:v.pageParams)||[];let o={pages:[],pageParams:[]},a=0;const u=async()=>{let w=!1;const S=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},y=Fm(t.options,t.fetchOptions),m=async(x,E,N)=>{if(w)return Promise.reject();if(E==null&&x.pages.length)return Promise.resolve(x);const P=(()=>{const U={client:t.client,queryKey:t.queryKey,pageParam:E,direction:N?"backward":"forward",meta:t.options.meta};return S(U),U})(),O=await y(P),{maxPages:$}=t.options,_=N?Bx:zx;return{pages:_(x.pages,O,$),pageParams:_(x.pageParams,E,$)}};if(i&&l.length){const x=i==="backward",E=x?nw:hf,N={pages:l,pageParams:s},j=E(r,N);o=await m(N,j,x)}else{const x=e??l.length;do{const E=a===0?s[0]??r.initialPageParam:hf(r,o);if(a>0&&E==null)break;o=await m(o,E),a++}while(a<x)}return o};t.options.persister?t.fetchFn=()=>{var w,S;return(S=(w=t.options).persister)==null?void 0:S.call(w,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function hf(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function nw(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var le,gn,vn,Qr,qr,yn,Yr,Kr,oh,rw=(oh=class{constructor(e={}){H(this,le);H(this,gn);H(this,vn);H(this,Qr);H(this,qr);H(this,yn);H(this,Yr);H(this,Kr);M(this,le,e.queryCache||new Jx),M(this,gn,e.mutationCache||new tw),M(this,vn,e.defaultOptions||{}),M(this,Qr,new Map),M(this,qr,new Map),M(this,yn,0)}mount(){bl(this,yn)._++,k(this,yn)===1&&(M(this,Yr,Lm.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,le).onFocus())})),M(this,Kr,As.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,le).onOnline())})))}unmount(){var e,t;bl(this,yn)._--,k(this,yn)===0&&((e=k(this,Yr))==null||e.call(this),M(this,Yr,void 0),(t=k(this,Kr))==null||t.call(this),M(this,Kr,void 0))}isFetching(e){return k(this,le).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return k(this,gn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,le).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=k(this,le).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(xu(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return k(this,le).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=k(this,le).get(r.queryHash),l=i==null?void 0:i.state.data,s=Fx(t,l);if(s!==void 0)return k(this,le).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return Te.batch(()=>k(this,le).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,le).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=k(this,le);Te.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=k(this,le);return Te.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Te.batch(()=>k(this,le).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(at).catch(at)}invalidateQueries(e,t={}){return Te.batch(()=>(k(this,le).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Te.batch(()=>k(this,le).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let l=i.fetch(void 0,n);return n.throwOnError||(l=l.catch(at)),i.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(r).then(at)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=k(this,le).build(this,t);return n.isStaleByTime(xu(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(at).catch(at)}fetchInfiniteQuery(e){return e.behavior=ff(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(at).catch(at)}ensureInfiniteQueryData(e){return e.behavior=ff(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return As.isOnline()?k(this,gn).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,le)}getMutationCache(){return k(this,gn)}getDefaultOptions(){return k(this,vn)}setDefaultOptions(e){M(this,vn,e)}setQueryDefaults(e,t){k(this,Qr).set(cl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...k(this,Qr).values()],n={};return t.forEach(r=>{dl(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){k(this,qr).set(cl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...k(this,qr).values()],n={};return t.forEach(r=>{dl(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...k(this,vn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=$c(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Dc&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...k(this,vn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){k(this,le).clear(),k(this,gn).clear()}},le=new WeakMap,gn=new WeakMap,vn=new WeakMap,Qr=new WeakMap,qr=new WeakMap,yn=new WeakMap,Yr=new WeakMap,Kr=new WeakMap,oh),iw=p.createContext(void 0),lw=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(iw.Provider,{value:e,children:t})),sw=function(){return null};let ow={data:""},aw=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||ow,uw=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,cw=/\/\*[^]*?\*\/|  +/g,pf=/\n+/g,fn=(e,t)=>{let n="",r="",i="";for(let l in e){let s=e[l];l[0]=="@"?l[1]=="i"?n=l+" "+s+";":r+=l[1]=="f"?fn(s,l):l+"{"+fn(s,l[1]=="k"?"":t)+"}":typeof s=="object"?r+=fn(s,t?t.replace(/([^,])+/g,o=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,a=>/&/.test(a)?a.replace(/&/g,o):o?o+" "+a:a)):l):s!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=fn.p?fn.p(l,s):l+":"+s+";")}return n+(t&&i?t+"{"+i+"}":i)+r},$t={},zm=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+zm(e[n]);return t}return e},dw=(e,t,n,r,i)=>{let l=zm(e),s=$t[l]||($t[l]=(a=>{let u=0,d=11;for(;u<a.length;)d=101*d+a.charCodeAt(u++)>>>0;return"go"+d})(l));if(!$t[s]){let a=l!==e?e:(u=>{let d,f,h=[{}];for(;d=uw.exec(u.replace(cw,""));)d[4]?h.shift():d[3]?(f=d[3].replace(pf," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(pf," ").trim();return h[0]})(e);$t[s]=fn(i?{["@keyframes "+s]:a}:a,n?"":"."+s)}let o=n&&$t.g?$t.g:null;return n&&($t.g=$t[s]),((a,u,d,f)=>{f?u.data=u.data.replace(f,a):u.data.indexOf(a)===-1&&(u.data=d?a+u.data:u.data+a)})($t[s],t,r,o),s},fw=(e,t,n)=>e.reduce((r,i,l)=>{let s=t[l];if(s&&s.call){let o=s(n),a=o&&o.props&&o.props.className||/^go/.test(o)&&o;s=a?"."+a:o&&typeof o=="object"?o.props?"":fn(o,""):o===!1?"":o}return r+i+(s??"")},"");function go(e){let t=this||{},n=e.call?e(t.p):e;return dw(n.unshift?n.raw?fw(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,aw(t.target),t.g,t.o,t.k)}let Bm,Su,Eu;go.bind({g:1});let qt=go.bind({k:1});function hw(e,t,n,r){fn.p=t,Bm=e,Su=n,Eu=r}function In(e,t){let n=this||{};return function(){let r=arguments;function i(l,s){let o=Object.assign({},l),a=o.className||i.className;n.p=Object.assign({theme:Su&&Su()},o),n.o=/ *go\d+/.test(a),o.className=go.apply(n,r)+(a?" "+a:"");let u=e;return e[0]&&(u=o.as||e,delete o.as),Eu&&u[0]&&Eu(o),Bm(u,o)}return i}}var pw=e=>typeof e=="function",Us=(e,t)=>pw(e)?e(t):e,mw=(()=>{let e=0;return()=>(++e).toString()})(),Wm=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),gw=20,Hm=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,gw)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:n}=t;return Hm(e,{type:e.toasts.find(l=>l.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(l=>l.id===r||r===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},as=[],Xn={toasts:[],pausedAt:void 0},wr=e=>{Xn=Hm(Xn,e),as.forEach(t=>{t(Xn)})},vw={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},yw=(e={})=>{let[t,n]=p.useState(Xn),r=p.useRef(Xn);p.useEffect(()=>(r.current!==Xn&&n(Xn),as.push(n),()=>{let l=as.indexOf(n);l>-1&&as.splice(l,1)}),[]);let i=t.toasts.map(l=>{var s,o,a;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((s=e[l.type])==null?void 0:s.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((o=e[l.type])==null?void 0:o.duration)||(e==null?void 0:e.duration)||vw[l.type],style:{...e.style,...(a=e[l.type])==null?void 0:a.style,...l.style}}});return{...t,toasts:i}},xw=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||mw()}),wl=e=>(t,n)=>{let r=xw(t,e,n);return wr({type:2,toast:r}),r.id},Le=(e,t)=>wl("blank")(e,t);Le.error=wl("error");Le.success=wl("success");Le.loading=wl("loading");Le.custom=wl("custom");Le.dismiss=e=>{wr({type:3,toastId:e})};Le.remove=e=>wr({type:4,toastId:e});Le.promise=(e,t,n)=>{let r=Le.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let l=t.success?Us(t.success,i):void 0;return l?Le.success(l,{id:r,...n,...n==null?void 0:n.success}):Le.dismiss(r),i}).catch(i=>{let l=t.error?Us(t.error,i):void 0;l?Le.error(l,{id:r,...n,...n==null?void 0:n.error}):Le.dismiss(r)}),e};var ww=(e,t)=>{wr({type:1,toast:{id:e,height:t}})},Sw=()=>{wr({type:5,time:Date.now()})},Bi=new Map,Ew=1e3,Cw=(e,t=Ew)=>{if(Bi.has(e))return;let n=setTimeout(()=>{Bi.delete(e),wr({type:4,toastId:e})},t);Bi.set(e,n)},kw=e=>{let{toasts:t,pausedAt:n}=yw(e);p.useEffect(()=>{if(n)return;let l=Date.now(),s=t.map(o=>{if(o.duration===1/0)return;let a=(o.duration||0)+o.pauseDuration-(l-o.createdAt);if(a<0){o.visible&&Le.dismiss(o.id);return}return setTimeout(()=>Le.dismiss(o.id),a)});return()=>{s.forEach(o=>o&&clearTimeout(o))}},[t,n]);let r=p.useCallback(()=>{n&&wr({type:6,time:Date.now()})},[n]),i=p.useCallback((l,s)=>{let{reverseOrder:o=!1,gutter:a=8,defaultPosition:u}=s||{},d=t.filter(g=>(g.position||u)===(l.position||u)&&g.height),f=d.findIndex(g=>g.id===l.id),h=d.filter((g,v)=>v<f&&g.visible).length;return d.filter(g=>g.visible).slice(...o?[h+1]:[0,h]).reduce((g,v)=>g+(v.height||0)+a,0)},[t]);return p.useEffect(()=>{t.forEach(l=>{if(l.dismissed)Cw(l.id,l.removeDelay);else{let s=Bi.get(l.id);s&&(clearTimeout(s),Bi.delete(l.id))}})},[t]),{toasts:t,handlers:{updateHeight:ww,startPause:Sw,endPause:r,calculateOffset:i}}},Nw=qt`
        from {
          transform: scale(0) rotate(45deg);
        	opacity: 0;
        }
        to {
         transform: scale(1) rotate(45deg);
          opacity: 1;
        }`,jw=qt`
        from {
          transform: scale(0);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }`,bw=qt`
        from {
          transform: scale(0) rotate(90deg);
        	opacity: 0;
        }
        to {
          transform: scale(1) rotate(90deg);
        	opacity: 1;
        }`,Pw=In("div")`
          width: 20px;
          opacity: 0;
          height: 20px;
          border-radius: 10px;
          background: ${e=>e.primary||"#ff4b4b"};
          position: relative;
          transform: rotate(45deg);
        
          animation: ${Nw} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
            forwards;
          animation-delay: 100ms;
        
          &:after,
          &:before {
            content: '';
            animation: ${jw} 0.15s ease-out forwards;
            animation-delay: 150ms;
            position: absolute;
            border-radius: 3px;
            opacity: 0;
            background: ${e=>e.secondary||"#fff"};
            bottom: 9px;
            left: 4px;
            height: 2px;
            width: 12px;
          }
        
          &:before {
            animation: ${bw} 0.15s ease-out forwards;
            animation-delay: 180ms;
            transform: rotate(90deg);
          }
        `,Ow=qt`
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        `,Tw=In("div")`
          width: 12px;
          height: 12px;
          box-sizing: border-box;
          border: 2px solid;
          border-radius: 100%;
          border-color: ${e=>e.secondary||"#e0e0e0"};
          border-right-color: ${e=>e.primary||"#616161"};
          animation: ${Ow} 1s linear infinite;
        `,Rw=qt`
        from {
          transform: scale(0) rotate(45deg);
        	opacity: 0;
        }
        to {
          transform: scale(1) rotate(45deg);
        	opacity: 1;
        }`,_w=qt`
        0% {
        	height: 0;
        	width: 0;
        	opacity: 0;
        }
        40% {
          height: 0;
        	width: 6px;
        	opacity: 1;
        }
        100% {
          opacity: 1;
          height: 10px;
        }`,$w=In("div")`
          width: 20px;
          opacity: 0;
          height: 20px;
          border-radius: 10px;
          background: ${e=>e.primary||"#61d345"};
          position: relative;
          transform: rotate(45deg);
        
          animation: ${Rw} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
            forwards;
          animation-delay: 100ms;
          &:after {
            content: '';
            box-sizing: border-box;
            animation: ${_w} 0.2s ease-out forwards;
            opacity: 0;
            animation-delay: 200ms;
            position: absolute;
            border-right: 2px solid;
            border-bottom: 2px solid;
            border-color: ${e=>e.secondary||"#fff"};
            bottom: 6px;
            left: 6px;
            height: 10px;
            width: 6px;
          }
        `,Dw=In("div")`
          position: absolute;
        `,Fw=In("div")`
          position: relative;
          display: flex;
          justify-content: center;
          align-items: center;
          min-width: 20px;
          min-height: 20px;
        `,Lw=qt`
        from {
          transform: scale(0.6);
          opacity: 0.4;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }`,Mw=In("div")`
          position: relative;
          transform: scale(0.6);
          opacity: 0.4;
          min-width: 20px;
          animation: ${Lw} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
            forwards;
        `,Aw=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?p.createElement(Mw,null,t):t:n==="blank"?null:p.createElement(Fw,null,p.createElement(Tw,{...r}),n!=="loading"&&p.createElement(Dw,null,n==="error"?p.createElement(Pw,{...r}):p.createElement($w,{...r})))},Uw=e=>`
        0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
        100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
        `,Iw=e=>`
        0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
        100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
        `,zw="0%{opacity:0;} 100%{opacity:1;}",Bw="0%{opacity:1;} 100%{opacity:0;}",Ww=In("div")`
          display: flex;
          align-items: center;
          background: #fff;
          color: #363636;
          line-height: 1.3;
          will-change: transform;
          box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
          max-width: 350px;
          pointer-events: auto;
          padding: 8px 10px;
          border-radius: 8px;
        `,Hw=In("div")`
          display: flex;
          justify-content: center;
          margin: 4px 10px;
          color: inherit;
          flex: 1 1 auto;
          white-space: pre-line;
        `,Vw=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=Wm()?[zw,Bw]:[Uw(n),Iw(n)];return{animation:t?`${qt(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${qt(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Qw=p.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?Vw(e.position||t||"top-center",e.visible):{opacity:0},l=p.createElement(Aw,{toast:e}),s=p.createElement(Hw,{...e.ariaProps},Us(e.message,e));return p.createElement(Ww,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:l,message:s}):p.createElement(p.Fragment,null,l,s))});hw(p.createElement);var qw=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let l=p.useCallback(s=>{if(s){let o=()=>{let a=s.getBoundingClientRect().height;r(e,a)};o(),new MutationObserver(o).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return p.createElement("div",{ref:l,className:t,style:n},i)},Yw=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Wm()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},Kw=go`
          z-index: 9999;
          > * {
            pointer-events: auto;
          }
        `,Ql=16,Gw=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,containerStyle:l,containerClassName:s})=>{let{toasts:o,handlers:a}=kw(n);return p.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ql,left:Ql,right:Ql,bottom:Ql,pointerEvents:"none",...l},className:s,onMouseEnter:a.startPause,onMouseLeave:a.endPause},o.map(u=>{let d=u.position||t,f=a.calculateOffset(u,{reverseOrder:e,gutter:r,defaultPosition:t}),h=Yw(d,f);return p.createElement(qw,{id:u.id,key:u.id,onHeightUpdate:a.updateHeight,className:u.visible?Kw:"",style:h},u.type==="custom"?Us(u.message,u):i?i(u):p.createElement(Qw,{toast:u,position:d}))}))};const Xw={},mf=e=>{let t;const n=new Set,r=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const g=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(v=>v(t,g))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(Xw?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,a);return a},Jw=e=>e?mf(e):mf;var Vm={exports:{}},Qm={},qm={exports:{}},Ym={};/**
         * @license React
         * use-sync-external-store-shim.production.js
         *
         * Copyright (c) Meta Platforms, Inc. and affiliates.
         *
         * This source code is licensed under the MIT license found in the
         * LICENSE file in the root directory of this source tree.
         */var ii=p;function Zw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var e1=typeof Object.is=="function"?Object.is:Zw,t1=ii.useState,n1=ii.useEffect,r1=ii.useLayoutEffect,i1=ii.useDebugValue;function l1(e,t){var n=t(),r=t1({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return r1(function(){i.value=n,i.getSnapshot=t,da(i)&&l({inst:i})},[e,n,t]),n1(function(){return da(i)&&l({inst:i}),e(function(){da(i)&&l({inst:i})})},[e]),i1(n),n}function da(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!e1(e,n)}catch{return!0}}function s1(e,t){return t()}var o1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?s1:l1;Ym.useSyncExternalStore=ii.useSyncExternalStore!==void 0?ii.useSyncExternalStore:o1;qm.exports=Ym;var a1=qm.exports;/**
         * @license React
         * use-sync-external-store-shim/with-selector.production.js
         *
         * Copyright (c) Meta Platforms, Inc. and affiliates.
         *
         * This source code is licensed under the MIT license found in the
         * LICENSE file in the root directory of this source tree.
         */var vo=p,u1=a1;function c1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var d1=typeof Object.is=="function"?Object.is:c1,f1=u1.useSyncExternalStore,h1=vo.useRef,p1=vo.useEffect,m1=vo.useMemo,g1=vo.useDebugValue;Qm.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var l=h1(null);if(l.current===null){var s={hasValue:!1,value:null};l.current=s}else s=l.current;l=m1(function(){function a(g){if(!u){if(u=!0,d=g,g=r(g),i!==void 0&&s.hasValue){var v=s.value;if(i(v,g))return f=v}return f=g}if(v=f,d1(d,g))return v;var w=r(g);return i!==void 0&&i(v,w)?(d=g,v):(d=g,f=w)}var u=!1,d,f,h=n===void 0?null:n;return[function(){return a(t())},h===null?void 0:function(){return a(h())}]},[t,n,r,i]);var o=f1(e,l[0],l[1]);return p1(function(){s.hasValue=!0,s.value=o},[o]),g1(o),o};Vm.exports=Qm;var v1=Vm.exports;const y1=ah(v1),Km={},{useDebugValue:x1}=F,{useSyncExternalStoreWithSelector:w1}=y1;let gf=!1;const S1=e=>e;function E1(e,t=S1,n){(Km?"production":void 0)!=="production"&&n&&!gf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),gf=!0);const r=w1(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return x1(r),r}const vf=e=>{(Km?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Jw(e):e,n=(r,i)=>E1(t,r,i);return Object.assign(n,t),n},Gm=e=>e?vf(e):vf;function Xm(e,t){return function(){return e.apply(t,arguments)}}const{toString:C1}=Object.prototype,{getPrototypeOf:Fc}=Object,{iterator:yo,toStringTag:Jm}=Symbol,xo=(e=>t=>{const n=C1.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),vt=e=>(e=e.toLowerCase(),t=>xo(t)===e),wo=e=>t=>typeof t===e,{isArray:fi}=Array,fl=wo("undefined");function k1(e){return e!==null&&!fl(e)&&e.constructor!==null&&!fl(e.constructor)&&ze(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Zm=vt("ArrayBuffer");function N1(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Zm(e.buffer),t}const j1=wo("string"),ze=wo("function"),eg=wo("number"),So=e=>e!==null&&typeof e=="object",b1=e=>e===!0||e===!1,us=e=>{if(xo(e)!=="object")return!1;const t=Fc(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Jm in e)&&!(yo in e)},P1=vt("Date"),O1=vt("File"),T1=vt("Blob"),R1=vt("FileList"),_1=e=>So(e)&&ze(e.pipe),$1=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ze(e.append)&&((t=xo(e))==="formdata"||t==="object"&&ze(e.toString)&&e.toString()==="[object FormData]"))},D1=vt("URLSearchParams"),[F1,L1,M1,A1]=["ReadableStream","Request","Response","Headers"].map(vt),U1=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),fi(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const l=n?Object.getOwnPropertyNames(e):Object.keys(e),s=l.length;let o;for(r=0;r<s;r++)o=l[r],t.call(null,e[o],o,e)}}function tg(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Jn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ng=e=>!fl(e)&&e!==Jn;function Cu(){const{caseless:e}=ng(this)&&this||{},t={},n=(r,i)=>{const l=e&&tg(t,i)||i;us(t[l])&&us(r)?t[l]=Cu(t[l],r):us(r)?t[l]=Cu({},r):fi(r)?t[l]=r.slice():t[l]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Sl(arguments[r],n);return t}const I1=(e,t,n,{allOwnKeys:r}={})=>(Sl(t,(i,l)=>{n&&ze(i)?e[l]=Xm(i,n):e[l]=i},{allOwnKeys:r}),e),z1=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),B1=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},W1=(e,t,n,r)=>{let i,l,s;const o={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),l=i.length;l-- >0;)s=i[l],(!r||r(s,e,t))&&!o[s]&&(t[s]=e[s],o[s]=!0);e=n!==!1&&Fc(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},H1=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},V1=e=>{if(!e)return null;if(fi(e))return e;let t=e.length;if(!eg(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Q1=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Fc(Uint8Array)),q1=(e,t)=>{const r=(e&&e[yo]).call(e);let i;for(;(i=r.next())&&!i.done;){const l=i.value;t.call(e,l[0],l[1])}},Y1=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},K1=vt("HTMLFormElement"),G1=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),yf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),X1=vt("RegExp"),rg=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Sl(n,(i,l)=>{let s;(s=t(i,l,e))!==!1&&(r[l]=s||i)}),Object.defineProperties(e,r)},J1=e=>{rg(e,(t,n)=>{if(ze(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ze(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Z1=(e,t)=>{const n={},r=i=>{i.forEach(l=>{n[l]=!0})};return fi(e)?r(e):r(String(e).split(t)),n},eS=()=>{},tS=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function nS(e){return!!(e&&ze(e.append)&&e[Jm]==="FormData"&&e[yo])}const rS=e=>{const t=new Array(10),n=(r,i)=>{if(So(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const l=fi(r)?[]:{};return Sl(r,(s,o)=>{const a=n(s,i+1);!fl(a)&&(l[o]=a)}),t[i]=void 0,l}}return r};return n(e,0)},iS=vt("AsyncFunction"),lS=e=>e&&(So(e)||ze(e))&&ze(e.then)&&ze(e.catch),ig=((e,t)=>e?setImmediate:t?((n,r)=>(Jn.addEventListener("message",({source:i,data:l})=>{i===Jn&&l===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Jn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ze(Jn.postMessage)),sS=typeof queueMicrotask<"u"?queueMicrotask.bind(Jn):typeof process<"u"&&process.nextTick||ig,oS=e=>e!=null&&ze(e[yo]),C={isArray:fi,isArrayBuffer:Zm,isBuffer:k1,isFormData:$1,isArrayBufferView:N1,isString:j1,isNumber:eg,isBoolean:b1,isObject:So,isPlainObject:us,isReadableStream:F1,isRequest:L1,isResponse:M1,isHeaders:A1,isUndefined:fl,isDate:P1,isFile:O1,isBlob:T1,isRegExp:X1,isFunction:ze,isStream:_1,isURLSearchParams:D1,isTypedArray:Q1,isFileList:R1,forEach:Sl,merge:Cu,extend:I1,trim:U1,stripBOM:z1,inherits:B1,toFlatObject:W1,kindOf:xo,kindOfTest:vt,endsWith:H1,toArray:V1,forEachEntry:q1,matchAll:Y1,isHTMLForm:K1,hasOwnProperty:yf,hasOwnProp:yf,reduceDescriptors:rg,freezeMethods:J1,toObjectSet:Z1,toCamelCase:G1,noop:eS,toFiniteNumber:tS,findKey:tg,global:Jn,isContextDefined:ng,isSpecCompliantForm:nS,toJSONObject:rS,isAsyncFn:iS,isThenable:lS,setImmediate:ig,asap:sS,isIterable:oS};function A(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}C.inherits(A,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.status}}});const lg=A.prototype,sg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{sg[e]={value:e}});Object.defineProperties(A,sg);Object.defineProperty(lg,"isAxiosError",{value:!0});A.from=(e,t,n,r,i,l)=>{const s=Object.create(lg);return C.toFlatObject(e,s,function(a){return a!==Error.prototype},o=>o!=="isAxiosError"),A.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,l&&Object.assign(s,l),s};const aS=null;function ku(e){return C.isPlainObject(e)||C.isArray(e)}function og(e){return C.endsWith(e,"[]")?e.slice(0,-2):e}function xf(e,t,n){return e?e.concat(t).map(function(i,l){return i=og(i),!n&&l?"["+i+"]":i}).join(n?".":""):t}function uS(e){return C.isArray(e)&&!e.some(ku)}const cS=C.toFlatObject(C,{},null,function(t){return/^is[A-Z]/.test(t)});function Eo(e,t,n){if(!C.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=C.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,S){return!C.isUndefined(S[w])});const r=n.metaTokens,i=n.visitor||d,l=n.dots,s=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(t);if(!C.isFunction(i))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(C.isDate(v))return v.toISOString();if(C.isBoolean(v))return v.toString();if(!a&&C.isBlob(v))throw new A("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(v)||C.isTypedArray(v)?a&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,w,S){let y=v;if(v&&!S&&typeof v=="object"){if(C.endsWith(w,"{}"))w=r?w:w.slice(0,-2),v=JSON.stringify(v);else if(C.isArray(v)&&uS(v)||(C.isFileList(v)||C.endsWith(w,"[]"))&&(y=C.toArray(v)))return w=og(w),y.forEach(function(x,E){!(C.isUndefined(x)||x===null)&&t.append(s===!0?xf([w],E,l):s===null?w:w+"[]",u(x))}),!1}return ku(v)?!0:(t.append(xf(S,w,l),u(v)),!1)}const f=[],h=Object.assign(cS,{defaultVisitor:d,convertValue:u,isVisitable:ku});function g(v,w){if(!C.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(v),C.forEach(v,function(y,m){(!(C.isUndefined(y)||y===null)&&i.call(t,y,C.isString(m)?m.trim():m,w,h))===!0&&g(y,w?w.concat(m):[m])}),f.pop()}}if(!C.isObject(e))throw new TypeError("data must be an object");return g(e),t}function wf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Lc(e,t){this._pairs=[],e&&Eo(e,this,t)}const ag=Lc.prototype;ag.append=function(t,n){this._pairs.push([t,n])};ag.toString=function(t){const n=t?function(r){return t.call(this,r,wf)}:wf;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function dS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ug(e,t,n){if(!t)return e;const r=n&&n.encode||dS;C.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let l;if(i?l=i(t,n):l=C.isURLSearchParams(t)?t.toString():new Lc(t,n).toString(r),l){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Sf{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){C.forEach(this.handlers,function(r){r!==null&&t(r)})}}const cg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fS=typeof URLSearchParams<"u"?URLSearchParams:Lc,hS=typeof FormData<"u"?FormData:null,pS=typeof Blob<"u"?Blob:null,mS={isBrowser:!0,classes:{URLSearchParams:fS,FormData:hS,Blob:pS},protocols:["http","https","file","blob","url","data"]},Mc=typeof window<"u"&&typeof document<"u",Nu=typeof navigator=="object"&&navigator||void 0,gS=Mc&&(!Nu||["ReactNative","NativeScript","NS"].indexOf(Nu.product)<0),vS=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yS=Mc&&window.location.href||"http://localhost",xS=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mc,hasStandardBrowserEnv:gS,hasStandardBrowserWebWorkerEnv:vS,navigator:Nu,origin:yS},Symbol.toStringTag,{value:"Module"})),ke={...xS,...mS};function wS(e,t){return Eo(e,new ke.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,l){return ke.isNode&&C.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},t))}function SS(e){return C.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ES(e){const t={},n=Object.keys(e);let r;const i=n.length;let l;for(r=0;r<i;r++)l=n[r],t[l]=e[l];return t}function dg(e){function t(n,r,i,l){let s=n[l++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),a=l>=n.length;return s=!s&&C.isArray(i)?i.length:s,a?(C.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!o):((!i[s]||!C.isObject(i[s]))&&(i[s]=[]),t(n,r,i[s],l)&&C.isArray(i[s])&&(i[s]=ES(i[s])),!o)}if(C.isFormData(e)&&C.isFunction(e.entries)){const n={};return C.forEachEntry(e,(r,i)=>{t(SS(r),i,n,0)}),n}return null}function CS(e,t,n){if(C.isString(e))try{return(t||JSON.parse)(e),C.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const El={transitional:cg,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,l=C.isObject(t);if(l&&C.isHTMLForm(t)&&(t=new FormData(t)),C.isFormData(t))return i?JSON.stringify(dg(t)):t;if(C.isArrayBuffer(t)||C.isBuffer(t)||C.isStream(t)||C.isFile(t)||C.isBlob(t)||C.isReadableStream(t))return t;if(C.isArrayBufferView(t))return t.buffer;if(C.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return wS(t,this.formSerializer).toString();if((o=C.isFileList(t))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Eo(o?{"files[]":t}:t,a&&new a,this.formSerializer)}}return l||i?(n.setContentType("application/json",!1),CS(t)):t}],transformResponse:[function(t){const n=this.transitional||El.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(C.isResponse(t)||C.isReadableStream(t))return t;if(t&&C.isString(t)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(o){if(s)throw o.name==="SyntaxError"?A.from(o,A.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ke.classes.FormData,Blob:ke.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],e=>{El.headers[e]={}});const kS=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),NS=e=>{const t={};let n,r,i;return e&&e.split(`
        `).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||t[n]&&kS[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Ef=Symbol("internals");function Ci(e){return e&&String(e).trim().toLowerCase()}function cs(e){return e===!1||e==null?e:C.isArray(e)?e.map(cs):String(e)}function jS(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const bS=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fa(e,t,n,r,i){if(C.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!C.isString(t)){if(C.isString(r))return t.indexOf(r)!==-1;if(C.isRegExp(r))return r.test(t)}}function PS(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function OS(e,t){const n=C.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,l,s){return this[r].call(this,t,i,l,s)},configurable:!0})})}let Be=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function l(o,a,u){const d=Ci(a);if(!d)throw new Error("header name must be a non-empty string");const f=C.findKey(i,d);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||a]=cs(o))}const s=(o,a)=>C.forEach(o,(u,d)=>l(u,d,a));if(C.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(C.isString(t)&&(t=t.trim())&&!bS(t))s(NS(t),n);else if(C.isObject(t)&&C.isIterable(t)){let o={},a,u;for(const d of t){if(!C.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(a=o[u])?C.isArray(a)?[...a,d[1]]:[a,d[1]]:d[1]}s(o,n)}else t!=null&&l(n,t,r);return this}get(t,n){if(t=Ci(t),t){const r=C.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return jS(i);if(C.isFunction(n))return n.call(this,i,r);if(C.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ci(t),t){const r=C.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||fa(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function l(s){if(s=Ci(s),s){const o=C.findKey(r,s);o&&(!n||fa(r,r[o],o,n))&&(delete r[o],i=!0)}}return C.isArray(t)?t.forEach(l):l(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const l=n[r];(!t||fa(this,this[l],l,t,!0))&&(delete this[l],i=!0)}return i}normalize(t){const n=this,r={};return C.forEach(this,(i,l)=>{const s=C.findKey(r,l);if(s){n[s]=cs(i),delete n[l];return}const o=t?PS(l):String(l).trim();o!==l&&delete n[l],n[o]=cs(i),r[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return C.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&C.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
        `)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Ef]=this[Ef]={accessors:{}}).accessors,i=this.prototype;function l(s){const o=Ci(s);r[o]||(OS(i,s),r[o]=!0)}return C.isArray(t)?t.forEach(l):l(t),this}};Be.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.reduceDescriptors(Be.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});C.freezeMethods(Be);function ha(e,t){const n=this||El,r=t||n,i=Be.from(r.headers);let l=r.data;return C.forEach(e,function(o){l=o.call(n,l,i.normalize(),t?t.status:void 0)}),i.normalize(),l}function fg(e){return!!(e&&e.__CANCEL__)}function hi(e,t,n){A.call(this,e??"canceled",A.ERR_CANCELED,t,n),this.name="CanceledError"}C.inherits(hi,A,{__CANCEL__:!0});function hg(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new A("Request failed with status code "+n.status,[A.ERR_BAD_REQUEST,A.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function TS(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function RS(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,l=0,s;return t=t!==void 0?t:1e3,function(a){const u=Date.now(),d=r[l];s||(s=u),n[i]=a,r[i]=u;let f=l,h=0;for(;f!==i;)h+=n[f++],f=f%e;if(i=(i+1)%e,i===l&&(l=(l+1)%e),u-s<t)return;const g=d&&u-d;return g?Math.round(h*1e3/g):void 0}}function _S(e,t){let n=0,r=1e3/t,i,l;const s=(u,d=Date.now())=>{n=d,i=null,l&&(clearTimeout(l),l=null),e.apply(null,u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=r?s(u,d):(i=u,l||(l=setTimeout(()=>{l=null,s(i)},r-f)))},()=>i&&s(i)]}const Is=(e,t,n=3)=>{let r=0;const i=RS(50,250);return _S(l=>{const s=l.loaded,o=l.lengthComputable?l.total:void 0,a=s-r,u=i(a),d=s<=o;r=s;const f={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:u||void 0,estimated:u&&o&&d?(o-s)/u:void 0,event:l,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(f)},n)},Cf=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},kf=e=>(...t)=>C.asap(()=>e(...t)),$S=ke.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ke.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ke.origin),ke.navigator&&/(msie|trident)/i.test(ke.navigator.userAgent)):()=>!0,DS=ke.hasStandardBrowserEnv?{write(e,t,n,r,i,l){const s=[e+"="+encodeURIComponent(t)];C.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),C.isString(r)&&s.push("path="+r),C.isString(i)&&s.push("domain="+i),l===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function FS(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function LS(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function pg(e,t,n){let r=!FS(t);return e&&(r||n==!1)?LS(e,t):t}const Nf=e=>e instanceof Be?{...e}:e;function mr(e,t){t=t||{};const n={};function r(u,d,f,h){return C.isPlainObject(u)&&C.isPlainObject(d)?C.merge.call({caseless:h},u,d):C.isPlainObject(d)?C.merge({},d):C.isArray(d)?d.slice():d}function i(u,d,f,h){if(C.isUndefined(d)){if(!C.isUndefined(u))return r(void 0,u,f,h)}else return r(u,d,f,h)}function l(u,d){if(!C.isUndefined(d))return r(void 0,d)}function s(u,d){if(C.isUndefined(d)){if(!C.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function o(u,d,f){if(f in t)return r(u,d);if(f in e)return r(void 0,u)}const a={url:l,method:l,data:l,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(u,d,f)=>i(Nf(u),Nf(d),f,!0)};return C.forEach(Object.keys(Object.assign({},e,t)),function(d){const f=a[d]||i,h=f(e[d],t[d],d);C.isUndefined(h)&&f!==o||(n[d]=h)}),n}const mg=e=>{const t=mr({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:l,headers:s,auth:o}=t;t.headers=s=Be.from(s),t.url=ug(pg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let a;if(C.isFormData(n)){if(ke.hasStandardBrowserEnv||ke.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((a=s.getContentType())!==!1){const[u,...d]=a?a.split(";").map(f=>f.trim()).filter(Boolean):[];s.setContentType([u||"multipart/form-data",...d].join("; "))}}if(ke.hasStandardBrowserEnv&&(r&&C.isFunction(r)&&(r=r(t)),r||r!==!1&&$S(t.url))){const u=i&&l&&DS.read(l);u&&s.set(i,u)}return t},MS=typeof XMLHttpRequest<"u",AS=MS&&function(e){return new Promise(function(n,r){const i=mg(e);let l=i.data;const s=Be.from(i.headers).normalize();let{responseType:o,onUploadProgress:a,onDownloadProgress:u}=i,d,f,h,g,v;function w(){g&&g(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function y(){if(!S)return;const x=Be.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),N={data:!o||o==="text"||o==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:x,config:e,request:S};hg(function(P){n(P),w()},function(P){r(P),w()},N),S=null}"onloadend"in S?S.onloadend=y:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(y)},S.onabort=function(){S&&(r(new A("Request aborted",A.ECONNABORTED,e,S)),S=null)},S.onerror=function(){r(new A("Network Error",A.ERR_NETWORK,e,S)),S=null},S.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const N=i.transitional||cg;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),r(new A(E,N.clarifyTimeoutError?A.ETIMEDOUT:A.ECONNABORTED,e,S)),S=null},l===void 0&&s.setContentType(null),"setRequestHeader"in S&&C.forEach(s.toJSON(),function(E,N){S.setRequestHeader(N,E)}),C.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),o&&o!=="json"&&(S.responseType=i.responseType),u&&([h,v]=Is(u,!0),S.addEventListener("progress",h)),a&&S.upload&&([f,g]=Is(a),S.upload.addEventListener("progress",f),S.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(d=x=>{S&&(r(!x||x.type?new hi(null,e,S):x),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const m=TS(i.url);if(m&&ke.protocols.indexOf(m)===-1){r(new A("Unsupported protocol "+m+":",A.ERR_BAD_REQUEST,e));return}S.send(l||null)})},US=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const l=function(u){if(!i){i=!0,o();const d=u instanceof Error?u:this.reason;r.abort(d instanceof A?d:new hi(d instanceof Error?d.message:d))}};let s=t&&setTimeout(()=>{s=null,l(new A(`timeout ${t} of ms exceeded`,A.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(l):u.removeEventListener("abort",l)}),e=null)};e.forEach(u=>u.addEventListener("abort",l));const{signal:a}=r;return a.unsubscribe=()=>C.asap(o),a}},IS=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},zS=async function*(e,t){for await(const n of BS(e))yield*IS(n,t)},BS=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},jf=(e,t,n,r)=>{const i=zS(e,t);let l=0,s,o=a=>{s||(s=!0,r&&r(a))};return new ReadableStream({async pull(a){try{const{done:u,value:d}=await i.next();if(u){o(),a.close();return}let f=d.byteLength;if(n){let h=l+=f;n(h)}a.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(a){return o(a),i.return()}},{highWaterMark:2})},Co=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",gg=Co&&typeof ReadableStream=="function",WS=Co&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),vg=(e,...t)=>{try{return!!e(...t)}catch{return!1}},HS=gg&&vg(()=>{let e=!1;const t=new Request(ke.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),bf=64*1024,ju=gg&&vg(()=>C.isReadableStream(new Response("").body)),zs={stream:ju&&(e=>e.body)};Co&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!zs[t]&&(zs[t]=C.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new A(`Response type '${t}' is not supported`,A.ERR_NOT_SUPPORT,r)})})})(new Response);const VS=async e=>{if(e==null)return 0;if(C.isBlob(e))return e.size;if(C.isSpecCompliantForm(e))return(await new Request(ke.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(C.isArrayBufferView(e)||C.isArrayBuffer(e))return e.byteLength;if(C.isURLSearchParams(e)&&(e=e+""),C.isString(e))return(await WS(e)).byteLength},QS=async(e,t)=>{const n=C.toFiniteNumber(e.getContentLength());return n??VS(t)},qS=Co&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:l,timeout:s,onDownloadProgress:o,onUploadProgress:a,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:h}=mg(e);u=u?(u+"").toLowerCase():"text";let g=US([i,l&&l.toAbortSignal()],s),v;const w=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let S;try{if(a&&HS&&n!=="get"&&n!=="head"&&(S=await QS(d,r))!==0){let N=new Request(t,{method:"POST",body:r,duplex:"half"}),j;if(C.isFormData(r)&&(j=N.headers.get("content-type"))&&d.setContentType(j),N.body){const[P,O]=Cf(S,Is(kf(a)));r=jf(N.body,bf,P,O)}}C.isString(f)||(f=f?"include":"omit");const y="credentials"in Request.prototype;v=new Request(t,{...h,signal:g,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:y?f:void 0});let m=await fetch(v,h);const x=ju&&(u==="stream"||u==="response");if(ju&&(o||x&&w)){const N={};["status","statusText","headers"].forEach($=>{N[$]=m[$]});const j=C.toFiniteNumber(m.headers.get("content-length")),[P,O]=o&&Cf(j,Is(kf(o),!0))||[];m=new Response(jf(m.body,bf,P,()=>{O&&O(),w&&w()}),N)}u=u||"text";let E=await zs[C.findKey(zs,u)||"text"](m,e);return!x&&w&&w(),await new Promise((N,j)=>{hg(N,j,{data:E,headers:Be.from(m.headers),status:m.status,statusText:m.statusText,config:e,request:v})})}catch(y){throw w&&w(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new A("Network Error",A.ERR_NETWORK,e,v),{cause:y.cause||y}):A.from(y,y&&y.code,e,v)}}),bu={http:aS,xhr:AS,fetch:qS};C.forEach(bu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Pf=e=>`- ${e}`,YS=e=>C.isFunction(e)||e===null||e===!1,yg={getAdapter:e=>{e=C.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let l=0;l<t;l++){n=e[l];let s;if(r=n,!YS(n)&&(r=bu[(s=String(n)).toLowerCase()],r===void 0))throw new A(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+l]=r}if(!r){const l=Object.entries(i).map(([o,a])=>`adapter ${o} `+(a===!1?"is not supported by the environment":"is not available in the build"));let s=t?l.length>1?`since :
        `+l.map(Pf).join(`
        `):" "+Pf(l[0]):"as no adapter specified";throw new A("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:bu};function pa(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hi(null,e)}function Of(e){return pa(e),e.headers=Be.from(e.headers),e.data=ha.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),yg.getAdapter(e.adapter||El.adapter)(e).then(function(r){return pa(e),r.data=ha.call(e,e.transformResponse,r),r.headers=Be.from(r.headers),r},function(r){return fg(r)||(pa(e),r&&r.response&&(r.response.data=ha.call(e,e.transformResponse,r.response),r.response.headers=Be.from(r.response.headers))),Promise.reject(r)})}const xg="1.10.0",ko={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ko[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Tf={};ko.transitional=function(t,n,r){function i(l,s){return"[Axios v"+xg+"] Transitional option '"+l+"'"+s+(r?". "+r:"")}return(l,s,o)=>{if(t===!1)throw new A(i(s," has been removed"+(n?" in "+n:"")),A.ERR_DEPRECATED);return n&&!Tf[s]&&(Tf[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,s,o):!0}};ko.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function KS(e,t,n){if(typeof e!="object")throw new A("options must be an object",A.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const l=r[i],s=t[l];if(s){const o=e[l],a=o===void 0||s(o,l,e);if(a!==!0)throw new A("option "+l+" must be "+a,A.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new A("Unknown option "+l,A.ERR_BAD_OPTION)}}const ds={assertOptions:KS,validators:ko},wt=ds.validators;let ar=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Sf,response:new Sf}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
        `+l):r.stack=l}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mr(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:l}=n;r!==void 0&&ds.assertOptions(r,{silentJSONParsing:wt.transitional(wt.boolean),forcedJSONParsing:wt.transitional(wt.boolean),clarifyTimeoutError:wt.transitional(wt.boolean)},!1),i!=null&&(C.isFunction(i)?n.paramsSerializer={serialize:i}:ds.assertOptions(i,{encode:wt.function,serialize:wt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ds.assertOptions(n,{baseUrl:wt.spelling("baseURL"),withXsrfToken:wt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=l&&C.merge(l.common,l[n.method]);l&&C.forEach(["delete","get","head","post","put","patch","common"],v=>{delete l[v]}),n.headers=Be.concat(s,l);const o=[];let a=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(a=a&&w.synchronous,o.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let d,f=0,h;if(!a){const v=[Of.bind(this),void 0];for(v.unshift.apply(v,o),v.push.apply(v,u),h=v.length,d=Promise.resolve(n);f<h;)d=d.then(v[f++],v[f++]);return d}h=o.length;let g=n;for(f=0;f<h;){const v=o[f++],w=o[f++];try{g=v(g)}catch(S){w.call(this,S);break}}try{d=Of.call(this,g)}catch(v){return Promise.reject(v)}for(f=0,h=u.length;f<h;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=mr(this.defaults,t);const n=pg(t.baseURL,t.url,t.allowAbsoluteUrls);return ug(n,t.params,t.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(t){ar.prototype[t]=function(n,r){return this.request(mr(r||{},{method:t,url:n,data:(r||{}).data}))}});C.forEach(["post","put","patch"],function(t){function n(r){return function(l,s,o){return this.request(mr(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:s}))}}ar.prototype[t]=n(),ar.prototype[t+"Form"]=n(!0)});let GS=class wg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(i=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](i);r._listeners=null}),this.promise.then=i=>{let l;const s=new Promise(o=>{r.subscribe(o),l=o}).then(i);return s.cancel=function(){r.unsubscribe(l)},s},t(function(l,s,o){r.reason||(r.reason=new hi(l,s,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new wg(function(i){t=i}),cancel:t}}};function XS(e){return function(n){return e.apply(null,n)}}function JS(e){return C.isObject(e)&&e.isAxiosError===!0}const Pu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pu).forEach(([e,t])=>{Pu[t]=e});function Sg(e){const t=new ar(e),n=Xm(ar.prototype.request,t);return C.extend(n,ar.prototype,t,{allOwnKeys:!0}),C.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Sg(mr(e,i))},n}const I=Sg(El);I.Axios=ar;I.CanceledError=hi;I.CancelToken=GS;I.isCancel=fg;I.VERSION=xg;I.toFormData=Eo;I.AxiosError=A;I.Cancel=I.CanceledError;I.all=function(t){return Promise.all(t)};I.spread=XS;I.isAxiosError=JS;I.mergeConfig=mr;I.AxiosHeaders=Be;I.formToJSON=e=>dg(C.isHTMLForm(e)?new FormData(e):e);I.getAdapter=yg.getAdapter;I.HttpStatusCode=Pu;I.default=I;const{Axios:b2,AxiosError:P2,CanceledError:O2,isCancel:T2,CancelToken:R2,VERSION:_2,all:$2,Cancel:D2,isAxiosError:F2,spread:L2,toFormData:M2,AxiosHeaders:A2,HttpStatusCode:U2,formToJSON:I2,getAdapter:z2,mergeConfig:B2}=I,ZS=()=>{try{const e=JSON.parse(localStorage.getItem("user"));return{user:e,isAuthenticated:!!e}}catch{return{user:null,isAuthenticated:!1}}},Jt=Gm(e=>({...ZS(),login:t=>{if(!t||!t._id){console.error("Login action called with invalid user data:",t);return}localStorage.setItem("user",JSON.stringify(t)),e({user:t,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("user"),e({user:null,isAuthenticated:!1})}})),eE=(e,t)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>e.apply(void 0,r),t)}},ql=eE(async e=>{if(Jt.getState().isAuthenticated)try{await I.post("/api/cart",{cart:e},{withCredentials:!0})}catch(t){console.error("Failed to sync cart with DB:",t)}},1e3),$n=Gm((e,t)=>({items:[],isInitialized:!1,fetchCart:async()=>{if(!Jt.getState().isAuthenticated){e({isInitialized:!0,items:[]});return}try{const{data:n}=await I.get("/api/cart",{withCredentials:!0});e({items:n||[],isInitialized:!0})}catch(n){console.error("Failed to fetch cart:",n),e({isInitialized:!0})}},addItem:n=>{const{items:r}=t(),i=r.find(s=>s.product._id===n._id);let l;i?l=r.map(s=>s.product._id===n._id?{...s,quantity:s.quantity+1}:s):l=[...r,{product:n,quantity:1}],e({items:l}),ql(l)},removeItem:n=>{const r=t().items.filter(i=>i.product._id!==n);e({items:r}),ql(r)},updateQuantity:(n,r)=>{const i=t().items.map(l=>l.product._id===n?{...l,quantity:r}:l).filter(l=>l.quantity>0);e({items:i}),ql(i)},clearCart:()=>{e({items:[]}),ql([])},clearLocalCart:()=>{e({items:[],isInitialized:!1})},getTotalItems:()=>t().items.reduce((n,r)=>n+r.quantity,0),getTotalPrice:()=>t().items.reduce((n,r)=>n+r.product.price*r.quantity,0)}));Jt.subscribe((e,t)=>{e.isAuthenticated&&!t.isAuthenticated?$n.getState().fetchCart():!e.isAuthenticated&&t.isAuthenticated&&$n.getState().clearLocalCart()});function Eg(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Eg(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function tE(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Eg(e))&&(r&&(r+=" "),r+=t);return r}function Rf(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function nE(...e){return t=>{let n=!1;const r=e.map(i=>{const l=Rf(i,t);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let i=0;i<r.length;i++){const l=r[i];typeof l=="function"?l():Rf(e[i],null)}}}}function rE(e){const t=lE(e),n=p.forwardRef((r,i)=>{const{children:l,...s}=r,o=p.Children.toArray(l),a=o.find(oE);if(a){const u=a.props.children,d=o.map(f=>f===a?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return c.jsx(t,{...s,ref:i,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return c.jsx(t,{...s,ref:i,children:l})});return n.displayName=`${e}.Slot`,n}var iE=rE("Slot");function lE(e){const t=p.forwardRef((n,r)=>{const{children:i,...l}=n;if(p.isValidElement(i)){const s=uE(i),o=aE(l,i.props);return i.type!==p.Fragment&&(o.ref=r?nE(r,s):s),p.cloneElement(i,o)}return p.Children.count(i)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var sE=Symbol("radix.slottable");function oE(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===sE}function aE(e,t){const n={...t};for(const r in t){const i=e[r],l=t[r];/^on[A-Z]/.test(r)?i&&l?n[r]=(...o)=>{const a=l(...o);return i(...o),a}:i&&(n[r]=i):r==="style"?n[r]={...i,...l}:r==="className"&&(n[r]=[i,l].filter(Boolean).join(" "))}return{...e,...n}}function uE(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function oe({asChild:e=!1,variant:t="primary",className:n,...r}){const i=e?iE:"button";return c.jsx(i,{className:tE("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors",t==="primary"&&"bg-blue-600 text-white hover:bg-blue-700",t==="ghost"&&"bg-transparent hover:bg-gray-100",t==="destructive"&&"bg-red-600 text-white hover:bg-red-700",n),...r})}const cE=()=>c.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{d:"..."})}),dE=()=>c.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{d:"..."})}),fE=()=>c.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{d:"..."})}),hE=()=>c.jsxs("div",{className:"bg-white",children:[c.jsxs("section",{className:"relative py-20 md:py-32 bg-gray-50",children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:"url('https://images.unsplash.com/photo-1555939594-58d7cb561ad1?q=80&w=2787')"}}),c.jsxs("div",{className:"container mx-auto px-6 text-center relative",children:[c.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold text-gray-900 leading-tight",children:["×”×—×’ ×”×–×”, ××ª× × ×—×™×. ",c.jsx("br",{}),c.jsx("span",{className:"text-blue-600",children:"×× ×—× ×• ×ž×‘×©×œ×™×."})]}),c.jsx("p",{className:"mt-6 text-lg md:text-xl text-gray-700 max-w-3xl mx-auto",children:"××•×›×œ ×¤×¡×— ×‘×™×ª×™, ×˜×¨×™ ×‘×›×©×¨×•×ª ×ž×”×•×“×¨×ª ×©×™×’×™×¢ ×¢×“ ××œ×™×›×. ×›×œ ×ž×” ×©×¦×¨×™×š ×›×“×™ ×œ×—×’×•×’ ×©×•×œ×—×Ÿ ×—×’ ×ž×•×©×œ× ×‘×œ×™ ×œ×¢×ž×•×“ ×™×•× ×©×œ× ×‘×ž×˜×‘×—."}),c.jsxs("div",{className:"mt-10 flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsx(oe,{asChild:!0,size:"lg",className:"shadow-lg transform hover:scale-105 transition-transform",children:c.jsx(ge,{to:"/menu",children:"×œ×ª×¤×¨×™×˜ ×”×ž×œ× ×•×”×”×–×ž× ×•×ª"})}),c.jsx(oe,{asChild:!0,size:"lg",variant:"outline",children:c.jsx(ge,{to:"/how-it-works",children:"××™×š ×–×” ×¢×•×‘×“?"})})]})]})]}),c.jsx("section",{className:"py-16 md:py-24",children:c.jsxs("div",{className:"container mx-auto px-6 text-center",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800",children:"×¤×©×•×˜ ×•×˜×¢×™×, ×‘-3 ×¦×¢×“×™×"}),c.jsxs("div",{className:"mt-12 grid gap-10 md:grid-cols-3",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-full p-4 mb-4",children:c.jsx(cE,{className:"h-8 w-8"})}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"×‘×•×—×¨×™× ×ž×”×ª×¤×¨×™×˜"}),c.jsx("p",{className:"text-gray-600",children:"×’×œ×œ×• ×‘×ª×¤×¨×™×˜ ×”×—×’ ×”×¢×©×™×¨ ×©×œ× ×• ×•×‘×—×¨×• ××ª ×”×ž× ×•×ª ×©××ª× ×”×›×™ ××•×”×‘×™×."})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-full p-4 mb-4",children:c.jsx(dE,{className:"h-8 w-8"})}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"×§×•×‘×¢×™× ××™×¡×•×£ ××• ×ž×©×œ×•×—"}),c.jsx("p",{className:"text-gray-600",children:"×‘×—×¨×• ××ª × ×§×•×“×ª ×”××™×¡×•×£ ×”× ×•×—×” ×œ×›× ××• ×ª××ž×• ×ž×©×œ×•×— ×¢×“ ×¤×ª×— ×”×‘×™×ª."})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-full p-4 mb-4",children:c.jsx(fE,{className:"h-8 w-8"})}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"× ×”× ×™× ×ž×—×’ ×©×ž×—!"}),c.jsx("p",{className:"text-gray-600",children:"×ž×§×‘×œ×™× ××ª ×”××•×›×œ ×˜×¨×™ ×•×—×, ×ž×¡×“×¨×™× ×¢×œ ×”×©×•×œ×—×Ÿ ×•×—×•×’×’×™× ×‘× ×—×ª."})]})]})]})}),c.jsx("section",{className:"bg-gray-50 py-16 md:py-24",children:c.jsxs("div",{className:"container mx-auto px-6",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 text-center mb-12",children:"×˜×¢×™×ž×” ×§×˜× ×” ×ž×”×ª×¤×¨×™×˜ ×©×œ× ×•"}),c.jsxs("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-4",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transform hover:-translate-y-2 transition-transform",children:[c.jsx("img",{src:"https://images.unsplash.com/photo-1628294896516-344122d57588?q=80&w=2835",alt:"×’×¤×™×œ×˜×¢ ×¤×™×©",className:"w-full h-48 object-cover"}),c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"font-bold text-lg",children:"×’×¤×™×œ×˜×¢ ×¤×™×© ×©×œ ×¡×‘×ª×"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"×ž×ª×›×•×Ÿ ×©×¢×•×‘×¨ ×‘×ž×©×¤×—×”, ×‘×“×™×•×§ ×›×ž×• ×©×¦×¨×™×š."})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transform hover:-translate-y-2 transition-transform",children:[c.jsx("img",{src:"https://images.unsplash.com/photo-1598103442387-03775a1ae456?q=80&w=2787",alt:"×¦×œ×™ ×‘×§×¨",className:"w-full h-48 object-cover"}),c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"font-bold text-lg",children:"×¦×œ×™ ×‘×§×¨ ×‘×™×™×Ÿ ××“×•×"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"×¨×š ×•×¢×¡×™×¡×™, ×ž×ª×¤×¨×§ ×‘×¤×”."})]})]})]}),c.jsx("div",{className:"text-center mt-12",children:c.jsx(oe,{asChild:!0,size:"lg",variant:"link",children:c.jsx(ge,{to:"/menu",children:"×•×œ×›×œ ×©××¨ ×”×ž× ×•×ª ×”×ž×“×”×™×ž×•×ª ×©×œ× ×• â†"})})})]})}),c.jsx("section",{className:"py-16 md:py-24",children:c.jsxs("div",{className:"container mx-auto px-6 text-center max-w-3xl",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800",children:"×”×œ×§×•×—×•×ª ×©×œ× ×• ×›×‘×¨ × ×”× ×™× ×ž×”×—×’"}),c.jsxs("div",{className:"mt-8 text-xl text-gray-700 italic",children:[c.jsx("p",{children:'"×”×–×ž× ×• ×‘×©× ×” ×©×¢×‘×¨×” ×•×”×™×” ×¤×©×•×˜ ×ž×•×©×œ×! ×”××•×›×œ ×”×™×” ×˜×¢×™×, ×”×’×™×¢ ×‘×–×ž×Ÿ, ×•×—×¡×š ×œ× ×• ×›×œ ×›×š ×”×¨×‘×” ×¢×‘×•×“×”. ××™×Ÿ ×¡×¤×§ ×©× ×–×ž×™×Ÿ ×’× ×”×©× ×”. ×ª×•×“×” ×¨×‘×”!"'}),c.jsx("p",{className:"font-semibold text-gray-800 not-italic mt-4",children:"- ×ž×©×¤×—×ª ×›×”×Ÿ, ×ª×œ ××‘×™×‘"})]})]})})]});/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const pE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mE=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),_f=e=>{const t=mE(e);return t.charAt(0).toUpperCase()+t.slice(1)},Cg=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),gE=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */var vE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const yE=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:l,iconNode:s,...o},a)=>p.createElement("svg",{ref:a,...vE,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Cg("lucide",i),...!l&&!gE(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,d])=>p.createElement(u,d)),...Array.isArray(l)?l:[l]]));/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const Zt=(e,t)=>{const n=p.forwardRef(({className:r,...i},l)=>p.createElement(yE,{ref:l,iconNode:t,className:Cg(`lucide-${pE(_f(e))}`,`lucide-${e}`,r),...i}));return n.displayName=_f(e),n};/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const xE=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],wE=Zt("eye-off",xE);/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const SE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],EE=Zt("eye",SE);/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const CE=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],kE=Zt("layout-dashboard",CE);/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const NE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],jE=Zt("loader-circle",NE);/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const bE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],PE=Zt("lock",bE);/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const OE=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],TE=Zt("log-out",OE);/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const RE=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],_E=Zt("mail",RE);/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const $E=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],DE=Zt("user",$E);/**
         * @license lucide-react v0.525.0 - ISC
         *
         * This source code is licensed under the ISC license.
         * See the LICENSE file in the root directory of this source tree.
         */const FE=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],LE=Zt("wrench",FE);function ME(){const[e,t]=p.useState(""),[n,r]=p.useState(""),[i,l]=p.useState(""),[s,o]=p.useState(!1),[a,u]=p.useState(!1),d=di(),f=Jt(g=>g.login),h=async g=>{var v,w;if(g.preventDefault(),!s){o(!0),l("");try{const{data:S}=await I.post("/api/auth/login",{email:e,password:n},{withCredentials:!0});if(S&&S.user)f(S.user),d("/",{replace:!0});else throw new Error("×ª×’×•×‘×ª ×”×©×¨×ª ××™× ×” ×ž×›×™×œ×” ×¤×¨×˜×™ ×ž×©×ª×ž×©.")}catch(S){l(((w=(v=S.response)==null?void 0:v.data)==null?void 0:w.message)||"×©×’×™××” ×œ× ×¦×¤×•×™×”. × ×¡×” ×©×•×‘.")}finally{o(!1)}}};return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx(ge,{to:"/",className:"text-3xl font-bold text-amber-700 inline-block mb-2",children:"ðŸ½ï¸ ×§×™×™×˜×¨×™× ×’ ×¤×¡×—"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"×‘×¨×•×›×™× ×”×‘××™×"}),c.jsx("p",{className:"text-gray-600",children:"×”×ª×—×‘×¨ ×œ×—×©×‘×•×Ÿ ×©×œ×š ×›×“×™ ×œ×”×ž×©×™×š"})]}),c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"×›×ª×•×‘×ª ××™×ž×™×™×œ"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:c.jsx(_E,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{id:"email",type:"email",placeholder:"you@example.com",required:!0,value:e,onChange:g=>t(g.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"×¡×™×¡×ž×”"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:c.jsx(PE,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{id:"password",type:a?"text":"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,value:n,onChange:g=>r(g.target.value),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500"}),c.jsx("button",{type:"button",onClick:()=>u(!a),className:"absolute inset-y-0 right-0 flex items-center pr-3","aria-label":a?"×”×¡×ª×¨ ×¡×™×¡×ž×”":"×”×¦×’ ×¡×™×¡×ž×”",children:a?c.jsx(wE,{className:"h-5 w-5 text-gray-500"}):c.jsx(EE,{className:"h-5 w-5 text-gray-500"})})]})]}),i&&c.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-md text-sm text-center",children:i}),c.jsx("div",{children:c.jsxs(oe,{type:"submit",className:"w-full",disabled:s,children:[s?c.jsx(jE,{className:"animate-spin h-5 w-5 mr-2"}):null,s?"×ž×ª×—×‘×¨...":"×”×ª×—×‘×¨×•×ª"]})})]}),c.jsx("div",{className:"text-sm text-center text-gray-600",children:c.jsxs("p",{children:["××™×Ÿ ×œ×š ×—×©×‘×•×Ÿ?"," ",c.jsx(ge,{to:"/register",className:"font-medium text-amber-600 hover:underline",children:"×”×¨×©× ×¢×›×©×™×•"})]})})]})})}function AE(){const[e,t]=p.useState(""),[n,r]=p.useState(""),[i,l]=p.useState(""),s=di(),o=Jt(u=>u.login),a=async u=>{var d,f;u.preventDefault(),l("");try{const{data:h}=await I.post("/api/auth/register",{email:e,password:n},{withCredentials:!0});o(h.user),s("/dashboard")}catch(h){l(((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||"×©×’×™××”")}};return c.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white shadow rounded space-y-4",children:[c.jsx("h1",{className:"text-2xl font-bold text-center",children:"×”×¨×©×ž×”"}),c.jsxs("form",{onSubmit:a,className:"space-y-4",children:[c.jsx("input",{className:"input w-full",type:"email",placeholder:"××™×ž×™×™×œ",required:!0,value:e,onChange:u=>t(u.target.value)}),c.jsx("input",{className:"input w-full",type:"password",placeholder:"×¡×™×¡×ž×”",required:!0,minLength:6,value:n,onChange:u=>r(u.target.value)}),c.jsx("button",{className:"btn-primary w-full py-2",children:"×”×¨×©×ž×”"})]}),i&&c.jsx("p",{className:"text-center text-sm text-red-600",children:i})]})}const $f={new:{text:"×—×“×©×”",color:"bg-blue-100 text-blue-800"},processing:{text:"×‘×˜×™×¤×•×œ",color:"bg-yellow-100 text-yellow-800"},shipped:{text:"× ×©×œ×—×”",color:"bg-purple-100 text-purple-800"},delivered:{text:"×”×’×™×¢×” ×œ×™×¢×“",color:"bg-green-100 text-green-800"},cancelled:{text:"×‘×•×˜×œ×”",color:"bg-red-100 text-red-800"}};function UE(){const e=Jt(o=>o.user),[t,n]=p.useState([]),[r,i]=p.useState(!0),[l,s]=p.useState(null);return p.useEffect(()=>{(async()=>{try{const{data:a}=await I.get("/api/orders/my-orders",{withCredentials:!0});n(a.sort((u,d)=>new Date(d.createdAt)-new Date(u.createdAt)))}catch(a){s("×œ× × ×™×ª×Ÿ ×”×™×” ×œ×˜×¢×•×Ÿ ××ª ×”×™×¡×˜×•×¨×™×™×ª ×”×”×–×ž× ×•×ª."),console.error(a)}finally{i(!1)}})()},[]),c.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsxs("header",{className:"mb-10",children:[c.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:["×©×œ×•×, ",(e==null?void 0:e.name)||"×ž×©×ª×ž×©","!"]}),c.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"×›×™×£ ×œ×¨××•×ª ××•×ª×š. ×›××Ÿ ×ª×•×›×œ ×œ×¢×§×•×‘ ××—×¨ ×”×”×–×ž× ×•×ª ×©×œ×š."})]}),c.jsxs("main",{className:"space-y-12",children:[c.jsxs("section",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"×”×”×–×ž× ×•×ª ×”××—×¨×•× ×•×ª ×©×œ×š"}),c.jsx(oe,{variant:"link",asChild:!0,children:c.jsx(ge,{to:"/orders-history",children:"×›×œ ×”×”×–×ž× ×•×ª â†"})})]}),c.jsxs("div",{className:"space-y-4",children:[r&&c.jsx("p",{children:"×˜×•×¢×Ÿ ×”×–×ž× ×•×ª..."}),l&&c.jsx("p",{className:"text-red-500",children:l}),!r&&!l&&(t.length>0?t.slice(0,3).map(o=>{var a,u;return c.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-2xl border shadow-sm flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-lg text-gray-800",children:["×”×–×ž× ×” #",o.orderNumber||o._id.slice(-6)]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["×‘×ª××¨×™×š: ",new Date(o.createdAt).toLocaleDateString("he-IL")]})]}),c.jsxs("div",{className:"flex-shrink-0 flex items-center gap-4",children:[c.jsxs("p",{className:"font-semibold text-xl",children:[o.totalPrice," â‚ª"]}),c.jsx("span",{className:`text-sm font-bold px-3 py-1 rounded-full ${((a=$f[o.status])==null?void 0:a.color)||"bg-gray-100 text-gray-800"}`,children:((u=$f[o.status])==null?void 0:u.text)||o.status})]})]},o._id)}):c.jsxs("div",{className:"text-center p-10 bg-gray-50 rounded-2xl",children:[c.jsx("p",{className:"text-gray-600",children:"×¢×“×™×™×Ÿ ×œ× ×‘×™×¦×¢×ª ×”×–×ž× ×•×ª."}),c.jsx(oe,{asChild:!0,className:"mt-4",children:c.jsx(ge,{to:"/menu",children:"×‘×•× × ×ª×—×™×œ ×¢× ×”×–×ž× ×” ×¨××©×•× ×”!"})})]}))]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"×—×©×‘×•×Ÿ"}),c.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[c.jsxs(ge,{to:"/profile",className:"group bg-white p-6 rounded-2xl border shadow-sm hover:border-amber-500 transition-colors",children:[c.jsx("h3",{className:"font-bold text-xl text-gray-800",children:"âš™ï¸ ×¤×¨×˜×™ ×—×©×‘×•×Ÿ"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"×¢×“×›×•×Ÿ ×¤×¨×˜×™× ××™×©×™×™× ×•×©×™× ×•×™ ×¡×™×¡×ž×”."})]}),c.jsxs(ge,{to:"/menu",className:"group bg-white p-6 rounded-2xl border shadow-sm hover:border-amber-500 transition-colors",children:[c.jsx("h3",{className:"font-bold text-xl text-gray-800",children:"ðŸ½ï¸ ×—×–×¨×” ×œ×ª×¤×¨×™×˜"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"×¨×•×¦×” ×œ×”×•×¡×™×£ ×¢×•×“ ×ž×©×”×• ×˜×¢×™×?"})]})]})]})]})]})}function IE({product:e}){const t=$n(r=>r.addItem);if(!e||!e._id)return c.jsx("div",{className:"aspect-[4/5] w-full rounded-2xl bg-gray-200 animate-pulse"});const n=e.image||"https://via.placeholder.com/400x500?text=No+Image";return c.jsxs("button",{onClick:()=>t(e),className:"group relative aspect-[4/5] w-full rounded-2xl bg-white shadow hover:shadow-lg overflow-hidden focus:outline-none transition",children:[c.jsx("img",{src:n,alt:e.name,loading:"lazy",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"}),c.jsxs("div",{className:"absolute bottom-0 w-full bg-white/80 backdrop-blur p-3 text-start",children:[c.jsx("h3",{className:"font-semibold truncate",children:e.name}),c.jsxs("p",{className:"text-sm text-gray-600",children:[e.price," â‚ª"]})]})]})}const ma=30;function zE(){const[e,t]=p.useState([]),[n,r]=p.useState(0),[i,l]=p.useState(!0),[s,o]=p.useState(!1),a=p.useRef(null),u=p.useRef(!1),d=async f=>{if(!(s||!i)){o(!0);try{const{data:h}=await I.get(`/api/products?skip=${f*ma}&limit=${ma}`,{withCredentials:!0}),g=Array.isArray(h)?h:h.products;Array.isArray(g)?(t(v=>[...v,...g]),l(g.length===ma),r(f)):l(!1)}catch(h){console.error("×©×’×™××ª Axios",h),l(!1)}finally{o(!1)}}};return p.useEffect(()=>{u.current||(u.current=!0,t([]),d(0))},[]),p.useEffect(()=>{if(!i||s)return;const f=new IntersectionObserver(([g])=>{g.isIntersecting&&d(n+1)},{threshold:1}),h=a.current;return h&&f.observe(h),()=>{h&&f.unobserve(h)}},[n,i,s]),c.jsxs("section",{className:"container mx-auto px-4 py-8 space-y-12",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-bold",children:"×ª×¤×¨×™×˜ ×”×—×’ ×©×œ× ×•"}),c.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"×›×œ ×”×ž× ×•×ª ×©×™×¢×©×• ×œ×›× ×—×’ ×©×ž×— ×•×˜×¢×™×"})]}),c.jsx("div",{className:"grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:e.map(f=>c.jsx(IE,{product:f},f._id))}),c.jsxs("div",{ref:a,className:"h-14 flex items-center justify-center font-semibold text-gray-500",children:[s&&e.length>0&&c.jsx("span",{className:"animate-pulse",children:"×˜×•×¢×Ÿ ×ž×•×¦×¨×™× × ×•×¡×¤×™×..."}),!i&&"â€” ×”×’×¢×ª ×œ×¡×•×£ ×”×ª×¤×¨×™×˜ â€”"]})]})}const Df={new:{text:"×”×ª×§×‘×œ×”",color:"bg-blue-100 text-blue-800"},processing:{text:"×‘×˜×™×¤×•×œ",color:"bg-yellow-100 text-yellow-800"},shipped:{text:"× ×©×œ×—×”",color:"bg-purple-100 text-purple-800"},delivered:{text:"×”×’×™×¢×” ×œ×™×¢×“",color:"bg-green-100 text-green-800"},cancelled:{text:"×‘×•×˜×œ×”",color:"bg-red-100 text-red-800"}};function BE(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[i,l]=p.useState(null);return p.useEffect(()=>{(async()=>{try{const{data:o}=await I.get("/api/orders/my-orders",{withCredentials:!0});t(o)}catch(o){l("×œ× × ×™×ª×Ÿ ×”×™×” ×œ×˜×¢×•×Ÿ ××ª ×”×™×¡×˜×•×¨×™×™×ª ×”×”×–×ž× ×•×ª."),console.error(o)}finally{r(!1)}})()},[]),c.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsxs("header",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"×”×™×¡×˜×•×¨×™×™×ª ×”×”×–×ž× ×•×ª ×©×œ×™"}),c.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"×›××Ÿ ×ª×•×›×œ ×œ×¢×§×•×‘ ××—×¨ ×›×œ ×”×”×–×ž× ×•×ª ×©×‘×™×¦×¢×ª."})]}),c.jsxs("main",{className:"bg-white rounded-2xl border shadow-sm",children:[n&&c.jsx("p",{className:"p-10 text-center text-gray-500",children:"×˜×•×¢×Ÿ ×”×™×¡×˜×•×¨×™×™×ª ×”×–×ž× ×•×ª..."}),i&&c.jsx("p",{className:"p-10 text-center text-red-600",children:i}),!n&&!i&&(e.length>0?c.jsx("div",{className:"divide-y divide-gray-200",children:e.map(s=>{var o,a;return c.jsxs("div",{className:"p-4 sm:p-6 grid grid-cols-2 sm:grid-cols-4 gap-4 items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"×ž×¡×¤×¨ ×”×–×ž× ×”"}),c.jsxs("p",{className:"font-bold text-gray-800",children:["#",s.orderNumber||s._id.slice(-6)]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"×ª××¨×™×š"}),c.jsx("p",{className:"font-medium text-gray-700",children:new Date(s.createdAt).toLocaleDateString("he-IL")})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"×¡×˜×˜×•×¡"}),c.jsx("span",{className:`text-sm font-bold px-3 py-1 rounded-full inline-block ${((o=Df[s.status])==null?void 0:o.color)||"bg-gray-100 text-gray-800"}`,children:((a=Df[s.status])==null?void 0:a.text)||s.status})]}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"×¡×š ×”×›×œ"}),c.jsxs("p",{className:"font-bold text-lg text-gray-900",children:[s.totalPrice," â‚ª"]})]})]},s._id)})}):c.jsx("div",{className:"text-center p-10",children:c.jsx("p",{className:"text-gray-600",children:"×¢×“×™×™×Ÿ ×œ× ×‘×™×¦×¢×ª ×”×–×ž× ×•×ª."})}))]})]})}function Ff(){return Jt(t=>t.user)?c.jsx(_c,{}):c.jsx(_m,{to:"/login",replace:!0})}function WE({children:e}){const t=Jt(n=>n.user);return(t==null?void 0:t.role)==="admin"?e:c.jsx(_m,{to:"/login",replace:!0})}const HE=async()=>new Promise(e=>setTimeout(()=>{e({newOrders:5,totalProducts:42,totalUsers:137,activeCenters:4})},800));function VE(){const[e,t]=p.useState(null),[n,r]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{const l=await HE();t(l)}catch(l){console.error("Failed to fetch dashboard stats",l)}finally{r(!1)}})()},[]),c.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-8",children:[c.jsxs("header",{children:[c.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"ðŸŽ›ï¸ ×œ×•×— × ×™×”×•×œ"}),c.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"×‘×¨×•×š ×”×‘×! ×ž×›××Ÿ ×ª×•×›×œ ×œ× ×”×œ ××ª ×›×œ ×—×œ×§×™ ×”××ª×¨."})]}),c.jsx("section",{children:c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"×”×–×ž× ×•×ª ×—×“×©×•×ª"}),n?c.jsx("div",{className:"h-10 w-16 bg-gray-200 animate-pulse rounded-md mt-1"}):c.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:e==null?void 0:e.newOrders})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:'×¡×”"×› ×ž×•×¦×¨×™×'}),n?c.jsx("div",{className:"h-10 w-16 bg-gray-200 animate-pulse rounded-md mt-1"}):c.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:e==null?void 0:e.totalProducts})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:'×¡×”"×› ×ž×©×ª×ž×©×™×'}),n?c.jsx("div",{className:"h-10 w-16 bg-gray-200 animate-pulse rounded-md mt-1"}):c.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:e==null?void 0:e.totalUsers})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"×ž×¨×›×–×™× ×¤×¢×™×œ×™×"}),n?c.jsx("div",{className:"h-10 w-16 bg-gray-200 animate-pulse rounded-md mt-1"}):c.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:e==null?void 0:e.activeCenters})]})]})}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"×¤×¢×•×œ×•×ª ×ž×”×™×¨×•×ª"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs(ge,{to:"/admin/products",className:"group bg-white border p-6 rounded-2xl shadow-sm hover:border-blue-500 hover:shadow-md transition-all",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"ðŸ“¦ × ×™×”×•×œ ×ž×•×¦×¨×™×"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"×”×•×¡×¤×”, ×¢×¨×™×›×” ×•×ž×—×™×§×” ×©×œ ×ž× ×•×ª ×ž×”×ª×¤×¨×™×˜."}),c.jsx("span",{className:"mt-4 inline-block text-blue-600 font-semibold group-hover:underline",children:"×¢×‘×•×¨ ×œ× ×™×”×•×œ ×ž×•×¦×¨×™× â†"})]}),c.jsxs(ge,{to:"/admin/orders",className:"group bg-white border p-6 rounded-2xl shadow-sm hover:border-blue-500 hover:shadow-md transition-all",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"ðŸ§¾ × ×™×”×•×œ ×”×–×ž× ×•×ª"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"×¦×¤×™×™×” ×•×˜×™×¤×•×œ ×‘×”×–×ž× ×•×ª ×©×”×ª×§×‘×œ×• ×ž×”×œ×§×•×—×•×ª."}),c.jsx("span",{className:"mt-4 inline-block text-blue-600 font-semibold group-hover:underline",children:"×¢×‘×•×¨ ×œ× ×™×”×•×œ ×”×–×ž× ×•×ª â†"})]}),c.jsxs(ge,{to:"/admin/centers",className:"group bg-white border p-6 rounded-2xl shadow-sm hover:border-blue-500 hover:shadow-md transition-all",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"ðŸ¬ × ×™×”×•×œ ×ž×¨×›×–×™ ×—×œ×•×§×”"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"×”×’×“×¨×ª × ×§×•×“×•×ª ×”××™×¡×•×£ ×©×”×œ×§×•×—×•×ª ×™×›×•×œ×™× ×œ×‘×—×•×¨."}),c.jsx("span",{className:"mt-4 inline-block text-blue-600 font-semibold group-hover:underline",children:"×¢×‘×•×¨ ×œ× ×™×”×•×œ ×ž×¨×›×–×™× â†"})]}),c.jsxs(ge,{to:"/admin/users",className:"group bg-white border p-6 rounded-2xl shadow-sm hover:border-blue-500 hover:shadow-md transition-all",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"ðŸ‘¥ × ×™×”×•×œ ×ž×©×ª×ž×©×™×"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"×¦×¤×™×™×” ×‘×›×œ ×”×ž×©×ª×ž×©×™× ×”×¨×©×•×ž×™× ×‘×ž×¢×¨×›×ª."}),c.jsx("span",{className:"mt-4 inline-block text-blue-600 font-semibold group-hover:underline",children:"×¢×‘×•×¨ ×œ× ×™×”×•×œ ×ž×©×ª×ž×©×™× â†"})]})]})]})]})}const QE={main_course:{text:"×ž× ×” ×¢×™×§×¨×™×ª",className:"bg-blue-100 text-blue-800"},side_dish:{text:"×ª×•×¡×¤×ª",className:"bg-green-100 text-green-800"},salad:{text:"×¡×œ×˜",className:"bg-teal-100 text-teal-800"},dessert:{text:"×§×™× ×•×—",className:"bg-pink-100 text-pink-800"},drink:{text:"×©×ª×™×”",className:"bg-indigo-100 text-indigo-800"}},qE={parve:{text:"×¤×¨×•×•×”",className:"bg-gray-100 text-gray-800"},dairy:{text:"×—×œ×‘×™",className:"bg-sky-100 text-sky-800"},meat:{text:"×‘×©×¨×™",className:"bg-red-100 text-red-800"}};function YE({product:e,onEdit:t,onDelete:n}){const r=QE[e.category]||{text:e.category},i=qE[e.kashrut]||{text:e.kashrut};return c.jsxs("div",{className:"flex items-start p-4 border-b border-gray-200 last:border-b-0 hover:bg-gray-50/50",children:[c.jsx("img",{src:e.image||"https://via.placeholder.com/150",alt:e.name,className:"w-20 h-20 object-cover rounded-md mr-4 flex-shrink-0"}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-bold text-gray-800",children:e.name}),c.jsxs("p",{className:"text-sm font-semibold text-gray-600",children:[e.price," â‚ª"]}),e.description&&c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.description}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${r.className}`,children:r.text}),c.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${i.className}`,children:i.text})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 flex-shrink-0",children:[c.jsx(oe,{variant:"outline",size:"sm",onClick:t,children:"×¢×¨×•×š"}),c.jsx(oe,{variant:"destructive",size:"sm",onClick:n,children:"×ž×—×§"})]})]})}const ln=({label:e,children:t})=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),t]});function KE({product:e,onSave:t,onCancel:n}){const[r,i]=p.useState({name:"",price:"",description:"",category:"main_course",kashrut:"parve",sku:"",unit:"×™×—×™×“×”"}),[l,s]=p.useState(null),[o,a]=p.useState(!1),u=!!(e!=null&&e._id);p.useEffect(()=>{e&&(i({name:e.name||"",price:e.price||"",description:e.description||"",category:e.category||"main_course",kashrut:e.kashrut||"parve",sku:e.sku||"",unit:e.unit||"×™×—×™×“×”"}),s(null))},[e]);const d=g=>i({...r,[g.target.name]:g.target.value}),f=g=>s(g.target.files[0]),h=async g=>{if(g.preventDefault(),!r.name||!r.price)return alert("×©× ×•×ž×—×™×¨ ×”× ×©×“×•×ª ×—×•×‘×”.");let v=(e==null?void 0:e.image)||"";if(l){a(!0);const w=new FormData;w.append("image",l);try{const{data:S}=await I.post("/api/upload",w,{withCredentials:!0});v=S.url}catch{alert("×©×’×™××” ×‘×”×¢×œ××ª ×”×ª×ž×•× ×”"),a(!1);return}finally{a(!1)}}t({...r,image:v})};return c.jsxs("form",{onSubmit:h,className:"space-y-5",children:[c.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800",children:u?"×¢×¨×™×›×ª ×ž×•×¦×¨":"×™×¦×™×¨×ª ×ž×•×¦×¨ ×—×“×©"}),c.jsx(ln,{label:"×©× ×”×ž×•×¦×¨",children:c.jsx("input",{name:"name",value:r.name,onChange:d,required:!0,className:"w-full border-gray-300 rounded-md shadow-sm px-3 py-2"})}),c.jsx(ln,{label:"×ª×™××•×¨ ×§×¦×¨ (××•×¤×¦×™×•× ×œ×™)",children:c.jsx("textarea",{name:"description",value:r.description,onChange:d,rows:"3",placeholder:"×œ×“×•×’×ž×”: ×§×¦×™×¦×•×ª ×“×’ ×¢×¡×™×¡×™×•×ª ×‘×¨×•×˜×‘ ××“×•× ×¤×™×§× ×˜×™",className:"w-full border-gray-300 rounded-md shadow-sm px-3 py-2"})}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(ln,{label:"×§×˜×’×•×¨×™×”",children:c.jsxs("select",{name:"category",value:r.category,onChange:d,className:"w-full border-gray-300 rounded-md shadow-sm px-3 py-2",children:[c.jsx("option",{value:"main_course",children:"×ž× ×” ×¢×™×§×¨×™×ª"}),c.jsx("option",{value:"side_dish",children:"×ª×•×¡×¤×ª"}),c.jsx("option",{value:"salad",children:"×¡×œ×˜"}),c.jsx("option",{value:"dessert",children:"×§×™× ×•×—"}),c.jsx("option",{value:"drink",children:"×©×ª×™×”"})]})}),c.jsx(ln,{label:"×›×©×¨×•×ª",children:c.jsxs("select",{name:"kashrut",value:r.kashrut,onChange:d,className:"w-full border-gray-300 rounded-md shadow-sm px-3 py-2",children:[c.jsx("option",{value:"parve",children:"×¤×¨×•×•×”"}),c.jsx("option",{value:"dairy",children:"×—×œ×‘×™"}),c.jsx("option",{value:"meat",children:"×‘×©×¨×™"})]})})]}),c.jsx(ln,{label:"×ž×§×´×˜ (××•×¤×¦×™×•× ×œ×™)",children:c.jsx("input",{name:"sku",value:r.sku,onChange:d,placeholder:"×œ×“×•×’×ž×”: PRD-001",className:"w-full border-gray-300 rounded-md shadow-sm px-3 py-2"})}),c.jsx(ln,{label:"×™×—×™×“×ª ×ž×™×“×”",children:c.jsx("input",{name:"unit",value:r.unit,onChange:d,placeholder:"×œ×“×•×’×ž×”: ×§×´×’, ×ž××¨×–, 100 ×’×¨×",className:"w-full border-gray-300 rounded-md shadow-sm px-3 py-2"})}),c.jsx(ln,{label:"×ž×—×™×¨ (×‘×©×´×—)",children:c.jsx("input",{name:"price",type:"number",value:r.price,onChange:d,required:!0,className:"w-full border-gray-300 rounded-md shadow-sm px-3 py-2"})}),c.jsxs(ln,{label:"×”×¢×œ×” ×ª×ž×•× ×”",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:f,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(e==null?void 0:e.image)&&!l&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"×ª×ž×•× ×” ×§×™×™×ž×ª. ×‘×—×¨ ×§×•×‘×¥ ×—×“×© ×›×“×™ ×œ×”×—×œ×™×£ ××•×ª×”."})]}),c.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[c.jsx(oe,{type:"button",variant:"ghost",onClick:n,children:"×‘×™×˜×•×œ"}),c.jsx(oe,{type:"submit",disabled:o,children:o?"×ž×¢×œ×” ×ª×ž×•× ×”...":"×©×ž×™×¨×”"})]})]})}const kg=({children:e,onClose:t,isOpen:n})=>n?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50",children:c.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-2xl shadow-2xl relative w-full max-w-lg mx-4",children:[c.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl leading-none",children:"Ã—"}),e]})}):null,GE=({onConfirm:e,onCancel:t,isOpen:n})=>n?c.jsxs(kg,{onClose:t,isOpen:n,children:[c.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"××™×©×•×¨ ×ž×—×™×§×”"}),c.jsx("p",{className:"text-gray-600",children:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×ž×—×•×§ ××ª ×”×ž×•×¦×¨? ×œ× × ×™×ª×Ÿ ×œ×©×—×–×¨ ×¤×¢×•×œ×” ×–×•."}),c.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[c.jsx(oe,{variant:"outline",onClick:t,children:"×‘×™×˜×•×œ"}),c.jsx(oe,{variant:"destructive",onClick:e,children:"×›×Ÿ, ×× ×™ ×‘×˜×•×—"})]})]}):null;function XE(){const[e,t]=p.useState([]),[n,r]=p.useState(null),[i,l]=p.useState(null),[s,o]=p.useState(!0),[a,u]=p.useState(null),d=async()=>{try{o(!0),u(null);const{data:g}=await I.get("/api/admin/products",{withCredentials:!0});t(g)}catch(g){u("×©×’×™××” ×‘×˜×¢×™× ×ª ×”×ž×•×¦×¨×™×."),console.error(g)}finally{o(!1)}};p.useEffect(()=>{d()},[]);const f=async g=>{const v=!!(n!=null&&n._id),w=v?`/api/admin/products/${n._id}`:"/api/admin/products",S=v?"put":"post";try{const{data:y}=await I[S](w,g,{withCredentials:!0});t(v?m=>m.map(x=>x._id===y._id?y:x):m=>[y,...m]),r(null)}catch{u("×©×’×™××” ×‘×©×ž×™×¨×ª ×”×ž×•×¦×¨.")}},h=async()=>{if(i)try{await I.delete(`/api/admin/products/${i._id}`,{withCredentials:!0}),t(g=>g.filter(v=>v._id!==i._id))}catch{u("×©×’×™××” ×‘×ž×—×™×§×ª ×”×ž×•×¦×¨.")}finally{l(null)}};return c.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-8",children:[c.jsxs("header",{className:"flex justify-between items-center gap-4",children:[c.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"ðŸ“¦ × ×™×”×•×œ ×ž×•×¦×¨×™×"}),c.jsx(oe,{onClick:()=>r({}),children:"+ ×”×•×¡×£ ×ž×•×¦×¨ ×—×“×©"})]}),a&&c.jsx("p",{className:"text-red-600 bg-red-100 p-4 rounded-lg",children:a}),c.jsx("main",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:s?c.jsx("p",{className:"p-8 text-center text-gray-500",children:"×˜×•×¢×Ÿ ×ž×•×¦×¨×™×..."}):e.length>0?e.map(g=>c.jsx(YE,{product:g,onEdit:()=>r(g),onDelete:()=>l(g)},g._id)):c.jsx("p",{className:"p-8 text-center text-gray-500",children:"×¢×“×™×™×Ÿ ×œ× ×”×•×¡×¤×ª ×ž×•×¦×¨×™×. ×œ×—×¥ ×¢×œ '×”×•×¡×£ ×ž×•×¦×¨ ×—×“×©' ×›×“×™ ×œ×”×ª×—×™×œ."})}),c.jsx(kg,{isOpen:!!n,onClose:()=>r(null),children:c.jsx(KE,{product:n||{},onSave:f,onCancel:()=>r(null)})}),c.jsx(GE,{isOpen:!!i,onConfirm:h,onCancel:()=>l(null)})]})}function Bs(e){"@babel/helpers - typeof";return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bs(e)}function gr(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function De(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Ot(e){De(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Bs(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function JE(e,t){De(2,arguments);var n=Ot(e).getTime(),r=gr(t);return new Date(n+r)}var ZE={};function No(){return ZE}function eC(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function tC(e){return De(1,arguments),e instanceof Date||Bs(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function nC(e){if(De(1,arguments),!tC(e)&&typeof e!="number")return!1;var t=Ot(e);return!isNaN(Number(t))}function rC(e,t){De(2,arguments);var n=gr(t);return JE(e,-n)}var iC=864e5;function lC(e){De(1,arguments);var t=Ot(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=n-r;return Math.floor(i/iC)+1}function Ws(e){De(1,arguments);var t=1,n=Ot(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Ng(e){De(1,arguments);var t=Ot(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Ws(r),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var s=Ws(l);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function sC(e){De(1,arguments);var t=Ng(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=Ws(n);return r}var oC=6048e5;function aC(e){De(1,arguments);var t=Ot(e),n=Ws(t).getTime()-sC(t).getTime();return Math.round(n/oC)+1}function Hs(e,t){var n,r,i,l,s,o,a,u;De(1,arguments);var d=No(),f=gr((n=(r=(i=(l=t==null?void 0:t.weekStartsOn)!==null&&l!==void 0?l:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&r!==void 0?r:(a=d.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Ot(e),g=h.getUTCDay(),v=(g<f?7:0)+g-f;return h.setUTCDate(h.getUTCDate()-v),h.setUTCHours(0,0,0,0),h}function jg(e,t){var n,r,i,l,s,o,a,u;De(1,arguments);var d=Ot(e),f=d.getUTCFullYear(),h=No(),g=gr((n=(r=(i=(l=t==null?void 0:t.firstWeekContainsDate)!==null&&l!==void 0?l:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(a=h.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setUTCFullYear(f+1,0,g),v.setUTCHours(0,0,0,0);var w=Hs(v,t),S=new Date(0);S.setUTCFullYear(f,0,g),S.setUTCHours(0,0,0,0);var y=Hs(S,t);return d.getTime()>=w.getTime()?f+1:d.getTime()>=y.getTime()?f:f-1}function uC(e,t){var n,r,i,l,s,o,a,u;De(1,arguments);var d=No(),f=gr((n=(r=(i=(l=t==null?void 0:t.firstWeekContainsDate)!==null&&l!==void 0?l:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(a=d.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=jg(e,t),g=new Date(0);g.setUTCFullYear(h,0,f),g.setUTCHours(0,0,0,0);var v=Hs(g,t);return v}var cC=6048e5;function dC(e,t){De(1,arguments);var n=Ot(e),r=Hs(n,t).getTime()-uC(n,t).getTime();return Math.round(r/cC)+1}function Q(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var sn={y:function(t,n){var r=t.getUTCFullYear(),i=r>0?r:1-r;return Q(n==="yy"?i%100:i,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):Q(r+1,2)},d:function(t,n){return Q(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return Q(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Q(t.getUTCHours(),n.length)},m:function(t,n){return Q(t.getUTCMinutes(),n.length)},s:function(t,n){return Q(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,i=t.getUTCMilliseconds(),l=Math.floor(i*Math.pow(10,r-3));return Q(l,n.length)}},Cr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fC={G:function(t,n,r){var i=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var i=t.getUTCFullYear(),l=i>0?i:1-i;return r.ordinalNumber(l,{unit:"year"})}return sn.y(t,n)},Y:function(t,n,r,i){var l=jg(t,i),s=l>0?l:1-l;if(n==="YY"){var o=s%100;return Q(o,2)}return n==="Yo"?r.ordinalNumber(s,{unit:"year"}):Q(s,n.length)},R:function(t,n){var r=Ng(t);return Q(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return Q(r,n.length)},Q:function(t,n,r){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return Q(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,n,r){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return Q(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,n,r){var i=t.getUTCMonth();switch(n){case"M":case"MM":return sn.M(t,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(t,n,r){var i=t.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return Q(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(t,n,r,i){var l=dC(t,i);return n==="wo"?r.ordinalNumber(l,{unit:"week"}):Q(l,n.length)},I:function(t,n,r){var i=aC(t);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):Q(i,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):sn.d(t,n)},D:function(t,n,r){var i=lC(t);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Q(i,n.length)},E:function(t,n,r){var i=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(t,n,r,i){var l=t.getUTCDay(),s=(l-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(s);case"ee":return Q(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(t,n,r,i){var l=t.getUTCDay(),s=(l-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(s);case"cc":return Q(s,n.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(t,n,r){var i=t.getUTCDay(),l=i===0?7:i;switch(n){case"i":return String(l);case"ii":return Q(l,n.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(t,n,r){var i=t.getUTCHours(),l=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(t,n,r){var i=t.getUTCHours(),l;switch(i===12?l=Cr.noon:i===0?l=Cr.midnight:l=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(t,n,r){var i=t.getUTCHours(),l;switch(i>=17?l=Cr.evening:i>=12?l=Cr.afternoon:i>=4?l=Cr.morning:l=Cr.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var i=t.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return sn.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):sn.H(t,n)},K:function(t,n,r){var i=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Q(i,n.length)},k:function(t,n,r){var i=t.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):Q(i,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):sn.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):sn.s(t,n)},S:function(t,n){return sn.S(t,n)},X:function(t,n,r,i){var l=i._originalDate||t,s=l.getTimezoneOffset();if(s===0)return"Z";switch(n){case"X":return Mf(s);case"XXXX":case"XX":return Vn(s);case"XXXXX":case"XXX":default:return Vn(s,":")}},x:function(t,n,r,i){var l=i._originalDate||t,s=l.getTimezoneOffset();switch(n){case"x":return Mf(s);case"xxxx":case"xx":return Vn(s);case"xxxxx":case"xxx":default:return Vn(s,":")}},O:function(t,n,r,i){var l=i._originalDate||t,s=l.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Lf(s,":");case"OOOO":default:return"GMT"+Vn(s,":")}},z:function(t,n,r,i){var l=i._originalDate||t,s=l.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Lf(s,":");case"zzzz":default:return"GMT"+Vn(s,":")}},t:function(t,n,r,i){var l=i._originalDate||t,s=Math.floor(l.getTime()/1e3);return Q(s,n.length)},T:function(t,n,r,i){var l=i._originalDate||t,s=l.getTime();return Q(s,n.length)}};function Lf(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),l=r%60;if(l===0)return n+String(i);var s=t;return n+String(i)+s+Q(l,2)}function Mf(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Q(Math.abs(e)/60,2)}return Vn(e,t)}function Vn(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e),l=Q(Math.floor(i/60),2),s=Q(i%60,2);return r+l+n+s}var Af=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},bg=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},hC=function(t,n){var r=t.match(/(P+)(p+)?/)||[],i=r[1],l=r[2];if(!l)return Af(t,n);var s;switch(i){case"P":s=n.dateTime({width:"short"});break;case"PP":s=n.dateTime({width:"medium"});break;case"PPP":s=n.dateTime({width:"long"});break;case"PPPP":default:s=n.dateTime({width:"full"});break}return s.replace("{{date}}",Af(i,n)).replace("{{time}}",bg(l,n))},pC={p:bg,P:hC},mC=["D","DD"],gC=["YY","YYYY"];function vC(e){return mC.indexOf(e)!==-1}function yC(e){return gC.indexOf(e)!==-1}function Uf(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var xC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wC=function(t,n,r){var i,l=xC[t];return typeof l=="string"?i=l:n===1?i=l.one:i=l.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function ga(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var SC={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},EC={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},CC={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kC={date:ga({formats:SC,defaultWidth:"full"}),time:ga({formats:EC,defaultWidth:"full"}),dateTime:ga({formats:CC,defaultWidth:"full"})},NC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jC=function(t,n,r,i){return NC[t]};function ki(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&e.formattingValues){var l=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):l;i=e.formattingValues[s]||e.formattingValues[l]}else{var o=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[a]||e.values[o]}var u=e.argumentCallback?e.argumentCallback(t):t;return i[u]}}var bC={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},PC={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},OC={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},TC={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},RC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_C={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$C=function(t,n){var r=Number(t),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},DC={ordinalNumber:$C,era:ki({values:bC,defaultWidth:"wide"}),quarter:ki({values:PC,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ki({values:OC,defaultWidth:"wide"}),day:ki({values:TC,defaultWidth:"wide"}),dayPeriod:ki({values:RC,defaultWidth:"wide",formattingValues:_C,defaultFormattingWidth:"wide"})};function Ni(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],l=t.match(i);if(!l)return null;var s=l[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],a=Array.isArray(o)?LC(o,function(f){return f.test(s)}):FC(o,function(f){return f.test(s)}),u;u=e.valueCallback?e.valueCallback(a):a,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(s.length);return{value:u,rest:d}}}function FC(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function LC(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function MC(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var i=r[0],l=t.match(e.parsePattern);if(!l)return null;var s=e.valueCallback?e.valueCallback(l[0]):l[0];s=n.valueCallback?n.valueCallback(s):s;var o=t.slice(i.length);return{value:s,rest:o}}}var AC=/^(\d+)(th|st|nd|rd)?/i,UC=/\d+/i,IC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zC={any:[/^b/i,/^(a|c)/i]},BC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},WC={any:[/1/i,/2/i,/3/i,/4/i]},HC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},QC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},YC={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},KC={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},GC={ordinalNumber:MC({matchPattern:AC,parsePattern:UC,valueCallback:function(t){return parseInt(t,10)}}),era:Ni({matchPatterns:IC,defaultMatchWidth:"wide",parsePatterns:zC,defaultParseWidth:"any"}),quarter:Ni({matchPatterns:BC,defaultMatchWidth:"wide",parsePatterns:WC,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ni({matchPatterns:HC,defaultMatchWidth:"wide",parsePatterns:VC,defaultParseWidth:"any"}),day:Ni({matchPatterns:QC,defaultMatchWidth:"wide",parsePatterns:qC,defaultParseWidth:"any"}),dayPeriod:Ni({matchPatterns:YC,defaultMatchWidth:"any",parsePatterns:KC,defaultParseWidth:"any"})},XC={code:"en-US",formatDistance:wC,formatLong:kC,formatRelative:jC,localize:DC,match:GC,options:{weekStartsOn:0,firstWeekContainsDate:1}},JC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ZC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ek=/^'([^]*?)'?$/,tk=/''/g,nk=/[a-zA-Z]/;function rk(e,t,n){var r,i,l,s,o,a,u,d,f,h,g,v,w,S;De(2,arguments);var y=String(t),m=No(),x=(r=(i=void 0)!==null&&i!==void 0?i:m.locale)!==null&&r!==void 0?r:XC,E=gr((l=(s=(o=(a=void 0)!==null&&a!==void 0?a:void 0)!==null&&o!==void 0?o:m.firstWeekContainsDate)!==null&&s!==void 0?s:(u=m.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var N=gr((f=(h=(g=(v=void 0)!==null&&v!==void 0?v:void 0)!==null&&g!==void 0?g:m.weekStartsOn)!==null&&h!==void 0?h:(w=m.locale)===null||w===void 0||(S=w.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&f!==void 0?f:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var j=Ot(e);if(!nC(j))throw new RangeError("Invalid time value");var P=eC(j),O=rC(j,P),$={firstWeekContainsDate:E,weekStartsOn:N,locale:x,_originalDate:j},_=y.match(ZC).map(function(U){var ue=U[0];if(ue==="p"||ue==="P"){var re=pC[ue];return re(U,x.formatLong)}return U}).join("").match(JC).map(function(U){if(U==="''")return"'";var ue=U[0];if(ue==="'")return ik(U);var re=fC[ue];if(re)return yC(U)&&Uf(U,t,String(e)),vC(U)&&Uf(U,t,String(e)),re(O,U,x.localize,$);if(ue.match(nk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ue+"`");return U}).join("");return _}function ik(e){var t=e.match(ek);return t?t[1].replace(tk,"'"):e}function lk({order:e}){var t;return c.jsxs("div",{className:"grid grid-cols-5 gap-4 px-4 py-3 border-b hover:bg-gray-50 text-sm",children:[c.jsx("span",{className:"font-mono",children:e._id.slice(-6)}),c.jsx("span",{children:((t=e.customer)==null?void 0:t.email)||"â€”"}),c.jsx("span",{children:e.items.length}),c.jsxs("span",{children:[e.total.toFixed(2)," â‚ª"]}),c.jsx("span",{children:rk(new Date(e.createdAt),"dd/MM/yyyy HH:mm")})]})}const If={new:{text:"×—×“×©×”",color:"bg-blue-100 text-blue-800"},processing:{text:"×‘×˜×™×¤×•×œ",color:"bg-yellow-100 text-yellow-800"},shipped:{text:"× ×©×œ×—×”",color:"bg-purple-100 text-purple-800"},delivered:{text:"×”×’×™×¢×” ×œ×™×¢×“",color:"bg-green-100 text-green-800"},cancelled:{text:"×‘×•×˜×œ×”",color:"bg-red-100 text-red-800"}};function sk(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[i,l]=p.useState(null),[s,o]=p.useState("all");p.useEffect(()=>{(async()=>{try{r(!0),l(null);const{data:h}=await I.get("/api/admin/orders",{withCredentials:!0});t(h.sort((g,v)=>new Date(v.createdAt)-new Date(g.createdAt)))}catch(h){l("×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×–×ž× ×•×ª."),console.error(h)}finally{r(!1)}})()},[]);const a=p.useMemo(()=>s==="all"?e:e.filter(f=>f.status===s),[e,s]),u=p.useMemo(()=>({total:e.length,new:e.filter(f=>f.status==="new").length,processing:e.filter(f=>f.status==="processing").length}),[e]),d=(f,h)=>{t(g=>g.map(v=>v._id===f?{...v,status:h}:v))};return c.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-8",children:[c.jsxs("header",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ðŸ§¾ × ×™×”×•×œ ×”×–×ž× ×•×ª"}),c.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"×¦×¤×™×™×” ×•×˜×™×¤×•×œ ×‘×”×–×ž× ×•×ª ×©×”×ª×§×‘×œ×• ×ž×”×œ×§×•×—×•×ª."})]}),c.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl border shadow-sm",children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:'×¡×”"×› ×”×–×ž× ×•×ª'}),c.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:u.total})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl border shadow-sm",children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"×”×–×ž× ×•×ª ×—×“×©×•×ª"}),c.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:u.new})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl border shadow-sm",children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"×”×–×ž× ×•×ª ×‘×˜×™×¤×•×œ"}),c.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-1",children:u.processing})]})]}),c.jsxs("main",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(oe,{variant:s==="all"?"default":"outline",onClick:()=>o("all"),children:"×›×œ ×”×”×–×ž× ×•×ª"}),Object.entries(If).map(([f,{text:h}])=>c.jsx(oe,{variant:s===f?"default":"outline",onClick:()=>o(f),children:h},f))]}),c.jsxs("div",{className:"bg-white rounded-2xl border shadow-sm overflow-hidden",children:[n&&c.jsx("p",{className:"p-8 text-center text-gray-500",children:"×˜×•×¢×Ÿ ×”×–×ž× ×•×ª..."}),i&&c.jsx("p",{className:"p-8 text-center text-red-500",children:i}),!n&&!i&&(a.length>0?a.map(f=>c.jsx(lk,{order:f,statuses:If,onUpdateStatus:d},f._id)):c.jsx("p",{className:"p-8 text-center text-gray-500",children:"×œ× × ×ž×¦××• ×”×–×ž× ×•×ª ×”×ª×•××ž×•×ª ×œ×¡×™× ×•×Ÿ."}))]})]})]})}function ok({center:e,onDelete:t}){return c.jsxs("div",{className:"flex items-center gap-4 px-4 py-3 border-b hover:bg-gray-50",children:[c.jsx("span",{className:"flex-1",children:e.name}),c.jsx("button",{onClick:t,className:"text-red-600 text-lg","aria-label":"×ž×—×§ ×ž×¨×›×–",title:"×ž×—×§",children:"ðŸ—‘ï¸"})]})}function ak(){const[e,t]=p.useState([]),[n,r]=p.useState(""),i=()=>I.get("/api/admin/centers",{withCredentials:!0}).then(({data:s})=>t(s));p.useEffect(()=>{i()},[]);const l=async()=>{n&&(await I.post("/api/admin/centers",{name:n},{withCredentials:!0}),r(""),i())};return c.jsxs("section",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"×ž×¨×›×–×™ ×—×œ×•×§×”"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{value:n,onChange:s=>r(s.target.value),placeholder:"×©× ×ž×¨×›×–",className:"input flex-1"}),c.jsx(oe,{onClick:l,children:"×”×•×¡×£"})]}),c.jsx("div",{className:"rounded-2xl border overflow-hidden",children:e.map(s=>c.jsx(ok,{center:s,onDelete:async()=>{await I.delete(`/api/admin/centers/${s._id}`,{withCredentials:!0}),i()}},s._id))})]})}function uk(){const[e,t]=p.useState([]),n=()=>I.get("/api/admin/users",{withCredentials:!0}).then(({data:l})=>t(l));p.useEffect(()=>{n()},[]);const r=async l=>{const s=l.role==="admin"?"user":"admin";await I.put(`/api/admin/users/${l._id}`,{role:s},{withCredentials:!0}),n()},i=async l=>{window.confirm(`×œ×ž×—×•×§ ×ž×©×ª×ž×© ${l.email}?`)&&(await I.delete(`/api/admin/users/${l._id}`,{withCredentials:!0}),n())};return c.jsxs("section",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"ðŸ‘¥ × ×™×”×•×œ ×ž×©×ª×ž×©×™×"}),c.jsxs("div",{className:"rounded-2xl border overflow-hidden",children:[e.map(l=>c.jsxs("div",{className:"flex items-center gap-4 px-4 py-3 border-b text-sm hover:bg-gray-50",children:[c.jsx("span",{className:"flex-1 truncate",children:l.email}),c.jsx("span",{className:"w-20 text-center",children:l.role}),c.jsx(oe,{variant:"ghost",onClick:()=>r(l),children:l.role==="admin"?"×”×¤×•×š ×œÖ¾user":"×”×¤×•×š ×œÖ¾admin"}),c.jsx(oe,{variant:"destructive",onClick:()=>i(l),children:"ðŸ—‘ï¸"})]},l._id)),e.length===0&&c.jsx("p",{className:"text-center text-gray-500 py-10",children:"××™×Ÿ ×ž×©×ª×ž×©×™×"})]})]})}const ck=()=>c.jsxs("div",{className:"text-center flex flex-col items-center justify-center h-full",children:[c.jsx("h1",{className:"text-6xl font-bold text-amber-600",children:"404"}),c.jsx("p",{className:"text-2xl mt-4 mb-8",children:"××•×¤×¡! ×”×¢×ž×•×“ ×©×—×™×¤×©×ª ×œ× × ×ž×¦×."}),c.jsx(oe,{asChild:!0,children:c.jsx(ge,{to:"/",children:"×—×–×•×¨ ×œ×“×£ ×”×‘×™×ª"})})]});var dk=Object.defineProperty,fk=(e,t,n)=>t in e?dk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,va=(e,t,n)=>(fk(e,typeof t!="symbol"?t+"":t,n),n);let hk=class{constructor(){va(this,"current",this.detect()),va(this,"handoffState","pending"),va(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ur=new hk;function jo(e){var t,n;return ur.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?(n=(t=e.current)==null?void 0:t.ownerDocument)!=null?n:document:null:document}function bo(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function en(){let e=[],t={addEventListener(n,r,i,l){return n.addEventListener(r,i,l),t.add(()=>n.removeEventListener(r,i,l))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return bo(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let l=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:l})})},group(n){let r=en();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function Ac(){let[e]=p.useState(en);return p.useEffect(()=>()=>e.dispose(),[e]),e}let Ne=(e,t)=>{ur.isServer?p.useEffect(e,t):p.useLayoutEffect(e,t)};function Sr(e){let t=p.useRef(e);return Ne(()=>{t.current=e},[e]),t}let Y=function(e){let t=Sr(e);return F.useCallback((...n)=>t.current(...n),[t])},pk=p.createContext(void 0);function mk(){return p.useContext(pk)}function Ou(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Yt(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Yt),r}var Vs=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Vs||{}),En=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(En||{});function lt(){let e=vk();return p.useCallback(t=>gk({mergeRefs:e,...t}),[e])}function gk({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:l=!0,name:s,mergeRefs:o}){o=o??yk;let a=Pg(t,e);if(l)return Yl(a,n,r,s,o);let u=i??0;if(u&2){let{static:d=!1,...f}=a;if(d)return Yl(f,n,r,s,o)}if(u&1){let{unmount:d=!0,...f}=a;return Yt(d?0:1,{0(){return null},1(){return Yl({...f,hidden:!0,style:{display:"none"}},n,r,s,o)}})}return Yl(a,n,r,s,o)}function Yl(e,t={},n,r,i){let{as:l=n,children:s,refName:o="ref",...a}=ya(e,["unmount","static"]),u=e.ref!==void 0?{[o]:e.ref}:{},d=typeof s=="function"?s(t):s;"className"in a&&a.className&&typeof a.className=="function"&&(a.className=a.className(t)),a["aria-labelledby"]&&a["aria-labelledby"]===a.id&&(a["aria-labelledby"]=void 0);let f={};if(t){let h=!1,g=[];for(let[v,w]of Object.entries(t))typeof w=="boolean"&&(h=!0),w===!0&&g.push(v.replace(/([A-Z])/g,S=>`-${S.toLowerCase()}`));if(h){f["data-headlessui-state"]=g.join(" ");for(let v of g)f[`data-${v}`]=""}}if(l===p.Fragment&&(Object.keys(Qn(a)).length>0||Object.keys(Qn(f)).length>0))if(!p.isValidElement(d)||Array.isArray(d)&&d.length>1){if(Object.keys(Qn(a)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Qn(a)).concat(Object.keys(Qn(f))).map(h=>`  - ${h}`).join(`
        `),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
        `)].join(`
        `))}else{let h=d.props,g=h==null?void 0:h.className,v=typeof g=="function"?(...y)=>Ou(g(...y),a.className):Ou(g,a.className),w=v?{className:v}:{},S=Pg(d.props,Qn(ya(a,["ref"])));for(let y in f)y in S&&delete f[y];return p.cloneElement(d,Object.assign({},S,f,u,{ref:i(xk(d),u.ref)},w))}return p.createElement(l,Object.assign({},ya(a,["ref"]),l!==p.Fragment&&u,l!==p.Fragment&&f),d)}function vk(){let e=p.useRef([]),t=p.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function yk(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Pg(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var l;return(l=i==null?void 0:i.preventDefault)==null?void 0:l.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...l){let s=n[r];for(let o of s){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;o(i,...l)}}});return t}function We(e){var t;return Object.assign(p.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Qn(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function ya(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function xk(e){return F.version.split(".")[0]>="19"?e.props.ref:e.ref}let wk="span";var Qs=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Qs||{});function Sk(e,t){var n;let{features:r=1,...i}=e,l={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return lt()({ourProps:l,theirProps:i,slot:{},defaultTag:wk,name:"Hidden"})}let Tu=We(Sk);function Og(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function Dn(e){return Og(e)&&"tagName"in e}function vr(e){return Dn(e)&&"accessKey"in e}function Cn(e){return Dn(e)&&"tabIndex"in e}function Ek(e){return Dn(e)&&"style"in e}function Ck(e){return vr(e)&&e.nodeName==="IFRAME"}function kk(e){return vr(e)&&e.nodeName==="INPUT"}let Tg=Symbol();function Nk(e,t=!0){return Object.assign(e,{[Tg]:t})}function Tt(...e){let t=p.useRef(e);p.useEffect(()=>{t.current=e},[e]);let n=Y(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[Tg]))?void 0:n}let Uc=p.createContext(null);Uc.displayName="DescriptionContext";function Rg(){let e=p.useContext(Uc);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Rg),t}return e}function jk(){let[e,t]=p.useState([]);return[e.length>0?e.join(" "):void 0,p.useMemo(()=>function(n){let r=Y(l=>(t(s=>[...s,l]),()=>t(s=>{let o=s.slice(),a=o.indexOf(l);return a!==-1&&o.splice(a,1),o}))),i=p.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return F.createElement(Uc.Provider,{value:i},n.children)},[t])]}let bk="p";function Pk(e,t){let n=p.useId(),r=mk(),{id:i=`headlessui-description-${n}`,...l}=e,s=Rg(),o=Tt(t);Ne(()=>s.register(i),[i,s.register]);let a=r||!1,u=p.useMemo(()=>({...s.slot,disabled:a}),[s.slot,a]),d={ref:o,...s.props,id:i};return lt()({ourProps:d,theirProps:l,slot:u,defaultTag:bk,name:s.name||"Description"})}let Ok=We(Pk),Tk=Object.assign(Ok,{});var _g=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(_g||{});let Rk=p.createContext(()=>{});function _k({value:e,children:t}){return F.createElement(Rk.Provider,{value:e},t)}let $g=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var $k=Object.defineProperty,Dk=(e,t,n)=>t in e?$k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fk=(e,t,n)=>(Dk(e,t+"",n),n),Dg=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Xe=(e,t,n)=>(Dg(e,t,"read from private field"),n?n.call(e):t.get(e)),xa=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},zf=(e,t,n,r)=>(Dg(e,t,"write to private field"),t.set(e,n),n),St,Ti,Ri;let Lk=class{constructor(t){xa(this,St,{}),xa(this,Ti,new $g(()=>new Set)),xa(this,Ri,new Set),Fk(this,"disposables",en()),zf(this,St,t)}dispose(){this.disposables.dispose()}get state(){return Xe(this,St)}subscribe(t,n){let r={selector:t,callback:n,current:t(Xe(this,St))};return Xe(this,Ri).add(r),this.disposables.add(()=>{Xe(this,Ri).delete(r)})}on(t,n){return Xe(this,Ti).get(t).add(n),this.disposables.add(()=>{Xe(this,Ti).get(t).delete(n)})}send(t){let n=this.reduce(Xe(this,St),t);if(n!==Xe(this,St)){zf(this,St,n);for(let r of Xe(this,Ri)){let i=r.selector(Xe(this,St));Fg(r.current,i)||(r.current=i,r.callback(i))}for(let r of Xe(this,Ti).get(t.type))r(Xe(this,St),t)}}};St=new WeakMap,Ti=new WeakMap,Ri=new WeakMap;function Fg(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:wa(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:wa(e.entries(),t.entries()):Bf(e)&&Bf(t)?wa(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function wa(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Bf(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var Mk=Object.defineProperty,Ak=(e,t,n)=>t in e?Mk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wf=(e,t,n)=>(Ak(e,typeof t!="symbol"?t+"":t,n),n),Uk=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Uk||{});let Ik={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(i!==-1){let l=e.stack.slice();return l.splice(i,1),l.push(n),r=l,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},zk=class Lg extends Lk{constructor(){super(...arguments),Wf(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Wf(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new Lg({stack:[]})}reduce(t,n){return Yt(n.type,Ik,t,n)}};const Mg=new $g(()=>zk.new());var Ag={exports:{}},Ug={};/**
         * @license React
         * use-sync-external-store-with-selector.production.js
         *
         * Copyright (c) Meta Platforms, Inc. and affiliates.
         *
         * This source code is licensed under the MIT license found in the
         * LICENSE file in the root directory of this source tree.
         */var Cl=p;function Bk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wk=typeof Object.is=="function"?Object.is:Bk,Hk=Cl.useSyncExternalStore,Vk=Cl.useRef,Qk=Cl.useEffect,qk=Cl.useMemo,Yk=Cl.useDebugValue;Ug.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var l=Vk(null);if(l.current===null){var s={hasValue:!1,value:null};l.current=s}else s=l.current;l=qk(function(){function a(g){if(!u){if(u=!0,d=g,g=r(g),i!==void 0&&s.hasValue){var v=s.value;if(i(v,g))return f=v}return f=g}if(v=f,Wk(d,g))return v;var w=r(g);return i!==void 0&&i(v,w)?(d=g,v):(d=g,f=w)}var u=!1,d,f,h=n===void 0?null:n;return[function(){return a(t())},h===null?void 0:function(){return a(h())}]},[t,n,r,i]);var o=Hk(e,l[0],l[1]);return Qk(function(){s.hasValue=!0,s.value=o},[o]),Yk(o),o};Ag.exports=Ug;var Kk=Ag.exports;function Ig(e,t,n=Fg){return Kk.useSyncExternalStoreWithSelector(Y(r=>e.subscribe(Gk,r)),Y(()=>e.state),Y(()=>e.state),Y(t),n)}function Gk(e){return e}function kl(e,t){let n=p.useId(),r=Mg.get(t),[i,l]=Ig(r,p.useCallback(s=>[r.selectors.isTop(s,n),r.selectors.inStack(s,n)],[r,n]));return Ne(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?l?i:!0:!1}let Ru=new Map,Wi=new Map;function Hf(e){var t;let n=(t=Wi.get(e))!=null?t:0;return Wi.set(e,n+1),n!==0?()=>Vf(e):(Ru.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Vf(e))}function Vf(e){var t;let n=(t=Wi.get(e))!=null?t:1;if(n===1?Wi.delete(e):Wi.set(e,n-1),n!==1)return;let r=Ru.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Ru.delete(e))}function Xk(e,{allowed:t,disallowed:n}={}){let r=kl(e,"inert-others");Ne(()=>{var i,l;if(!r)return;let s=en();for(let a of(i=n==null?void 0:n())!=null?i:[])a&&s.add(Hf(a));let o=(l=t==null?void 0:t())!=null?l:[];for(let a of o){if(!a)continue;let u=jo(a);if(!u)continue;let d=a.parentElement;for(;d&&d!==u.body;){for(let f of d.children)o.some(h=>f.contains(h))||s.add(Hf(f));d=d.parentElement}}return s.dispose},[r,t,n])}function Jk(e,t,n){let r=Sr(i=>{let l=i.getBoundingClientRect();l.x===0&&l.y===0&&l.width===0&&l.height===0&&n()});p.useEffect(()=>{if(!e)return;let i=t===null?null:vr(t)?t:t.current;if(!i)return;let l=en();if(typeof ResizeObserver<"u"){let s=new ResizeObserver(()=>r.current(i));s.observe(i),l.add(()=>s.disconnect())}if(typeof IntersectionObserver<"u"){let s=new IntersectionObserver(()=>r.current(i));s.observe(i),l.add(()=>s.disconnect())}return()=>l.dispose()},[t,r,e])}let qs=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Zk=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var At=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(At||{}),_u=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(_u||{}),eN=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(eN||{});function tN(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(qs)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function nN(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Zk)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var zg=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(zg||{});function rN(e,t=0){var n;return e===((n=jo(e))==null?void 0:n.body)?!1:Yt(t,{0(){return e.matches(qs)},1(){let r=e;for(;r!==null;){if(r.matches(qs))return!0;r=r.parentElement}return!1}})}var iN=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(iN||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Bt(e){e==null||e.focus({preventScroll:!0})}let lN=["textarea","input"].join(",");function sN(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,lN))!=null?n:!1}function oN(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),l=t(r);if(i===null||l===null)return 0;let s=i.compareDocumentPosition(l);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Hi(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,s=Array.isArray(e)?n?oN(e):e:t&64?nN(e):tN(e);i.length>0&&s.length>1&&(s=s.filter(g=>!i.some(v=>v!=null&&"current"in v?(v==null?void 0:v.current)===g:v===g))),r=r??l.activeElement;let o=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(r))-1;if(t&4)return Math.max(0,s.indexOf(r))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,f=s.length,h;do{if(d>=f||d+f<=0)return 0;let g=a+d;if(t&16)g=(g+f)%f;else{if(g<0)return 3;if(g>=f)return 1}h=s[g],h==null||h.focus(u),d+=o}while(h!==l.activeElement);return t&6&&sN(h)&&h.select(),2}function Bg(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function aN(){return/Android/gi.test(window.navigator.userAgent)}function Qf(){return Bg()||aN()}function Kl(e,t,n,r){let i=Sr(n);p.useEffect(()=>{if(!e)return;function l(s){i.current(s)}return document.addEventListener(t,l,r),()=>document.removeEventListener(t,l,r)},[e,t,r])}function Wg(e,t,n,r){let i=Sr(n);p.useEffect(()=>{if(!e)return;function l(s){i.current(s)}return window.addEventListener(t,l,r),()=>window.removeEventListener(t,l,r)},[e,t,r])}const qf=30;function uN(e,t,n){let r=Sr(n),i=p.useCallback(function(o,a){if(o.defaultPrevented)return;let u=a(o);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function f(h){return typeof h=="function"?f(h()):Array.isArray(h)||h instanceof Set?h:[h]}(t);for(let f of d)if(f!==null&&(f.contains(u)||o.composed&&o.composedPath().includes(f)))return;return!rN(u,zg.Loose)&&u.tabIndex!==-1&&o.preventDefault(),r.current(o,u)},[r,t]),l=p.useRef(null);Kl(e,"pointerdown",o=>{var a,u;Qf()||(l.current=((u=(a=o.composedPath)==null?void 0:a.call(o))==null?void 0:u[0])||o.target)},!0),Kl(e,"pointerup",o=>{if(Qf()||!l.current)return;let a=l.current;return l.current=null,i(o,()=>a)},!0);let s=p.useRef({x:0,y:0});Kl(e,"touchstart",o=>{s.current.x=o.touches[0].clientX,s.current.y=o.touches[0].clientY},!0),Kl(e,"touchend",o=>{let a={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(a.x-s.current.x)>=qf||Math.abs(a.y-s.current.y)>=qf))return i(o,()=>Cn(o.target)?o.target:null)},!0),Wg(e,"blur",o=>i(o,()=>Ck(window.document.activeElement)?window.document.activeElement:null),!0)}function Po(...e){return p.useMemo(()=>jo(...e),[...e])}function Hg(e,t,n,r){let i=Sr(n);p.useEffect(()=>{e=e??window;function l(s){i.current(s)}return e.addEventListener(t,l,r),()=>e.removeEventListener(t,l,r)},[e,t,r])}function cN(e){return p.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function dN(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...l){let s=t[i].call(n,...l);s&&(n=s,r.forEach(o=>o()))}}}function fN(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),l=Math.max(0,e-i);n.style(r,"paddingRight",`${l}px`)}}}function hN(){return Bg()?{before({doc:e,d:t,meta:n}){function r(i){return n.containers.flatMap(l=>l()).some(l=>l.contains(i))}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let o=en();o.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>o.dispose()))}let l=(i=window.scrollY)!=null?i:window.pageYOffset,s=null;t.addEventListener(e,"click",o=>{if(Cn(o.target))try{let a=o.target.closest("a");if(!a)return;let{hash:u}=new URL(a.href),d=e.querySelector(u);Cn(d)&&!r(d)&&(s=d)}catch{}},!0),t.addEventListener(e,"touchstart",o=>{if(Cn(o.target)&&Ek(o.target))if(r(o.target)){let a=o.target;for(;a.parentElement&&r(a.parentElement);)a=a.parentElement;t.style(a,"overscrollBehavior","contain")}else t.style(o.target,"touchAction","none")}),t.addEventListener(e,"touchmove",o=>{if(Cn(o.target)){if(kk(o.target))return;if(r(o.target)){let a=o.target;for(;a.parentElement&&a.dataset.headlessuiPortal!==""&&!(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth);)a=a.parentElement;a.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),t.add(()=>{var o;let a=(o=window.scrollY)!=null?o:window.pageYOffset;l!==a&&window.scrollTo(0,l),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function pN(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function mN(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Zn=dN(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:en(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:mN(n)},i=[hN(),fN(),pN()];i.forEach(({before:l})=>l==null?void 0:l(r)),i.forEach(({after:l})=>l==null?void 0:l(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Zn.subscribe(()=>{let e=Zn.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Zn.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Zn.dispatch("TEARDOWN",n)}});function gN(e,t,n=()=>({containers:[]})){let r=cN(Zn),i=t?r.get(t):void 0,l=i?i.count>0:!1;return Ne(()=>{if(!(!t||!e))return Zn.dispatch("PUSH",t,n),()=>Zn.dispatch("POP",t,n)},[e,t]),l}function vN(e,t,n=()=>[document.body]){let r=kl(e,"scroll-lock");gN(r,t,i=>{var l;return{containers:[...(l=i.containers)!=null?l:[],n]}})}function yN(e=0){let[t,n]=p.useState(e),r=p.useCallback(a=>n(a),[t]),i=p.useCallback(a=>n(u=>u|a),[t]),l=p.useCallback(a=>(t&a)===a,[t]),s=p.useCallback(a=>n(u=>u&~a),[n]),o=p.useCallback(a=>n(u=>u^a),[n]);return{flags:t,setFlag:r,addFlag:i,hasFlag:l,removeFlag:s,toggleFlag:o}}var xN={},Yf,Kf;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Yf=process==null?void 0:xN)==null?void 0:Yf.NODE_ENV)==="test"&&typeof((Kf=Element==null?void 0:Element.prototype)==null?void 0:Kf.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
        `)),[]});var wN=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(wN||{});function SN(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function EN(e,t,n,r){let[i,l]=p.useState(n),{hasFlag:s,addFlag:o,removeFlag:a}=yN(e&&i?3:0),u=p.useRef(!1),d=p.useRef(!1),f=Ac();return Ne(()=>{var h;if(e){if(n&&l(!0),!t){n&&o(3);return}return(h=r==null?void 0:r.start)==null||h.call(r,n),CN(t,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(n?(o(3),a(4)):(o(4),a(2)))},run(){d.current?n?(a(3),o(4)):(a(4),o(3)):n?a(1):o(1)},done(){var g;d.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(u.current=!1,a(7),n||l(!1),(g=r==null?void 0:r.end)==null||g.call(r,n))}})}},[e,n,t,f]),e?[i,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function CN(e,{prepare:t,run:n,done:r,inFlight:i}){let l=en();return NN(e,{prepare:t,inFlight:i}),l.nextFrame(()=>{n(),l.requestAnimationFrame(()=>{l.add(kN(e,r))})}),l.dispose}function kN(e,t){var n,r;let i=en();if(!e)return i.dispose;let l=!1;i.add(()=>{l=!0});let s=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(o=>o instanceof CSSTransition))!=null?r:[];return s.length===0?(t(),i.dispose):(Promise.allSettled(s.map(o=>o.finished)).then(()=>{l||t()}),i.dispose)}function NN(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function Ic(e,t){let n=p.useRef([]),r=Y(e);p.useEffect(()=>{let i=[...n.current];for(let[l,s]of t.entries())if(n.current[l]!==s){let o=r(t,i);return n.current=t,o}},[r,...t])}let Oo=p.createContext(null);Oo.displayName="OpenClosedContext";var ht=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(ht||{});function To(){return p.useContext(Oo)}function jN({value:e,children:t}){return F.createElement(Oo.Provider,{value:e},t)}function bN({children:e}){return F.createElement(Oo.Provider,{value:null},e)}function PN(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let hn=[];PN(()=>{function e(t){if(!Cn(t.target)||t.target===document.body||hn[0]===t.target)return;let n=t.target;n=n.closest(qs),hn.unshift(n??t.target),hn=hn.filter(r=>r!=null&&r.isConnected),hn.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Vg(e){let t=Y(e),n=p.useRef(!1);p.useEffect(()=>(n.current=!1,()=>{n.current=!0,bo(()=>{n.current&&t()})}),[t])}function ON(){let e=typeof document>"u";return"useSyncExternalStore"in Sa?(t=>t.useSyncExternalStore)(Sa)(()=>()=>{},()=>!1,()=>!e):!1}function Nl(){let e=ON(),[t,n]=p.useState(ur.isHandoffComplete);return t&&ur.isHandoffComplete===!1&&n(!1),p.useEffect(()=>{t!==!0&&n(!0)},[t]),p.useEffect(()=>ur.handoff(),[]),e?!1:t}let Qg=p.createContext(!1);function TN(){return p.useContext(Qg)}function Gf(e){return F.createElement(Qg.Provider,{value:e.force},e.children)}function RN(e){let t=TN(),n=p.useContext(Yg),[r,i]=p.useState(()=>{var l;if(!t&&n!==null)return(l=n.current)!=null?l:null;if(ur.isServer)return null;let s=e==null?void 0:e.getElementById("headlessui-portal-root");if(s)return s;if(e===null)return null;let o=e.createElement("div");return o.setAttribute("id","headlessui-portal-root"),e.body.appendChild(o)});return p.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),p.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let qg=p.Fragment,_N=We(function(e,t){let{ownerDocument:n=null,...r}=e,i=p.useRef(null),l=Tt(Nk(g=>{i.current=g}),t),s=Po(i),o=n??s,a=RN(o),[u]=p.useState(()=>{var g;return ur.isServer?null:(g=o==null?void 0:o.createElement("div"))!=null?g:null}),d=p.useContext($u),f=Nl();Ne(()=>{!a||!u||a.contains(u)||(u.setAttribute("data-headlessui-portal",""),a.appendChild(u))},[a,u]),Ne(()=>{if(u&&d)return d.register(u)},[d,u]),Vg(()=>{var g;!a||!u||(Og(u)&&a.contains(u)&&a.removeChild(u),a.childNodes.length<=0&&((g=a.parentElement)==null||g.removeChild(a)))});let h=lt();return f?!a||!u?null:Sm.createPortal(h({ourProps:{ref:l},theirProps:r,slot:{},defaultTag:qg,name:"Portal"}),u):null});function $N(e,t){let n=Tt(t),{enabled:r=!0,ownerDocument:i,...l}=e,s=lt();return r?F.createElement(_N,{...l,ownerDocument:i,ref:n}):s({ourProps:{ref:n},theirProps:l,slot:{},defaultTag:qg,name:"Portal"})}let DN=p.Fragment,Yg=p.createContext(null);function FN(e,t){let{target:n,...r}=e,i={ref:Tt(t)},l=lt();return F.createElement(Yg.Provider,{value:n},l({ourProps:i,theirProps:r,defaultTag:DN,name:"Popover.Group"}))}let $u=p.createContext(null);function LN(){let e=p.useContext($u),t=p.useRef([]),n=Y(l=>(t.current.push(l),e&&e.register(l),()=>r(l))),r=Y(l=>{let s=t.current.indexOf(l);s!==-1&&t.current.splice(s,1),e&&e.unregister(l)}),i=p.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,p.useMemo(()=>function({children:l}){return F.createElement($u.Provider,{value:i},l)},[i])]}let MN=We($N),Kg=We(FN),AN=Object.assign(MN,{Group:Kg});function UN(e,t=typeof document<"u"?document.defaultView:null,n){let r=kl(e,"escape");Hg(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===_g.Escape&&n(i))})}function IN(){var e;let[t]=p.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=p.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Ne(()=>{if(!t)return;function i(l){r(l.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function zN({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Po(n),i=Y(()=>{var l,s;let o=[];for(let a of e)a!==null&&(Dn(a)?o.push(a):"current"in a&&Dn(a.current)&&o.push(a.current));if(t!=null&&t.current)for(let a of t.current)o.push(a);for(let a of(l=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?l:[])a!==document.body&&a!==document.head&&Dn(a)&&a.id!=="headlessui-portal-root"&&(n&&(a.contains(n)||a.contains((s=n==null?void 0:n.getRootNode())==null?void 0:s.host))||o.some(u=>a.contains(u))||o.push(a));return o});return{resolveContainers:i,contains:Y(l=>i().some(s=>s.contains(l)))}}let Gg=p.createContext(null);function Xf({children:e,node:t}){let[n,r]=p.useState(null),i=Xg(t??n);return F.createElement(Gg.Provider,{value:i},e,i===null&&F.createElement(Tu,{features:Qs.Hidden,ref:l=>{var s,o;if(l){for(let a of(o=(s=jo(l))==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?o:[])if(a!==document.body&&a!==document.head&&Dn(a)&&a!=null&&a.contains(l)){r(a);break}}}}))}function Xg(e=null){var t;return(t=p.useContext(Gg))!=null?t:e}function zc(){let e=p.useRef(!1);return Ne(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var _i=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(_i||{});function BN(){let e=p.useRef(0);return Wg(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Jg(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)Dn(n.current)&&t.add(n.current);return t}let WN="div";var qn=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(qn||{});function HN(e,t){let n=p.useRef(null),r=Tt(n,t),{initialFocus:i,initialFocusFallback:l,containers:s,features:o=15,...a}=e;Nl()||(o=0);let u=Po(n);YN(o,{ownerDocument:u});let d=KN(o,{ownerDocument:u,container:n,initialFocus:i,initialFocusFallback:l});GN(o,{ownerDocument:u,container:n,containers:s,previousActiveElement:d});let f=BN(),h=Y(m=>{if(!vr(n.current))return;let x=n.current;(E=>E())(()=>{Yt(f.current,{[_i.Forwards]:()=>{Hi(x,At.First,{skipElements:[m.relatedTarget,l]})},[_i.Backwards]:()=>{Hi(x,At.Last,{skipElements:[m.relatedTarget,l]})}})})}),g=kl(!!(o&2),"focus-trap#tab-lock"),v=Ac(),w=p.useRef(!1),S={ref:r,onKeyDown(m){m.key=="Tab"&&(w.current=!0,v.requestAnimationFrame(()=>{w.current=!1}))},onBlur(m){if(!(o&4))return;let x=Jg(s);vr(n.current)&&x.add(n.current);let E=m.relatedTarget;Cn(E)&&E.dataset.headlessuiFocusGuard!=="true"&&(Zg(x,E)||(w.current?Hi(n.current,Yt(f.current,{[_i.Forwards]:()=>At.Next,[_i.Backwards]:()=>At.Previous})|At.WrapAround,{relativeTo:m.target}):Cn(m.target)&&Bt(m.target)))}},y=lt();return F.createElement(F.Fragment,null,g&&F.createElement(Tu,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:Qs.Focusable}),y({ourProps:S,theirProps:a,defaultTag:WN,name:"FocusTrap"}),g&&F.createElement(Tu,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:Qs.Focusable}))}let VN=We(HN),QN=Object.assign(VN,{features:qn});function qN(e=!0){let t=p.useRef(hn.slice());return Ic(([n],[r])=>{r===!0&&n===!1&&bo(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=hn.slice())},[e,hn,t]),Y(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function YN(e,{ownerDocument:t}){let n=!!(e&8),r=qN(n);Ic(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Bt(r())},[n]),Vg(()=>{n&&Bt(r())})}function KN(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let l=p.useRef(null),s=kl(!!(e&1),"focus-trap#initial-focus"),o=zc();return Ic(()=>{if(e===0)return;if(!s){i!=null&&i.current&&Bt(i.current);return}let a=n.current;a&&bo(()=>{if(!o.current)return;let u=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===u){l.current=u;return}}else if(a.contains(u)){l.current=u;return}if(r!=null&&r.current)Bt(r.current);else{if(e&16){if(Hi(a,At.First|At.AutoFocus)!==_u.Error)return}else if(Hi(a,At.First)!==_u.Error)return;if(i!=null&&i.current&&(Bt(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}l.current=t==null?void 0:t.activeElement})},[i,s,e]),l}function GN(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let l=zc(),s=!!(e&4);Hg(t==null?void 0:t.defaultView,"focus",o=>{if(!s||!l.current)return;let a=Jg(r);vr(n.current)&&a.add(n.current);let u=i.current;if(!u)return;let d=o.target;vr(d)?Zg(a,d)?(i.current=d,Bt(d)):(o.preventDefault(),o.stopPropagation(),Bt(u)):Bt(i.current)},!0)}function Zg(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function ev(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:nv)!==p.Fragment||F.Children.count(e.children)===1}let Ro=p.createContext(null);Ro.displayName="TransitionContext";var XN=(e=>(e.Visible="visible",e.Hidden="hidden",e))(XN||{});function JN(){let e=p.useContext(Ro);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function ZN(){let e=p.useContext(_o);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let _o=p.createContext(null);_o.displayName="NestingContext";function $o(e){return"children"in e?$o(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function tv(e,t){let n=Sr(e),r=p.useRef([]),i=zc(),l=Ac(),s=Y((g,v=En.Hidden)=>{let w=r.current.findIndex(({el:S})=>S===g);w!==-1&&(Yt(v,{[En.Unmount](){r.current.splice(w,1)},[En.Hidden](){r.current[w].state="hidden"}}),l.microTask(()=>{var S;!$o(r)&&i.current&&((S=n.current)==null||S.call(n))}))}),o=Y(g=>{let v=r.current.find(({el:w})=>w===g);return v?v.state!=="visible"&&(v.state="visible"):r.current.push({el:g,state:"visible"}),()=>s(g,En.Unmount)}),a=p.useRef([]),u=p.useRef(Promise.resolve()),d=p.useRef({enter:[],leave:[]}),f=Y((g,v,w)=>{a.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([S])=>S!==g)),t==null||t.chains.current[v].push([g,new Promise(S=>{a.current.push(S)})]),t==null||t.chains.current[v].push([g,new Promise(S=>{Promise.all(d.current[v].map(([y,m])=>m)).then(()=>S())})]),v==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>w(v)):w(v)}),h=Y((g,v,w)=>{Promise.all(d.current[v].splice(0).map(([S,y])=>y)).then(()=>{var S;(S=a.current.shift())==null||S()}).then(()=>w(v))});return p.useMemo(()=>({children:r,register:o,unregister:s,onStart:f,onStop:h,wait:u,chains:d}),[o,s,r,f,h,d,u])}let nv=p.Fragment,rv=Vs.RenderStrategy;function e2(e,t){var n,r;let{transition:i=!0,beforeEnter:l,afterEnter:s,beforeLeave:o,afterLeave:a,enter:u,enterFrom:d,enterTo:f,entered:h,leave:g,leaveFrom:v,leaveTo:w,...S}=e,[y,m]=p.useState(null),x=p.useRef(null),E=ev(e),N=Tt(...E?[x,t,m]:t===null?[]:[t]),j=(n=S.unmount)==null||n?En.Unmount:En.Hidden,{show:P,appear:O,initial:$}=JN(),[_,U]=p.useState(P?"visible":"hidden"),ue=ZN(),{register:re,unregister:yt}=ue;Ne(()=>re(x),[re,x]),Ne(()=>{if(j===En.Hidden&&x.current){if(P&&_!=="visible"){U("visible");return}return Yt(_,{hidden:()=>yt(x),visible:()=>re(x)})}},[_,x,re,yt,P,j]);let zn=Nl();Ne(()=>{if(E&&zn&&_==="visible"&&x.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[x,_,zn,E]);let Bn=$&&!O,tn=O&&P&&$,T=p.useRef(!1),D=tv(()=>{T.current||(U("hidden"),yt(x))},ue),L=Y(nn=>{T.current=!0;let jl=nn?"enter":"leave";D.onStart(x,jl,pi=>{pi==="enter"?l==null||l():pi==="leave"&&(o==null||o())})}),V=Y(nn=>{let jl=nn?"enter":"leave";T.current=!1,D.onStop(x,jl,pi=>{pi==="enter"?s==null||s():pi==="leave"&&(a==null||a())}),jl==="leave"&&!$o(D)&&(U("hidden"),yt(x))});p.useEffect(()=>{E&&i||(L(P),V(P))},[P,E,i]);let ie=!(!i||!E||!zn||Bn),[,B]=EN(ie,y,P,{start:L,end:V}),Ge=Qn({ref:N,className:((r=Ou(S.className,tn&&u,tn&&d,B.enter&&u,B.enter&&B.closed&&d,B.enter&&!B.closed&&f,B.leave&&g,B.leave&&!B.closed&&v,B.leave&&B.closed&&w,!B.transition&&P&&h))==null?void 0:r.trim())||void 0,...SN(B)}),Rt=0;_==="visible"&&(Rt|=ht.Open),_==="hidden"&&(Rt|=ht.Closed),P&&_==="hidden"&&(Rt|=ht.Opening),!P&&_==="visible"&&(Rt|=ht.Closing);let _t=lt();return F.createElement(_o.Provider,{value:D},F.createElement(jN,{value:Rt},_t({ourProps:Ge,theirProps:S,defaultTag:nv,features:rv,visible:_==="visible",name:"Transition.Child"})))}function t2(e,t){let{show:n,appear:r=!1,unmount:i=!0,...l}=e,s=p.useRef(null),o=ev(e),a=Tt(...o?[s,t]:t===null?[]:[t]);Nl();let u=To();if(n===void 0&&u!==null&&(n=(u&ht.Open)===ht.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,f]=p.useState(n?"visible":"hidden"),h=tv(()=>{n||f("hidden")}),[g,v]=p.useState(!0),w=p.useRef([n]);Ne(()=>{g!==!1&&w.current[w.current.length-1]!==n&&(w.current.push(n),v(!1))},[w,n]);let S=p.useMemo(()=>({show:n,appear:r,initial:g}),[n,r,g]);Ne(()=>{n?f("visible"):!$o(h)&&s.current!==null&&f("hidden")},[n,h]);let y={unmount:i},m=Y(()=>{var N;g&&v(!1),(N=e.beforeEnter)==null||N.call(e)}),x=Y(()=>{var N;g&&v(!1),(N=e.beforeLeave)==null||N.call(e)}),E=lt();return F.createElement(_o.Provider,{value:h},F.createElement(Ro.Provider,{value:S},E({ourProps:{...y,as:p.Fragment,children:F.createElement(iv,{ref:a,...y,...l,beforeEnter:m,beforeLeave:x})},theirProps:{},defaultTag:p.Fragment,features:rv,visible:d==="visible",name:"Transition"})))}function n2(e,t){let n=p.useContext(Ro)!==null,r=To()!==null;return F.createElement(F.Fragment,null,!n&&r?F.createElement(Du,{ref:t,...e}):F.createElement(iv,{ref:t,...e}))}let Du=We(t2),iv=We(e2),Bc=We(n2),Fu=Object.assign(Du,{Child:Bc,Root:Du});var r2=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(r2||{}),i2=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(i2||{});let l2={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Wc=p.createContext(null);Wc.displayName="DialogContext";function Do(e){let t=p.useContext(Wc);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Do),n}return t}function s2(e,t){return Yt(t.type,l2,e,t)}let Jf=We(function(e,t){let n=p.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:l,initialFocus:s,role:o="dialog",autoFocus:a=!0,__demoMode:u=!1,unmount:d=!1,...f}=e,h=p.useRef(!1);o=function(){return o==="dialog"||o==="alertdialog"?o:(h.current||(h.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=To();i===void 0&&g!==null&&(i=(g&ht.Open)===ht.Open);let v=p.useRef(null),w=Tt(v,t),S=Po(v),y=i?0:1,[m,x]=p.useReducer(s2,{titleId:null,descriptionId:null,panelRef:p.createRef()}),E=Y(()=>l(!1)),N=Y(B=>x({type:0,id:B})),j=Nl()?y===0:!1,[P,O]=LN(),$={get current(){var B;return(B=m.panelRef.current)!=null?B:v.current}},_=Xg(),{resolveContainers:U}=zN({mainTreeNode:_,portals:P,defaultContainers:[$]}),ue=g!==null?(g&ht.Closing)===ht.Closing:!1;Xk(u||ue?!1:j,{allowed:Y(()=>{var B,Ge;return[(Ge=(B=v.current)==null?void 0:B.closest("[data-headlessui-portal]"))!=null?Ge:null]}),disallowed:Y(()=>{var B;return[(B=_==null?void 0:_.closest("body > *:not(#headlessui-portal-root)"))!=null?B:null]})});let re=Mg.get(null);Ne(()=>{if(j)return re.actions.push(r),()=>re.actions.pop(r)},[re,r,j]);let yt=Ig(re,p.useCallback(B=>re.selectors.isTop(B,r),[re,r]));uN(yt,U,B=>{B.preventDefault(),E()}),UN(yt,S==null?void 0:S.defaultView,B=>{B.preventDefault(),B.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),E()}),vN(u||ue?!1:j,S,U),Jk(j,v,E);let[zn,Bn]=jk(),tn=p.useMemo(()=>[{dialogState:y,close:E,setTitleId:N,unmount:d},m],[y,m,E,N,d]),T=p.useMemo(()=>({open:y===0}),[y]),D={ref:w,id:r,role:o,tabIndex:-1,"aria-modal":u?void 0:y===0?!0:void 0,"aria-labelledby":m.titleId,"aria-describedby":zn,unmount:d},L=!IN(),V=qn.None;j&&!u&&(V|=qn.RestoreFocus,V|=qn.TabLock,a&&(V|=qn.AutoFocus),L&&(V|=qn.InitialFocus));let ie=lt();return F.createElement(bN,null,F.createElement(Gf,{force:!0},F.createElement(AN,null,F.createElement(Wc.Provider,{value:tn},F.createElement(Kg,{target:v},F.createElement(Gf,{force:!1},F.createElement(Bn,{slot:T},F.createElement(O,null,F.createElement(QN,{initialFocus:s,initialFocusFallback:v,containers:U,features:V},F.createElement(_k,{value:E},ie({ourProps:D,theirProps:f,slot:T,defaultTag:o2,features:a2,visible:y===0,name:"Dialog"})))))))))))}),o2="div",a2=Vs.RenderStrategy|Vs.Static;function u2(e,t){let{transition:n=!1,open:r,...i}=e,l=To(),s=e.hasOwnProperty("open")||l!==null,o=e.hasOwnProperty("onClose");if(!s&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!l&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?F.createElement(Xf,null,F.createElement(Fu,{show:r,transition:n,unmount:i.unmount},F.createElement(Jf,{ref:t,...i}))):F.createElement(Xf,null,F.createElement(Jf,{ref:t,open:r,...i}))}let c2="div";function d2(e,t){let n=p.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...l}=e,[{dialogState:s,unmount:o},a]=Do("Dialog.Panel"),u=Tt(t,a.panelRef),d=p.useMemo(()=>({open:s===0}),[s]),f=Y(S=>{S.stopPropagation()}),h={ref:u,id:r,onClick:f},g=i?Bc:p.Fragment,v=i?{unmount:o}:{},w=lt();return F.createElement(g,{...v},w({ourProps:h,theirProps:l,slot:d,defaultTag:c2,name:"Dialog.Panel"}))}let f2="div";function h2(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:l}]=Do("Dialog.Backdrop"),s=p.useMemo(()=>({open:i===0}),[i]),o={ref:t,"aria-hidden":!0},a=n?Bc:p.Fragment,u=n?{unmount:l}:{},d=lt();return F.createElement(a,{...u},d({ourProps:o,theirProps:r,slot:s,defaultTag:f2,name:"Dialog.Backdrop"}))}let p2="h2";function m2(e,t){let n=p.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:l,setTitleId:s}]=Do("Dialog.Title"),o=Tt(t);p.useEffect(()=>(s(r),()=>s(null)),[r,s]);let a=p.useMemo(()=>({open:l===0}),[l]),u={ref:o,id:r};return lt()({ourProps:u,theirProps:i,slot:a,defaultTag:p2,name:"Dialog.Title"})}let g2=We(u2),v2=We(d2);We(h2);let y2=We(m2),Zf=Object.assign(g2,{Panel:v2,Title:y2,Description:Tk});const x2=({open:e,onClose:t})=>{const n=$n(s=>s.items),r=$n(s=>s.removeItem),i=$n(s=>s.getTotalPrice()),l=di();return c.jsx(Fu.Root,{show:e,as:p.Fragment,children:c.jsx(Zf,{as:"div",className:"fixed inset-0 overflow-hidden z-50",onClose:t,children:c.jsx(Fu.Child,{as:p.Fragment,enter:"transform transition ease-in-out duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-300",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:c.jsxs(Zf.Panel,{className:"absolute right-0 top-0 h-full w-80 bg-white shadow-xl flex flex-col",children:[c.jsxs("div",{className:"p-4 flex justify-between items-center border-b",children:[c.jsx("h2",{className:"text-lg font-medium",children:"×”×¢×’×œ×” ×©×œ×™"}),c.jsx("button",{onClick:t,"aria-label":"Close",children:"âœ–ï¸"})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:n.length===0?c.jsx("p",{className:"text-center text-gray-500",children:"×”×¢×’×œ×” ×¨×™×§×”"}):n.map(({product:s,quantity:o})=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:`${s.image}?w=80&webp`,alt:"",className:"w-16 h-16 rounded object-cover"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:s.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[o," Ã— ",s.price," â‚ª"]})]}),c.jsx("button",{onClick:()=>r(s._id),className:"text-red-600 text-xl","aria-label":"Remove",children:"ðŸ—‘ï¸"})]},s._id))}),c.jsxs("div",{className:"p-4 border-t space-y-3",children:[c.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[c.jsx("span",{children:"×¡×”×´×›:"}),c.jsxs("span",{children:[i.toLocaleString()," â‚ª"]})]}),c.jsx(oe,{disabled:n.length===0,className:"w-full",onClick:()=>{t(),l("/checkout")},children:"×ž×¢×‘×¨ ×œ×ª×©×œ×•×"})]})]})})})})},w2=()=>{const{isAuthenticated:e,user:t,logout:n}=Jt(),r=$n(d=>d.getTotalItems()),[i,l]=p.useState(!1),s=di(),o=()=>{n(),s("/")},a="text-base font-medium text-gray-600 hover:text-amber-600 transition-colors flex items-center gap-2",u={color:"#d97706"};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white/95 backdrop-blur-sm shadow-sm sticky top-0 z-40",children:c.jsxs("nav",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[c.jsx(ge,{to:"/",className:"text-2xl font-bold text-amber-700",children:"ðŸ½ï¸ ×§×™×™×˜×¨×™× ×’ ×¤×¡×—"}),c.jsxs("div",{className:"flex items-center gap-4 sm:gap-6",children:[c.jsxs("button",{onClick:()=>l(!0),className:"relative text-2xl","aria-label":"×¤×ª×— ×¢×’×œ×”",children:["ðŸ›’",r>0&&c.jsx("span",{className:"absolute -top-2 -right-3 bg-amber-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:r})]}),e?c.jsxs("div",{className:"flex items-center gap-4 sm:gap-6",children:[c.jsxs("span",{className:"text-sm text-gray-700 hidden lg:block",children:["×©×œ×•×, **",(t==null?void 0:t.name)||"××•×¨×—","**"]}),c.jsxs(ua,{to:"/dashboard",className:a,style:({isActive:d})=>d?u:void 0,children:[c.jsx(kE,{size:18}),c.jsx("span",{className:"hidden md:inline",children:"×”×”×–×ž× ×•×ª ×©×œ×™"})]}),(t==null?void 0:t.role)==="admin"&&c.jsxs(ua,{to:"/admin",className:a,style:({isActive:d})=>d?u:void 0,children:[c.jsx(LE,{size:18}),c.jsx("span",{className:"hidden md:inline",children:"× ×™×”×•×œ"})]}),c.jsxs(oe,{variant:"outline",size:"sm",onClick:o,className:"flex items-center gap-2",children:[c.jsx(TE,{size:16}),c.jsx("span",{className:"hidden md:inline",children:"×”×ª× ×ª×§"})]})]}):c.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[c.jsxs(ua,{to:"/login",className:a,style:({isActive:d})=>d?u:void 0,children:[c.jsx(DE,{size:18}),"×”×ª×—×‘×¨×•×ª"]}),c.jsx(oe,{asChild:!0,children:c.jsx(ge,{to:"/register",children:"×”×¨×©×ž×”"})})]})]})]})}),c.jsx(x2,{open:i,onClose:()=>l(!1)})]})},S2=({children:e})=>c.jsxs("div",{className:"min-h-screen flex flex-col",children:[c.jsx(w2,{}),c.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:c.jsx(_c,{})}),c.jsxs("footer",{className:"text-center py-4 bg-gray-200 text-sm text-gray-600",children:["×›×œ ×”×–×›×•×™×•×ª ×©×ž×•×¨×•×ª Â© ",new Date().getFullYear()]})]});function E2(){return p.useEffect(()=>{$n.getState().fetchCart()},[]),c.jsx(Sx,{children:c.jsxs(be,{path:"/",element:c.jsx(S2,{}),children:[c.jsx(be,{index:!0,element:c.jsx(hE,{})}),c.jsx(be,{path:"menu",element:c.jsx(zE,{})}),c.jsx(be,{path:"login",element:c.jsx(ME,{})}),c.jsx(be,{path:"register",element:c.jsx(AE,{})}),c.jsx(be,{path:"dashboard",element:c.jsx(Ff,{children:c.jsx(UE,{})})}),c.jsx(be,{path:"orders-history",element:c.jsx(Ff,{children:c.jsx(BE,{})})}),c.jsxs(be,{path:"admin",element:c.jsx(WE,{children:c.jsx(_c,{})}),children:[c.jsx(be,{index:!0,element:c.jsx(VE,{})}),c.jsx(be,{path:"products",element:c.jsx(XE,{})}),c.jsx(be,{path:"orders",element:c.jsx(sk,{})}),c.jsx(be,{path:"centers",element:c.jsx(ak,{})}),c.jsx(be,{path:"users",element:c.jsx(uk,{})})]}),c.jsx(be,{path:"*",element:c.jsx(ck,{})})]})})}const C2=new rw({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});Ea.createRoot(document.getElementById("root")).render(c.jsx(F.StrictMode,{children:c.jsx(Ox,{children:c.jsxs(lw,{client:C2,children:[c.jsx(E2,{}),c.jsx(Gw,{position:"bottom-center",toastOptions:{className:"font-sans"}}),c.jsx(sw,{initialIsOpen:!1})]})})}));
    ðŸ“„ index.html
      <!doctype html>
      <html lang="he" dir="rtl">
        <head>
          <meta charset="UTF-8" />
          <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
          <meta name="viewport" content="width=device-width, initial-scale=1.0" />
          <link rel="preconnect" href="https://fonts.googleapis.com">
          <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
          <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
          <title>×§×™×™×˜×¨×™× ×’ ×¤×¡×—</title>
          <script type="module" crossorigin src="/assets/index-BjI7IzFT.js"></script>
          <link rel="stylesheet" crossorigin href="/assets/index-BDMUJ5hm.css">
        </head>
        <body class="bg-gray-50 text-gray-800">
          <div id="root"></div>
      
        </body>
      </html>
  ðŸ“„ index.html
    <!doctype html>
    <html lang="he" dir="rtl">
      <head>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
        <title>× ×™×”×•×œ ×¤×™× × ×¡×™</title>
      </head>
      <body class="bg-gray-50 text-gray-800">
        <div id="root"></div>
        <script type="module" src="/src/main.jsx"></script>
      </body>
    </html>
  ðŸ“„ jsconfig.json
  ðŸš« node_modules/ (× ×¤×¡×œ ×œ×¡×¨×™×§×”)
  ðŸ“„ package.json
  ðŸ“„ postcss.config.js
    export default {
      plugins: {
        tailwindcss: {},
        autoprefixer: {},
      },
    }
  ðŸ“ src/
    ðŸ“„ App.jsx
      import { Routes, Route } from "react-router-dom";
      
      /* Layout & Route Protection */
      import Layout from "@/components/Layout";
      import ProtectedRoute from "@/components/ProtectedRoute";
      
      /* Public Pages */
      import HomePage        from "@/pages/HomePage";
      import LoginPage       from "@/pages/LoginPage";
      import RegisterPage    from "@/pages/RegisterPage";
      
      /* Protected Pages */
      import DashboardPage      from "@/pages/DashboardPage";
      import FinancePage        from "@/pages/FinancePage";
      import TzitzitFormPage    from "@/pages/TzitzitFormPage";
      import DataEntryPage      from "@/pages/DataEntryPage";
      import ImportPage         from "@/pages/ImportPage";
      import ManagementPage     from "@/pages/ManagementPage";
      import ProjectsPage       from "@/pages/ProjectsPage";
      import ProjectPage        from "@/pages/ProjectPage";
      import NewProjectPage     from "@/pages/NewProjectPage";
      import TransactionsTab    from "@/pages/Transactions_tab";
      import FinanceDashboard   from "@/pages/FinanceDashboard";
      import InvestmentsPage    from "@/pages/InvestmentsPage";
      import DepositsPage       from '@/pages/DepositsPage';
      import FundsPage          from '@/pages/FundsPage'; // ×™×™×‘×•× ×”×¢×ž×•×“ ×”×—×“×©
      import MyLoansPage from './pages/MyLoansPage';
      import NewLoanPage from './pages/NewLoanPage';
      import LoanDetailPage from './pages/LoanDetailPage';
      
      
      /* Fallback */
      import NotFoundPage from "@/pages/NotFoundPage";
      
      export default function App() {
        return (
          <Routes>
            <Route path="/" element={<Layout />}>
              {/* -------- Public Routes -------- */}
              <Route index           element={<HomePage />}    />
              <Route path="login"    element={<LoginPage />}   />
              <Route path="register" element={<RegisterPage />} />
      
              {/* -------- Protected Routes -------- */}
              <Route element={<ProtectedRoute />}>
                <Route path="dashboard"          element={<DashboardPage />}      />
                <Route path="finance"            element={<FinancePage />}        />
                <Route path="tzitzit"            element={<TzitzitFormPage />}    />
                <Route path="data-entry"         element={<DataEntryPage />}      />
                <Route path="management"         element={<ManagementPage />}     />
                <Route path="import"             element={<ImportPage />}         />
                <Route path="portfolio"          element={<TransactionsTab />}    />
                <Route path="investments"        element={<InvestmentsPage />}    />
                <Route path="finance-dashboard"  element={<FinanceDashboard />}   />
                <Route path="/deposits"          element={<DepositsPage/>} />
                <Route path="/funds"             element={<FundsPage />} />
                <Route path="/my-loans"          element={<MyLoansPage />} />
                <Route path="/loans/new"         element={<NewLoanPage />} />
                <Route path="/loans/:loanId"     element={<LoanDetailPage />} />
      
                {/* ----- Project Routes ----- */}
                <Route path="projects"       element={<ProjectsPage />}      />
                <Route path="projects/new"   element={<NewProjectPage />}    />
                <Route path="projects/:id"   element={<ProjectPage />}       />
              </Route>
      
              {/* -------- 404 -------- */}
              <Route path="*" element={<NotFoundPage />} />
            </Route>
          </Routes>
        );
      }
    ðŸ“ components/
      ðŸ“„ Layout.jsx
        // client/src/components/Layout.jsx
        import { Outlet } from 'react-router-dom';
        import Navbar from './Navbar'; // ×”×™×™×‘×•× ×©×œ ×¡×¨×’×œ ×”× ×™×•×•×˜ ×©×œ×š
        import { Toaster } from "@/components/ui/toaster";
        
        export default function Layout() {
          return (
            <div className="flex h-screen bg-slate-50 text-slate-800">
              {/* Sidebar Navigation */}
              <aside className="w-64 flex-shrink-0 border-l border-slate-200">
                {/* ×”× ×—×” ×©×§×•×‘×¥ ×”-Navbar ×©×œ×š ×ž×›×™×œ ××ª ×¡×¨×’×œ ×”× ×™×•×•×˜ ×”×¦×“×“×™ ×©×‘×ª×ž×•× ×” */}
                <Navbar />
              </aside>
        
              {/* Main Content Area */}
              <main className="flex-1 overflow-y-auto">
                {/* ×”-Outlet ×”×•× ×”×ž×§×•× ×©××œ×™×• ×›×œ ×©××¨ ×”×¢×ž×•×“×™× ×©×œ×š ×™×™×›× ×¡×• */}
                <Outlet />
              </main>
        
              {/* Toaster ×œ×”×•×“×¢×•×ª ×§×•×¤×¦×•×ª */}
              <Toaster />
            </div>
          );
        }
      ðŸ“„ Navbar.jsx
        import { useState, Fragment } from "react";
        import { Link, NavLink } from "react-router-dom";
        import {
            Menu, X, LogOut, LayoutDashboard, Wrench, FileText, User, Landmark,
            TrendingUp, Home, Settings, UserCircle, Briefcase, ChevronDown
        } from "lucide-react";
        import { motion, AnimatePresence } from "framer-motion";
        
        // --- Imports from your project structure ---
        import { useAuthStore } from "@/stores/authStore";
        import { Button } from "@/components/ui/button";
        import {
          DropdownMenu,
          DropdownMenuContent,
          DropdownMenuItem,
          DropdownMenuLabel,
          DropdownMenuSeparator,
          DropdownMenuTrigger,
        } from "@/components/ui/dropdown-menu";
        
        // --- Navigation Structure ---
        const navItems = [
            { to: '/', label: '×‘×™×ª', icon: Home, type: 'link' },
            { to: '/finance-dashboard', label: '×“×©×‘×•×¨×“ ×¤×™× × ×¡×™', icon: LayoutDashboard, type: 'link', auth: true },
            { to: '/investments', label: '× ×™×”×•×œ ×”×©×§×¢×•×ª', icon: TrendingUp, type: 'link', auth: true },
            { to: '/portfolio', label: '×“×£ ×¢×¡×§××•×ª', icon: FileText, type: 'link', auth: true },
            { to: '/projects', label: '×¤×¨×•×™×§×˜×™×', icon: Briefcase, type: 'link', auth: true },
            { to: '/tzitzit', label: '×¦×™×¦×™×•×ª/×˜×œ×™×ª', icon: () => <span className="font-bold text-lg h-5 w-5 flex items-center justify-center">×¦</span>, type: 'link', auth: true },
            { to: '/management', label: '× ×™×”×•×œ ×ž×¢×¨×›×ª', icon: Wrench, type: 'link', auth: true, admin: true },
            { to: '/deposits', label: '×¤×™×§×“×•× ×•×ª', icon: Landmark, type: 'link', auth: true },
            { to: '/funds', label: '×§×¨× ×•×ª', icon: () => <span className="font-bold text-lg h-5 w-5 flex items-center justify-center">×§</span>, type: 'link', auth: true },
        
        ];
        
        // --- Helper to filter links based on auth and role ---
        const getVisibleItems = (isAuthenticated, user) => {
            return navItems.filter(item => {
                if (item.auth && !isAuthenticated) return false;
                if (item.admin && user?.role !== 'admin') return false;
                return true;
            });
        };
        
        // --- Main Component ---
        export default function Navbar() {
            const [sidebarOpen, setSidebarOpen] = useState(false);
            const { isAuthenticated, user, logout } = useAuthStore();
            const visibleItems = getVisibleItems(isAuthenticated, user);
        
            return (
                <>
                    {/* --- Sidebar for Desktop --- */}
                    <div className="hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0">
                        <SidebarContent items={visibleItems} user={user} isAuthenticated={isAuthenticated} logout={logout} />
                    </div>
        
                    {/* --- Mobile Top Bar --- */}
                    <div className="md:hidden flex items-center justify-between bg-white dark:bg-slate-900 border-b h-16 px-4">
                         <Link to="/" className="text-xl font-extrabold tracking-tight bg-gradient-to-r from-primary to-amber-600 bg-clip-text text-transparent">
                            yosefdahan
                        </Link>
                        <Button variant="ghost" size="icon" onClick={() => setSidebarOpen(true)}>
                            <Menu className="h-6 w-6" />
                        </Button>
                    </div>
        
                    {/* --- Mobile Drawer --- */}
                    <AnimatePresence>
                        {sidebarOpen && (
                            <Fragment>
                                {/* Overlay */}
                                <motion.div
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    exit={{ opacity: 0 }}
                                    transition={{ duration: 0.3 }}
                                    className="fixed inset-0 z-40 bg-black/50 md:hidden"
                                    onClick={() => setSidebarOpen(false)}
                                />
                                {/* Drawer Content */}
                                <motion.div
                                     initial={{ x: '100%' }}
                                     animate={{ x: 0 }}
                                     exit={{ x: '100%' }}
                                     transition={{ type: 'spring', stiffness: 300, damping: 30 }}
                                     className="fixed inset-y-0 right-0 z-50 w-64 md:hidden"
                                >
                                    <SidebarContent
                                        items={visibleItems}
                                        user={user}
                                        isAuthenticated={isAuthenticated}
                                        logout={logout}
                                        onClose={() => setSidebarOpen(false)}
                                    />
                                </motion.div>
                            </Fragment>
                        )}
                    </AnimatePresence>
                </>
            );
        }
        
        // --- Reusable Sidebar Content ---
        function SidebarContent({ items, user, isAuthenticated, logout, onClose }) {
            const handleLogout = () => {
                logout();
                if (onClose) onClose();
            };
        
            return (
                <div className="flex flex-col flex-grow border-l border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 overflow-y-auto h-full">
                    <div className="flex items-center justify-between h-16 flex-shrink-0 px-4">
                        <Link to="/" onClick={onClose} className="text-xl font-extrabold tracking-tight bg-gradient-to-r from-primary to-amber-600 bg-clip-text text-transparent">
                            yosefdahan
                        </Link>
                        {onClose && (
                             <Button variant="ghost" size="icon" onClick={onClose}>
                                <X className="h-6 w-6" />
                            </Button>
                        )}
                    </div>
                    <div className="flex-1 flex flex-col">
                        <nav className="flex-1 px-2 py-4 space-y-1">
                            {items.map((item) => (
                                <NavItem key={item.label} item={item} onClick={onClose} />
                            ))}
                        </nav>
                        <div className="px-2 py-4 border-t dark:border-slate-800">
                            {isAuthenticated ? (
                                <UserNav user={user} logout={handleLogout} />
                            ) : (
                                <div className="space-y-2">
                                     <Button variant="ghost" asChild className="w-full justify-start">
                                        <Link to="/login" onClick={onClose}><User className="ml-2 h-4 w-4" />×”×ª×—×‘×¨×•×ª</Link>
                                    </Button>
                                    <Button asChild className="w-full">
                                        <Link to="/register" onClick={onClose}>×”×¨×©×ž×”</Link>
                                    </Button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }
        
        // --- Sidebar Navigation Item ---
        function NavItem({ item, onClick }) {
            const navLinkClass = "group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors";
            const activeClass = "bg-slate-100 dark:bg-slate-800 text-primary dark:text-white";
            const inactiveClass = "text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-primary dark:hover:text-white";
        
            return (
                <NavLink
                    to={item.to}
                    onClick={onClick}
                    className={({ isActive }) => `${navLinkClass} ${isActive ? activeClass : inactiveClass}`}
                >
                    <item.icon className="ml-3 flex-shrink-0 h-5 w-5" />
                    {item.label}
                </NavLink>
            );
        }
        
        // --- User Navigation (for Sidebar) ---
        function UserNav({ user, logout }) {
             const getInitials = (name) => {
                if (!name) return 'U';
                const names = name.split(' ');
                return names.length > 1 ? `${names[0][0]}${names[names.length - 1][0]}`.toUpperCase() : name[0].toUpperCase();
            };
        
            return (
                <DropdownMenu>
                    <DropdownMenuTrigger className="w-full">
                         <div className="flex items-center gap-3 text-sm font-medium p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                             <div className="h-9 w-9 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center">
                                {getInitials(user?.name)}
                            </div>
                            <div className="text-start flex-1 truncate">
                                <p className="font-semibold text-slate-800 dark:text-slate-100">{user?.name || '×ž×©×ª×ž×©'}</p>
                                <p className="text-xs text-slate-500 dark:text-slate-400 truncate">{user?.email}</p>
                            </div>
                            <ChevronDown size={16} className="text-slate-500" />
                         </div>
                    </DropdownMenuTrigger>
                    <DropdownMenuContent className="w-56" align="end" forceMount>
                        <DropdownMenuItem asChild>
                            <Link to="/profile"><UserCircle className="mr-2 h-4 w-4" /><span>×¤×¨×•×¤×™×œ</span></Link>
                        </DropdownMenuItem>
                        <DropdownMenuItem asChild>
                            <Link to="/settings"><Settings className="mr-2 h-4 w-4" /><span>×”×’×“×¨×•×ª</span></Link>
                        </DropdownMenuItem>
                        <DropdownMenuSeparator />
                        <DropdownMenuItem onClick={logout} className="text-red-500 focus:text-red-600 focus:bg-red-50 cursor-pointer">
                            <LogOut className="mr-2 h-4 w-4" />
                            <span>×”×ª× ×ª×§</span>
                        </DropdownMenuItem>
                    </DropdownMenuContent>
                </DropdownMenu>
            );
        }
      ðŸ“„ ProtectedRoute.jsx
        import React from 'react';
        import { Navigate, Outlet } from 'react-router-dom';
        import { useAuthStore } from '@/stores/authStore';
        
        /**
         * This component protects routes that require authentication.
         * It uses the modern "wrapper route" pattern from react-router-dom v6.
         * * - If the user is authenticated, it renders an <Outlet />, which displays
         * whatever child route is currently active.
         * - If the user is not authenticated, it redirects them to the /login page.
         */
        const ProtectedRoute = () => {
          const { isAuthenticated } = useAuthStore();
        
          if (!isAuthenticated) {
            // Redirect them to the /login page, but save the current location they were
            // trying to go to so we can send them there after login.
            return <Navigate to="/login" replace />;
          }
        
          // If authenticated, render the child route component via the Outlet.
          return <Outlet />;
        };
        
        export default ProtectedRoute;
      ðŸ“„ StatsCard.jsx
        export default function StatsCard({ label, value, icon }) {
          return (
            <div className="flex items-center gap-4 p-4 rounded-2xl bg-white shadow hover:shadow-md transition">
              <div className="text-3xl">{icon}</div>
              <div>
                <p className="text-sm text-gray-500">{label}</p>
                <p className="text-xl font-bold">{value}</p>
              </div>
            </div>
          );
        }
      ðŸ“ dashboard/
        ðŸ“„ AccountSummary.jsx
          import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
          
          const ICONS = {
            checking: 'ðŸ¦',
            cash: 'ðŸ’µ',
            deposits: 'ðŸ“ˆ',
            stocks: 'ðŸ“Š',
          };
          
          const NAMES = {
            checking: '×¢×•"×©',
            cash: '×ž×–×•×ž×Ÿ',
            deposits: '×¤×§×“×•× ×•×ª',
            stocks: '×”×©×§×¢×•×ª',
          }
          
          export const AccountSummary = ({ accounts = [] }) => (
            <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
              {accounts.map((account) => (
                <Card key={account.name}>
                  <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                    <CardTitle className="text-sm font-medium">{NAMES[account.name] || account.name}</CardTitle>
                    <span className="text-2xl">{ICONS[account.name] || 'ðŸ’°'}</span>
                  </CardHeader>
                  <CardContent>
                    <div className="text-2xl font-bold">â‚ª{account.balance.toLocaleString('he-IL', { minimumFractionDigits: 2 })}</div>
                  </CardContent>
                </Card>
              ))}
            </div>
          );
        ðŸ“„ BalanceChart.jsx
          import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';
          import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
          
          export const BalanceChart = ({ data = [] }) => {
            const formattedData = data.map(item => ({
              ...item,
              // ×¤×•×¨×ž×˜ ×”×ª××¨×™×š ×œ×ª×¦×•×’×” ×™×“×™×“×•×ª×™×ª
              formattedDate: new Date(item.date).toLocaleDateString('he-IL', { day: '2-digit', month: '2-digit' }),
            }));
          
            return (
              <Card>
                <CardHeader>
                  <CardTitle>×™×ª×¨×” ×ž×¦×˜×‘×¨×ª</CardTitle>
                </CardHeader>
                <CardContent className="h-80 w-full">
                  <ResponsiveContainer>
                    <AreaChart data={formattedData} margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>
                      <defs>
                        <linearGradient id="colorBalance" x1="0" y1="0" x2="0" y2="1">
                          <stop offset="5%" stopColor="#3b82f6" stopOpacity={0.8}/>
                          <stop offset="95%" stopColor="#3b82f6" stopOpacity={0}/>
                        </linearGradient>
                      </defs>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="formattedDate" />
                      <YAxis width={80} tickFormatter={(value) => `â‚ª${value.toLocaleString()}`} />
                      <Tooltip formatter={(value) => [`â‚ª${value.toLocaleString()}`, '×™×ª×¨×”']} />
                      <Area type="monotone" dataKey="balance" stroke="#3b82f6" fillOpacity={1} fill="url(#colorBalance)" />
                    </AreaChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>
            );
          };
        ðŸ“„ CategorySpendingTable.jsx
          // client/src/components/dashboard/CategorySpendingTable.jsx
          import {
            Card,
            CardContent,
            CardDescription,
            CardHeader,
            CardTitle,
          } from "@/components/ui/card";
          import {
            Table,
            TableBody,
            TableCell,
            TableHead,
            TableHeader,
            TableRow,
          } from "@/components/ui/table";
          
          // ×¤×•× ×§×¦×™×™×ª ×¢×–×¨ ×œ×—×™×©×•×‘ ×•×¢×™×¦×•×‘ ×”×©×™× ×•×™ ×‘××—×•×–×™×
          const calculateChange = (current, previous) => {
            if (previous === 0) {
              return current > 0 ? <span className="text-blue-600">×—×“×©</span> : <span className="text-gray-500">-</span>;
            }
            const change = ((current - previous) / previous) * 100;
            const color = change > 0 ? 'text-red-600' : 'text-green-600';
            const arrow = change > 0 ? 'â–²' : 'â–¼';
            return <span className={color}>{arrow} {Math.abs(change).toFixed(1)}%</span>;
          };
          
          export const CategorySpendingTable = ({ data = {} }) => {
            const sortedCategories = Object.entries(data)
              .map(([name, values]) => ({ name, ...values }))
              .sort((a, b) => b.current - a.current);
          
            return (
              <Card>
                <CardHeader>
                  <CardTitle>×”×•×¦××•×ª ×œ×¤×™ ×§×˜×’×•×¨×™×”</CardTitle>
                  <CardDescription>×”×©×•×•××” ×œ×—×•×“×© ×”×§×•×“×.</CardDescription>
                </CardHeader>
                <CardContent>
                  <Table>
                    <TableHeader>
                      <TableRow>
                        <TableHead className="text-right">×§×˜×’×•×¨×™×”</TableHead>
                        <TableHead className="text-center">×”×—×•×“×©</TableHead>
                        <TableHead className="text-center">×—×•×“×© ×§×•×“×</TableHead>
                        <TableHead className="text-center">×©×™× ×•×™</TableHead>
                      </TableRow>
                    </TableHeader>
                    <TableBody>
                      {sortedCategories.length > 0 ? sortedCategories.map((cat) => (
                        <TableRow key={cat.name}>
                          <TableCell className="font-medium">{cat.name}</TableCell>
                          <TableCell className="text-center">â‚ª{cat.current.toLocaleString()}</TableCell>
                          <TableCell className="text-center">â‚ª{cat.previous.toLocaleString()}</TableCell>
                          <TableCell className="text-center font-semibold">{calculateChange(cat.current, cat.previous)}</TableCell>
                        </TableRow>
                      )) : (
                        <TableRow>
                          <TableCell colSpan="4" className="text-center text-gray-500 py-8">
                            ××™×Ÿ × ×ª×•× ×™ ×”×•×¦××•×ª ×œ×”×¦×’×”.
                          </TableCell>
                        </TableRow>
                      )}
                    </TableBody>
                  </Table>
                </CardContent>
              </Card>
            );
          };
        ðŸ“„ FinanceControls.jsx
          // client/src/components/dashboard/FinanceControls.jsx
          import { useState, useEffect } from 'react';
          import { useFinanceStore } from '@/stores/financeStore';
          import { Button } from '@/components/ui/Button';
          import { Input } from '@/components/ui/Input';
          import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
          import toast from 'react-hot-toast';
          
          export const FinanceControls = () => {
            const { profile, fetchProfile, updateProfile, loading } = useFinanceStore();
            const [balances, setBalances] = useState({
              checking: 0,
              cash: 0,
              deposits: 0,
              stocks: 0,
            });
          
            // ×˜×¢×™× ×ª ×”× ×ª×•× ×™× ×”×¨××©×•× ×™×ª ×ž×”×©×¨×ª
            useEffect(() => {
              if (!profile) {
                fetchProfile();
              }
            }, [profile, fetchProfile]);
          
            // ×¢×“×›×•×Ÿ ×”×˜×•×¤×¡ ×›×©×”× ×ª×•× ×™× ×ž×”×©×¨×ª ×ž×’×™×¢×™×
            useEffect(() => {
              if (profile) {
                setBalances({
                  checking: profile.checking || 0,
                  cash: profile.cash || 0,
                  deposits: profile.deposits || 0,
                  stocks: profile.stocks || 0,
                });
              }
            }, [profile]);
          
            const handleChange = (e) => {
              const { name, value } = e.target;
              setBalances(prev => ({ ...prev, [name]: value }));
            };
          
            const handleSubmit = async (e) => {
              e.preventDefault();
              const numericBalances = {
                checking: Number(balances.checking),
                cash: Number(balances.cash),
                deposits: Number(balances.deposits),
                stocks: Number(balances.stocks),
              };
              await updateProfile(numericBalances);
              toast.success('×”×™×ª×¨×•×ª ×¢×•×“×›× ×• ×‘×”×¦×œ×—×”!');
            };
          
            return (
              <Card>
                <CardHeader>
                  <CardTitle>×¢×“×›×•×Ÿ ×™×ª×¨×•×ª ×‘×—×©×‘×•× ×•×ª</CardTitle>
                  <CardDescription>×”×–×Ÿ ×›××Ÿ ××ª ×”×™×ª×¨×•×ª ×”×¢×“×›× ×™×•×ª ×©×œ×š ×‘×—×©×‘×•× ×•×ª ×”×©×•× ×™×.</CardDescription>
                </CardHeader>
                <CardContent>
                  <form onSubmit={handleSubmit} className="space-y-4">
                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                      <div>
                        <label htmlFor="checking" className="block text-sm font-medium text-gray-700">×¢×•"×©</label>
                        <Input type="number" name="checking" id="checking" value={balances.checking} onChange={handleChange} className="mt-1" />
                      </div>
                      <div>
                        <label htmlFor="cash" className="block text-sm font-medium text-gray-700">×ž×–×•×ž×Ÿ</label>
                        <Input type="number" name="cash" id="cash" value={balances.cash} onChange={handleChange} className="mt-1" />
                      </div>
                      <div>
                        <label htmlFor="deposits" className="block text-sm font-medium text-gray-700">×¤×§×“×•× ×•×ª</label>
                        <Input type="number" name="deposits" id="deposits" value={balances.deposits} onChange={handleChange} className="mt-1" />
                      </div>
                      <div>
                        <label htmlFor="stocks" className="block text-sm font-medium text-gray-700">×”×©×§×¢×•×ª</label>
                        <Input type="number" name="stocks" id="stocks" value={balances.stocks} onChange={handleChange} className="mt-1" />
                      </div>
                    </div>
                    <div className="flex justify-end">
                      <Button type="submit" disabled={loading}>
                        {loading ? '×ž×¢×“×›×Ÿ...' : '×©×ž×•×¨ ×©×™× ×•×™×™×'}
                      </Button>
                    </div>
                  </form>
                </CardContent>
              </Card>
            );
          };
        ðŸ“„ MonthlySummary.jsx
          // client/src/components/dashboard/MonthlySummary.jsx
          import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
          
          // ×¤×•× ×§×¦×™×™×ª ×¢×–×¨ ×œ×™×¦×™×¨×ª ×›×¨×˜×™×¡ ×‘×•×“×“ (×”×•×¦××” ××• ×”×›× ×¡×”)
          const SummaryCard = ({ title, currentAmount, prevAmount, color, isExpense }) => {
            let changeText = '';
            let changeColor = 'text-gray-500';
            let arrow = '';
          
            if (prevAmount > 0) {
              const percentChange = ((currentAmount - prevAmount) / prevAmount) * 100;
              arrow = percentChange > 0 ? 'â–²' : 'â–¼';
          
              // Invert color logic for expenses (increase is bad)
              if (isExpense) {
                changeColor = percentChange > 0 ? 'text-red-600' : 'text-green-600';
              } else {
                changeColor = percentChange > 0 ? 'text-green-600' : 'text-red-600';
              }
              changeText = `(${Math.abs(percentChange).toFixed(0)}%)`;
            } else if (currentAmount > 0) {
              arrow = 'â–²';
              changeText = '(×—×“×©)';
              changeColor = isExpense ? 'text-red-600' : 'text-green-600';
            }
          
            return (
              <Card className={`bg-${color}-50 border-${color}-200`}>
                <CardHeader className="pb-2">
                  <CardTitle className={`text-base font-bold text-${color}-700`}>{title}</CardTitle>
                </CardHeader>
                <CardContent>
                  <p className={`text-3xl font-extrabold text-${color}-600`}>
                    â‚ª{currentAmount.toLocaleString('he-IL')}
                  </p>
                  <div className="flex items-center text-sm text-gray-500 mt-1">
                    <span>{`×—×•×“×© ×§×•×“×: â‚ª${prevAmount.toLocaleString('he-IL')}`}</span>
                    {changeText && (
                      <div className={`flex items-center font-semibold mr-2 ${changeColor}`}>
                        <span>{arrow}</span>
                        <span>{changeText}</span>
                      </div>
                    )}
                  </div>
                </CardContent>
              </Card>
            );
          };
          
          export const MonthlySummary = ({ data }) => {
            if (!data) return null;
          
            return (
              <div className="grid gap-6 md:grid-cols-2">
                <SummaryCard
                  title="×”×•×¦××•×ª ×”×—×•×“×©"
                  currentAmount={data.thisMonth.expense}
                  prevAmount={data.prevMonth.expense}
                  color="red"
                  isExpense={true}
                />
                <SummaryCard
                  title="×”×›× ×¡×•×ª ×”×—×•×“×©"
                  currentAmount={data.thisMonth.income}
                  prevAmount={data.prevMonth.income}
                  color="green"
                  isExpense={false}
                />
              </div>
            );
          };
        ðŸ“„ ProjectsOverview.jsx
          // client/src/components/dashboard/ProjectsOverview.jsx
          import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
          import { Progress } from "@/components/ui/progress"; // ×©×™×ž×•×© ×‘×¨×›×™×‘ ×”×§×™×™× ×©×œ×š
          
          export const ProjectsOverview = ({ projects = [] }) => {
            return (
              <Card>
                <CardHeader>
                  <CardTitle>×¤×¨×•×™×§×˜×™× ×¤×¢×™×œ×™×</CardTitle>
                </CardHeader>
                <CardContent>
                  {projects.length > 0 ? (
                    <div className="space-y-4">
                      {projects.map((project) => {
                        const progress = project.targetAmount > 0
                          ? (project.currentAmount / project.targetAmount) * 100
                          : 0;
          
                        return (
                          <div key={project._id}>
                            <div className="flex justify-between items-center mb-1 text-sm">
                              <span className="font-medium">{project.projectName}</span>
                              <span className="text-gray-500">
                                â‚ª{project.currentAmount.toLocaleString()} / â‚ª{project.targetAmount.toLocaleString()}
                              </span>
                            </div>
                            <Progress value={progress} className="h-2" />
                          </div>
                        );
                      })}
                    </div>
                  ) : (
                    <p className="text-sm text-gray-500 text-center py-4">××™×Ÿ ×¤×¨×•×™×§×˜×™× ×¤×¢×™×œ×™× ×›×¨×’×¢.</p>
                  )}
                </CardContent>
              </Card>
            );
          };
      ðŸ“ investments/
        ðŸ“„ StocksManager.jsx
          import React, { useEffect, useState } from "react";
          import { useStockStore } from "@/stores/stockStore";
          import { Button } from "@/components/ui/Button";
          import { Input } from "@/components/ui/Input";
          
          /**
           * StocksManager.jsx â€“ ×“×£ × ×™×”×•×œ ×ž× ×™×•×ª
           */
          const StocksManager = () => {
            // Zustand store actions & state (×¢× ×¢×¨×›×™ ×‘×¨×™×¨×ªÖ¾×ž×—×“×œ ×œ×ž× ×™×¢×ª ×§×¨×™×¡×”)
            const {
              stocks = [],
              loading = false,
              error = "",
              fetchStocks = () => {},
              addStock = () => {},
              deleteStock = () => {},
              sellStock = () => {},
              refreshPrices = () => {},
            } = useStockStore();
          
            // ×˜×•×¤×¡ ×ž×§×•×ž×™
            const [form, setForm] = useState({
              ticker: "",
              purchasePrice: "",
              investedAmount: "",
            });
          
            // ×˜×¢×™× ×ª × ×ª×•× ×™× ×¤×¢× ××—×ª
            useEffect(() => {
              fetchStocks();
            }, [fetchStocks]);
          
            const handleChange = (e) =>
              setForm((p) => ({ ...p, [e.target.name]: e.target.value }));
          
            const handleAdd = async (e) => {
              e.preventDefault();
              await addStock({
                ...form,
                purchasePrice: Number(form.purchasePrice),
                investedAmount: Number(form.investedAmount),
              });
              setForm({ ticker: "", purchasePrice: "", investedAmount: "" });
            };
          
            return (
              <div className="space-y-8">
                <h1 className="text-2xl font-bold">× ×™×”×•×œ ×ž× ×™×•×ª</h1>
          
                {/* ×˜×•×¤×¡ ×”×•×¡×¤×” */}
                <form onSubmit={handleAdd} className="grid gap-4 md:grid-cols-4">
                  <Input name="ticker" value={form.ticker} onChange={handleChange} placeholder="×¡×™×ž×•×œ" required />
                  <Input
                    name="purchasePrice"
                    type="number"
                    min="0"
                    step="0.01"
                    value={form.purchasePrice}
                    onChange={handleChange}
                    placeholder="×ž×—×™×¨ ×§× ×™×™×” ($)"
                    required
                  />
                  <Input
                    name="investedAmount"
                    type="number"
                    min="0"
                    step="0.01"
                    value={form.investedAmount}
                    onChange={handleChange}
                    placeholder="×¡×›×•× ×”×©×§×¢×” ($)"
                    required
                  />
                  <Button type="submit" disabled={loading} size="sm">
                    ×”×•×¡×£
                  </Button>
                </form>
          
                {error && <p className="text-red-600">{error}</p>}
                {loading && <p>×˜×•×¢×Ÿ...</p>}
          
                <div className="flex justify-between items-center">
                  <h2 className="text-xl font-semibold">×¨×©×™×ž×ª ×ž× ×™×•×ª</h2>
                  <Button variant="secondary" size="sm" onClick={refreshPrices} disabled={loading}>
                    ×¨×¢× ×Ÿ ×ž×—×™×¨×™×
                  </Button>
                </div>
          
                {/* ×˜×‘×œ×” */}
                {stocks.length === 0 ? (
                  <p className="text-gray-500">××™×Ÿ ×ž× ×™×•×ª ×œ×”×¦×’×”.</p>
                ) : (
                  <div className="overflow-x-auto">
                    <table className="min-w-full text-sm rtl text-right">
                      <thead>
                        <tr className="border-b">
                          <th className="px-2 py-1">×¡×™×ž×•×œ</th>
                          <th className="px-2 py-1">×ž×—×™×¨ ×§× ×™×™×” ($)</th>
                          <th className="px-2 py-1">×›×ž×•×ª</th>
                          <th className="px-2 py-1">×ž×—×™×¨ × ×•×›×—×™ ($)</th>
                          <th className="px-2 py-1">P/L ($)</th>
                          <th className="px-2 py-1"></th>
                        </tr>
                      </thead>
                      <tbody>
                        {stocks.map((s) => {
                          const shares = s.investedAmount / s.purchasePrice;
                          const profit = (s.currentPrice - s.purchasePrice) * shares;
                          return (
                            <tr key={s._id} className="border-b hover:bg-gray-50">
                              <td className="px-2 py-1 font-medium">{s.ticker}</td>
                              <td className="px-2 py-1">{s.purchasePrice.toFixed(2)}</td>
                              <td className="px-2 py-1">{shares.toFixed(4)}</td>
                              <td className="px-2 py-1">{s.currentPrice.toFixed(2)}</td>
                              <td className={`px-2 py-1 ${profit >= 0 ? "text-green-600" : "text-red-600"}`}>{profit.toFixed(2)}</td>
                              <td className="px-2 py-1 flex gap-2 justify-end">
                                <Button size="xs" onClick={() => sellStock(s._id)}>
                                  ×ž×›×•×¨
                                </Button>
                                <Button size="xs" variant="destructive" onClick={() => deleteStock(s._id)}>
                                  ×ž×—×§
                                </Button>
                              </td>
                            </tr>
                          );
                        })}
                      </tbody>
                    </table>
                  </div>
                )}
              </div>
            );
          };
          
          export default StocksManager;
      ðŸ“ loans/
        ðŸ“„ AmortizationTable.jsx
          // client/src/components/loans/AmortizationTable.jsx
          
          import React from 'react';
          
          const AmortizationTable = ({ schedule }) => {
            console.log('--- ×˜×‘×œ×ª ×”×ª×©×œ×•×ž×™× × ×˜×¢× ×ª ---');
            console.log('×§×™×‘×œ×ª×™ schedule:', schedule);
          
            if (!schedule || schedule.length === 0) {
              return null;
            }
          
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            console.log('×”×ª××¨×™×š ×©×œ "×”×™×•×" ×œ×¦×•×¨×š ×”×©×•×•××”:', today.toISOString());
          
            const formatCurrency = (num) => `â‚ª${num.toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
            const formatDate = (dateStr) => new Date(dateStr).toLocaleDateString('he-IL', { year: 'numeric', month: '2-digit' });
          
            return (
              <div className="mt-8 bg-white rounded-lg shadow border overflow-hidden">
                <h3 className="text-lg font-bold p-4 border-b">×œ×•×— ×¡×™×œ×•×§×™×Ÿ</h3>
                <div className="overflow-x-auto">
                  <table className="w-full text-sm text-left">
                    {/* ... thead ... */}
                    <thead className="bg-gray-50 text-gray-600">
                      <tr>
                        <th className="p-3">×ª×©×œ×•×</th>
                        <th className="p-3">×ª××¨×™×š</th>
                        <th className="p-3">×”×—×–×¨ ×§×¨×Ÿ</th>
                        <th className="p-3">×”×—×–×¨ ×¨×™×‘×™×ª</th>
                        <th className="p-3">×¡×”"×› ×ª×©×œ×•×</th>
                        <th className="p-3">×™×ª×¨×” ×œ×¡×™×œ×•×§</th>
                      </tr>
                    </thead>
                    <tbody>
                      {schedule.map((row) => {
                        const paymentDate = new Date(row.date);
                        const isPast = paymentDate < today;
          
                        // ×”×“×¤×¡×” ×œ×›×œ ×©×•×¨×” ×‘×˜×‘×œ×”
                        console.log(
                          `×ž×¢×‘×“ ×©×•×¨×” ${row.paymentNumber}:`,
                          `×ª××¨×™×š ×ª×©×œ×•×: ${paymentDate.toISOString()}`,
                          `×”×× ×¢×‘×¨? ${isPast}`
                        );
          
                        const rowClass = isPast
                          ? 'border-b last:border-b-0 bg-gray-100 text-gray-500'
                          : 'border-b last:border-b-0 hover:bg-gray-50';
          
                        return (
                          <tr key={row.paymentNumber} className={rowClass}>
                            <td className="p-3">{row.paymentNumber}</td>
                            <td className="p-3">{formatDate(row.date)}</td>
                            <td className="p-3">{formatCurrency(row.principal)}</td>
                            <td className="p-3">{formatCurrency(row.interest)}</td>
                            <td className="p-3 font-semibold">{formatCurrency(row.totalPayment)}</td>
                            <td className="p-3">{formatCurrency(row.remainingBalance)}</td>
                          </tr>
                        );
                      })}
                    </tbody>
                  </table>
                </div>
              </div>
            );
          };
          
          export default AmortizationTable;
        ðŸ“„ LoanForm.jsx
          // client/src/components/loans/LoanForm.jsx
          
          import React, { useState } from 'react';
          import { Button } from '@/components/ui/Button';
          import { Input } from '@/components/ui/Input';
          import { Label } from '@/components/ui/label';
          import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
          
          const LoanForm = ({ onSave, isLoading }) => {
            const [formData, setFormData] = useState({
              name: '',
              principal: '100000',
              annualRate: '6',
              termInMonths: '60',
              startDate: new Date().toISOString().split('T')[0],
              repaymentType: '×©×¤×™×¦×¨',
            });
          
            const handleChange = (e) => {
              const { name, value } = e.target;
              setFormData(prev => ({ ...prev, [name]: value }));
            };
          
            const handleSelectChange = (value) => {
              setFormData(prev => ({ ...prev, repaymentType: value }));
            };
          
            const handleSubmit = (e) => {
              e.preventDefault();
              const submissionData = {
                ...formData,
                principal: Number(formData.principal),
                annualRate: Number(formData.annualRate),
                termInMonths: Number(formData.termInMonths),
                startDate: new Date(formData.startDate),
              };
              onSave(submissionData);
            };
          
            return (
              <form onSubmit={handleSubmit} className="p-6 bg-white rounded-lg shadow space-y-4 border">
                <h2 className="text-xl font-bold text-center">×™×¦×™×¨×ª ×”×œ×•×•××” ×—×“×©×”</h2>
          
                <div>
                  <Label htmlFor="name">×©× ×”×”×œ×•×•××”</Label>
                  <Input id="name" name="name" type="text" value={formData.name} onChange={handleChange} placeholder="×œ×“×•×’×ž×”: ×”×œ×•×•××” ×œ×¨×›×‘" required />
                </div>
          
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <Label htmlFor="principal">×¡×›×•× (â‚ª)</Label>
                    <Input id="principal" name="principal" type="number" value={formData.principal} onChange={handleChange} required />
                  </div>
                  <div>
                    <Label htmlFor="annualRate">×¨×™×‘×™×ª ×©× ×ª×™×ª (%)</Label>
                    <Input id="annualRate" name="annualRate" type="number" step="0.01" value={formData.annualRate} onChange={handleChange} required />
                  </div>
                </div>
          
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <Label htmlFor="termInMonths">×ª×§×•×¤×” (×—×•×“×©×™×)</Label>
                    <Input id="termInMonths" name="termInMonths" type="number" value={formData.termInMonths} onChange={handleChange} required />
                  </div>
                  <div>
                    <Label htmlFor="startDate">×ª××¨×™×š ×ª×©×œ×•× ×¨××©×•×Ÿ</Label>
                    <Input id="startDate" name="startDate" type="date" value={formData.startDate} onChange={handleChange} required />
                  </div>
                </div>
          
                <div>
                  <Label>×©×™×˜×ª ×”×—×–×¨</Label>
                  <Select value={formData.repaymentType} onValueChange={handleSelectChange}>
                    <SelectTrigger>
                      <SelectValue placeholder="×‘×—×¨ ×©×™×˜×ª ×”×—×–×¨" />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="×©×¤×™×¦×¨">×©×¤×™×¦×¨</SelectItem>
                      <SelectItem value="×§×¨×Ÿ ×©×•×•×”">×§×¨×Ÿ ×©×•×•×”</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
          
                <Button type="submit" className="w-full" disabled={isLoading}>
                  {isLoading ? '×©×•×ž×¨...' : '×©×ž×•×¨ ×•×—×©×‘ ×œ×•×— ×¡×™×œ×•×§×™×Ÿ'}
                </Button>
              </form>
            );
          };
          
          export default LoanForm;
        ðŸ“„ LoanSummaryCard.jsx
          // client/src/components/loans/LoanSummaryCard.jsx
          
          import React from 'react';
          import { Link } from 'react-router-dom';
          import { Button } from '@/components/ui/Button';
          
          const LoanSummaryCard = ({ loan }) => {
            const formatCurrency = (num) => `â‚ª${(num || 0).toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
          
            // --- ðŸ‘‡ ×”×©×™× ×•×™ ×”×ž×¨×›×–×™ ×›××Ÿ ðŸ‘‡ ---
            // ×ž×—×©×‘×™× ××ª ×”×™×ª×¨×” ×”× ×•×›×—×™×ª ×‘×“×™×•×§ ×›×ž×• ×‘×¢×ž×•×“ ×”×¤×™×¨×•×˜
            const today = new Date();
            today.setHours(0, 0, 0, 0);
          
            const pastPayments = loan.amortizationSchedule.filter(p => new Date(p.date) < today);
            const lastPaidPayment = pastPayments[pastPayments.length - 1];
            const currentBalance = lastPaidPayment ? lastPaidPayment.remainingBalance : loan.principal;
            // --- ×¡×•×£ ×”×©×™× ×•×™ ---
          
            return (
              <div className="bg-white p-4 rounded-lg shadow border flex flex-col justify-between">
                <div>
                  <h3 className="font-bold text-lg">{loan.name}</h3>
                  <p className="text-sm text-gray-600">×¡×›×•× ×ž×§×•×¨×™: {formatCurrency(loan.principal)}</p>
                  {/* ×ž×¦×™×’×™× ××ª ×”×™×ª×¨×” ×”×¢×“×›× ×™×ª ×©×—×™×©×‘× ×• */}
                  <p className="text-sm text-gray-600">×™×ª×¨×” × ×•×›×—×™×ª ×œ×¡×™×œ×•×§: <span className="font-semibold">{formatCurrency(currentBalance)}</span></p>
                </div>
                <div className="pt-2 mt-2">
                  <Button asChild variant="outline" size="sm" className="w-full">
                    <Link to={`/loans/${loan._id}`}>×¦×¤×” ×‘×¤×¨×˜×™×</Link>
                  </Button>
                </div>
              </div>
            );
          };
          
          export default LoanSummaryCard;
      ðŸ“ routes/
        ðŸ“„ UserRoute.jsx
          import { Navigate } from 'react-router-dom';
          import { useAuthStore } from '@/stores/authStore';
          
          // âœ¨ 1. ×”×§×•×ž×¤×•× × ×˜×” ×¦×¨×™×›×” ×œ×§×‘×œ ××ª ×”-children ×©×œ×”
          export default function UserRoute({ children }) {
            const { isAuthenticated, isLoading } = useAuthStore((state) => ({
              isAuthenticated: state.isAuthenticated,
              // ×”×•×¡×¤× ×• ×‘×“×™×§×” ×× ×”×—× ×•×ª ×¡×™×™×ž×” ×œ×”×™×˜×¢×Ÿ, ×œ×ž× ×™×¢×ª ×§×¤×™×¦×•×ª
              isLoading: state.isInitialized === false,
            }));
          
            // ×‘×–×ž×Ÿ ×©×”×—× ×•×ª × ×˜×¢× ×ª, × ×—×›×”
            if (isLoading) {
              return <div>×˜×•×¢×Ÿ...</div>;
            }
          
            // âœ¨ 2. ×”×‘×“×™×§×” ×¦×¨×™×›×” ×œ×”×™×•×ª ×¢×œ isAuthenticated
            return isAuthenticated
              ? children // âœ¨ 3. ×× ×ž×—×•×‘×¨, ×”×¦×’ ××ª ×”-children (××ª ×”×“×£ ×¢×¦×ž×•)
              : <Navigate to="/login" replace />;
          }
      ðŸ“ ui/
        ðŸ“„ AnimatedNavLink.jsx
          import { NavLink } from "react-router-dom";
          import { motion } from "framer-motion";
          
          export const AnimatedNavLink = ({ to, label, className, children }) => {
            return (
              <NavLink to={to} className={({ isActive }) => `${className} ${isActive ? "active" : ""}`}>
                {({ isActive }) => (
                  <div className="relative flex items-center justify-center">
                    <span className="relative z-10">{label}</span>
                    {isActive && (
                      <motion.div
                        layoutId="active-pill"
                        className="absolute inset-0 z-0 rounded-full bg-primary/10"
                        transition={{ type: "spring", stiffness: 300, damping: 30 }}
                      />
                    )}
                    {children}
                  </div>
                )}
              </NavLink>
            );
          };
        ðŸ“„ Button.jsx
          import * as React from "react"
          import { Slot } from "@radix-ui/react-slot"
          import { cva } from "class-variance-authority";
          
          import { cn } from "@/lib/utils"
          
          const buttonVariants = cva(
            "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
            {
              variants: {
                variant: {
                  default:
                    "bg-primary text-primary-foreground shadow hover:bg-primary/90",
                  destructive:
                    "bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",
                  outline:
                    "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
                  secondary:
                    "bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",
                  ghost: "hover:bg-accent hover:text-accent-foreground",
                  link: "text-primary underline-offset-4 hover:underline",
                },
                size: {
                  default: "h-9 px-4 py-2",
                  sm: "h-8 rounded-md px-3 text-xs",
                  lg: "h-10 rounded-md px-8",
                  icon: "h-9 w-9",
                },
              },
              defaultVariants: {
                variant: "default",
                size: "default",
              },
            }
          )
          
          const Button = React.forwardRef(({ className, variant, size, asChild = false, ...props }, ref) => {
            const Comp = asChild ? Slot : "button"
            return (
              <Comp
                className={cn(buttonVariants({ variant, size, className }))}
                ref={ref}
                {...props} />
            );
          })
          Button.displayName = "Button"
          
          export { Button, buttonVariants }
        ðŸ“„ Input.jsx
          import * as React from "react"
          
          import { cn } from "@/lib/utils"
          
          const Input = React.forwardRef(({ className, type, ...props }, ref) => {
            return (
              <input
                type={type}
                className={cn(
                  "flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
                  className
                )}
                ref={ref}
                {...props} />
            );
          })
          Input.displayName = "Input"
          
          export { Input }
        ðŸ“„ badge.jsx
          import * as React from "react"
          import { cva } from "class-variance-authority";
          
          import { cn } from "@/lib/utils"
          
          const badgeVariants = cva(
            "inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
            {
              variants: {
                variant: {
                  default:
                    "border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",
                  secondary:
                    "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
                  destructive:
                    "border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",
                  outline: "text-foreground",
                },
              },
              defaultVariants: {
                variant: "default",
              },
            }
          )
          
          function Badge({
            className,
            variant,
            ...props
          }) {
            return (<div className={cn(badgeVariants({ variant }), className)} {...props} />);
          }
          
          export { Badge, badgeVariants }
        ðŸ“„ card.jsx
          import * as React from "react"
          
          import { cn } from "@/lib/utils"
          
          const Card = React.forwardRef(({ className, ...props }, ref) => (
            <div
              ref={ref}
              className={cn("rounded-xl border bg-card text-card-foreground shadow", className)}
              {...props} />
          ))
          Card.displayName = "Card"
          
          const CardHeader = React.forwardRef(({ className, ...props }, ref) => (
            <div
              ref={ref}
              className={cn("flex flex-col space-y-1.5 p-6", className)}
              {...props} />
          ))
          CardHeader.displayName = "CardHeader"
          
          const CardTitle = React.forwardRef(({ className, ...props }, ref) => (
            <div
              ref={ref}
              className={cn("font-semibold leading-none tracking-tight", className)}
              {...props} />
          ))
          CardTitle.displayName = "CardTitle"
          
          const CardDescription = React.forwardRef(({ className, ...props }, ref) => (
            <div
              ref={ref}
              className={cn("text-sm text-muted-foreground", className)}
              {...props} />
          ))
          CardDescription.displayName = "CardDescription"
          
          const CardContent = React.forwardRef(({ className, ...props }, ref) => (
            <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
          ))
          CardContent.displayName = "CardContent"
          
          const CardFooter = React.forwardRef(({ className, ...props }, ref) => (
            <div
              ref={ref}
              className={cn("flex items-center p-6 pt-0", className)}
              {...props} />
          ))
          CardFooter.displayName = "CardFooter"
          
          export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }
        ðŸ“„ checkbox.jsx
          import * as React from "react"
          import * as CheckboxPrimitive from "@radix-ui/react-checkbox"
          import { Check } from "lucide-react"
          
          import { cn } from "@/lib/utils"
          
          const Checkbox = React.forwardRef(({ className, ...props }, ref) => (
            <CheckboxPrimitive.Root
              ref={ref}
              className={cn(
                "peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",
                className
              )}
              {...props}>
              <CheckboxPrimitive.Indicator className={cn("flex items-center justify-center text-current")}>
                <Check className="h-4 w-4" />
              </CheckboxPrimitive.Indicator>
            </CheckboxPrimitive.Root>
          ))
          Checkbox.displayName = CheckboxPrimitive.Root.displayName
          
          export { Checkbox }
        ðŸ“„ datepicker.jsx
          import { useState } from 'react';
          
          /* â”€â”€ DatePicker â”€â”€ */
          function DatePicker({ label, value = '', onChange }) {
            const [val, setVal] = useState(value);
          
            const handle = (e) => {
              setVal(e.target.value);
              onChange?.(e.target.value);
            };
          
            return (
              <label className="flex flex-col gap-1 text-sm font-medium text-gray-700 rtl">
                {label}
                <input
                  type="date"
                  value={val}
                  onChange={handle}
                  className="rounded border px-2 py-1"
                />
              </label>
            );
          }
          
          export default DatePicker;            // import DatePicker from ...
          export { DatePicker };                // import { DatePicker } ...
        ðŸ“„ dialog.jsx
          import * as React from "react"
          import * as DialogPrimitive from "@radix-ui/react-dialog"
          import { X } from "lucide-react"
          
          import { cn } from "@/lib/utils"
          
          const Dialog = DialogPrimitive.Root
          
          const DialogTrigger = DialogPrimitive.Trigger
          
          const DialogPortal = DialogPrimitive.Portal
          
          const DialogClose = DialogPrimitive.Close
          
          const DialogOverlay = React.forwardRef(({ className, ...props }, ref) => (
            <DialogPrimitive.Overlay
              ref={ref}
              className={cn(
                "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
                className
              )}
              {...props} />
          ))
          DialogOverlay.displayName = DialogPrimitive.Overlay.displayName
          
          const DialogContent = React.forwardRef(({ className, children, ...props }, ref) => (
            <DialogPortal>
              <DialogOverlay />
              <DialogPrimitive.Content
                ref={ref}
                className={cn(
                  "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
                  className
                )}
                {...props}>
                {children}
                <DialogPrimitive.Close
                  className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground">
                  <X className="h-4 w-4" />
                  <span className="sr-only">Close</span>
                </DialogPrimitive.Close>
              </DialogPrimitive.Content>
            </DialogPortal>
          ))
          DialogContent.displayName = DialogPrimitive.Content.displayName
          
          const DialogHeader = ({
            className,
            ...props
          }) => (
            <div
              className={cn("flex flex-col space-y-1.5 text-center sm:text-left", className)}
              {...props} />
          )
          DialogHeader.displayName = "DialogHeader"
          
          const DialogFooter = ({
            className,
            ...props
          }) => (
            <div
              className={cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className)}
              {...props} />
          )
          DialogFooter.displayName = "DialogFooter"
          
          const DialogTitle = React.forwardRef(({ className, ...props }, ref) => (
            <DialogPrimitive.Title
              ref={ref}
              className={cn("text-lg font-semibold leading-none tracking-tight", className)}
              {...props} />
          ))
          DialogTitle.displayName = DialogPrimitive.Title.displayName
          
          const DialogDescription = React.forwardRef(({ className, ...props }, ref) => (
            <DialogPrimitive.Description
              ref={ref}
              className={cn("text-sm text-muted-foreground", className)}
              {...props} />
          ))
          DialogDescription.displayName = DialogPrimitive.Description.displayName
          
          export {
            Dialog,
            DialogPortal,
            DialogOverlay,
            DialogTrigger,
            DialogClose,
            DialogContent,
            DialogHeader,
            DialogFooter,
            DialogTitle,
            DialogDescription,
          }
        ðŸ“„ dropdown-menu.jsx
          "use client"
          
          import * as React from "react"
          import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"
          import { Check, ChevronRight, Circle } from "lucide-react"
          
          import { cn } from "@/lib/utils"
          
          const DropdownMenu = DropdownMenuPrimitive.Root
          
          const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger
          
          const DropdownMenuGroup = DropdownMenuPrimitive.Group
          
          const DropdownMenuPortal = DropdownMenuPrimitive.Portal
          
          const DropdownMenuSub = DropdownMenuPrimitive.Sub
          
          const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup
          
          const DropdownMenuSubTrigger = React.forwardRef(({ className, inset, children, ...props }, ref) => (
            <DropdownMenuPrimitive.SubTrigger
              ref={ref}
              className={cn(
                "flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
                inset && "pl-8",
                className
              )}
              {...props}>
              {children}
              <ChevronRight className="ml-auto" />
            </DropdownMenuPrimitive.SubTrigger>
          ))
          DropdownMenuSubTrigger.displayName =
            DropdownMenuPrimitive.SubTrigger.displayName
          
          const DropdownMenuSubContent = React.forwardRef(({ className, ...props }, ref) => (
            <DropdownMenuPrimitive.SubContent
              ref={ref}
              className={cn(
                "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",
                className
              )}
              {...props} />
          ))
          DropdownMenuSubContent.displayName =
            DropdownMenuPrimitive.SubContent.displayName
          
          const DropdownMenuContent = React.forwardRef(({ className, sideOffset = 4, ...props }, ref) => (
            <DropdownMenuPrimitive.Portal>
              <DropdownMenuPrimitive.Content
                ref={ref}
                sideOffset={sideOffset}
                className={cn(
                  "z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",
                  "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",
                  className
                )}
                {...props} />
            </DropdownMenuPrimitive.Portal>
          ))
          DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName
          
          const DropdownMenuItem = React.forwardRef(({ className, inset, ...props }, ref) => (
            <DropdownMenuPrimitive.Item
              ref={ref}
              className={cn(
                "relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",
                inset && "pl-8",
                className
              )}
              {...props} />
          ))
          DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName
          
          const DropdownMenuCheckboxItem = React.forwardRef(({ className, children, checked, ...props }, ref) => (
            <DropdownMenuPrimitive.CheckboxItem
              ref={ref}
              className={cn(
                "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
                className
              )}
              checked={checked}
              {...props}>
              <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
                <DropdownMenuPrimitive.ItemIndicator>
                  <Check className="h-4 w-4" />
                </DropdownMenuPrimitive.ItemIndicator>
              </span>
              {children}
            </DropdownMenuPrimitive.CheckboxItem>
          ))
          DropdownMenuCheckboxItem.displayName =
            DropdownMenuPrimitive.CheckboxItem.displayName
          
          const DropdownMenuRadioItem = React.forwardRef(({ className, children, ...props }, ref) => (
            <DropdownMenuPrimitive.RadioItem
              ref={ref}
              className={cn(
                "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
                className
              )}
              {...props}>
              <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
                <DropdownMenuPrimitive.ItemIndicator>
                  <Circle className="h-2 w-2 fill-current" />
                </DropdownMenuPrimitive.ItemIndicator>
              </span>
              {children}
            </DropdownMenuPrimitive.RadioItem>
          ))
          DropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName
          
          const DropdownMenuLabel = React.forwardRef(({ className, inset, ...props }, ref) => (
            <DropdownMenuPrimitive.Label
              ref={ref}
              className={cn("px-2 py-1.5 text-sm font-semibold", inset && "pl-8", className)}
              {...props} />
          ))
          DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName
          
          const DropdownMenuSeparator = React.forwardRef(({ className, ...props }, ref) => (
            <DropdownMenuPrimitive.Separator
              ref={ref}
              className={cn("-mx-1 my-1 h-px bg-muted", className)}
              {...props} />
          ))
          DropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName
          
          const DropdownMenuShortcut = ({
            className,
            ...props
          }) => {
            return (
              <span
                className={cn("ml-auto text-xs tracking-widest opacity-60", className)}
                {...props} />
            );
          }
          DropdownMenuShortcut.displayName = "DropdownMenuShortcut"
          
          export {
            DropdownMenu,
            DropdownMenuTrigger,
            DropdownMenuContent,
            DropdownMenuItem,
            DropdownMenuCheckboxItem,
            DropdownMenuRadioItem,
            DropdownMenuLabel,
            DropdownMenuSeparator,
            DropdownMenuShortcut,
            DropdownMenuGroup,
            DropdownMenuPortal,
            DropdownMenuSub,
            DropdownMenuSubContent,
            DropdownMenuSubTrigger,
            DropdownMenuRadioGroup,
          }
        ðŸ“„ label.jsx
          import * as React from "react"
          import * as LabelPrimitive from "@radix-ui/react-label"
          import { cva } from "class-variance-authority";
          
          import { cn } from "@/lib/utils"
          
          const labelVariants = cva(
            "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
          )
          
          const Label = React.forwardRef(({ className, ...props }, ref) => (
            <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />
          ))
          Label.displayName = LabelPrimitive.Root.displayName
          
          export { Label }
        ðŸ“„ progress.jsx
          import * as React from "react"
          import * as ProgressPrimitive from "@radix-ui/react-progress"
          
          import { cn } from "@/lib/utils"
          
          const Progress = React.forwardRef(({ className, value, ...props }, ref) => (
            <ProgressPrimitive.Root
              ref={ref}
              className={cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary", className)}
              {...props}
            >
              <ProgressPrimitive.Indicator
                className="h-full w-full flex-1 bg-primary transition-all"
                style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
              />
            </ProgressPrimitive.Root>
          ))
          Progress.displayName = ProgressPrimitive.Root.displayName
          
          export { Progress }
        ðŸ“„ select.jsx
          "use client"
          
          import * as React from "react"
          import * as SelectPrimitive from "@radix-ui/react-select"
          import { Check, ChevronDown, ChevronUp } from "lucide-react"
          
          import { cn } from "@/lib/utils"
          
          const Select = SelectPrimitive.Root
          
          const SelectGroup = SelectPrimitive.Group
          
          const SelectValue = SelectPrimitive.Value
          
          const SelectTrigger = React.forwardRef(({ className, children, ...props }, ref) => (
            <SelectPrimitive.Trigger
              ref={ref}
              className={cn(
                "flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
                className
              )}
              {...props}>
              {children}
              <SelectPrimitive.Icon asChild>
                <ChevronDown className="h-4 w-4 opacity-50" />
              </SelectPrimitive.Icon>
            </SelectPrimitive.Trigger>
          ))
          SelectTrigger.displayName = SelectPrimitive.Trigger.displayName
          
          const SelectScrollUpButton = React.forwardRef(({ className, ...props }, ref) => (
            <SelectPrimitive.ScrollUpButton
              ref={ref}
              className={cn("flex cursor-default items-center justify-center py-1", className)}
              {...props}>
              <ChevronUp className="h-4 w-4" />
            </SelectPrimitive.ScrollUpButton>
          ))
          SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName
          
          const SelectScrollDownButton = React.forwardRef(({ className, ...props }, ref) => (
            <SelectPrimitive.ScrollDownButton
              ref={ref}
              className={cn("flex cursor-default items-center justify-center py-1", className)}
              {...props}>
              <ChevronDown className="h-4 w-4" />
            </SelectPrimitive.ScrollDownButton>
          ))
          SelectScrollDownButton.displayName =
            SelectPrimitive.ScrollDownButton.displayName
          
          const SelectContent = React.forwardRef(({ className, children, position = "popper", ...props }, ref) => (
            <SelectPrimitive.Portal>
              <SelectPrimitive.Content
                ref={ref}
                className={cn(
                  "relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",
                  position === "popper" &&
                    "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
                  className
                )}
                position={position}
                {...props}>
                <SelectScrollUpButton />
                <SelectPrimitive.Viewport
                  className={cn("p-1", position === "popper" &&
                    "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]")}>
                  {children}
                </SelectPrimitive.Viewport>
                <SelectScrollDownButton />
              </SelectPrimitive.Content>
            </SelectPrimitive.Portal>
          ))
          SelectContent.displayName = SelectPrimitive.Content.displayName
          
          const SelectLabel = React.forwardRef(({ className, ...props }, ref) => (
            <SelectPrimitive.Label
              ref={ref}
              className={cn("px-2 py-1.5 text-sm font-semibold", className)}
              {...props} />
          ))
          SelectLabel.displayName = SelectPrimitive.Label.displayName
          
          const SelectItem = React.forwardRef(({ className, children, ...props }, ref) => (
            <SelectPrimitive.Item
              ref={ref}
              className={cn(
                "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
                className
              )}
              {...props}>
              <span className="absolute right-2 flex h-3.5 w-3.5 items-center justify-center">
                <SelectPrimitive.ItemIndicator>
                  <Check className="h-4 w-4" />
                </SelectPrimitive.ItemIndicator>
              </span>
              <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
            </SelectPrimitive.Item>
          ))
          SelectItem.displayName = SelectPrimitive.Item.displayName
          
          const SelectSeparator = React.forwardRef(({ className, ...props }, ref) => (
            <SelectPrimitive.Separator
              ref={ref}
              className={cn("-mx-1 my-1 h-px bg-muted", className)}
              {...props} />
          ))
          SelectSeparator.displayName = SelectPrimitive.Separator.displayName
          
          export {
            Select,
            SelectGroup,
            SelectValue,
            SelectTrigger,
            SelectContent,
            SelectLabel,
            SelectItem,
            SelectSeparator,
            SelectScrollUpButton,
            SelectScrollDownButton,
          }
        ðŸ“„ separator.jsx
          import * as React from "react"
          import { cn } from "@/utils/cn"
          
          const Separator = React.forwardRef(
            ({ className, orientation = "horizontal", decorative = true, ...props }, ref) => (
              <div
                ref={ref}
                role={decorative ? "none" : "separator"}
                aria-orientation={decorative ? undefined : orientation}
                className={cn(
                  "shrink-0 bg-slate-200", // ×©×™× ×™×ª×™ ×œ-slate-200 ×›×“×™ ×©×™×ª××™× ×œ×¢×¨×›×ª ×”×¦×‘×¢×™× ×©×œ×š
                  orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]",
                  className
                )}
                {...props}
              />
            )
          )
          Separator.displayName = "Separator"
          
          export { Separator }
        ðŸ“„ skeleton.jsx
          import { cn } from "@/lib/utils"
          
          function Skeleton({
            className,
            ...props
          }) {
            return (
              <div
                className={cn("animate-pulse rounded-md bg-primary/10", className)}
                {...props} />
            );
          }
          
          export { Skeleton }
        ðŸ“„ switch.jsx
          import * as React from "react"
          import * as SwitchPrimitives from "@radix-ui/react-switch"
          
          import { cn } from "@/lib/utils"
          
          const Switch = React.forwardRef(({ className, ...props }, ref) => (
            <SwitchPrimitives.Root
              className={cn(
                "peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",
                className
              )}
              {...props}
              ref={ref}>
              <SwitchPrimitives.Thumb
                className={cn(
                  "pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0"
                )} />
            </SwitchPrimitives.Root>
          ))
          Switch.displayName = SwitchPrimitives.Root.displayName
          
          export { Switch }
        ðŸ“„ table.jsx
          import * as React from "react"
          
          import { cn } from "@/lib/utils"
          
          const Table = React.forwardRef(({ className, ...props }, ref) => (
            <div className="relative w-full overflow-auto">
              <table
                ref={ref}
                className={cn("w-full caption-bottom text-sm", className)}
                {...props} />
            </div>
          ))
          Table.displayName = "Table"
          
          const TableHeader = React.forwardRef(({ className, ...props }, ref) => (
            <thead ref={ref} className={cn("[&_tr]:border-b", className)} {...props} />
          ))
          TableHeader.displayName = "TableHeader"
          
          const TableBody = React.forwardRef(({ className, ...props }, ref) => (
            <tbody
              ref={ref}
              className={cn("[&_tr:last-child]:border-0", className)}
              {...props} />
          ))
          TableBody.displayName = "TableBody"
          
          const TableFooter = React.forwardRef(({ className, ...props }, ref) => (
            <tfoot
              ref={ref}
              className={cn("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0", className)}
              {...props} />
          ))
          TableFooter.displayName = "TableFooter"
          
          const TableRow = React.forwardRef(({ className, ...props }, ref) => (
            <tr
              ref={ref}
              className={cn(
                "border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",
                className
              )}
              {...props} />
          ))
          TableRow.displayName = "TableRow"
          
          const TableHead = React.forwardRef(({ className, ...props }, ref) => (
            <th
              ref={ref}
              className={cn(
                "h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
                className
              )}
              {...props} />
          ))
          TableHead.displayName = "TableHead"
          
          const TableCell = React.forwardRef(({ className, ...props }, ref) => (
            <td
              ref={ref}
              className={cn(
                "p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
                className
              )}
              {...props} />
          ))
          TableCell.displayName = "TableCell"
          
          const TableCaption = React.forwardRef(({ className, ...props }, ref) => (
            <caption
              ref={ref}
              className={cn("mt-4 text-sm text-muted-foreground", className)}
              {...props} />
          ))
          TableCaption.displayName = "TableCaption"
          
          export {
            Table,
            TableHeader,
            TableBody,
            TableFooter,
            TableHead,
            TableRow,
            TableCell,
            TableCaption,
          }
        ðŸ“„ textarea.jsx
          import * as React from "react"
          
          import { cn } from "@/lib/utils"
          
          const Textarea = React.forwardRef(({ className, ...props }, ref) => {
            return (
              (<textarea
                className={cn(
                  "flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
                  className
                )}
                ref={ref}
                {...props} />)
            );
          })
          Textarea.displayName = "Textarea"
          
          export { Textarea }
        ðŸ“„ toast.jsx
          import * as React from "react"
          import * as ToastPrimitives from "@radix-ui/react-toast"
          import { cva } from "class-variance-authority";
          import { X } from "lucide-react"
          
          import { cn } from "@/lib/utils"
          
          const ToastProvider = ToastPrimitives.Provider
          
          const ToastViewport = React.forwardRef(({ className, ...props }, ref) => (
            <ToastPrimitives.Viewport
              ref={ref}
              className={cn(
                "fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",
                className
              )}
              {...props} />
          ))
          ToastViewport.displayName = ToastPrimitives.Viewport.displayName
          
          const toastVariants = cva(
            "group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",
            {
              variants: {
                variant: {
                  default: "border bg-background text-foreground",
                  destructive:
                    "destructive group border-destructive bg-destructive text-destructive-foreground",
                },
              },
              defaultVariants: {
                variant: "default",
              },
            }
          )
          
          const Toast = React.forwardRef(({ className, variant, ...props }, ref) => {
            return (
              <ToastPrimitives.Root
                ref={ref}
                className={cn(toastVariants({ variant }), className)}
                {...props} />
            );
          })
          Toast.displayName = ToastPrimitives.Root.displayName
          
          const ToastAction = React.forwardRef(({ className, ...props }, ref) => (
            <ToastPrimitives.Action
              ref={ref}
              className={cn(
                "inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",
                className
              )}
              {...props} />
          ))
          ToastAction.displayName = ToastPrimitives.Action.displayName
          
          const ToastClose = React.forwardRef(({ className, ...props }, ref) => (
            <ToastPrimitives.Close
              ref={ref}
              className={cn(
                "absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",
                className
              )}
              toast-close=""
              {...props}>
              <X className="h-4 w-4" />
            </ToastPrimitives.Close>
          ))
          ToastClose.displayName = ToastPrimitives.Close.displayName
          
          const ToastTitle = React.forwardRef(({ className, ...props }, ref) => (
            <ToastPrimitives.Title
              ref={ref}
              className={cn("text-sm font-semibold [&+div]:text-xs", className)}
              {...props} />
          ))
          ToastTitle.displayName = ToastPrimitives.Title.displayName
          
          const ToastDescription = React.forwardRef(({ className, ...props }, ref) => (
            <ToastPrimitives.Description ref={ref} className={cn("text-sm opacity-90", className)} {...props} />
          ))
          ToastDescription.displayName = ToastPrimitives.Description.displayName
          
          export { ToastProvider, ToastViewport, Toast, ToastTitle, ToastDescription, ToastClose, ToastAction };
        ðŸ“„ toaster.jsx
          import { useToast } from "@/hooks/use-toast"
          import {
            Toast,
            ToastClose,
            ToastDescription,
            ToastProvider,
            ToastTitle,
            ToastViewport,
          } from "@/components/ui/toast"
          
          export function Toaster() {
            const { toasts } = useToast()
          
            return (
              <ToastProvider>
                {toasts.map(function ({ id, title, description, action, ...props }) {
                  return (
                    <Toast key={id} {...props}>
                      <div className="grid gap-1">
                        {title && <ToastTitle>{title}</ToastTitle>}
                        {description && (
                          <ToastDescription>{description}</ToastDescription>
                        )}
                      </div>
                      {action}
                      <ToastClose />
                    </Toast>
                  );
                })}
                <ToastViewport />
              </ToastProvider>
            );
          }
        ðŸ“„ tooltip.jsx
          import * as React from "react"
          import * as TooltipPrimitive from "@radix-ui/react-tooltip"
          
          import { cn } from "@/lib/utils"
          
          const TooltipProvider = TooltipPrimitive.Provider
          
          const Tooltip = TooltipPrimitive.Root
          
          const TooltipTrigger = TooltipPrimitive.Trigger
          
          const TooltipContent = React.forwardRef(({ className, sideOffset = 4, ...props }, ref) => (
            <TooltipPrimitive.Content
              ref={ref}
              sideOffset={sideOffset}
              className={cn(
                "z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
                className
              )}
              {...props} />
          ))
          TooltipContent.displayName = TooltipPrimitive.Content.displayName
          
          export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }
    ðŸ“ hooks/
      ðŸ“„ use-toast.js
        "use client";
        // Inspired by react-hot-toast library
        import * as React from "react"
        
        const TOAST_LIMIT = 1
        const TOAST_REMOVE_DELAY = 1000000
        
        const actionTypes = {
          ADD_TOAST: "ADD_TOAST",
          UPDATE_TOAST: "UPDATE_TOAST",
          DISMISS_TOAST: "DISMISS_TOAST",
          REMOVE_TOAST: "REMOVE_TOAST"
        }
        
        let count = 0
        
        function genId() {
          count = (count + 1) % Number.MAX_SAFE_INTEGER
          return count.toString();
        }
        
        const toastTimeouts = new Map()
        
        const addToRemoveQueue = (toastId) => {
          if (toastTimeouts.has(toastId)) {
            return
          }
        
          const timeout = setTimeout(() => {
            toastTimeouts.delete(toastId)
            dispatch({
              type: "REMOVE_TOAST",
              toastId: toastId,
            })
          }, TOAST_REMOVE_DELAY)
        
          toastTimeouts.set(toastId, timeout)
        }
        
        export const reducer = (state, action) => {
          switch (action.type) {
            case "ADD_TOAST":
              return {
                ...state,
                toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
              };
        
            case "UPDATE_TOAST":
              return {
                ...state,
                toasts: state.toasts.map((t) =>
                  t.id === action.toast.id ? { ...t, ...action.toast } : t),
              };
        
            case "DISMISS_TOAST": {
              const { toastId } = action
        
              // ! Side effects ! - This could be extracted into a dismissToast() action,
              // but I'll keep it here for simplicity
              if (toastId) {
                addToRemoveQueue(toastId)
              } else {
                state.toasts.forEach((toast) => {
                  addToRemoveQueue(toast.id)
                })
              }
        
              return {
                ...state,
                toasts: state.toasts.map((t) =>
                  t.id === toastId || toastId === undefined
                    ? {
                        ...t,
                        open: false,
                      }
                    : t),
              };
            }
            case "REMOVE_TOAST":
              if (action.toastId === undefined) {
                return {
                  ...state,
                  toasts: [],
                }
              }
              return {
                ...state,
                toasts: state.toasts.filter((t) => t.id !== action.toastId),
              };
          }
        }
        
        const listeners = []
        
        let memoryState = { toasts: [] }
        
        function dispatch(action) {
          memoryState = reducer(memoryState, action)
          listeners.forEach((listener) => {
            listener(memoryState)
          })
        }
        
        function toast({
          ...props
        }) {
          const id = genId()
        
          const update = (props) =>
            dispatch({
              type: "UPDATE_TOAST",
              toast: { ...props, id },
            })
          const dismiss = () => dispatch({ type: "DISMISS_TOAST", toastId: id })
        
          dispatch({
            type: "ADD_TOAST",
            toast: {
              ...props,
              id,
              open: true,
              onOpenChange: (open) => {
                if (!open) dismiss()
              },
            },
          })
        
          return {
            id: id,
            dismiss,
            update,
          }
        }
        
        function useToast() {
          const [state, setState] = React.useState(memoryState)
        
          React.useEffect(() => {
            listeners.push(setState)
            return () => {
              const index = listeners.indexOf(setState)
              if (index > -1) {
                listeners.splice(index, 1)
              }
            };
          }, [state])
        
          return {
            ...state,
            toast,
            dismiss: (toastId) => dispatch({ type: "DISMISS_TOAST", toastId }),
          };
        }
        
        export { useToast, toast }
      ðŸ“„ useLogin.js
        import { useMutation } from '@tanstack/react-query';
        import api from '@/utils/api';
        import { useAuthStore } from '@/stores/authStore';
        
        const loginRequest = async (credentials) => {
          const { data } = await api.post('/auth/login', credentials);
          return data.user;
        };
        
        const useLogin = () => {
          const login = useAuthStore((state) => state.login);
        
          return useMutation({
            mutationFn: loginRequest,
            onSuccess: (user) => {
              login(user);
            },
          });
        };
        
        export default useLogin;
      ðŸ“„ useLogout.js
        import { useMutation } from '@tanstack/react-query';
        import { useNavigate } from 'react-router-dom';
        import toast from 'react-hot-toast';
        import api from '@/utils/api';
        import { useAuthStore } from '@/stores/authStore';
        
        const logoutRequest = async () => {
          await api.post('/auth/logout');
        };
        
        const useLogout = () => {
          const logout = useAuthStore((state) => state.logout);
          const navigate = useNavigate();
        
          return useMutation({
            mutationFn: logoutRequest,
            onSuccess: () => {
              logout();
              toast.success('×”×ª× ×ª×§×ª ×‘×”×¦×œ×—×”.');
              navigate('/');
            },
            onError: () => {
              // Even if server fails, log out on client
              logout();
              toast.error('××™×¨×¢×” ×©×’×™××” ×‘×”×ª× ×ª×§×•×ª, ××š × ×•×§×ª×” ×ž×”×ž×¢×¨×›×ª.');
              navigate('/');
            },
          });
        };
        
        export default useLogout;
      ðŸ“„ useRegister.js
        import { useMutation } from '@tanstack/react-query';
        import api from '@/utils/api';
        
        const registerRequest = async (credentials) => {
          // credentials will be an object like { email, password }
          const { data } = await api.post('/auth/register', credentials);
          return data;
        };
        
        const useRegister = () => {
          return useMutation({
            mutationFn: registerRequest,
          });
        };
        
        export default useRegister;
      ðŸ“„ useToast.js
        // client/src/hooks/useToast.js
        
        // This is a minimal implementation of the shadcn/ui useToast hook.
        // It is designed to work with the Toaster component we will create.
        import * as React from "react"
        
        const TOAST_LIMIT = 1
        const TOAST_REMOVE_DELAY = 1000000
        
        const actionTypes = {
          ADD_TOAST: "ADD_TOAST",
          UPDATE_TOAST: "UPDATE_TOAST",
          DISMISS_TOAST: "DISMISS_TOAST",
          REMOVE_TOAST: "REMOVE_TOAST",
        }
        
        let count = 0
        
        function genId() {
          count = (count + 1) % Number.MAX_VALUE
          return count.toString()
        }
        
        const toastTimeouts = new Map()
        
        const addToRemoveQueue = (toastId) => {
          if (toastTimeouts.has(toastId)) {
            return
          }
        
          const timeout = setTimeout(() => {
            toastTimeouts.delete(toastId)
            dispatch({
              type: actionTypes.REMOVE_TOAST,
              toastId: toastId,
            })
          }, TOAST_REMOVE_DELAY)
        
          toastTimeouts.set(toastId, timeout)
        }
        
        export const reducer = (state, action) => {
          switch (action.type) {
            case actionTypes.ADD_TOAST:
              return {
                ...state,
                toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
              }
        
            case actionTypes.UPDATE_TOAST:
              return {
                ...state,
                toasts: state.toasts.map((t) =>
                  t.id === action.toast.id ? { ...t, ...action.toast } : t
                ),
              }
        
            case actionTypes.DISMISS_TOAST: {
              const { toastId } = action
              if (toastId) {
                addToRemoveQueue(toastId)
              } else {
                state.toasts.forEach((toast) => {
                  addToRemoveQueue(toast.id)
                })
              }
        
              return {
                ...state,
                toasts: state.toasts.map((t) =>
                  t.id === toastId || toastId === undefined
                    ? {
                        ...t,
                        open: false,
                      }
                    : t
                ),
              }
            }
            case actionTypes.REMOVE_TOAST:
              if (action.toastId === undefined) {
                return {
                  ...state,
                  toasts: [],
                }
              }
              return {
                ...state,
                toasts: state.toasts.filter((t) => t.id !== action.toastId),
              }
          }
        }
        
        const listeners = []
        let memoryState = { toasts: [] }
        
        function dispatch(action) {
          memoryState = reducer(memoryState, action)
          listeners.forEach((listener) => {
            listener(memoryState)
          })
        }
        
        function toast(props) {
          const id = genId()
        
          const update = (props) =>
            dispatch({
              type: actionTypes.UPDATE_TOAST,
              toast: { ...props, id },
            })
          const dismiss = () => dispatch({ type: actionTypes.DISMISS_TOAST, toastId: id })
        
          dispatch({
            type: actionTypes.ADD_TOAST,
            toast: {
              ...props,
              id,
              open: true,
              onOpenChange: (open) => {
                if (!open) dismiss()
              },
            },
          })
        
          return {
            id: id,
            dismiss,
            update,
          }
        }
        
        function useToast() {
          const [state, setState] = React.useState(memoryState)
        
          React.useEffect(() => {
            listeners.push(setState)
            return () => {
              const index = listeners.indexOf(setState)
              if (index > -1) {
                listeners.splice(index, 1)
              }
            }
          }, [state])
        
          return {
            ...state,
            toast,
            dismiss: (toastId) => dispatch({ type: actionTypes.DISMISS_TOAST, toastId }),
          }
        }
        
        export { useToast, toast }
    ðŸ“„ index.css
      @tailwind base;
      @tailwind components;
      @tailwind utilities;
      
      body {
        font-family: 'Assistant', sans-serif;
      }
      
      
      
      @layer base {
        :root {
          --background: 0 0% 100%;
          --foreground: 0 0% 3.9%;
          --card: 0 0% 100%;
          --card-foreground: 0 0% 3.9%;
          --popover: 0 0% 100%;
          --popover-foreground: 0 0% 3.9%;
          --primary: 0 0% 9%;
          --primary-foreground: 0 0% 98%;
          --secondary: 0 0% 96.1%;
          --secondary-foreground: 0 0% 9%;
          --muted: 0 0% 96.1%;
          --muted-foreground: 0 0% 45.1%;
          --accent: 0 0% 96.1%;
          --accent-foreground: 0 0% 9%;
          --destructive: 0 84.2% 60.2%;
          --destructive-foreground: 0 0% 98%;
          --border: 0 0% 89.8%;
          --input: 0 0% 89.8%;
          --ring: 0 0% 3.9%;
          --chart-1: 12 76% 61%;
          --chart-2: 173 58% 39%;
          --chart-3: 197 37% 24%;
          --chart-4: 43 74% 66%;
          --chart-5: 27 87% 67%;
          --radius: 0.5rem;
        }
        .dark {
          --background: 0 0% 3.9%;
          --foreground: 0 0% 98%;
          --card: 0 0% 3.9%;
          --card-foreground: 0 0% 98%;
          --popover: 0 0% 3.9%;
          --popover-foreground: 0 0% 98%;
          --primary: 0 0% 98%;
          --primary-foreground: 0 0% 9%;
          --secondary: 0 0% 14.9%;
          --secondary-foreground: 0 0% 98%;
          --muted: 0 0% 14.9%;
          --muted-foreground: 0 0% 63.9%;
          --accent: 0 0% 14.9%;
          --accent-foreground: 0 0% 98%;
          --destructive: 0 62.8% 30.6%;
          --destructive-foreground: 0 0% 98%;
          --border: 0 0% 14.9%;
          --input: 0 0% 14.9%;
          --ring: 0 0% 83.1%;
          --chart-1: 220 70% 50%;
          --chart-2: 160 60% 45%;
          --chart-3: 30 80% 55%;
          --chart-4: 280 65% 60%;
          --chart-5: 340 75% 55%;
        }
      }
      
      
      
      @layer base {
        * {
          @apply border-border;
        }
        body {
          @apply bg-background text-foreground;
        }
      }
    ðŸ“ lib/
      ðŸ“„ loanCalculator.js
        // server/utils/loanCalculator.js
        
        /**
         * ×ž×—×©×‘ ×œ×•×— ×¡×™×œ×•×§×™×Ÿ ×œ×”×œ×•×•××” ×‘×©×™×˜×ª "×©×¤×™×¦×¨".
         * @returns {Array<object>} ×ž×¢×¨×š ××•×‘×™×™×§×˜×™× ×”×ž×™×™×¦×’ ××ª ×œ×•×— ×”×¡×™×œ×•×§×™×Ÿ.
         */
        export function calculateSpitzerSchedule({ principal, annualRate, termInMonths, startDate }) {
          const schedule = [];
          let remainingBalance = principal;
          const monthlyInterestRate = annualRate / 100 / 12;
        
          // × ×•×¡×—×ª ×©×¤×™×¦×¨ ×œ×—×™×©×•×‘ ×”×”×—×–×¨ ×”×—×•×“×©×™ ×”×§×‘×•×¢
          const monthlyPayment = principal * (monthlyInterestRate * Math.pow(1 + monthlyInterestRate, termInMonths)) / (Math.pow(1 + monthlyInterestRate, termInMonths) - 1);
        
          for (let i = 1; i <= termInMonths; i++) {
            const interestPayment = remainingBalance * monthlyInterestRate;
            const principalPayment = monthlyPayment - interestPayment;
            remainingBalance -= principalPayment;
        
            const paymentDate = new Date(startDate);
            paymentDate.setMonth(paymentDate.getMonth() + i);
        
            schedule.push({
              paymentNumber: i,
              date: paymentDate,
              principal: parseFloat(principalPayment.toFixed(2)),
              interest: parseFloat(interestPayment.toFixed(2)),
              totalPayment: parseFloat(monthlyPayment.toFixed(2)),
              remainingBalance: parseFloat(Math.max(0, remainingBalance).toFixed(2)),
            });
          }
          return schedule;
        }
        
        /**
         * ×ž×—×©×‘ ×œ×•×— ×¡×™×œ×•×§×™×Ÿ ×œ×”×œ×•×•××” ×‘×©×™×˜×ª "×§×¨×Ÿ ×©×•×•×”".
         * @returns {Array<object>} ×ž×¢×¨×š ××•×‘×™×™×§×˜×™× ×”×ž×™×™×¦×’ ××ª ×œ×•×— ×”×¡×™×œ×•×§×™×Ÿ.
         */
        export function calculateKerenShavaSchedule({ principal, annualRate, termInMonths, startDate }) {
          const schedule = [];
          let remainingBalance = principal;
          const monthlyInterestRate = annualRate / 100 / 12;
          const principalPerMonth = principal / termInMonths;
        
          for (let i = 1; i <= termInMonths; i++) {
            const interestPayment = remainingBalance * monthlyInterestRate;
            const totalPayment = principalPerMonth + interestPayment;
            remainingBalance -= principalPerMonth;
        
            const paymentDate = new Date(startDate);
            paymentDate.setMonth(paymentDate.getMonth() + i);
        
            schedule.push({
              paymentNumber: i,
              date: paymentDate,
              principal: parseFloat(principalPerMonth.toFixed(2)),
              interest: parseFloat(interestPayment.toFixed(2)),
              totalPayment: parseFloat(totalPayment.toFixed(2)),
              remainingBalance: parseFloat(Math.max(0, remainingBalance).toFixed(2)),
            });
          }
          return schedule;
        }
      ðŸ“„ utils.js
        import { clsx } from "clsx";
        import { twMerge } from "tailwind-merge"
        
        export function cn(...inputs) {
          return twMerge(clsx(inputs));
        }
    ðŸ“„ main.jsx
      import React from 'react';
      import ReactDOM from 'react-dom/client';
      import { BrowserRouter } from 'react-router-dom';
      import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      import { Toaster } from 'react-hot-toast';
      import App from './App.jsx';
      import './index.css';
      
      // Create a client for React Query
      const queryClient = new QueryClient();
      
      ReactDOM.createRoot(document.getElementById('root')).render(
        <React.StrictMode>
          <BrowserRouter>
            <QueryClientProvider client={queryClient}>
              <App />
              <Toaster position="bottom-center" />
            </QueryClientProvider>
          </BrowserRouter>
        </React.StrictMode>
      );
    ðŸ“ pages/
      ðŸ“„ Dashboard.jsx
        import { useCartStore } from '@/stores/cartStore';
        import { Button } from '@/components/ui/Button';
        import { Link } from 'react-router-dom';
        import { Trash2, Plus, Minus } from 'lucide-react';
        
        // ×§×•×ž×¤×•× × ×˜×” ×¤× ×™×ž×™×ª ×œ×”×¦×’×ª ×¤×¨×™×˜ ×‘×•×“×“ ×‘×¢×’×œ×”
        const CartItem = ({ item }) => {
          const updateQuantity = useCartStore((s) => s.updateQuantity);
          const removeItem = useCartStore((s) => s.removeItem);
          const { product, quantity } = item;
        
          return (
            <div className="flex items-center gap-4 py-4 border-b">
              <img src={product.image || 'https://via.placeholder.com/150'} alt={product.name} className="w-20 h-20 rounded-lg object-cover" />
              <div className="flex-grow">
                <p className="font-bold text-gray-800">{product.name}</p>
                <p className="text-sm text-gray-500">{product.price} â‚ª ×œ×™×—×™×“×”</p>
                <div className="flex items-center gap-2 mt-2">
                  <Button size="icon" variant="outline" onClick={() => updateQuantity(product._id, quantity - 1)}>
                    <Minus size={16} />
                  </Button>
                  <span className="font-bold w-8 text-center">{quantity}</span>
                  <Button size="icon" variant="outline" onClick={() => updateQuantity(product._id, quantity + 1)}>
                    <Plus size={16} />
                  </Button>
                </div>
              </div>
              <div className="text-right">
                <p className="font-bold text-lg">{product.price * quantity} â‚ª</p>
                <Button size="icon" variant="ghost" className="text-gray-500 hover:text-red-500" onClick={() => removeItem(product._id)}>
                  <Trash2 size={18} />
                </Button>
              </div>
            </div>
          );
        };
        
        export default function CheckoutPage() {
          const items = useCartStore((s) => s.items);
          const totalPrice = useCartStore((s) => s.getTotalPrice());
        
          if (items.length === 0) {
            return (
              <div className="container mx-auto p-10 text-center">
                <h1 className="text-3xl font-bold mb-4">×”×¢×’×œ×” ×©×œ×š ×¨×™×§×”</h1>
                <p className="text-gray-600 mb-6">× ×¨××” ×©×¢×“×™×™×Ÿ ×œ× ×”×•×¡×¤×ª ×ž×•×¦×¨×™× ×œ×¢×’×œ×”.</p>
                <Button asChild>
                  <Link to="/menu">×—×–×¨×” ×œ×ª×¤×¨×™×˜</Link>
                </Button>
              </div>
            );
          }
        
          return (
            <div className="bg-gray-50 min-h-screen">
              <div className="container mx-auto p-4 sm:p-6 lg:p-8">
                <h1 className="text-3xl md:text-4xl font-bold text-gray-900 mb-8">×¡×œ ×§× ×™×•×ª ×•×ª×©×œ×•×</h1>
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12">
        
                  {/* ×¢×ž×•×“×” ×©×ž××œ×™×ª: ×¤×¨×˜×™ ×ž×©×œ×•×— ×•×ª×©×œ×•× */}
                  <div className="lg:col-span-2 bg-white p-8 rounded-2xl shadow-sm border space-y-8">
                    <div>
                      <h2 className="text-2xl font-bold text-gray-800">1. ×¤×¨×˜×™ ×ž×©×œ×•×—</h2>
                      <div className="mt-6 p-10 bg-gray-100 rounded-lg text-center text-gray-500">
                        ×˜×•×¤×¡ ×¤×¨×˜×™ ×”×ž×©×œ×•×— ×™×•×¤×™×¢ ×›××Ÿ ×‘×©×œ×‘ ×”×‘×...
                      </div>
                    </div>
                    <div>
                      <h2 className="text-2xl font-bold text-gray-800">2. ×¤×¨×˜×™ ×ª×©×œ×•×</h2>
                      <div className="mt-6 p-10 bg-gray-100 rounded-lg text-center text-gray-500">
                        ××¤×©×¨×•×™×•×ª ×”×ª×©×œ×•× ×™×•×¤×™×¢×• ×›××Ÿ...
                      </div>
                    </div>
                  </div>
        
                  {/* ×¢×ž×•×“×” ×™×ž× ×™×ª: ×¡×™×›×•× ×”×–×ž× ×” */}
                  <div className="bg-white p-8 rounded-2xl shadow-sm border h-fit">
                    <h2 className="text-2xl font-bold text-gray-800 border-b pb-4 mb-4">×¡×™×›×•× ×”×–×ž× ×”</h2>
                    <div className="space-y-4">
                      {items.map(item => <CartItem key={item.product._id} item={item} />)}
                    </div>
                    <div className="border-t pt-4 mt-4 space-y-2">
                      <div className="flex justify-between text-lg">
                        <span>×¡×›×•× ×‘×™× ×™×™×</span>
                        <span>{totalPrice} â‚ª</span>
                      </div>
                      <div className="flex justify-between text-lg">
                        <span>×“×ž×™ ×ž×©×œ×•×—</span>
                        <span>×™×—×•×©×‘ ×‘×”×ž×©×š</span>
                      </div>
                      <div className="flex justify-between text-xl font-bold pt-2">
                        <span>×¡×”"×› ×œ×ª×©×œ×•×</span>
                        <span>{totalPrice} â‚ª</span>
                      </div>
                    </div>
                    <Button className="w-full mt-6" size="lg">
                      ×”×ž×©×š ×œ×ž×™×œ×•×™ ×¤×¨×˜×™×
                    </Button>
                  </div>
                </div>
              </div>
            </div>
          );
        }
      ðŸ“„ DashboardPage.jsx
        import { Link } from 'react-router-dom';
        import { useAuthStore } from '@/stores/authStore';
        
        // ×“×•×’×ž××•×ª ×œ××™×™×§×•× ×™× ×ž×¡×¤×¨×™×™×ª lucide-react
        import { ListOrdered, UserCog } from 'lucide-react';
        
        export default function DashboardPage() {
          const user = useAuthStore((s) => s.user);
        
          return (
            <div className="container mx-auto p-4 sm:p-6 lg:p-8 space-y-10">
              <header>
                <h1 className="text-3xl md:text-4xl font-bold text-gray-900">
                  ×©×œ×•×, {user?.name || '××•×¨×—'}!
                </h1>
                <p className="mt-2 text-lg text-gray-600">
                  ×‘×¨×•×š ×”×‘× ×œ××–×•×¨ ×”××™×©×™ ×©×œ×š. ×ž×” ×ª×¨×¦×” ×œ×¢×©×•×ª?
                </p>
              </header>
        
              <main className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {/* ×›×¨×˜×™×¡ × ×™×•×•×˜ ×œ×”×™×¡×˜×•×¨×™×™×ª ×”×–×ž× ×•×ª */}
                <Link
                  to="/orders-history"
                  className="group block bg-white p-8 rounded-2xl border shadow-sm hover:border-amber-500 hover:shadow-lg transition-all"
                >
                  <ListOrdered className="h-10 w-10 text-amber-600 mb-4" />
                  <h3 className="font-bold text-2xl text-gray-800">×”×”×–×ž× ×•×ª ×©×œ×™</h3>
                  <p className="text-gray-600 mt-2">×¦×¤×™×™×” ×‘×›×œ ×”×™×¡×˜×•×¨×™×™×ª ×”×”×–×ž× ×•×ª ×©×œ×š ×•×ž×¢×§×‘ ××—×¨ ×¡×˜×˜×•×¡ ×ž×©×œ×•×—×™×.</p>
                </Link>
        
                {/* ×›×¨×˜×™×¡ × ×™×•×•×˜ ×œ×¤×¨×•×¤×™×œ */}
                <Link
                  to="/profile"
                  className="group block bg-white p-8 rounded-2xl border shadow-sm hover:border-amber-500 hover:shadow-lg transition-all"
                >
                  <UserCog className="h-10 w-10 text-amber-600 mb-4" />
                  <h3 className="font-bold text-2xl text-gray-800">×”×¤×¨×•×¤×™×œ ×©×œ×™</h3>
                  <p className="text-gray-600 mt-2">×¢×“×›×•×Ÿ ×¤×¨×˜×™× ××™×©×™×™×, ×©×™× ×•×™ ×¡×™×¡×ž×” ×•× ×™×”×•×œ ×”×—×©×‘×•×Ÿ.</p>
                </Link>
              </main>
            </div>
          );
        }
      ðŸ“„ DataEntryPage.jsx
        // client/src/pages/DataEntryPage.jsx
        
        import React, { useState } from "react";
        import api from "@/utils/api"; // 1. ×™×™×‘×•× ×©×œ ×§×•×‘×¥ ×”-API ×”× ×›×•×Ÿ
        
        export default function DataEntryPage() {
          const [value1, setValue1] = useState("");
          const [value2, setValue2] = useState("");
          const [isLoading, setIsLoading] = useState(false);
          const [message, setMessage] = useState("");
        
          // 2. ××™×Ÿ ×™×•×ª×¨ ×¦×•×¨×š ×‘-useEffect ×œ×§×‘×œ×ª CSRF token,
          //    ×§×•×‘×¥ ×”-api.js ×ž×˜×¤×œ ×‘×–×” ××•×˜×•×ž×˜×™×ª.
        
          const handleSubmit = async (e) => {
            e.preventDefault();
            setIsLoading(true);
            setMessage("");
        
            const numericValue1 = parseFloat(value1);
            const numericValue2 = parseFloat(value2);
        
            if (isNaN(numericValue1) || isNaN(numericValue2)) {
              setMessage("×©×’×™××”: ×™×© ×œ×”×–×™×Ÿ ×¢×¨×›×™× ×ž×¡×¤×¨×™×™× ×‘×œ×‘×“.");
              setIsLoading(false);
              return;
            }
        
            try {
              // 3. ×©×™×ž×•×© ×‘-api.post ×‘×ž×§×•× axios.post
              const response = await api.post("/data/save", {
                value1: numericValue1,
                value2: numericValue2,
              });
        
              setMessage(response.data.message);
              setValue1("");
              setValue2("");
            } catch (error) {
              const errorMessage = error.response?.data?.message || "××™×¨×¢×” ×©×’×™××” ×‘×©×œ×™×—×ª ×”× ×ª×•× ×™×";
              setMessage(`×©×’×™××”: ${errorMessage}`);
            } finally {
              setIsLoading(false);
            }
          };
        
          return (
            <div className="max-w-md mx-auto mt-10 p-4">
              <h1 className="text-2xl font-bold mb-4">×”×–× ×ª × ×ª×•× ×™× ×ž×¡×¤×¨×™×™×</h1>
              <p className="mb-4 text-gray-600">×”× ×ª×•× ×™× ×™×™×©×ž×¨×• ×ª×—×ª ×”×ž×©×ª×ž×© ×©×œ×š.</p>
        
              <form onSubmit={handleSubmit}>
                <div className="mb-4">
                  <label htmlFor="value1" className="block text-sm font-medium text-gray-700">
                    ×¢×¨×š ×ž×¡×¤×¨×™ 1
                  </label>
                  <input
                    type="number"
                    id="value1"
                    value={value1}
                    onChange={(e) => setValue1(e.target.value)}
                    className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                    required
                  />
                </div>
        
                <div className="mb-6">
                  <label htmlFor="value2" className="block text-sm font-medium text-gray-700">
                    ×¢×¨×š ×ž×¡×¤×¨×™ 2
                  </label>
                  <input
                    type="number"
                    id="value2"
                    value={value2}
                    onChange={(e) => setValue2(e.target.value)}
                    className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                    required
                  />
                </div>
        
                <button
                  type="submit"
                  disabled={isLoading}
                  className="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400"
                >
                  {isLoading ? "×©×•×œ×—..." : "×©×ž×•×¨ × ×ª×•× ×™×"}
                </button>
              </form>
        
              {message && (
                <p className={`mt-4 text-center font-medium ${message.startsWith('×©×’×™××”') ? 'text-red-600' : 'text-green-600'}`}>
                  {message}
                </p>
              )}
            </div>
          );
        }
      ðŸ“„ DepositsPage.jsx
        import { useState, useEffect, useMemo } from 'react';
        import { useDepositsStore } from '../stores/depositsStore';
        import { useAccountStore } from '../stores/accountStore';
        
        // --- UI Components ---
        import { Button } from '../components/ui/Button';
        import { Input } from '../components/ui/Input';
        import { Label } from '../components/ui/label';
        import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../components/ui/select';
        import { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from '../components/ui/card';
        import { Skeleton } from '../components/ui/skeleton';
        import { Progress } from '../components/ui/progress';
        import { Badge } from '../components/ui/badge';
        import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '../components/ui/tooltip';
        import { Switch } from '../components/ui/switch';
        
        // --- Icons ---
        import { Landmark, PiggyBank, Percent, CheckCircle, Hourglass, Milestone, Flag, TrendingUp, Clock } from 'lucide-react';
        
        // --- Utils ---
        import { format, formatDistanceToNowStrict, isPast, differenceInDays } from 'date-fns';
        import { he } from 'date-fns/locale';
        
        // ============================================================================
        // Helper Functions
        // ============================================================================
        function addMonths(baseDate, months) {
            const d = new Date(baseDate);
            d.setMonth(d.getMonth() + months);
            return d;
        }
        
        // ============================================================================
        // Helper Component: SummaryStatsCard
        // ============================================================================
        const SummaryStatsCard = ({ deposits }) => {
            const stats = useMemo(() => {
                return deposits.reduce(
                    (acc, dep) => {
                        acc.totalPrincipal += dep.principal;
                        acc.totalFutureValue += dep.futureValue || dep.principal;
                        return acc;
                    },
                    { totalPrincipal: 0, totalFutureValue: 0 }
                );
            }, [deposits]);
        
            return (
                <Card>
                    <CardHeader>
                        <CardTitle className="flex items-center gap-2">
                            <Landmark className="w-6 h-6 text-primary" />
                            <span>×¡×™×›×•× ×”×¤×™×§×“×•× ×•×ª</span>
                        </CardTitle>
                    </CardHeader>
                    <CardContent className="space-y-4">
                        <div className="flex justify-between items-center">
                            <span className="text-muted-foreground">×¡×š ×”×§×¨×Ÿ ×”×ž×•×©×§×¢×ª</span>
                            <span className="font-bold text-lg">â‚ª{stats.totalPrincipal.toLocaleString()}</span>
                        </div>
                        <div className="flex justify-between items-center">
                            <span className="text-muted-foreground">×©×•×•×™ ×¦×¤×•×™ ×‘×¡×™×•×</span>
                            <span className="font-bold text-lg text-green-600">â‚ª{stats.totalFutureValue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>
                        </div>
                        <div className="flex justify-between items-center">
                            <span className="text-muted-foreground">×ž×¡×¤×¨ ×¤×™×§×“×•× ×•×ª</span>
                            <span className="font-bold text-lg">{deposits.length}</span>
                        </div>
                    </CardContent>
                </Card>
            );
        };
        
        // ============================================================================
        // Helper Component: DepositCard
        // ============================================================================
        const DepositCard = ({ deposit, onBreak, onWithdraw }) => {
            const now = new Date();
            const startDate = new Date(deposit.startDate);
            const endDate = new Date(deposit.endDate);
        
            const isMatured = now >= endDate;
            const totalDurationInDays = differenceInDays(endDate, startDate);
            const elapsedDays = differenceInDays(now, startDate);
            const progress = totalDurationInDays > 0 ? Math.min(100, (elapsedDays / totalDurationInDays) * 100) : (isMatured ? 100 : 0);
        
            const upcomingExitPoints = (deposit.exitPoints || [])
                .map(p => new Date(p))
                .filter(p => !isPast(p))
                .sort((a, b) => a - b);
        
            const nextExitPoint = upcomingExitPoints.length > 0 ? upcomingExitPoints[0] : null;
        
            let nextExitPointProgress = null;
            if (nextExitPoint && totalDurationInDays > 0) {
                const daysToNextExit = differenceInDays(nextExitPoint, startDate);
                nextExitPointProgress = (daysToNextExit / totalDurationInDays) * 100;
            }
        
            return (
                <Card className="flex flex-col h-full transition-all hover:shadow-lg border-2 border-transparent hover:border-primary/50">
                    <CardHeader>
                        <div className="flex justify-between items-start">
                            <div>
                                <CardTitle>{deposit.name}</CardTitle>
                                <CardDescription>
                                    {isMatured ?
                                        <Badge variant="success" className="mt-1"><CheckCircle className="w-3 h-3 mr-1"/>×”×¤×™×§×“×•×Ÿ × ×–×™×œ</Badge> :
                                        <Badge variant="secondary" className="mt-1"><Clock className="w-3 h-3 mr-1"/>×‘×ª×•×§×£</Badge>
                                    }
                                </CardDescription>
                            </div>
                             <div className="text-right">
                                <p className="text-sm text-muted-foreground flex items-center justify-end gap-1"><TrendingUp className="w-4 h-4"/> ×©×•×•×™ ×¦×¤×•×™ ×‘×¡×™×•×</p>
                                <p className="text-xl font-bold text-green-600">
                                   â‚ª{deposit.futureValue?.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                                </p>
                            </div>
                        </div>
                    </CardHeader>
                    <CardContent className="flex-grow space-y-4">
                        <TooltipProvider>
                            <div className="space-y-2">
                                <div className="relative w-full">
                                    <Progress value={progress} className="h-2" />
                                    {nextExitPointProgress && (
                                        <Tooltip>
                                            <TooltipTrigger asChild>
                                                <div className="absolute top-1/2 -translate-y-1/2 h-4 w-2 bg-primary rounded-full cursor-pointer z-10"
                                                     style={{ left: `${nextExitPointProgress}%` }}
                                                />
                                            </TooltipTrigger>
                                            <TooltipContent className="bg-primary text-primary-foreground">
                                                <p>×ª×—× ×ª ×™×¦×™××” ×§×¨×•×‘×”: {format(nextExitPoint, 'dd/MM/yyyy')}</p>
                                            </TooltipContent>
                                        </Tooltip>
                                    )}
                                </div>
                                <div className="flex justify-between text-sm text-muted-foreground">
                                    <span>{format(startDate, 'dd/MM/yy')}</span>
                                    <span>{format(endDate, 'dd/MM/yy')}</span>
                                </div>
                            </div>
                        </TooltipProvider>
        
                        {nextExitPoint && (
                             <div className="p-3 bg-primary/5 border border-primary/20 rounded-lg text-center">
                                <p className="text-sm font-semibold text-primary flex items-center justify-center gap-1.5">
                                    <Flag className="w-4 h-4"/>
                                    ×ª×—× ×ª ×™×¦×™××” ×§×¨×•×‘×”
                                </p>
                                <p className="text-lg font-bold text-foreground mt-1">{format(nextExitPoint, 'dd MMMM yyyy', { locale: he })}</p>
                                <p className="text-sm text-muted-foreground">
                                    (×‘×¢×•×“ {formatDistanceToNowStrict(nextExitPoint, { locale: he, addSuffix: false })})
                                </p>
                            </div>
                        )}
        
                        <div className="grid grid-cols-2 gap-4 pt-2 text-sm border-t">
                            <div className="flex items-center gap-2">
                                <PiggyBank className="w-4 h-4 text-muted-foreground" />
                                <div>
                                    <p className="text-muted-foreground">×¡×›×•× ×”×ª×—×œ×ª×™</p>
                                    <p className="font-semibold">â‚ª{deposit.principal.toLocaleString()}</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-2">
                                 <Percent className="w-4 h-4 text-muted-foreground" />
                                <div>
                                    <p className="text-muted-foreground">×¨×™×‘×™×ª ×©× ×ª×™×ª</p>
                                    <p className="font-semibold">{deposit.annualInterestRate.toFixed(2)}%</p>
                                </div>
                            </div>
                        </div>
        
                    </CardContent>
                    <CardFooter className="flex justify-end gap-2 bg-muted/50 p-3">
                        <Button variant="destructive-outline" size="sm" onClick={() => onBreak(deposit._id)} disabled={isMatured}>
                            <Hourglass className="w-4 h-4 mr-2" />
                            ×©×‘×•×¨ ×¤×™×§×“×•×Ÿ
                        </Button>
                        <Button variant="primary" size="sm" onClick={() => onWithdraw(deposit._id)} disabled={!isMatured}>
                            <CheckCircle className="w-4 h-4 mr-2" />
                            ×ž×©×•×š ×¡×›×•×
                        </Button>
                    </CardFooter>
                </Card>
            );
        };
        
        
        // ============================================================================
        // Main Page Component
        // ============================================================================
        export default function DepositsPage() {
            const { deposits, loading, error, fetchDeposits, addDeposit, breakDeposit, withdrawDeposit } = useDepositsStore();
            const { accounts, fetchAccounts } = useAccountStore();
            const [isSubmitting, setIsSubmitting] = useState(false);
        
            const initialFormData = {
                name: '',
                principal: '',
                annualInterestRate: '',
                durationValue: '1',
                durationUnit: '×—×•×“×©×™×',
                startDate: new Date().toISOString().split('T')[0],
                sourceAccount: '×œ×œ× ×”×•×¨×“×” ×ž×—×©×‘×•×Ÿ',
                hasPeriodicExitPoints: false,
                exitPointInterval: '3',
                exitPointUnit: '×—×•×“×©×™×'
            };
            const [formData, setFormData] = useState(initialFormData);
            const [endDate, setEndDate] = useState('');
        
            useEffect(() => {
                fetchDeposits();
                fetchAccounts();
            }, [fetchDeposits, fetchAccounts]);
        
            useEffect(() => {
                const { startDate, durationValue, durationUnit } = formData;
                if (startDate && durationValue > 0) {
                    const months = durationUnit === '×©× ×™×' ? parseInt(durationValue, 10) * 12 : parseInt(durationValue, 10);
                    const calculatedEndDate = addMonths(new Date(startDate), months);
                    setEndDate(calculatedEndDate.toLocaleDateString('he-IL', { day: '2-digit', month: '2-digit', year: 'numeric' }));
                }
            }, [formData.startDate, formData.durationValue, formData.durationUnit]);
        
            const handleChange = (e) => {
                const { name, value, type, checked } = e.target;
                setFormData(prev => ({
                    ...prev,
                    [name]: type === 'checkbox' ? checked : value
                }));
            };
        
            const handleSelectChange = (name, value) => {
                setFormData({ ...formData, [name]: value });
            };
        
            const handleSwitchChange = (name, checked) => {
                setFormData({ ...formData, [name]: checked });
            };
        
            const handleSubmit = async (e) => {
                e.preventDefault();
                setIsSubmitting(true);
        
                let calculatedExitPoints = [];
                if (formData.hasPeriodicExitPoints) {
                    const interval = parseInt(formData.exitPointInterval, 10);
                    const durationMonths = formData.durationUnit === '×©× ×™×' ? parseInt(formData.durationValue, 10) * 12 : parseInt(formData.durationValue, 10);
        
                    if (interval > 0) {
                        const finalEndDate = addMonths(new Date(formData.startDate), durationMonths);
                        let currentDate = new Date(formData.startDate);
        
                        while (true) {
                            const monthsToAdd = formData.exitPointUnit === '×©× ×™×' ? interval * 12 : interval;
                            currentDate = addMonths(currentDate, monthsToAdd);
        
                            if (currentDate < finalEndDate) {
                                calculatedExitPoints.push(currentDate.toISOString());
                            } else {
                                break;
                            }
                        }
                    }
                }
        
                const finalFormData = {
                    ...formData,
                    exitPoints: calculatedExitPoints,
                };
        
                const success = await addDeposit(finalFormData);
                if (success) {
                    setFormData(initialFormData);
                }
                setIsSubmitting(false);
            };
        
            const handleBreak = (id) => {
                if (window.confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×©×‘×•×¨ ××ª ×”×¤×™×§×“×•×Ÿ? ×”×§×¨×Ÿ ×ª×•×¢×‘×¨ ×œ×—×©×‘×•×Ÿ ×”×¢×•"×©.')) {
                    breakDeposit(id);
                }
            };
        
            const handleWithdraw = (id) => {
                if (window.confirm('×”×× ×œ×ž×©×•×š ××ª ×”×¤×™×§×“×•×Ÿ? ×”×¡×›×•× ×”×ž×œ× (×§×¨×Ÿ + ×¨×™×‘×™×ª) ×™×•×¢×‘×¨ ×œ×—×©×‘×•×Ÿ ×”×¢×•"×©.')) {
                    withdrawDeposit(id);
                }
            };
        
            return (
                <div className="container mx-auto p-4 md:p-6 lg:p-8 bg-muted/20 min-h-screen">
                    <header className="mb-8">
                        <h1 className="text-3xl md:text-4xl font-bold text-foreground">× ×™×”×•×œ ×¤×™×§×“×•× ×•×ª</h1>
                        <p className="mt-2 text-lg text-muted-foreground">×”×•×¡×£, ×¢×§×•×‘ ×•× ×”×œ ××ª ×”×¤×™×§×“×•× ×•×ª ×•×”×—×¡×›×•× ×•×ª ×©×œ×š ×‘×ž×§×•× ××—×“.</p>
                    </header>
        
                    <main className="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
        
                        <div className="lg:col-span-2 space-y-6">
                            <h2 className="text-2xl font-bold text-foreground">×”×¤×™×§×“×•× ×•×ª ×©×œ×™</h2>
                            {loading && (
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    {[...Array(4)].map((_, i) => <Skeleton key={i} className="h-80 w-full" />)}
                                </div>
                            )}
                            {error && <p className="text-center text-red-600 bg-red-100 p-4 rounded-lg">{error}</p>}
                            {!loading && !error && (
                                deposits.length === 0 ? (
                                    <div className="text-center py-16 bg-background rounded-lg border border-dashed">
                                        <PiggyBank className="mx-auto h-12 w-12 text-muted-foreground" />
                                        <h3 className="mt-2 text-xl font-semibold">×¢×“×™×™×Ÿ ××™×Ÿ ×¤×™×§×“×•× ×•×ª</h3>
                                        <p className="mt-1 text-muted-foreground">×”×ª×—×œ ×œ×—×¡×•×š! ×”×•×¡×£ ××ª ×”×¤×™×§×“×•×Ÿ ×”×¨××©×•×Ÿ ×©×œ×š.</p>
                                    </div>
                                ) : (
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        {deposits.map((dep) => (
                                            <DepositCard key={dep._id} deposit={dep} onBreak={handleBreak} onWithdraw={handleWithdraw} />
                                        ))}
                                    </div>
                                )
                            )}
                        </div>
        
                        <aside className="lg:col-span-1 space-y-6 sticky top-8">
                            {!loading && <SummaryStatsCard deposits={deposits} />}
        
                            <Card>
                                <CardHeader>
                                    <CardTitle>×”×•×¡×¤×ª ×¤×™×§×“×•×Ÿ ×—×“×©</CardTitle>
                                    <CardDescription>×ž×œ× ××ª ×”×¤×¨×˜×™× ×›×“×™ ×œ×”×•×¡×™×£ ×¤×™×§×“×•×Ÿ ×œ×ž×¢×§×‘.</CardDescription>
                                </CardHeader>
                                <CardContent>
                                    <form onSubmit={handleSubmit} className="space-y-4">
                                        <div>
                                            <Label htmlFor="name">×©× ×”×¤×™×§×“×•×Ÿ</Label>
                                            <Input id="name" name="name" value={formData.name} onChange={handleChange} placeholder="×œ×“×•×’×ž×”: ×¤×™×§×“×•×Ÿ ×¨×™×‘×™×ª ×¤×¨×™×ž×™×•×" required />
                                        </div>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <Label htmlFor="principal">×¡×›×•× (â‚ª)</Label>
                                                <Input id="principal" name="principal" type="number" value={formData.principal} onChange={handleChange} placeholder="10,000" required min="0.01" step="0.01" />
                                            </div>
                                            <div>
                                                <Label htmlFor="annualInterestRate">×¨×™×‘×™×ª (%)</Label>
                                                <Input id="annualInterestRate" name="annualInterestRate" type="number" value={formData.annualInterestRate} onChange={handleChange} placeholder="5.2" required min="0" step="0.01" />
                                            </div>
                                        </div>
        
                                        <Label>×ž×©×š ×”×¤×™×§×“×•×Ÿ</Label>
                                        <div className="flex gap-2">
                                            <Input id="durationValue" name="durationValue" type="number" value={formData.durationValue} onChange={handleChange} required min="1" className="w-1/2" />
                                            <Select name="durationUnit" value={formData.durationUnit} onValueChange={(value) => handleSelectChange('durationUnit', value)}>
                                                <SelectTrigger className="w-1/2"><SelectValue /></SelectTrigger>
                                                <SelectContent>
                                                    <SelectItem value="×—×•×“×©×™×">×—×•×“×©×™×</SelectItem>
                                                    <SelectItem value="×©× ×™×">×©× ×™×</SelectItem>
                                                </SelectContent>
                                            </Select>
                                        </div>
        
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <Label htmlFor="startDate">×ª××¨×™×š ×¤×ª×™×—×”</Label>
                                                <Input id="startDate" name="startDate" type="date" value={formData.startDate} onChange={handleChange} required />
                                            </div>
                                            <div>
                                                <Label>×ª××¨×™×š ×¡×™×•×</Label>
                                                <Input value={endDate} disabled className="bg-muted font-mono text-center" />
                                            </div>
                                        </div>
        
                                        <div className="space-y-3 pt-4 border-t">
                                            <div className="flex items-center justify-between">
                                                <Label htmlFor="hasPeriodicExitPoints" className="font-semibold">×ª×—× ×•×ª ×™×¦×™××” ×ª×§×•×¤×ª×™×•×ª</Label>
                                                <Switch
                                                    id="hasPeriodicExitPoints"
                                                    checked={formData.hasPeriodicExitPoints}
                                                    onCheckedChange={(checked) => handleSwitchChange('hasPeriodicExitPoints', checked)}
                                                />
                                            </div>
                                            {formData.hasPeriodicExitPoints && (
                                                <div className="p-3 bg-muted rounded-md">
                                                    <Label>×™×¦×™×¨×ª ×ª×—× ×ª ×™×¦×™××” ×›×œ:</Label>
                                                    <div className="flex items-center gap-2 mt-1">
                                                        <Input
                                                            type="number"
                                                            name="exitPointInterval"
                                                            value={formData.exitPointInterval}
                                                            onChange={handleChange}
                                                            min="1"
                                                            className="w-1/2"
                                                        />
                                                        <Select
                                                            name="exitPointUnit"
                                                            value={formData.exitPointUnit}
                                                            onValueChange={(value) => handleSelectChange('exitPointUnit', value)}
                                                        >
                                                            <SelectTrigger className="w-1/2"><SelectValue /></SelectTrigger>
                                                            <SelectContent>
                                                                <SelectItem value="×—×•×“×©×™×">×—×•×“×©×™×</SelectItem>
                                                                <SelectItem value="×©× ×™×">×©× ×™×</SelectItem>
                                                            </SelectContent>
                                                        </Select>
                                                    </div>
                                                </div>
                                            )}
                                        </div>
        
                                        <div>
                                            <Label htmlFor="sourceAccount">×ž×§×•×¨ ×”×›×¡×£ (××•×¤×¦×™×•× ×œ×™)</Label>
                                            <Select name="sourceAccount" value={formData.sourceAccount} onValueChange={(value) => handleSelectChange('sourceAccount', value)}>
                                                <SelectTrigger><SelectValue /></SelectTrigger>
                                                <SelectContent>
                                                    <SelectItem value="×œ×œ× ×”×•×¨×“×” ×ž×—×©×‘×•×Ÿ">×œ×œ× ×”×•×¨×“×” ×ž×—×©×‘×•×Ÿ</SelectItem>
                                                    {accounts.map(acc => <SelectItem key={acc.name} value={acc.name}>{acc.name}</SelectItem>)}
                                                </SelectContent>
                                            </Select>
                                        </div>
        
                                        <Button type="submit" disabled={isSubmitting} className="w-full">
                                            {isSubmitting ? '×ž×•×¡×™×£...' : '×”×•×¡×£ ×¤×™×§×“×•×Ÿ'}
                                        </Button>
                                    </form>
                                </CardContent>
                            </Card>
                        </aside>
                    </main>
                </div>
            );
        }
      ðŸ“„ ExcelImportPage.jsx
        import React, { useState, useEffect, useRef } from 'react';
        import api from '@/utils/api';
        import * as XLSX from 'xlsx';
        
        // --- ×™×™×‘×•× ×¨×›×™×‘×™ UI ×ž×”×¡×¤×¨×™×™×” ×©×œ×š ---
        import { Button } from "@/components/ui/button";
        import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
        import { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle } from "@/components/ui/dialog";
        import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
        import { Input } from "@/components/ui/input";
        import { UploadCloud, FileText, Settings, CheckCircle, AlertTriangle } from 'lucide-react';
        
        // --- ×”×’×“×¨×•×ª ×§×‘×•×¢×•×ª ---
        const CREATE_NEW_CATEGORY_VALUE = "CREATE_NEW";
        
        // --- ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ×œ×¢×™×‘×•×“ ××§×¡×œ ---
        function cleanFile(data, type) {
          if (type === 'cal') {
            if (data.length < 5) throw new Error("×”×§×•×‘×¥ × ×¨××” ×§×¦×¨ ×ž×“×™ ×¢×‘×•×¨ ×¤×•×¨×ž×˜ '×›××œ'.");
            const trimmed = data.slice(1, -3);
            return trimmed.map(row => ({
              "×ª××¨×™×š ×¢×¡×§×”": row[0],
              "×©× ×‘×™×ª ×”×¢×¡×§": String(row[1] || '').trim(),
              "×¡×›×•×": row[2],
            }));
          }
          if (type === 'max') {
            if (data.length < 7) throw new Error("×”×§×•×‘×¥ × ×¨××” ×§×¦×¨ ×ž×“×™ ×¢×‘×•×¨ ×¤×•×¨×ž×˜ '×ž×§×¡'.");
            const trimmed = data.slice(3, -3);
            if (trimmed.length < 1) throw new Error("×œ× × ×ž×¦××• × ×ª×•× ×™× ×‘×§×•×‘×¥ ×œ××—×¨ ×”× ×™×§×•×™.");
            const headers = trimmed[0].map(h => String(h || '').trim().replace(/\s+/g, ' '));
            const rows = trimmed.slice(1);
        
            if (!headers.includes('×©× ×‘×™×ª ×”×¢×¡×§') || !headers.includes('×ª××¨×™×š ×¢×¡×§×”') || !headers.includes('×¡×›×•× ×¢×¡×§×” ×ž×§×•×¨×™')) {
                throw new Error('×”×¢×ž×•×“×•×ª ×”× ×“×¨×©×•×ª ×œ× × ×ž×¦××• ×‘×§×•×‘×¥ "×ž×§×¡".');
            }
        
            return rows.map(rowArray => {
              let rowObject = {};
              headers.forEach((header, index) => { rowObject[header] = rowArray[index]; });
              return rowObject;
            });
          }
          throw new Error('×¡×•×’ ×™×™×‘×•× ×œ× ×™×“×•×¢.');
        }
        
        // --- ×¨×›×™×‘ ×”×“×£ ×”×¨××©×™ ---
        export default function ExcelImportPage() {
          const [stage, setStage] = useState('select');
          const [importerType, setImporterType] = useState('');
          const [parsedData, setParsedData] = useState([]);
          const [unseenMerchants, setUnseenMerchants] = useState([]);
          const [mappings, setMappings] = useState({});
          const [categories, setCategories] = useState([]);
          const [message, setMessage] = useState('');
          const [isCategoryDialogOpen, setIsCategoryDialogOpen] = useState(false);
          const [newCategoryName, setNewCategoryName] = useState('');
          const [currentMerchantForNewCategory, setCurrentMerchantForNewCategory] = useState(null);
          const fileInputRef = useRef(null);
        
          const fetchCategories = () => {
            return api.get('/categories')
              .then(res => setCategories(res.data))
              .catch(err => console.error("Could not fetch categories", err));
          };
        
          useEffect(() => {
            fetchCategories();
          }, []);
        
          const handleImportButtonClick = (type) => {
            setImporterType(type);
            fileInputRef.current.click();
          };
        
          const handleFileSelected = (event) => {
            const file = event.target.files[0];
            if (file) {
              analyzeFile(file, importerType);
            }
            event.target.value = null;
          };
        
          const analyzeFile = (file, type) => {
            setStage('processing');
            setMessage('×§×•×¨× ×•×ž× ×ª×— ××ª ×§×•×‘×¥ ×”××§×¡×œ...');
            const reader = new FileReader();
            reader.onload = async (e) => {
              try {
                const data = new Uint8Array(e.target.result);
                const workbook = XLSX.read(data, { type: 'array', cellDates: true });
                const sheet = workbook.Sheets[workbook.SheetNames[0]];
                const rawData = XLSX.utils.sheet_to_json(sheet, { header: 1, defval: "" });
                const cleanedData = cleanFile(rawData, type);
                setParsedData(cleanedData);
                const merchantNames = [...new Set(cleanedData.map(row => row['×©× ×‘×™×ª ×”×¢×¡×§']).filter(Boolean))];
                const { data: response } = await api.post('/import/check-merchants', { merchantNames });
                if (response.unseenMerchants && response.unseenMerchants.length > 0) {
                  setUnseenMerchants(response.unseenMerchants);
                  const initialMappings = {};
                  response.unseenMerchants.forEach(name => {
                    initialMappings[name] = { newName: name, category: '' };
                  });
                  setMappings(initialMappings);
                  setStage('map');
                } else {
                  processData([], cleanedData);
                }
              } catch (error) {
                setMessage(error.message || '×©×’×™××” ×‘×§×¨×™××ª ×”×§×•×‘×¥.');
                setStage('result');
              }
            };
            reader.readAsArrayBuffer(file);
          };
        
          const handleMappingChange = (originalName, field, value) => {
            if (field === 'category' && value === CREATE_NEW_CATEGORY_VALUE) {
                setCurrentMerchantForNewCategory(originalName);
                setIsCategoryDialogOpen(true);
            } else {
                setMappings(prev => ({ ...prev, [originalName]: { ...prev[originalName], [field]: value } }));
            }
          };
        
          const handleSaveNewCategory = async () => {
            if (!newCategoryName.trim()) return;
            try {
              const { data: newCategory } = await api.post('/categories', { name: newCategoryName.trim(), type: '×”×•×¦××”' });
              // Real-time update
              setCategories(prev => [...prev, newCategory].sort((a, b) => a.name.localeCompare(b.name)));
              if (currentMerchantForNewCategory) {
                  handleMappingChange(currentMerchantForNewCategory, 'category', newCategory._id);
              }
              setIsCategoryDialogOpen(false);
              setNewCategoryName('');
              setCurrentMerchantForNewCategory(null);
            } catch (err) {
              alert(`×©×’×™××” ×‘×™×¦×™×¨×ª ×§×˜×’×•×¨×™×”: ${err.response?.data?.message || err.message}`);
            }
          };
        
          const processData = async (mappingsToSave, dataToProcess) => {
            setStage('processing');
            setMessage('×ž×¢×‘×“ ×¢×¡×§××•×ª ×•×©×•×œ×— ×œ×©×¨×ª...');
            try {
              const allMapsRes = await api.get('/management');
              const allMaps = allMapsRes.data.merchantMaps || [];
        
              const finalMap = [...allMaps, ...mappingsToSave];
              const mappingDict = Object.fromEntries(finalMap.map(m => [m.originalName, { newName: m.newName, category: m.category?.name }]));
        
              const transactions = dataToProcess.map(row => {
                const originalName = row['×©× ×‘×™×ª ×”×¢×¡×§'];
                const amount = row['×¡×›×•×'] || row['×¡×›×•× ×¢×¡×§×” ×ž×§×•×¨×™'];
                const date = row['×ª××¨×™×š ×¢×¡×§×”'];
                const mapping = mappingDict[originalName] || {};
        
                return {
                    date: date,
                    description: mapping.newName || originalName,
                    amount: Math.abs(Number(amount)) || 0,
                    type: '×”×•×¦××”',
                    category: mapping.category || '×œ×œ× ×§×˜×’×•×¨×™×”',
                    account: 'checking',
                };
              });
        
              const { data: response } = await api.post('/import/process-transactions', { transactions, newMappings: mappingsToSave });
              setMessage(response.message);
              setStage('result');
            } catch (error) {
              setMessage(error.response?.data?.message || '×©×’×™××” ×‘×¢×™×‘×•×“ ×”×§×•×‘×¥.');
              setStage('result');
            }
          };
        
          const handleProcessClick = async (forceProcessAll = false) => {
            let finalMappings = [];
        
            for (const originalName of unseenMerchants) {
              const mapping = mappings[originalName];
              let categoryId = mapping.category;
        
              if (categoryId === CREATE_NEW_CATEGORY_VALUE) {
                // This case is handled by the Dialog now, so this part of logic might not be directly triggered
                // but is kept for safety.
                alert('×™×© ×œ×™×¦×•×¨ ×§×˜×’×•×¨×™×” ×—×“×©×” ×“×¨×š ×”×—×œ×•×Ÿ ×©× ×¤×ª×—.');
                return;
              }
        
              if (categoryId) {
                finalMappings.push({ originalName, newName: mapping.newName.trim() || originalName, category: categoryId });
              } else if (!forceProcessAll) {
                alert(`× × ×œ×‘×—×•×¨ ×§×˜×’×•×¨×™×” ×¢×‘×•×¨ "${originalName}"`);
                return;
              } else {
                // Add a mapping without a category if forcing all
                finalMappings.push({ originalName, newName: mapping.newName.trim() || originalName, category: null });
              }
            }
        
            processData(finalMappings, parsedData);
          };
        
          const resetProcess = () => {
            setStage('select');
            setMessage('');
            setParsedData([]);
            setUnseenMerchants([]);
          };
        
          return (
            <div className="container mx-auto p-4 md:p-8">
              <Card className="max-w-4xl mx-auto shadow-lg">
                <CardHeader className="text-center">
                  <CardTitle className="text-3xl font-bold">××©×£ ×™×™×‘×•× ×¢×¡×§××•×ª</CardTitle>
                  <CardDescription className="text-lg text-slate-600 mt-2">×™×™×‘× ×“×¤×™ ×—×©×‘×•×Ÿ ×‘×§×œ×•×ª ×•×‘×ž×”×™×¨×•×ª</CardDescription>
                </CardHeader>
                <CardContent className="min-h-[400px] flex items-center justify-center">
                  {stage === 'select' && (
                    <div className="text-center p-8 space-y-6">
                      <UploadCloud className="mx-auto h-16 w-16 text-slate-300" />
                      <h3 className="text-xl font-semibold">×”×ª×—×œ ×™×™×‘×•× ×—×“×©</h3>
                      <p className="text-slate-500">×‘×—×¨ ××ª ×¡×•×’ ×”×“×•×— ×©×‘×¨×¦×•× ×š ×œ×™×™×‘× ×›×“×™ ×œ×”×ª×—×™×œ.</p>
                      <div className="flex justify-center gap-4 pt-4">
                        <Button size="lg" onClick={() => handleImportButtonClick('max')}>×™×™×‘×•× ×ž×“×•×— "×ž×§×¡"</Button>
                        <Button size="lg" onClick={() => handleImportButtonClick('cal')}>×™×™×‘×•× ×ž×“×•×— "×›××œ"</Button>
                      </div>
                      <input type="file" ref={fileInputRef} onChange={handleFileSelected} accept=".xlsx, .xls" className="hidden" />
                    </div>
                  )}
        
                  {stage === 'map' && (
                    <div className="w-full">
                      <div className="text-center mb-6">
                        <Settings className="mx-auto h-12 w-12 text-slate-300" />
                        <h3 className="text-xl font-semibold mt-4">×ž×™×¤×•×™ ×¡×¤×§×™× ×—×“×©×™×</h3>
                        <p className="text-slate-500">× ×ž×¦××• {unseenMerchants.length} ×¡×¤×§×™× ×—×“×©×™×. ×”×’×“×¨ ×¢×‘×•×¨× ×©× × ×§×™ ×•×§×˜×’×•×¨×™×”.</p>
                      </div>
                      <div className="space-y-3 max-h-[40vh] overflow-y-auto pr-2 border-t border-b py-4">
                        {unseenMerchants.map(name => (
                          <div key={name} className="grid grid-cols-1 md:grid-cols-3 gap-4 items-center p-2 rounded-md hover:bg-slate-50">
                            <span className="truncate font-medium" title={name}>{name}</span>
                            <Input placeholder="×©× × ×§×™ (××•×¤×¦×™×•× ×œ×™)" value={mappings[name]?.newName || ''} onChange={(e) => handleMappingChange(name, 'newName', e.target.value)} />
                            <div className="flex gap-2">
                              <Select value={mappings[name]?.category || ''} onValueChange={(v) => handleMappingChange(name, 'category', v)}>
                                <SelectTrigger><SelectValue placeholder="×‘×—×¨ ×§×˜×’×•×¨×™×”" /></SelectTrigger>
                                <SelectContent>
                                  {categories.map(cat => <SelectItem key={cat._id} value={cat._id}>{cat.name}</SelectItem>)}
                                  <SelectItem value={CREATE_NEW_CATEGORY_VALUE}>--- ×¦×•×¨ ×§×˜×’×•×¨×™×” ×—×“×©×” ---</SelectItem>
                                </SelectContent>
                              </Select>
                            </div>
                          </div>
                        ))}
                      </div>
                      <div className="flex justify-end gap-4 pt-6">
                         <Button type="button" variant="ghost" onClick={() => handleProcessClick(true)}>×™×™×‘× ×”×›×œ (×•×©×™×™×š ×ž××•×—×¨ ×™×•×ª×¨)</Button>
                         <Button type="button" onClick={() => handleProcessClick(false)}>×¡×™×™× ×•×™×™×‘×</Button>
                      </div>
                    </div>
                  )}
        
                  {(stage === 'processing' || stage === 'result') && (
                    <div className="text-center p-8 space-y-4">
                       {stage === 'processing' ? <FileText className="mx-auto h-16 w-16 text-slate-300 animate-pulse" /> : message.includes('×©×’×™××”') ? <AlertTriangle className="mx-auto h-16 w-16 text-red-400" /> : <CheckCircle className="mx-auto h-16 w-16 text-green-400" />}
                       <h2 className="text-2xl font-bold">{stage === 'processing' ? '×‘×ª×”×œ×™×š...' : '×ª×”×œ×™×š ×”×™×™×‘×•× ×”×¡×ª×™×™×'}</h2>
                       <p className={message.includes('×©×’×™××”') ? 'text-red-600' : 'text-green-600'}>{message}</p>
                       {stage === 'result' && <Button onClick={resetProcess} className="mt-6">×”×ª×—×œ ×™×™×‘×•× ×—×“×©</Button>}
                    </div>
                  )}
                </CardContent>
              </Card>
        
              <Dialog open={isCategoryDialogOpen} onOpenChange={setIsCategoryDialogOpen}>
                <DialogContent>
                  <DialogHeader><DialogTitle>×”×•×¡×¤×ª ×§×˜×’×•×¨×™×” ×—×“×©×”</DialogTitle></DialogHeader>
                  <div className="py-4"><Input placeholder="×©× ×”×§×˜×’×•×¨×™×”..." value={newCategoryName} onChange={(e) => setNewCategoryName(e.target.value)} /></div>
                  <DialogFooter>
                    <Button type="button" variant="ghost" onClick={() => setIsCategoryDialogOpen(false)}>×‘×™×˜×•×œ</Button>
                    <Button type="button" onClick={handleSaveNewCategory}>×©×ž×•×¨ ×§×˜×’×•×¨×™×”</Button>
                  </DialogFooter>
                </DialogContent>
              </Dialog>
            </div>
          );
        }
      ðŸ“„ FinanceDashboard.jsx
        // client/src/pages/FinanceDashboard.jsx
        
        import React, { useEffect, useState } from 'react';
        import { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from 'recharts';
        import { ArrowUp, ArrowDown, Wallet, Landmark, TrendingUp, Briefcase, LoaderCircle } from 'lucide-react';
        import toast from 'react-hot-toast';
        
        // --- Imports from your project structure ---
        import api from '@/utils/api';
        import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
        import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';
        import { Button } from '@/components/ui/button';
        import { Link } from 'react-router-dom';
        
        // --- Helper Functions ---
        const formatCurrency = (value) => new Intl.NumberFormat('he-IL', { style: 'currency', currency: 'ILS' }).format(value || 0);
        
        const StatCard = ({ title, value, change, icon: Icon, changeType }) => (
            <Card className="dark:bg-slate-900">
                <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                    <CardTitle className="text-sm font-medium">{title}</CardTitle>
                    <Icon className="h-4 w-4 text-muted-foreground" />
                </CardHeader>
                <CardContent>
                    <div className="text-2xl font-bold">{formatCurrency(value)}</div>
                    {change !== undefined && (
                        <p className={`text-xs ${changeType === 'increase' ? 'text-green-600' : 'text-red-600'} flex items-center`}>
                            {changeType === 'increase' ? <ArrowUp className="h-3 w-3 mr-1" /> : <ArrowDown className="h-3 w-3 mr-1" />}
                            {change.toFixed(2)}% ×ž×”×—×•×“×© ×©×¢×‘×¨
                        </p>
                    )}
                </CardContent>
            </Card>
        );
        
        // --- Main Dashboard Component ---
        export default function FinanceDashboard() {
            const [data, setData] = useState(null);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
        
            useEffect(() => {
                const fetchData = async () => {
                    try {
                        setLoading(true);
                        const { data: dashboardData } = await api.get('/dashboard/summary');
                        setData(dashboardData);
                    } catch (err) {
                        const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™ ×”×“×©×‘×•×¨×“';
                        setError(errorMsg);
                        toast.error(errorMsg);
                    } finally {
                        setLoading(false);
                    }
                };
                fetchData();
            }, []);
        
            if (loading) {
                return (
                    <div className="flex justify-center items-center h-[calc(100vh-8rem)]">
                        <LoaderCircle className="h-12 w-12 animate-spin text-primary" />
                    </div>
                );
            }
        
            if (error) {
                return <div className="p-8 text-center text-red-500 bg-red-50 dark:bg-red-900/10 rounded-lg">{error}</div>;
            }
        
            if (!data) {
                return <div className="p-8 text-center text-gray-500">×œ× × ×ž×¦××• × ×ª×•× ×™× ×œ×”×¦×’×”.</div>;
            }
        
            const { accounts, monthlySummary, projects, balanceChartData } = data;
            const totalBalance = accounts.reduce((sum, acc) => sum + acc.balance, 0);
            const thisMonthNet = monthlySummary.thisMonth.income - monthlySummary.thisMonth.expense;
            const prevMonthNet = monthlySummary.prevMonth.income - monthlySummary.prevMonth.expense;
        
            const incomeChange = monthlySummary.prevMonth.income > 0
                ? ((monthlySummary.thisMonth.income - monthlySummary.prevMonth.income) / monthlySummary.prevMonth.income) * 100
                : monthlySummary.thisMonth.income > 0 ? 100 : 0;
        
            const expenseChange = monthlySummary.prevMonth.expense > 0
                ? ((monthlySummary.thisMonth.expense - monthlySummary.prevMonth.expense) / monthlySummary.prevMonth.expense) * 100
                : monthlySummary.thisMonth.expense > 0 ? 100 : 0;
        
        
            return (
                <div className="p-4 sm:p-6 lg:p-8 space-y-8">
                    <header>
                        <h1 className="text-3xl font-bold text-gray-900 dark:text-slate-100">×“×©×‘×•×¨×“ ×¤×™× × ×¡×™</h1>
                        <p className="mt-1 text-lg text-gray-600 dark:text-slate-400">×¡×§×™×¨×” ×›×œ×œ×™×ª ×©×œ ×”×ž×¦×‘ ×”×¤×™× × ×¡×™ ×©×œ×š.</p>
                    </header>
        
                    {/* --- Stats Cards --- */}
                    <section className="grid gap-6 md:grid-cols-2 lg:grid-cols-4">
                        <StatCard title="×™×ª×¨×” ×›×•×œ×œ×ª" value={totalBalance} icon={Wallet} />
                        <StatCard title="×”×›× ×¡×•×ª ×”×—×•×“×©" value={monthlySummary.thisMonth.income} change={incomeChange} changeType={incomeChange >= 0 ? 'increase' : 'decrease'} icon={TrendingUp} />
                        <StatCard title="×”×•×¦××•×ª ×”×—×•×“×©" value={monthlySummary.thisMonth.expense} change={expenseChange} changeType={expenseChange >= 0 ? 'increase' : 'decrease'} icon={TrendingUp} />
                        <StatCard title="×ž××–×Ÿ ×—×•×“×©×™" value={thisMonthNet} change={prevMonthNet} changeType={thisMonthNet >= prevMonthNet ? 'increase' : 'decrease'} icon={Landmark} />
                    </section>
        
                    {/* --- Charts and Tables --- */}
                    <section className="grid gap-8 lg:grid-cols-3">
                        {/* Balance Chart */}
                        <Card className="lg:col-span-2 dark:bg-slate-900">
                            <CardHeader>
                                <CardTitle>×”×ª×¤×ª×—×•×ª ×”×™×ª×¨×”</CardTitle>
                            </CardHeader>
                            <CardContent className="h-80">
                                 <ResponsiveContainer width="100%" height="100%">
                                    <LineChart data={balanceChartData} margin={{ top: 5, right: 20, left: -10, bottom: 5 }}>
                                        <CartesianGrid strokeDasharray="3 3" stroke="hsl(var(--border))" />
                                        <XAxis dataKey="date" tick={{ fontSize: 12 }} stroke="hsl(var(--muted-foreground))" />
                                        <YAxis tickFormatter={formatCurrency} tick={{ fontSize: 12 }} stroke="hsl(var(--muted-foreground))" />
                                        <Tooltip
                                            contentStyle={{
                                                backgroundColor: 'hsl(var(--background))',
                                                borderColor: 'hsl(var(--border))',
                                                fontSize: '12px',
                                                direction: 'rtl'
                                            }}
                                            formatter={(value) => formatCurrency(value)}
                                        />
                                        <Line type="monotone" dataKey="balance" stroke="hsl(var(--primary))" strokeWidth={2} dot={false} />
                                    </LineChart>
                                </ResponsiveContainer>
                            </CardContent>
                        </Card>
        
                        {/* Accounts Summary */}
                        <Card className="dark:bg-slate-900">
                            <CardHeader>
                                <CardTitle>×¡×™×›×•× ×—×©×‘×•× ×•×ª</CardTitle>
                            </CardHeader>
                            <CardContent>
                                <Table>
                                    <TableHeader>
                                        <TableRow>
                                            <TableHead>×—×©×‘×•×Ÿ</TableHead>
                                            <TableHead className="text-left">×™×ª×¨×”</TableHead>
                                        </TableRow>
                                    </TableHeader>
                                    <TableBody>
                                        {accounts.map(acc => (
                                            <TableRow key={acc._id}>
                                                <TableCell className="font-medium">{acc.name}</TableCell>
                                                <TableCell className="text-left">{formatCurrency(acc.balance)}</TableCell>
                                            </TableRow>
                                        ))}
                                    </TableBody>
                                </Table>
                            </CardContent>
                        </Card>
                    </section>
        
                     {/* --- Recent Projects --- */}
                    <section>
                        <Card className="dark:bg-slate-900">
                            <CardHeader className="flex flex-row items-center justify-between">
                                <CardTitle>×¤×¨×•×™×§×˜×™× ××—×¨×•× ×™×</CardTitle>
                                <Button asChild variant="ghost" size="sm">
                                    <Link to="/projects">×›×œ ×”×¤×¨×•×™×§×˜×™×</Link>
                                </Button>
                            </CardHeader>
                            <CardContent>
                                <div className="space-y-4">
                                    {projects.slice(0, 3).map(proj => (
                                        <Link to={`/projects/${proj._id}`} key={proj._id} className="block p-4 rounded-lg border dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors">
                                            <div className="flex justify-between items-center">
                                                <p className="font-semibold">{proj.projectName}</p>
                                                <p className="text-sm text-muted-foreground">{new Date(proj.createdAt).toLocaleDateString('he-IL')}</p>
                                            </div>
                                             <div className="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 mt-2">
                                                <div className="bg-blue-600 h-2.5 rounded-full" style={{ width: `${(proj.currentAmount / proj.targetAmount) * 100}%` }}></div>
                                            </div>
                                            <p className="text-xs text-muted-foreground mt-1 text-left">{formatCurrency(proj.currentAmount)} / {formatCurrency(proj.targetAmount)}</p>
                                        </Link>
                                    ))}
                                     {projects.length === 0 && (
                                        <p className="text-center text-muted-foreground py-4">××™×Ÿ ×¤×¨×•×™×§×˜×™× ×¤×¢×™×œ×™× ×›×¨×’×¢.</p>
                                    )}
                                </div>
                            </CardContent>
                        </Card>
                    </section>
                </div>
            );
        }
      ðŸ“„ FinancePage.jsx
        import { useEffect, useState, useMemo } from 'react';
        import { useFinanceStore } from '@/stores/financeStore';
        import { Card, CardContent, CardHeader, CardTitle, CardFooter } from "@/components/ui/card";
        import { Button } from "@/components/ui/Button";
        import { Input } from "@/components/ui/Input";
        import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
        import { Skeleton } from "@/components/ui/skeleton";
        import { Wallet, Landmark, PiggyBank, BarChart, ArrowRightLeft, PlusCircle } from 'lucide-react';
        
        const ACCOUNTS = {
          checking: { label: "×¢×•×´×©", icon: Landmark },
          cash: { label: "×ž×–×•×ž×Ÿ", icon: Wallet },
          deposits: { label: "×¤×™×§×“×•× ×•×ª", icon: PiggyBank },
          stocks: { label: "×ž× ×™×•×ª", icon: BarChart },
        };
        
        // ×§×•×ž×¤×•× × ×˜×ª ×¢×–×¨ ×œ×›×¨×˜×™×¡ ×¡×˜×˜×™×¡×˜×™×§×”
        const StatCard = ({ title, value, icon: Icon, loading }) => (
          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">{title}</CardTitle>
              <Icon className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              {loading ? (
                <Skeleton className="h-8 w-3/4" />
              ) : (
                <div className="text-2xl font-bold">
                  {(value || 0).toLocaleString('he-IL', { style: 'currency', currency: 'ILS', minimumFractionDigits: 0 })}
                </div>
              )}
            </CardContent>
          </Card>
        );
        
        // âœ… ×©× ×”×§×•×ž×¤×•× × ×˜×” ×©×•× ×” ×œ-FinancePage
        function FinancePage() {
          const { profile, loading, error, fetchProfile, updateProfile } = useFinanceStore();
          const [addAmt, setAddAmt] = useState("");
          const [addAcc, setAddAcc] = useState("cash");
          const [from, setFrom] = useState("checking");
          const [to, setTo] = useState("cash");
          const [trxAmt, setTrxAmt] = useState("");
        
          useEffect(() => {
            fetchProfile();
          }, [fetchProfile]);
        
          const total = useMemo(() => {
            if (!profile) return 0;
            return Object.keys(ACCOUNTS).reduce((sum, key) => sum + (profile[key] || 0), 0);
          }, [profile]);
        
          const handleAdd = async () => {
            const amount = Number(addAmt);
            if (!amount || !profile) return;
            await updateProfile({
              ...profile,
              [addAcc]: (profile[addAcc] || 0) + amount
            });
            setAddAmt("");
          };
        
          const handleTransfer = async () => {
            const amount = Number(trxAmt);
            if (!amount || from === to || !profile || (profile[from] || 0) < amount) {
              alert("×¡×›×•× ×œ× ×—×•×§×™, ×—×©×‘×•× ×•×ª ×–×”×™× ××• ×™×ª×¨×” ×œ× ×ž×¡×¤×§×ª");
              return;
            }
            await updateProfile({
              ...profile,
              [from]: (profile[from] || 0) - amount,
              [to]: (profile[to] || 0) + amount,
            });
            setTrxAmt("");
          };
        
          if (error) return <p className="p-6 text-center text-red-600">×©×’×™××”: {error}</p>;
        
          return (
            <div className="container mx-auto p-4 sm:p-6 lg:p-8 space-y-8">
              <header>
                <h1 className="text-3xl md:text-4xl font-bold text-gray-900">× ×™×”×•×œ ×¤×™× × ×¡×™</h1>
                <p className="mt-2 text-lg text-gray-600">×¡×§×™×¨×” ×•× ×™×”×•×œ ×©×œ ×›×œ ×”× ×›×¡×™× ×©×œ×š.</p>
              </header>
        
              <section>
                <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-5">
                  {Object.entries(ACCOUNTS).map(([key, { label, icon }]) => (
                    <StatCard key={key} title={label} value={profile?.[key]} icon={icon} loading={loading} />
                  ))}
                  <StatCard title="×¡×”×´×› × ×›×¡×™×" value={total} icon={Wallet} loading={loading} />
                </div>
              </section>
        
              <section className="grid gap-8 md:grid-cols-2">
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center gap-2"><PlusCircle className="h-5 w-5" /> ×”×•×¡×¤×ª ×¡×›×•×</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-4">
                    <Select value={addAcc} onValueChange={setAddAcc}>
                      <SelectTrigger><SelectValue placeholder="×‘×—×¨ ×—×©×‘×•×Ÿ" /></SelectTrigger>
                      <SelectContent>
                        {Object.entries(ACCOUNTS).map(([k, v]) => <SelectItem key={k} value={k}>{v.label}</SelectItem>)}
                      </SelectContent>
                    </Select>
                    <Input
                      type="number"
                      placeholder="×¡×›×•×"
                      value={addAmt}
                      onChange={(e) => setAddAmt(e.target.value)}
                    />
                  </CardContent>
                  <CardFooter>
                    <Button onClick={handleAdd} disabled={!addAmt}>×”×•×¡×£</Button>
                  </CardFooter>
                </Card>
        
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center gap-2"><ArrowRightLeft className="h-5 w-5" /> ×”×¢×‘×¨×” ×‘×™×Ÿ ×—×©×‘×•× ×•×ª</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-4">
                    <div className="flex items-center gap-2">
                      <Select value={from} onValueChange={setFrom}>
                        <SelectTrigger><SelectValue placeholder="×ž×—×©×‘×•×Ÿ" /></SelectTrigger>
                        <SelectContent>
                          {Object.entries(ACCOUNTS).map(([k, v]) => <SelectItem key={k} value={k}>{v.label}</SelectItem>)}
                        </SelectContent>
                      </Select>
                      <span className="text-muted-foreground">â†’</span>
                      <Select value={to} onValueChange={setTo}>
                        <SelectTrigger><SelectValue placeholder="×œ×—×©×‘×•×Ÿ" /></SelectTrigger>
                        <SelectContent>
                          {Object.entries(ACCOUNTS).map(([k, v]) => <SelectItem key={k} value={k}>{v.label}</SelectItem>)}
                        </SelectContent>
                      </Select>
                    </div>
                    <Input
                      type="number"
                      placeholder="×¡×›×•×"
                      value={trxAmt}
                      onChange={(e) => setTrxAmt(e.target.value)}
                    />
                  </CardContent>
                  <CardFooter>
                    <Button onClick={handleTransfer} disabled={!trxAmt}>×”×¢×‘×¨</Button>
                  </CardFooter>
                </Card>
              </section>
            </div>
          );
        }
        
        // âœ… ×©×™× ×•×™ ×¦×•×¨×ª ×”×™×™×¦×•× ×œ×©×•×¨×” × ×¤×¨×“×ª ×‘×¡×•×£ ×”×§×•×‘×¥
        export default FinancePage;
      ðŸ“„ FinancePortfolioPage.jsx
        import React, { useState, useEffect } from 'react';
        import api from '@/utils/api'; // ×©×™×ž×•×© ×‘×§×•×‘×¥ ×”-API ×”×ž×•×ª×× ×©×œ×š
        
        // ×¨×›×™×‘×™ ×¢×–×¨, × ×™×ª×Ÿ ×œ×”×—×œ×™×£ ×‘×¨×›×™×‘×™× ×©×œ×š ×ž-Shadcn/UI
        const Input = ({ label, ...props }) => (
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">{label}</label>
            <input
              type="number"
              className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
              {...props}
            />
          </div>
        );
        
        const Button = ({ children, ...props }) => (
          <button
            className="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400"
            {...props}
          >
            {children}
          </button>
        );
        
        
        export default function FinancePortfolioPage() {
          const [portfolio, setPortfolio] = useState({
            checking: '',
            cash: '',
            deposits: '',
            stocks: '',
          });
          const [loading, setLoading] = useState(true);
          const [saving, setSaving] = useState(false);
          const [message, setMessage] = useState('');
        
          // ×˜×¢×™× ×ª ×”× ×ª×•× ×™× ×”×§×™×™×ž×™× ×ž×”×©×¨×ª
          useEffect(() => {
            api.get('/finances')
              .then(response => {
                setPortfolio(response.data);
              })
              .catch(err => {
                console.error("Failed to fetch portfolio", err);
                setMessage('×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×');
              })
              .finally(() => setLoading(false));
          }, []);
        
          const handleChange = (e) => {
            const { name, value } = e.target;
            setPortfolio(prev => ({ ...prev, [name]: value }));
          };
        
          const handleSubmit = async (e) => {
            e.preventDefault();
            setSaving(true);
            setMessage('');
        
            try {
              const response = await api.post('/finances', portfolio);
              setPortfolio(response.data); // ×¢×“×›×•×Ÿ ×”×ž×¦×‘ ×”×ž×§×•×ž×™ ×¢× ×”× ×ª×•× ×™× ×”×ž×¢×•×“×›× ×™× ×ž×”×©×¨×ª
              setMessage('×”× ×ª×•× ×™× × ×©×ž×¨×• ×‘×”×¦×œ×—×”!');
              setTimeout(() => setMessage(''), 3000); // ×”×¢×œ×ž×ª ×”×”×•×“×¢×” ××—×¨×™ 3 ×©× ×™×•×ª
            } catch (error) {
              console.error("Failed to save portfolio", error);
              setMessage('×©×’×™××” ×‘×©×ž×™×¨×ª ×”× ×ª×•× ×™×.');
            } finally {
              setSaving(false);
            }
          };
        
          if (loading) {
            return <div className="text-center mt-20">×˜×•×¢×Ÿ × ×ª×•× ×™×...</div>;
          }
        
          return (
            <div className="max-w-2xl mx-auto mt-10 p-4">
              <h1 className="text-3xl font-bold mb-2">× ×™×”×•×œ ×ª×™×§ ×¤×™× × ×¡×™</h1>
              <p className="text-gray-600 mb-6">×¢×“×›×Ÿ ××ª ×™×ª×¨×•×ª ×”×—×©×‘×•× ×•×ª ×©×œ×š. ×”× ×ª×•× ×™× ×™×™×©×ž×¨×• ××•×˜×•×ž×˜×™×ª ×ª×—×ª ×”×ž×©×ª×ž×© ×©×œ×š.</p>
        
              <form onSubmit={handleSubmit} className="space-y-6 bg-white p-8 rounded-lg shadow-md">
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <Input
                    label="×¢×•×‘×¨ ×•×©×‘ (×¢×•×´×©)"
                    name="checking"
                    value={portfolio.checking}
                    onChange={handleChange}
                    placeholder="0"
                  />
                  <Input
                    label="×ž×–×•×ž×Ÿ"
                    name="cash"
                    value={portfolio.cash}
                    onChange={handleChange}
                    placeholder="0"
                  />
                  <Input
                    label="×¤×§×“×•× ×•×ª"
                    name="deposits"
                    value={portfolio.deposits}
                    onChange={handleChange}
                    placeholder="0"
                  />
                  <Input
                    label="×ž× ×™×•×ª ×•×§×¨× ×•×ª"
                    name="stocks"
                    value={portfolio.stocks}
                    onChange={handleChange}
                    placeholder="0"
                  />
                </div>
        
                <div className="pt-4">
                  <Button type="submit" disabled={saving}>
                    {saving ? '×©×•×ž×¨...' : '×©×ž×•×¨ ×©×™× ×•×™×™×'}
                  </Button>
                </div>
        
                {message && (
                  <p className={`mt-4 text-center font-medium ${message.startsWith('×©×’×™××”') ? 'text-red-600' : 'text-green-600'}`}>
                    {message}
                  </p>
                )}
              </form>
            </div>
          );
        }
      ðŸ“„ FundsPage.jsx
        import { useEffect, useState, useRef } from 'react';
        import { useFundStore } from '@/stores/fundStore';
        import { useAccountStore } from '@/stores/accountStore';
        import toast from 'react-hot-toast';
        import { motion, AnimatePresence } from 'framer-motion';
        
        // UI Components
        import { Button } from '@/components/ui/Button';
        import { Input } from '@/components/ui/Input';
        import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';
        import {
          Dialog,
          DialogContent,
          DialogHeader,
          DialogTitle,
          DialogDescription,
          DialogFooter,
          DialogClose,
        } from "@/components/ui/dialog";
        import { RefreshCw, Trash2, DollarSign, TrendingUp, TrendingDown, PlusCircle } from 'lucide-react';
        import { Skeleton } from '@/components/ui/skeleton'; // Assuming you have a skeleton component
        
        // Helper component for individual fund cards
        const FundCard = ({ fund, onSellClick, onDeleteClick }) => {
          const isProfit = fund.profit >= 0;
          const profitColor = isProfit ? 'text-green-600' : 'text-red-600';
        
          return (
            <motion.div
              layout
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0, scale: 0.95 }}
              transition={{ duration: 0.3 }}
              className="bg-white rounded-2xl border shadow-sm p-4 flex flex-col justify-between"
            >
              <div>
                <div className="flex justify-between items-start">
                  <h3 className="font-bold text-lg text-gray-800">{fund.fund_number}</h3>
                  <div className="flex gap-1">
                    <Button variant="ghost" size="icon" className="h-8 w-8" onClick={() => onSellClick(fund)} aria-label="Sell">
                      <DollarSign className="h-4 w-4 text-green-600" />
                    </Button>
                    <Button variant="ghost" size="icon" className="h-8 w-8" onClick={() => onDeleteClick(fund)} aria-label="Delete">
                      <Trash2 className="h-4 w-4 text-red-600" />
                    </Button>
                  </div>
                </div>
                <p className="text-sm text-gray-500 mb-4">×¢×•×“×›×Ÿ: {fund.last_updated ? new Date(fund.last_updated).toLocaleString('he-IL') : 'â€”'}</p>
        
                <div className="grid grid-cols-2 gap-x-4 gap-y-2 text-sm mb-4">
                  <div><span className="text-gray-500">×©×•×•×™ × ×•×›×—×™:</span><br/><span className="font-semibold text-lg">â‚ª{fund.current_value.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span></div>
                  <div className={`${profitColor}`}>
                    <span className="text-gray-500">×¨×•×•×—/×”×¤×¡×“:</span><br/>
                    <span className="font-semibold text-lg flex items-center">
                      {isProfit ? <TrendingUp size={18} className="mr-1"/> : <TrendingDown size={18} className="mr-1"/>}
                      â‚ª{fund.profit.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                    </span>
                  </div>
                  <div><span className="text-gray-500">×”×©×§×¢×”:</span><br/><span className="font-mono">â‚ª{fund.invested_amount.toLocaleString()}</span></div>
                  <div><span className="text-gray-500">×™×—×™×“×•×ª:</span><br/><span className="font-mono">{fund.units.toFixed(4)}</span></div>
                  <div><span className="text-gray-500">×ž×—×™×¨ ×§× ×™×™×”:</span><br/><span className="font-mono">â‚ª{fund.purchase_price.toFixed(4)}</span></div>
                  <div><span className="text-gray-500">×ž×—×™×¨ × ×•×›×—×™:</span><br/><span className="font-mono">â‚ª{fund.current_price.toFixed(4)}</span></div>
                </div>
              </div>
            </motion.div>
          );
        };
        
        
        // Main page component
        export default function FundsPage() {
          const { funds, loading, fetchFunds, addFund, refreshPrices, deleteFund, sellFund } = useFundStore();
          const { accounts, fetchAccounts } = useAccountStore();
        
          const [fundToDelete, setFundToDelete] = useState(null);
          const [fundToSell, setFundToSell] = useState(null);
        
          const formRef = useRef(null);
        
          useEffect(() => {
            fetchFunds();
            fetchAccounts();
          }, [fetchFunds, fetchAccounts]);
        
          const handleAddFund = (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
        
            if (!data.fund_number || !data.purchase_price || !data.invested_amount) {
                toast.error("×™×© ×œ×ž×œ× ××ª ×›×œ ×©×“×•×ª ×”×—×•×‘×”.");
                return;
            }
        
            addFund({
                fund_number: data.fund_number,
                purchase_price_agorot: data.purchase_price,
                invested_amount: parseFloat(data.invested_amount),
                sourceAccount: data.sourceAccount
            });
        
            formRef.current?.reset();
            formRef.current?.elements[0].focus();
          };
        
          const handleConfirmDelete = () => {
            if (fundToDelete) {
              deleteFund(fundToDelete._id);
              setFundToDelete(null);
            }
          };
        
          const handleConfirmSell = () => {
            if (fundToSell) {
              sellFund(fundToSell._id);
              setFundToSell(null);
            }
          };
        
          return (
            <div className="space-y-8">
              {/* Header */}
              <div className="flex justify-between items-center">
                <h1 className="text-3xl font-bold text-gray-800">× ×™×”×•×œ ×§×¨× ×•×ª × ××ž× ×•×ª</h1>
                <Button onClick={refreshPrices} disabled={loading} variant="outline">
                  <RefreshCw className={`ml-2 h-4 w-4 ${loading ? 'animate-spin' : ''}`} />
                  {loading ? '×ž×¢×“×›×Ÿ...' : '×¢×“×›×Ÿ ×ž×—×™×¨×™×'}
                </Button>
              </div>
        
              {/* Add Fund Form */}
              <Card className="shadow-lg border-blue-500/20">
                 <CardHeader><CardTitle className="flex items-center gap-2"><PlusCircle size={22} /> ×”×•×¡×¤×ª ×§×¨×Ÿ ×—×“×©×”</CardTitle></CardHeader>
                 <CardContent>
                    <form ref={formRef} onSubmit={handleAddFund} className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4 items-end">
                        <div>
                            <label htmlFor="fund_number" className="text-sm font-medium">×ž×¡×¤×¨ ×§×¨×Ÿ</label>
                            <Input name="fund_number" id="fund_number" placeholder="×œ×“×•×’×ž×”: 5113617" required />
                        </div>
                         <div>
                            <label htmlFor="purchase_price" className="text-sm font-medium">×ž×—×™×¨ ×§× ×™×™×” (×‘××’×•×¨×•×ª)</label>
                            <Input name="purchase_price" id="purchase_price" type="number" step="0.01" placeholder="×ž×—×™×¨ ×™×—×™×“×” ×‘××’×•×¨×•×ª" required />
                        </div>
                        <div>
                            <label htmlFor="invested_amount" className="text-sm font-medium">×¡×›×•× ×”×©×§×¢×” (â‚ª)</label>
                            <Input name="invested_amount" id="invested_amount" type="number" step="0.01" placeholder="×œ×“×•×’×ž×”: 1000" required />
                        </div>
                        <div>
                            <label htmlFor="sourceAccount" className="text-sm font-medium">×ž×§×•×¨ ×”×›×¡×£</label>
                            <select name="sourceAccount" id="sourceAccount" className="w-full h-10 border-gray-300 rounded-md shadow-sm px-3 py-2 border bg-white">
                                <option value="×œ×œ× ×”×•×¨×“×”">×œ×œ× ×”×•×¨×“×” ×ž×—×©×‘×•×Ÿ</option>
                                {accounts.map(acc => <option key={acc._id} value={acc.name}>{acc.name}</option>)}
                            </select>
                        </div>
                       <Button type="submit" className="w-full sm:w-auto">×”×•×¡×£ ×§×¨×Ÿ</Button>
                    </form>
                 </CardContent>
              </Card>
        
              {/* Funds Grid */}
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                  <AnimatePresence>
                    {loading && funds.length === 0
                        ? Array.from({ length: 3 }).map((_, i) => <Skeleton key={i} className="h-64 rounded-2xl" />)
                        : funds.map((fund) => (
                            <FundCard key={fund._id} fund={fund} onSellClick={setFundToSell} onDeleteClick={setFundToDelete} />
                        ))
                    }
                  </AnimatePresence>
              </div>
        
              {!loading && funds.length === 0 && (
                  <div className="text-center py-16 text-gray-500">
                      <h3 className="text-xl font-semibold">×œ× × ×ž×¦××• ×§×¨× ×•×ª.</h3>
                      <p>×”×•×¡×£ ×§×¨×Ÿ ×—×“×©×” ×‘××ž×¦×¢×•×ª ×”×˜×•×¤×¡ ×œ×ž×¢×œ×” ×›×“×™ ×œ×”×ª×—×™×œ.</p>
                  </div>
              )}
        
              {/* Dialogs */}
              <Dialog open={!!fundToDelete} onOpenChange={() => setFundToDelete(null)}>
                <DialogContent>
                  <DialogHeader>
                    <DialogTitle>××™×©×•×¨ ×ž×—×™×§×”</DialogTitle>
                    <DialogDescription>
                      ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×ž×—×•×§ ××ª ×”×§×¨×Ÿ {fundToDelete?.fund_number}? ×œ× × ×™×ª×Ÿ ×œ×©×—×–×¨ ×¤×¢×•×œ×” ×–×•.
                    </DialogDescription>
                  </DialogHeader>
                  <DialogFooter>
                    <DialogClose asChild><Button variant="outline">×‘×™×˜×•×œ</Button></DialogClose>
                    <Button variant="destructive" onClick={handleConfirmDelete}>×ž×—×§</Button>
                  </DialogFooter>
                </DialogContent>
              </Dialog>
        
              <Dialog open={!!fundToSell} onOpenChange={() => setFundToSell(null)}>
                <DialogContent>
                  <DialogHeader>
                    <DialogTitle>××™×©×•×¨ ×ž×›×™×¨×”</DialogTitle>
                    <DialogDescription>
                      ×¤×¢×•×œ×” ×–×• ×ª×ž×›×•×¨ ××ª ×›×œ ×”×™×—×™×“×•×ª ×‘×§×¨×Ÿ {fundToSell?.fund_number} ×œ×¤×™ ×”×©×•×•×™ ×”× ×•×›×—×™ ×©×œ â‚ª{fundToSell?.current_value.toLocaleString()} ×•×ª×¤×§×™×“ ××ª ×”×¡×›×•× ×œ×—×©×‘×•×Ÿ ×”×¢×•"×©.
                    </DialogDescription>
                  </DialogHeader>
                  <DialogFooter>
                    <DialogClose asChild><Button variant="outline">×‘×™×˜×•×œ</Button></DialogClose>
                    <Button variant="default" onClick={handleConfirmSell} className="bg-green-600 hover:bg-green-700">××©×¨ ×ž×›×™×¨×”</Button>
                  </DialogFooter>
                </DialogContent>
              </Dialog>
            </div>
          );
        }
      ðŸ“„ HomePage.jsx
        /*  client/src/pages/HomePage.jsx  */
        
        import { Link } from 'react-router-dom';
        import { motion } from 'framer-motion';
        import { Button } from '@/components/ui/Button';
        
        export default function HomePage() {
          return (
            <main className="min-h-[calc(100vh-4rem)] flex flex-col justify-center items-center px-6 text-center">
              {/* â”€â”€ Hero â”€â”€ */}
              <motion.h1
                initial={{ opacity: 0, y: 30 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ duration: 0.7 }}
                className="text-4xl sm:text-5xl font-extrabold mb-6 leading-tight text-gray-800"
              >
                ×‘×¨×•×›×™× ×”×‘××™× ×œ××ª×¨&nbsp;
                <span className="text-primary-600">× ×™×”×•×œ ×¤×™× × ×¡×™ ××™×©×™ ×ž×§×™×£</span>
              </motion.h1>
        
              <motion.p
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: 0.2, duration: 0.6 }}
                className="text-lg sm:text-xl text-gray-600 max-w-2xl mb-10"
              >
                × ×™×”×•×œ ×”×•×¦××•×ª ×•×”×›× ×¡×•×ª ×‘×§×œ×•×ª ×›×•×œ×œ ×¢×‘×•×“×•×ª ×§×‘×œ×Ÿ ×ž×ª×•×¢×“×•×ª
                <br />
                ×œ×—×¦×• ×¢×œ ×”×›×¤×ª×•×¨ ×•×ª×¢×‘×¨×• ×œ×˜×•×¤×¡ ×”×”×–×ž× ×” ×ª×•×š ×©× ×™×•×ª.
              </motion.p>
        
              <motion.div
                initial={{ opacity: 0, scale: 0.9 }}
                animate={{ opacity: 1, scale: 1 }}
                transition={{ delay: 0.4, duration: 0.5 }}
              >
                <Button asChild size="lg">
                  <Link to="/tzitzit">×”×ª×—×œ ×”×–×ž× ×”</Link>
                </Button>
              </motion.div>
            </main>
          );
        }
      ðŸ“„ ImportPage.jsx
        import React, { useState } from 'react';
        import api from '@/utils/api'; // ×©×™×ž×•×© ×‘×§×•×‘×¥ ×”-API ×”×ž×•×’×“×¨ ×©×œ×š
        
        export default function ImportPage() {
          const [selectedFile, setSelectedFile] = useState(null);
          const [uploading, setUploading] = useState(false);
          const [message, setMessage] = useState('');
        
          const handleFileChange = (event) => {
            setSelectedFile(event.target.files[0]);
            setMessage('');
          };
        
          const handleUpload = async () => {
            if (!selectedFile) {
              setMessage('×©×’×™××”: × × ×œ×‘×—×•×¨ ×§×•×‘×¥.');
              return;
            }
        
            setUploading(true);
            setMessage('×ž×¢×œ×” ×•×ž×¢×‘×“ ××ª ×”×§×•×‘×¥, ×”×ª×”×œ×™×š ×¢×©×•×™ ×œ×§×—×ª ×ž×¡×¤×¨ ×“×§×•×ª...');
        
            const formData = new FormData();
            // ×”×©× 'databaseFile' ×—×™×™×‘ ×œ×”×ª××™× ×œ×©× ×©×”×’×“×¨× ×• ×‘×©×¨×ª
            formData.append('databaseFile', selectedFile);
        
            try {
              const response = await api.post('/import/sqlite', formData, {
                headers: {
                  'Content-Type': 'multipart/form-data',
                },
              });
              setMessage(response.data.message);
            } catch (error) {
              const errorMsg = error.response?.data?.message || '××™×¨×¢×” ×©×’×™××” ×œ× ×¦×¤×•×™×”.';
              setMessage(`×©×’×™××”: ${errorMsg}`);
            } finally {
              setUploading(false);
            }
          };
        
          return (
            <div className="max-w-2xl mx-auto mt-10 p-6 bg-white rounded-lg shadow-md">
              <h1 className="text-2xl font-bold mb-4">×™×™×‘×•× ×—×“-×¤×¢×ž×™ ×ž-SQLite</h1>
              <p className="text-gray-600 mb-6">
                ×¤×¢×•×œ×” ×–×• ×ž×™×•×¢×“×ª ×œ×”×¢×‘×¨×” ×—×“-×¤×¢×ž×™×ª ×©×œ ×”× ×ª×•× ×™× ×ž×”×ª×•×›× ×” ×”×™×©× ×”. ×‘×—×¨ ××ª ×§×•×‘×¥ ×ž×¡×“ ×”× ×ª×•× ×™× (`.db`).
                <strong className="text-red-600">×©×™× ×œ×‘:</strong> ×›×œ ×”×¢×¡×§××•×ª ×”×§×™×™×ž×•×ª ×©×œ×š ×™×™×ž×—×§×• ×•×™×•×—×œ×¤×• ×‘× ×ª×•× ×™× ×ž×”×§×•×‘×¥.
              </p>
        
              <div className="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
                <input
                  type="file"
                  onChange={handleFileChange}
                  accept=".db"
                  className="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
                />
                {selectedFile && <p className="mt-4 text-sm text-gray-500">×§×•×‘×¥ ×©× ×‘×—×¨: {selectedFile.name}</p>}
              </div>
        
              <div className="mt-6">
                <button
                  onClick={handleUpload}
                  disabled={uploading || !selectedFile}
                  className="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors"
                >
                  {uploading ? '×ž×™×™×‘×...' : '×”×ª×—×œ ×™×™×‘×•×'}
                </button>
              </div>
        
              {message && (
                <p className={`mt-4 text-center font-medium ${message.startsWith('×©×’×™××”') ? 'text-red-600' : 'text-green-600'}`}>
                  {message}
                </p>
              )}
            </div>
          );
        }
      ðŸ“„ InvestmentsPage.jsx
        import React, { useEffect, useState, useMemo } from 'react';
        import toast from 'react-hot-toast';
        import {
            RefreshCw, Trash2, DollarSign, LoaderCircle, PlusCircle, MoreHorizontal,
            ArrowUpRight, ArrowDownRight, TrendingUp, Briefcase, BarChart2
        } from 'lucide-react';
        
        // Using relative paths to avoid any alias resolution issues
        import api from '../utils/api';
        import { Button } from '../components/ui/Button';
        import { Input } from '../components/ui/Input';
        import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../components/ui/select';
        import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '../components/ui/table';
        import { Card, CardContent, CardHeader, CardTitle } from '../components/ui/card';
        import { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '../components/ui/dialog';
        import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '../components/ui/dropdown-menu';
        import { Badge } from '../components/ui/badge';
        
        // --- Error Boundary Component ---
        // This component remains unchanged as it's a robust way to handle errors.
        class StocksErrorBoundary extends React.Component {
        Â  constructor(props) {
        Â  Â  super(props);
        Â  Â  this.state = { hasError: false, error: null, errorInfo: null };
        Â  }
        
        Â  static getDerivedStateFromError(error) {
        Â  Â  return { hasError: true, error };
        Â  }
        
        Â  componentDidCatch(error, errorInfo) {
        Â  Â  console.error("Uncaught error in StocksManager:", error, errorInfo);
        Â  Â  this.setState({ errorInfo });
        Â  }
        
        Â  render() {
        Â  Â  if (this.state.hasError) {
        Â  Â  Â  return (
        Â  Â  Â  Â  <div className="text-red-600 p-4 border border-red-500 bg-red-50 rounded-lg">
        Â  Â  Â  Â  Â  <h2 className="font-bold text-lg">×ž×©×”×• ×”×©×ª×‘×© ×‘×˜×¢×™× ×ª ×¨×›×™×‘ ×”×ž× ×™×•×ª.</h2>
        Â  Â  Â  Â  Â  <p className="mt-2 text-sm">×–×” ×ž× ×¢ ×ž×”×“×£ ×œ×”×™×˜×¢×Ÿ. ×‘×“×•×§ ××ª ×”×§×•× ×¡×•×œ ×©×œ ×”×“×¤×“×¤×Ÿ ×œ×§×‘×œ×ª ×¤×¨×˜×™× ×˜×›× ×™×™×.</p>
        Â  Â  Â  Â  Â  <pre className="mt-2 text-xs whitespace-pre-wrap bg-red-100 p-2 rounded">
        Â  Â  Â  Â  Â  Â  {this.state.error && this.state.error.toString()}
        Â  Â  Â  Â  Â  Â  <br />
        Â  Â  Â  Â  Â  Â  {this.state.errorInfo && this.state.errorInfo.componentStack}
        Â  Â  Â  Â  Â  </pre>
        Â  Â  Â  Â  </div>
        Â  Â  Â  );
        Â  Â  }
        Â  Â  return this.props.children;
        Â  }
        }
        
        // --- Re-designed StocksManager Component ---
        function StocksManager() {
        Â  const [stocks, setStocks] = useState([]);
        Â  const [accounts, setAccounts] = useState([]);
        Â  const [loading, setLoading] = useState(true);
        Â  const [refreshing, setRefreshing] = useState(false);
        Â  const [error, setError] = useState(null);
        Â  const [isAddStockDialogOpen, setAddStockDialogOpen] = useState(false);
        
        Â  // Form state
        Â  const [ticker, setTicker] = useState('');
        Â  const [purchasePrice, setPurchasePrice] = useState('');
        Â  const [investedAmount, setInvestedAmount] = useState('');
        Â  const [sourceAccountName, setSourceAccountName] = useState('×œ×œ× ×”×•×¨×“×”');
        
        Â  const fetchData = async () => {
        Â  Â  if (!loading && !refreshing) setLoading(true); // Show loader only on initial load
        Â  Â  setError(null);
        Â  Â  try {
        Â  Â  Â  const [stocksRes, accountsRes] = await Promise.all([
        Â  Â  Â  Â  api.get('/stocks'),
        Â  Â  Â  Â  api.get('/dashboard/summary')
        Â  Â  Â  ]);
        Â  Â  Â  setStocks(stocksRes.data || []);
        Â  Â  Â  setAccounts(accountsRes.data?.accounts || []);
        Â  Â  } catch (err) {
        Â  Â  Â  const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×';
        Â  Â  Â  setError(errorMsg);
        Â  Â  Â  toast.error(errorMsg);
        Â  Â  } finally {
        Â  Â  Â  setLoading(false);
        Â  Â  Â  setRefreshing(false);
        Â  Â  }
        Â  };
        
        Â  useEffect(() => {
        Â  Â  fetchData();
        Â  Â  // eslint-disable-next-line react-hooks/exhaustive-deps
        Â  }, []);
        
        Â  // --- API Handlers ---
        Â  const handleAddStock = async (e) => {
        Â  Â  e.preventDefault();
        Â  Â  if (!ticker || !purchasePrice || !investedAmount) {
        Â  Â  Â  return toast.error("×™×© ×œ×ž×œ× ××ª ×›×œ ×”×©×“×•×ª.");
        Â  Â  }
        Â  Â  try {
        Â  Â  Â  await api.post('/stocks', {
        Â  Â  Â  Â  ticker,
        Â  Â  Â  Â  purchasePrice: parseFloat(purchasePrice),
        Â  Â  Â  Â  investedAmount: parseFloat(investedAmount),
        Â  Â  Â  Â  sourceAccountName,
        Â  Â  Â  });
        Â  Â  Â  toast.success(`×ž× ×™×™×ª ${ticker} × ×•×¡×¤×” ×‘×”×¦×œ×—×”!`);
        Â  Â  Â  setTicker('');
        Â  Â  Â  setPurchasePrice('');
        Â  Â  Â  setInvestedAmount('');
        Â  Â  Â  setAddStockDialogOpen(false); // Close dialog on success
        Â  Â  Â  await fetchData();
        Â  Â  } catch (err) {
        Â  Â  Â  const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×”×•×¡×¤×ª ×ž× ×™×”';
        Â  Â  Â  toast.error(errorMsg);
        Â  Â  }
        Â  };
        
        Â  const handleDeleteStock = async (stockId) => {
        Â  Â  try {
        Â  Â  Â  await api.delete(`/stocks/${stockId}`);
        Â  Â  Â  toast.success('×”×ž× ×™×” × ×ž×—×§×”.');
        Â  Â  Â  await fetchData();
        Â  Â  } catch (err) {
        Â  Â  Â  toast.error('×©×’×™××” ×‘×ž×—×™×§×ª ×”×ž× ×™×”.');
        Â  Â  }
        Â  };
        
        Â  const handleSellStock = async (stockId) => {
        Â  Â  try {
        Â  Â  Â  const { data } = await api.post(`/stocks/${stockId}/sell`);
        Â  Â  Â  toast.success(data.message);
        Â  Â  Â  await fetchData();
        Â  Â  } catch(err) {
        Â  Â  Â  const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×ž×›×™×¨×ª ×”×ž× ×™×”';
        Â  Â  Â  toast.error(errorMsg);
        Â  Â  }
        Â  };
        
        Â  const handleRefreshPrices = async () => {
        Â  Â  setRefreshing(true);
        Â  Â  toast.loading('×ž×¢×“×›×Ÿ ×ž×—×™×¨×™×...', { id: 'refresh-toast' });
        Â  Â  try {
        Â  Â  Â  await api.post('/stocks/refresh-prices');
        Â  Â  Â  await fetchData(); // Refetch all data
        Â  Â  Â  toast.success('×”×ž×—×™×¨×™× ×¢×•×“×›× ×•.', { id: 'refresh-toast' });
        Â  Â  } catch (err) {
        Â  Â  Â  const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×¢×“×›×•×Ÿ ×ž×—×™×¨×™×';
        Â  Â  Â  toast.error(errorMsg, { id: 'refresh-toast' });
        Â  Â  } finally {
        Â  Â  Â  setRefreshing(false);
        Â  Â  }
        Â  };
        
        Â  // --- Memoized Calculations for Stats ---
        Â  const portfolioStats = useMemo(() => {
            if (!Array.isArray(stocks) || stocks.length === 0) {
                return { totalValue: 0, totalInvested: 0, totalProfitLoss: 0, totalProfitLossPercent: 0 };
            }
            // Assuming the backend provides ILS values. If not, conversion logic is needed.
            const totalValue = stocks.reduce((acc, stock) => acc + (stock.currentValueILS || 0), 0);
            const totalInvested = stocks.reduce((acc, stock) => acc + (stock.investedAmountILS || 0), 0);
            const totalProfitLoss = totalValue - totalInvested;
            const totalProfitLossPercent = totalInvested > 0 ? (totalProfitLoss / totalInvested) * 100 : 0;
        
            return { totalValue, totalInvested, totalProfitLoss, totalProfitLossPercent };
        Â  }, [stocks]);
        
        Â  // --- Render Logic ---
        Â  if (loading) {
        Â  Â  return (
        Â  Â  Â  <div className="flex justify-center items-center h-[60vh]">
        Â  Â  Â  Â  <LoaderCircle className="animate-spin h-12 w-12 text-blue-600" />
        Â  Â  Â  </div>
        Â  Â  );
        Â  }
        
        Â  if (error) {
        Â  Â  return <div className="text-center text-red-500 py-10 bg-red-50 rounded-lg">{error}</div>;
        Â  }
        
        Â  const formatCurrency = (value, currency = 'ILS') => {
        Â  Â  return value.toLocaleString('he-IL', { style: 'currency', currency: currency, minimumFractionDigits: 2, maximumFractionDigits: 2 });
        Â  };
        
        Â  return (
        Â  Â  <div className="space-y-6">
        Â  Â  Â  {/* Header with Actions */}
        Â  Â  Â  <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
        Â  Â  Â  Â  <div>
        Â  Â  Â  Â  Â  <h2 className="text-2xl font-bold text-slate-800">×ª×™×§ ×”×”×©×§×¢×•×ª ×©×œ×™</h2>
        Â  Â  Â  Â  Â  <p className="text-slate-500">×¡×§×™×¨×” ×›×œ×œ×™×ª ×©×œ ×‘×™×¦×•×¢×™ ×”×ž× ×™×•×ª ×©×œ×š.</p>
        Â  Â  Â  Â  </div>
        Â  Â  Â  Â  <div className="flex items-center gap-2">
        Â  Â  Â  Â  Â  <Button variant="outline" onClick={handleRefreshPrices} disabled={refreshing}>
        Â  Â  Â  Â  Â  Â  <RefreshCw className={`h-4 w-4 ml-2 ${refreshing ? 'animate-spin' : ''}`} />
        Â  Â  Â  Â  Â  Â  ×¨×¢× ×Ÿ ×ž×—×™×¨×™×
        Â  Â  Â  Â  Â  </Button>
        Â  Â  Â  Â  Â  <Dialog open={isAddStockDialogOpen} onOpenChange={setAddStockDialogOpen}>
        Â  Â  Â  Â  Â  Â  <DialogTrigger asChild>
        Â  Â  Â  Â  Â  Â  Â  <Button>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <PlusCircle className="h-4 w-4 ml-2" />
        Â  Â  Â  Â  Â  Â  Â  Â  Â  ×”×•×¡×£ ×ž× ×™×” ×—×“×©×”
        Â  Â  Â  Â  Â  Â  Â  Â </Button>
        Â  Â  Â  Â  Â  Â  </DialogTrigger>
        Â  Â  Â  Â  Â  Â  <DialogContent className="sm:max-w-[425px]">
        Â  Â  Â  Â  Â  Â  Â  <DialogHeader>
        Â  Â  Â  Â  Â  Â  Â  Â  <DialogTitle>×”×•×¡×¤×ª ×ž× ×™×” ×—×“×©×”</DialogTitle>
        Â  Â  Â  Â  Â  Â  Â  Â  <DialogDescription>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  ×”×–×Ÿ ××ª ×¤×¨×˜×™ ×”×¨×›×™×©×” ×›×“×™ ×œ×”×•×¡×™×£ ×ž× ×™×” ×—×“×©×” ×œ×ž×¢×§×‘.
        Â  Â  Â  Â  Â  Â  Â  Â  </DialogDescription>
        Â  Â  Â  Â  Â  Â  Â  </DialogHeader>
        Â  Â  Â  Â  Â  Â  Â  <form onSubmit={handleAddStock} className="grid gap-4 py-4">
        Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-4 items-center gap-4">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <label htmlFor="ticker" className="text-right">Ticker</label>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <Input id="ticker" placeholder="e.g., AAPL" value={ticker} onChange={e => setTicker(e.target.value.toUpperCase())} required className="col-span-3"/>
        Â  Â  Â  Â  Â  Â  Â  Â  </div>
        Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-4 items-center gap-4">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <label htmlFor="purchasePrice" className="text-right">×ž×—×™×¨ ×§× ×™×™×” ($)</label>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <Input id="purchasePrice" type="number" placeholder="150.25" value={purchasePrice} onChange={e => setPurchasePrice(e.target.value)} required step="0.01" className="col-span-3"/>
        Â  Â  Â  Â  Â  Â  Â  Â  </div>
        Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-4 items-center gap-4">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <label htmlFor="investedAmount" className="text-right">×¡×›×•× ×”×©×§×¢×” ($)</label>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <Input id="investedAmount" type="number" placeholder="1000" value={investedAmount} onChange={e => setInvestedAmount(e.target.value)} required step="0.01" className="col-span-3"/>
        Â  Â  Â  Â  Â  Â  Â  Â  </div>
        Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-4 items-center gap-4">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label htmlFor="sourceAccount" className="text-right">×ž×§×•×¨</label>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Select onValueChange={setSourceAccountName} defaultValue="×œ×œ× ×”×•×¨×“×”">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <SelectTrigger className="col-span-3">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <SelectValue placeholder="×ž×§×•×¨ ×”×›×¡×£" />
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </SelectTrigger>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <SelectContent>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <SelectItem value="×œ×œ× ×”×•×¨×“×”">×œ×œ× ×”×•×¨×“×”</SelectItem>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {Array.isArray(accounts) && accounts.map(acc => <SelectItem key={acc._id} value={acc.name}>{acc.name}</SelectItem>)}
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </SelectContent>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </Select>
        Â  Â  Â  Â  Â  Â  Â  Â  </div>
        Â  Â  Â  Â  Â  Â  Â  Â  <DialogFooter>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <Button type="submit">×”×•×¡×£ ×ž× ×™×”</Button>
        Â  Â  Â  Â  Â  Â  Â  Â  </DialogFooter>
        Â  Â  Â  Â  Â  Â  Â  </form>
        Â  Â  Â  Â  Â  Â  </DialogContent>
        Â  Â  Â  Â  Â  </Dialog>
        Â  Â  Â  Â  </div>
        Â  Â  Â  </div>
        
        Â  Â  Â  {/* Stats Cards */}
        Â  Â  Â  <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        Â  Â  Â  Â  <Card>
        Â  Â  Â  Â  Â  <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
        Â  Â  Â  Â  Â  Â  <CardTitle className="text-sm font-medium">×©×•×•×™ ×ª×™×§ × ×•×›×—×™</CardTitle>
        Â  Â  Â  Â  Â  Â  <Briefcase className="h-4 w-4 text-muted-foreground" />
        Â  Â  Â  Â  Â  </CardHeader>
        Â  Â  Â  Â  Â  <CardContent>
        Â  Â  Â  Â  Â  Â  <div className="text-2xl font-bold">{formatCurrency(portfolioStats.totalValue)}</div>
        Â  Â  Â  Â  Â  Â  <p className="text-xs text-muted-foreground">×”×¢×¨×š ×”×›×•×œ×œ ×©×œ ×”×ª×™×§ ×‘×©×§×œ×™×</p>
        Â  Â  Â  Â  Â  </CardContent>
        Â  Â  Â  Â  </Card>
        Â  Â  Â  Â  <Card>
        Â  Â  Â  Â  Â  <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
        Â  Â  Â  Â  Â  Â  <CardTitle className="text-sm font-medium">×¡×š ×”×›×œ ×”×©×§×¢×”</CardTitle>
        Â  Â  Â  Â  Â  Â  <DollarSign className="h-4 w-4 text-muted-foreground" />
        Â  Â  Â  Â  Â  </CardHeader>
        Â  Â  Â  Â  Â  <CardContent>
        Â  Â  Â  Â  Â  Â  <div className="text-2xl font-bold">{formatCurrency(portfolioStats.totalInvested)}</div>
        Â  Â  Â  Â  Â  Â  <p className="text-xs text-muted-foreground">×¡×š ×›×œ ×”×”×©×§×¢×” ×‘×©×§×œ×™×</p>
        Â  Â  Â  Â  Â  </CardContent>
        Â  Â  Â  Â  </Card>
        Â  Â  Â  Â  <Card>
        Â  Â  Â  Â  Â  <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
        Â  Â  Â  Â  Â  Â  <CardTitle className="text-sm font-medium">×¨×•×•×—/×”×¤×¡×“ ×›×•×œ×œ</CardTitle>
        Â  Â  Â  Â  Â  Â  <BarChart2 className="h-4 w-4 text-muted-foreground" />
        Â  Â  Â  Â  Â  </CardHeader>
        Â  Â  Â  Â  Â  <CardContent>
        Â  Â  Â  Â  Â  Â  <div className={`text-2xl font-bold ${portfolioStats.totalProfitLoss >= 0 ? 'text-green-600' : 'text-red-600'}`}>
        Â  Â  Â  Â  Â  Â  Â  {formatCurrency(portfolioStats.totalProfitLoss)}
        Â  Â  Â  Â  Â  Â  </div>
        Â  Â  Â  Â  Â  Â  <p className="text-xs text-muted-foreground">×¨×•×•×— ××• ×”×¤×¡×“ ×œ× ×ž×ž×•×ž×©</p>
        Â  Â  Â  Â  Â  </CardContent>
        Â  Â  Â  Â  </Card>
        Â  Â  Â  Â  <Card>
        Â  Â  Â  Â  Â  <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
        Â  Â  Â  Â  Â  Â  <CardTitle className="text-sm font-medium">×ª×©×•××” ×›×•×œ×œ×ª</CardTitle>
        Â  Â  Â  Â  Â  Â  <TrendingUp className="h-4 w-4 text-muted-foreground" />
        Â  Â  Â  Â  Â  </CardHeader>
        Â  Â  Â  Â  Â  <CardContent>
        Â  Â  Â  Â  Â  Â  <div className={`text-2xl font-bold ${portfolioStats.totalProfitLossPercent >= 0 ? 'text-green-600' : 'text-red-600'}`}>
        Â  Â  Â  Â  Â  Â  Â  {portfolioStats.totalProfitLossPercent.toFixed(2)}%
        Â  Â  Â  Â  Â  Â  </div>
        Â  Â  Â  Â  Â  Â  <p className="text-xs text-muted-foreground">×ª×©×•××” ×‘××—×•×–×™× ×¢×œ ×”×”×©×§×¢×”</p>
        Â  Â  Â  Â  Â  </CardContent>
        Â  Â  Â  Â  </Card>
        Â  Â  Â  </div>
        
        Â  Â  Â  {/* Stocks Table */}
        Â  Â  Â  <Card className="overflow-hidden">
        Â  Â  Â  Â  <CardHeader>
        Â  Â  Â  Â  Â  <CardTitle>×”×ž× ×™×•×ª ×©×œ×™</CardTitle>
        Â  Â  Â  Â  </CardHeader>
        Â  Â  Â  Â  <CardContent>
        Â  Â  Â  Â  Â  <div className="rounded-md border">
        Â  Â  Â  Â  Â  Â  <Table>
        Â  Â  Â  Â  Â  Â  Â  <TableHeader>
        Â  Â  Â  Â  Â  Â  Â  Â  <TableRow className="bg-slate-50 hover:bg-slate-50">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableHead className="w-[100px]">Ticker</TableHead>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableHead className="text-right">×©×•×•×™ × ×•×›×—×™ (â‚ª)</TableHead>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableHead className="text-right">×¨×•×•×—/×”×¤×¡×“ ($)</TableHead>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableHead className="text-right">×™×—×™×“×•×ª</TableHead>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableHead className="text-right">×ž×—×™×¨ × ×•×›×—×™ ($)</TableHead>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableHead className="text-right">×ž×—×™×¨ ×§× ×™×™×” ($)</TableHead>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableHead>×¢×“×›×•×Ÿ ××—×¨×•×Ÿ</TableHead>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableHead className="text-right">×¤×¢×•×œ×•×ª</TableHead>
        Â  Â  Â  Â  Â  Â  Â  Â  </TableRow>
        Â  Â  Â  Â  Â  Â  Â  </TableHeader>
        Â  Â  Â  Â  Â  Â  Â  <TableBody>
        Â  Â  Â  Â  Â  Â  Â  Â  {stocks.length === 0 ? (
        Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableRow>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableCell colSpan="8" className="h-24 text-center text-slate-500">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ×¢×“×™×™×Ÿ ×œ× ×”×•×¡×¤×ª ×ž× ×™×•×ª. ×œ×—×¥ ×¢×œ '×”×•×¡×£ ×ž× ×™×” ×—×“×©×”' ×›×“×™ ×œ×”×ª×—×™×œ.
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </TableCell>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  </TableRow>
        Â  Â  Â  Â  Â  Â  Â  Â  ) : (
        Â  Â  Â  Â  Â  Â  Â  Â  Â  stocks.map(stock => {
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const profit = stock.profitUSD || 0;
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isProfit = profit >= 0;
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const updatedDate = stock.lastUpdated ? new Date(stock.lastUpdated) : null;
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableRow key={stock._id} className="hover:bg-slate-50/50">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableCell className="font-medium">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  href={`https://finance.yahoo.com/quote/${stock.ticker}`}
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  target="_blank"
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rel="noopener noreferrer"
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="text-blue-600 hover:underline"
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {stock.ticker}
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </a>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </TableCell>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableCell className="text-right font-semibold">{formatCurrency(stock.currentValueILS || 0)}</TableCell>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableCell className="text-right">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Badge variant={isProfit ? "success" : "destructive"}>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {isProfit ? <ArrowUpRight className="h-3 w-3 mr-1"/> : <ArrowDownRight className="h-3 w-3 mr-1"/>}
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {formatCurrency(profit, 'USD')}
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </Badge>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </TableCell>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableCell className="text-right">{(stock.shares || 0).toFixed(4)}</TableCell>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableCell className="text-right">{formatCurrency(stock.currentPrice || 0, 'USD')}</TableCell>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableCell className="text-right">{formatCurrency(stock.purchasePrice || 0, 'USD')}</TableCell>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableCell className="text-sm text-muted-foreground">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {updatedDate && !isNaN(updatedDate) ? updatedDate.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' }) : 'â€”'}
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </TableCell>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <TableCell className="text-right">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <DropdownMenu>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <DropdownMenuTrigger asChild>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Button variant="ghost" className="h-8 w-8 p-0">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="sr-only">×¤×ª×— ×ª×¤×¨×™×˜</span>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <MoreHorizontal className="h-4 w-4" />
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </Button>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </DropdownMenuTrigger>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <DropdownMenuContent align="end">
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <DropdownMenuItem onClick={() => handleSellStock(stock._id)}>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <DollarSign className="h-4 w-4 mr-2" />
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>×ž×›×•×¨ ×”×›×œ</span>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </DropdownMenuItem>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <DropdownMenuItem className="text-red-600 focus:text-red-600 focus:bg-red-50" onClick={() => handleDeleteStock(stock._id)}>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Trash2 className="h-4 w-4 mr-2" />
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>×ž×—×§ ×œ×¦×ž×™×ª×•×ª</span>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </DropdownMenuItem>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </DropdownMenuContent>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </DropdownMenu>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </TableCell>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </TableRow>
        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
        Â  Â  Â  Â  Â  Â  Â  Â  Â  })
        Â  Â  Â  Â  Â  Â  Â  Â  )}
        Â  Â  Â  Â  Â  Â  Â  </TableBody>
        Â  Â  Â  Â  Â  Â  </Table>
        Â  Â  Â  Â  Â  </div>
        Â  Â  Â  Â  </CardContent>
        Â  Â  Â  </Card>
        Â  Â  </div>
        Â  );
        }
        
        // --- Main InvestmentsPage Component ---
        // This wrapper component is updated with a more modern header.
        export default function InvestmentsPage() {
        Â  return (
        Â  Â  <div className="container mx-auto p-4 md:p-6 lg:p-8 bg-slate-50 min-h-screen">
        Â  Â  Â  Â <header className="mb-8">
        Â  Â  Â  Â  <h1 className="text-4xl font-extrabold text-slate-900 tracking-tight">× ×™×”×•×œ ×”×©×§×¢×•×ª</h1>
        Â  Â  Â  Â  <p className="mt-2 text-lg text-slate-600">
        Â  Â  Â  Â  Â  ×ž×¢×§×‘ ×•× ×™×”×•×œ ××™× ×˜×¨××§×˜×™×‘×™ ××—×¨ ×ª×™×§ ×”×ž× ×™×•×ª ×©×œ×š.
        Â  Â  Â  Â  </p>
        Â  Â  Â  </header>
        Â  Â  Â  <main>
        Â  Â  Â  Â  <StocksErrorBoundary>
        Â  Â  Â  Â  Â  <StocksManager />
        Â  Â  Â  Â  </StocksErrorBoundary>
        Â  Â  Â  </main>
        Â  Â  </div>
        Â  );
        }
      ðŸ“„ LoanDetailPage.jsx
        // client/src/pages/LoanDetailPage.jsx
        
        import React, { useState, useEffect, useMemo } from 'react';
        import { useParams, Link } from 'react-router-dom';
        import api from '@/utils/api';
        import AmortizationTable from '@/components/loans/AmortizationTable';
        
        const LoanDetailPage = () => {
          const { loanId } = useParams();
          const [loan, setLoan] = useState(null);
          const [loading, setLoading] = useState(true);
          const [error, setError] = useState(null);
        
          useEffect(() => {
            const fetchLoan = async () => {
              try {
                setLoading(true);
                const { data } = await api.get(`/loans/${loanId}`);
                setLoan(data);
              } catch (err) {
                setError('×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×˜×™ ×”×”×œ×•×•××”.');
                console.error(err);
              } finally {
                setLoading(false);
              }
            };
        
            fetchLoan();
          }, [loanId]);
        
          // --- ðŸ‘‡ This is the new calculation block ðŸ‘‡ ---
          // It calculates the progress only when the 'loan' data changes.
          const progressData = useMemo(() => {
            if (!loan) return null;
        
            const today = new Date();
            today.setHours(0, 0, 0, 0);
        
            const pastPayments = loan.amortizationSchedule.filter(p => new Date(p.date) < today);
        
            const paidPrincipal = pastPayments.reduce((sum, p) => sum + p.principal, 0);
            const paidInterest = pastPayments.reduce((sum, p) => sum + p.interest, 0);
            const totalPaid = paidPrincipal + paidInterest;
        
            const lastPaidPayment = pastPayments[pastPayments.length - 1];
            const currentBalance = lastPaidPayment ? lastPaidPayment.remainingBalance : loan.principal;
        
            const progressPercentage = (paidPrincipal / loan.principal) * 100;
        
            return { paidPrincipal, totalPaid, currentBalance, progressPercentage };
          }, [loan]);
        
          if (loading) return <div className="text-center p-10">×˜×•×¢×Ÿ ×¤×¨×˜×™ ×”×œ×•×•××”...</div>;
          if (error) return <div className="text-center p-10 text-red-500">{error}</div>;
          if (!loan || !progressData) return <div className="text-center p-10">×”×”×œ×•×•××” ×œ× × ×ž×¦××”.</div>;
        
          const formatCurrency = (num) => (num || 0).toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        
          return (
            <div className="max-w-6xl mx-auto p-4 space-y-6">
              <Link to="/my-loans" className="text-blue-600 hover:underline">
                &larr; ×—×–×¨×” ×œ×›×œ ×”×”×œ×•×•××•×ª
              </Link>
        
              <div className="bg-white p-6 rounded-lg shadow border">
                <h1 className="text-2xl font-bold">{loan.name}</h1>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 text-sm">
                  <div><span className="font-semibold text-gray-600">×¡×›×•× ×ž×§×•×¨×™:</span> {formatCurrency(loan.principal)} â‚ª</div>
                  <div><span className="font-semibold text-gray-600">×¨×™×‘×™×ª ×”×ª×—×œ×ª×™×ª:</span> {loan.interestRate.primeRateOnStart}%</div>
                  <div><span className="font-semibold text-gray-600">×ª×§×•×¤×”:</span> {loan.termInMonths} ×—×•×“×©×™×</div>
                  <div><span className="font-semibold text-gray-600">×©×™×˜×ª ×”×—×–×¨:</span> {loan.repaymentType}</div>
                </div>
              </div>
        
              {/* --- ðŸ‘‡ This is the new summary section ðŸ‘‡ --- */}
              <div className="bg-white p-6 rounded-lg shadow border space-y-4">
                <h2 className="text-xl font-bold">×”×ª×§×“×ž×•×ª ×”×”×œ×•×•××” (× ×›×•×Ÿ ×œ×”×™×•×)</h2>
                <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                  <div><span className="font-semibold text-gray-600">×™×ª×¨×” × ×•×›×—×™×ª ×œ×¡×™×œ×•×§:</span> {formatCurrency(progressData.currentBalance)} â‚ª</div>
                  <div><span className="font-semibold text-gray-600">×¡×”"×› ×©×•×œ× ×¢×“ ×›×”:</span> {formatCurrency(progressData.totalPaid)} â‚ª</div>
                  <div><span className="font-semibold text-gray-600">×”×ª×§×“×ž×•×ª ×”×—×–×¨ ×”×§×¨×Ÿ:</span> {progressData.progressPercentage.toFixed(1)}%</div>
                </div>
              </div>
        
              <AmortizationTable schedule={loan.amortizationSchedule} />
            </div>
          );
        };
        
        export default LoanDetailPage;
      ðŸ“„ LoginPage.jsx
        // client/src/pages/LoginPage.jsx
        
        import { useState, useEffect } from 'react'; // 1. ×”×•×¡×¤× ×• useEffect
        import { Link, useNavigate } from 'react-router-dom';
        import api from "@/utils/api"; //import { useAuthStore } from '@/stores/authStore';
        import { useAuthStore } from "@/stores/authStore";
        import { Button } from '@/components/ui/Button';
        import { motion, AnimatePresence } from 'framer-motion';
        import { Mail, Lock, Eye, EyeOff, LoaderCircle, AlertCircle } from 'lucide-react';
        
        export default function LoginPage() {
          const [email, setEmail] = useState('');
          const [password, setPassword] = useState('');
          const [error, setError] = useState('');
          const [loading, setLoading] = useState(false);
          const [showPassword, setShowPassword] = useState(false);
          const loginAction = useAuthStore((s) => s.login);
          const navigate = useNavigate(); // ×”×•×¡×¤× ×• ××ª useNavigate
        
          // 3. ×”×•×¡×¤× ×• ××ª ×”×‘×œ×•×§ ×”×–×” ×›×“×™ ×œ×§×‘×œ CSRF token
          useEffect(() => {
            api.get('/csrf-token').catch((err) => {
              console.error("Failed to fetch CSRF token", err);
              setError("×©×’×™××ª ××‘×˜×—×”. ×¨×¢× ×Ÿ ××ª ×”×“×£ ×•× ×¡×” ×©×•×‘.");
            });
          }, []);
        
          const handleSubmit = async (e) => {
            e.preventDefault();
            if (loading) return;
        
            setLoading(true);
            setError('');
        
            try {
              // 4. ×”×¡×¨× ×• ××ª /api ×ž×”× ×ª×™×‘ ×›×™ axios ×”×ž×•×ª×× ×›×‘×¨ ×›×•×œ×œ ××•×ª×•
              const { data } = await api.post('/auth/login', { email, password });
        
              if (data && data.user) {
                loginAction(data.user);
        
                // ×¢×“×™×£ ×œ×”×©×ª×ž×© ×‘-navigate ×©×œ react-router
                navigate('/');
        
              } else {
                throw new Error("×ª×’×•×‘×ª ×”×©×¨×ª ××™× ×” ×ž×›×™×œ×” ×¤×¨×˜×™ ×ž×©×ª×ž×©.");
              }
        
            } catch (err) {
              setError(err.response?.data?.message || '×©×’×™××” ×œ× ×¦×¤×•×™×”. × ×¡×” ×©×•×‘.');
            } finally {
              setLoading(false);
            }
          };
        
          const cardVariants = {
            hidden: { opacity: 0, y: 20 },
            visible: {
              opacity: 1,
              y: 0,
              transition: {
                duration: 0.6,
                ease: "easeOut",
                when: "beforeChildren",
                staggerChildren: 0.1
              }
            },
          };
        
          const itemVariants = {
            hidden: { opacity: 0, y: 20 },
            visible: { opacity: 1, y: 0, transition: { duration: 0.5 } }
          };
        
          return (
            <div className="flex items-center justify-center min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 p-4">
              <motion.div
                variants={cardVariants}
                initial="hidden"
                animate="visible"
                className="w-full max-w-md bg-white/80 backdrop-blur-xl rounded-2xl shadow-2xl p-8 space-y-6"
              >
                <motion.div variants={itemVariants} className="text-center">
                  <Link to="/" className="text-3xl font-bold text-amber-700 inline-block mb-2">ðŸ½ï¸ ×§×™×™×˜×¨×™× ×’ ×¤×¡×—</Link>
                  <h1 className="text-2xl font-bold text-gray-900">×‘×¨×•×›×™× ×”×‘××™×</h1>
                  <p className="text-gray-600">×”×ª×—×‘×¨ ×œ×—×©×‘×•×Ÿ ×©×œ×š ×›×“×™ ×œ×”×ž×©×™×š</p>
                </motion.div>
        
                <form onSubmit={handleSubmit} className="space-y-4">
                  <motion.div variants={itemVariants}>
                    <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-1">×›×ª×•×‘×ª ××™×ž×™×™×œ</label>
                    <div className="relative">
                      <span className="absolute inset-y-0 left-0 flex items-center pl-3"><Mail className="h-5 w-5 text-gray-400" /></span>
                      <input id="email" type="email" placeholder="you@example.com" required value={email} onChange={(e) => setEmail(e.target.value)} className="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 transition"/>
                    </div>
                  </motion.div>
        
                  <motion.div variants={itemVariants}>
                    <label htmlFor="password" className="block text-sm font-medium text-gray-700 mb-1">×¡×™×¡×ž×”</label>
                    <div className="relative">
                      <span className="absolute inset-y-0 left-0 flex items-center pl-3"><Lock className="h-5 w-5 text-gray-400" /></span>
                      <input id="password" type={showPassword ? 'text' : 'password'} placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required value={password} onChange={(e) => setPassword(e.target.value)} className="w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 transition"/>
                      <button type="button" onClick={() => setShowPassword(!showPassword)} className="absolute inset-y-0 right-0 flex items-center pr-3" aria-label={showPassword ? "×”×¡×ª×¨ ×¡×™×¡×ž×”" : "×”×¦×’ ×¡×™×¡×ž×”"}>
                        {showPassword ? <EyeOff className="h-5 w-5 text-gray-500 hover:text-gray-800" /> : <Eye className="h-5 w-5 text-gray-500 hover:text-gray-800" />}
                      </button>
                    </div>
                  </motion.div>
        
                  <AnimatePresence>
                    {error && (
                      <motion.div
                        initial={{ opacity: 0, y: -10, height: 0 }}
                        animate={{ opacity: 1, y: 0, height: 'auto' }}
                        exit={{ opacity: 0, y: -10, height: 0 }}
                        className="bg-red-50 border border-red-200 text-red-700 p-3 rounded-lg text-sm flex items-center gap-2 overflow-hidden"
                      >
                        <AlertCircle className="h-5 w-5 flex-shrink-0"/>
                        <span>{error}</span>
                      </motion.div>
                    )}
                  </AnimatePresence>
        
                  <motion.div variants={itemVariants}>
                    <Button type="submit" className="w-full flex justify-center items-center gap-2" disabled={loading}>
                      {loading && <LoaderCircle className="animate-spin h-5 w-5" />}
                      {loading ? '×ž×ª×—×‘×¨...' : '×”×ª×—×‘×¨×•×ª'}
                    </Button>
                  </motion.div>
                </form>
        
                <motion.div variants={itemVariants} className="text-sm text-center text-gray-600">
                  <p>
                    ××™×Ÿ ×œ×š ×—×©×‘×•×Ÿ?{' '}
                    <Link to="/register" className="font-medium text-amber-600 hover:underline">
                      ×”×¨×©× ×¢×›×©×™×•
                    </Link>
                  </p>
                </motion.div>
              </motion.div>
            </div>
          );
        }
      ðŸ“„ ManagementPage.jsx
        import React, { useState, useEffect, memo } from 'react';
        import api from '@/utils/api';
        import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
        import { Button } from "@/components/ui/button";
        import { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle, DialogDescription } from "@/components/ui/dialog";
        import { Input } from "@/components/ui/input";
        import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
        import { Badge } from "@/components/ui/badge";
        import { useToast } from "@/hooks/useToast";
        import { Edit, Trash2, PlusCircle, Settings, ArrowRight, Wand2, Link2, PlayCircle, LoaderCircle, Cpu } from 'lucide-react';
        
        const CREATE_NEW_CATEGORY_VALUE = "CREATE_NEW";
        
        // ×”× ×—×ª ×§×•×‘×¥ CSS ×¢× ×ž×—×œ×§×•×ª ×ž×•×ª××ž×•×ª
        // index.css:
        /*
        .btn-primary {
          @apply tw-px-4 tw-py-2 tw-bg-brand-primary tw-text-white tw-rounded-md tw-transition-all tw-duration-300 tw-hover:bg-brand-primary-dark tw-hover:scale-105 tw-focus:ring-2 tw-focus:ring-brand-primary tw-focus:ring-offset-2;
        }
        .btn-ghost {
          @apply tw-px-2 tw-py-1 tw-text-slate-600 tw-hover:bg-slate-100 tw-rounded-md tw-transition-all tw-duration-300;
        }
        .card {
          @apply tw-bg-white tw-dark:bg-gray-800 tw-shadow-md tw-rounded-lg tw-transition-all tw-duration-300 tw-hover:shadow-lg;
        }
        */
        
        const MapCard = memo(({ map, onEdit, onDelete }) => (
          <div
            className="flex items-center p-3 border-b last:border-b-0 transition-colors hover:bg-slate-50/50 dark:hover:bg-gray-700/50"
            role="listitem"
            aria-label={`×ž×™×¤×•×™ ×¢×‘×•×¨ ${map.originalName}`}
          >
            <div className="flex-1 min-w-0">
              <p className="font-mono text-sm text-slate-700 dark:text-slate-300 truncate" title={map.originalName}>
                {map.originalName}
              </p>
            </div>
            <ArrowRight className="h-4 w-4 text-slate-400 dark:text-slate-500 mx-4" aria-hidden="true" />
            <div className="flex-1 min-w-0">
              <p className="font-semibold text-slate-900 dark:text-slate-100 truncate" title={map.newName}>
                {map.newName}
              </p>
            </div>
            <div className="flex-1 flex justify-start pl-4">
              {map.category?.name && (
                <Badge variant="secondary" className="bg-brand-secondary/20 text-brand-secondary dark:bg-brand-secondary/30">
                  {map.category.name}
                </Badge>
              )}
            </div>
            <div className="flex items-center gap-2">
              <Button
                variant="ghost"
                size="icon"
                onClick={() => onEdit(map)}
                className="btn-ghost"
                aria-label={`×¢×¨×•×š ×ž×™×¤×•×™ ${map.originalName}`}
              >
                <Edit className="h-4 w-4" />
              </Button>
              <Button
                variant="ghost"
                size="icon"
                onClick={() => onDelete(map._id)}
                className="btn-ghost text-destructive"
                aria-label={`×ž×—×§ ×ž×™×¤×•×™ ${map.originalName}`}
              >
                <Trash2 className="h-4 w-4" />
              </Button>
            </div>
          </div>
        ));
        
        const RuleCard = memo(({ rule, onDelete }) => (
          <div
            className="flex items-center p-3 border-b last:border-b-0 transition-colors hover:bg-slate-50/50 dark:hover:bg-gray-700/50"
            role="listitem"
            aria-label={`×—×•×§ ×¢×‘×•×¨ ${rule.keyword}`}
          >
            <div className="flex items-center gap-3 flex-1">
              <p className="text-sm text-slate-600 dark:text-slate-400">×× ×©× ×”×¢×¡×§ ×ž×›×™×œ</p>
              <Badge variant="outline" className="font-mono border-brand-primary text-brand-primary">
                {rule.keyword}
              </Badge>
              <ArrowRight className="h-4 w-4 text-slate-400 dark:text-slate-500" aria-hidden="true" />
              <p className="text-sm text-slate-600 dark:text-slate-400">×©×™×™×š ×œ×§×˜×’×•×¨×™×ª</p>
              <Badge className="bg-brand-secondary/20 text-brand-secondary dark:bg-brand-secondary/30">
                {rule.category?.name || 'N/A'}
              </Badge>
            </div>
            <Button
              variant="ghost"
              size="icon"
              onClick={() => onDelete(rule._id)}
              className="btn-ghost text-destructive"
              aria-label={`×ž×—×§ ×—×•×§ ${rule.keyword}`}
            >
              <Trash2 className="h-4 w-4" />
            </Button>
          </div>
        ));
        
        export default function ManagementPage() {
          const [data, setData] = useState({ categories: [], merchantMaps: [], categoryRules: [] });
          const [loading, setLoading] = useState(true);
          const [isMapDialogOpen, setIsMapDialogOpen] = useState(false);
          const [isRuleDialogOpen, setIsRuleDialogOpen] = useState(false);
          const [isCategoryDialogOpen, setIsCategoryDialogOpen] = useState(false);
          const [currentRule, setCurrentRule] = useState(null);
          const [currentMap, setCurrentMap] = useState(null);
          const [newCategoryName, setNewCategoryName] = useState('');
          const [isApplyingRules, setIsApplyingRules] = useState(false);
          const [formErrors, setFormErrors] = useState({});
          const { toast } = useToast();
        
          const fetchData = async () => {
            setLoading(true);
            try {
              const { data: responseData } = await api.get('/management');
              setData(responseData);
            } catch (error) {
              toast({ title: "×©×’×™××”", description: "×˜×¢×™× ×ª ×”× ×ª×•× ×™× × ×›×©×œ×”.", variant: "destructive" });
            } finally {
              setLoading(false);
            }
          };
        
          useEffect(() => { fetchData(); }, []);
        
          const validateMapForm = () => {
            const errors = {};
            if (!currentMap?.newName?.trim()) errors.newName = "×©× × ×§×™ × ×“×¨×©";
            if (!currentMap?.category) errors.category = "×§×˜×’×•×¨×™×” × ×“×¨×©×ª";
            setFormErrors(errors);
            return Object.keys(errors).length === 0;
          };
        
          const validateRuleForm = () => {
            const errors = {};
            if (!currentRule?.keyword?.trim()) errors.keyword = "×ž×™×œ×ª ×ž×¤×ª×— × ×“×¨×©×ª";
            if (!currentRule?.category) errors.category = "×§×˜×’×•×¨×™×” × ×“×¨×©×ª";
            setFormErrors(errors);
            return Object.keys(errors).length === 0;
          };
        
          const handleEditMap = (map) => {
            setCurrentMap({ ...map, category: map.category?._id || '' });
            setFormErrors({});
            setIsMapDialogOpen(true);
          };
        
          const handleMapUpdate = async () => {
            if (!validateMapForm()) return;
            try {
              await api.put(`/management/merchant-maps/${currentMap._id}`, {
                newName: currentMap.newName.trim(),
                category: currentMap.category,
              });
              toast({ title: "×”×¦×œ×—×”", description: "×”×ž×™×¤×•×™ ×¢×•×“×›×Ÿ ×‘×”×¦×œ×—×”.", variant: "success" });
              fetchData();
              setIsMapDialogOpen(false);
            } catch (error) {
              toast({ title: "×©×’×™××”", description: "×¢×“×›×•×Ÿ ×”×ž×™×¤×•×™ × ×›×©×œ.", variant: "destructive" });
            }
          };
        
          const handleMapDelete = async (mapId) => {
            if (!window.confirm("×”×× ×œ×ž×—×•×§ ××ª ×”×ž×™×¤×•×™?")) return;
            try {
              await api.delete(`/management/merchant-maps/${mapId}`);
              toast({ title: "×”×¦×œ×—×”", description: "×”×ž×™×¤×•×™ × ×ž×—×§.", variant: "success" });
              fetchData();
            } catch (error) {
              toast({ title: "×©×’×™××”", description: "×ž×—×™×§×ª ×”×ž×™×¤×•×™ × ×›×©×œ×”.", variant: "destructive" });
            }
          };
        
          const handleOpenRuleDialog = (rule = null) => {
            setCurrentRule(rule ? { ...rule, category: rule.category?._id || '' } : { keyword: '', category: '' });
            setFormErrors({});
            setIsRuleDialogOpen(true);
          };
        
          const handleSaveRule = async () => {
            if (!validateRuleForm()) return;
            try {
              if (currentRule._id) {
                await api.put(`/management/category-rules/${currentRule._id}`, currentRule);
                toast({ title: "×”×¦×œ×—×”", description: "×”×—×•×§ ×¢×•×“×›×Ÿ.", variant: "success" });
              } else {
                await api.post('/management/category-rules', currentRule);
                toast({ title: "×”×¦×œ×—×”", description: "×—×•×§ ×—×“×© × ×•×¦×¨.", variant: "success" });
              }
              fetchData();
              setIsRuleDialogOpen(false);
            } catch (error) {
              toast({
                title: "×©×’×™××”",
                description: error.response?.data?.message || "×¤×¢×•×œ×ª ×”×—×•×§ × ×›×©×œ×”.",
                variant: "destructive",
              });
            }
          };
        
          const handleRuleDelete = async (ruleId) => {
            if (!window.confirm("×”×× ×œ×ž×—×•×§ ××ª ×”×—×•×§?")) return;
            try {
              await api.delete(`/management/category-rules/${ruleId}`);
              toast({ title: "×”×¦×œ×—×”", description: "×”×—×•×§ × ×ž×—×§.", variant: "success" });
              fetchData();
            } catch (error) {
              toast({ title: "×©×’×™××”", description: "×ž×—×™×§×ª ×”×—×•×§ × ×›×©×œ×”.", variant: "destructive" });
            }
          };
        
          const handleMapCategoryChange = (value) => {
            if (value === CREATE_NEW_CATEGORY_VALUE) {
              setIsCategoryDialogOpen(true);
            } else {
              setCurrentMap((prev) => ({ ...prev, category: value }));
            }
          };
        
          const handleSaveNewCategory = async () => {
            if (!newCategoryName.trim()) {
              setFormErrors({ newCategoryName: "×©× ×§×˜×’×•×¨×™×” × ×“×¨×©" });
              return;
            }
            try {
              const { data: newCategory } = await api.post('/categories', { name: newCategoryName.trim() });
              toast({ title: "×”×¦×œ×—×”", description: "×§×˜×’×•×¨×™×” ×—×“×©×” × ×•×¦×¨×”.", variant: "success" });
              await fetchData();
              setIsCategoryDialogOpen(false);
              setNewCategoryName('');
              setCurrentMap((prev) => ({ ...prev, category: newCategory._id }));
            } catch (err) {
              toast({
                title: "×©×’×™××”",
                description: err.response?.data?.message || "×™×¦×™×¨×ª ×”×§×˜×’×•×¨×™×” × ×›×©×œ×”.",
                variant: "destructive",
              });
            }
          };
        
          const handleApplyRulesRetroactively = async () => {
            if (!window.confirm("×¤×¢×•×œ×” ×–×• ×ª×¡×¨×•×§ ××ª ×›×œ ×”×¢×¡×§××•×ª ×•×ª×—×™×œ ×¢×œ×™×”×Ÿ ××ª ×”×—×•×§×™× ×•×”×ž×™×¤×•×™×™× ×ž×—×“×©. ×”×× ×œ×”×ž×©×™×š?")) return;
            setIsApplyingRules(true);
            toast({ title: "×ž×ª×—×™×œ ×ª×”×œ×™×š...", description: "×”×—×œ×ª ×”×—×•×§×™× ×¢×œ ×¢×¡×§××•×ª ×§×™×™×ž×•×ª. ×”×ª×”×œ×™×š ×¢×©×•×™ ×œ×§×—×ª ×ž×¡×¤×¨ ×“×§×•×ª." });
            try {
              const { data: response } = await api.post('/management/apply-rules');
              toast({ title: "×”×¦×œ×—×”!", description: `${response.updatedCount} ×¢×¡×§××•×ª ×¢×•×“×›× ×•.`, variant: "success" });
            } catch (error) {
              toast({ title: "×©×’×™××” ×‘×ª×”×œ×™×š", description: "×”×—×œ×ª ×”×—×•×§×™× × ×›×©×œ×”.", variant: "destructive" });
            } finally {
              setIsApplyingRules(false);
            }
          };
        
          if (loading) {
            return (
              <div className="p-8 text-center flex items-center justify-center h-screen">
                <LoaderCircle className="h-8 w-8 animate-spin text-brand-primary" aria-label="×˜×•×¢×Ÿ × ×ª×•× ×™×" />
                <span className="mr-2 text-slate-600 dark:text-slate-400">×˜×•×¢×Ÿ × ×ª×•× ×™×...</span>
              </div>
            );
          }
        
          return (
            <div className="p-4 md:p-8 space-y-8 bg-slate-50 dark:bg-gray-900 min-h-screen" dir="rtl">
              <header className="flex items-center gap-4">
                <div className="bg-brand-secondary/10 p-3 rounded-lg">
                  <Settings className="h-8 w-8 text-brand-secondary" aria-hidden="true" />
                </div>
                <div>
                  <h1 className="text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-100">
                    ×ž×¨×›×– ×”××•×˜×•×ž×¦×™×”
                  </h1>
                  <p className="text-slate-500 dark:text-slate-400 mt-1">
                    ×œ×ž×“ ××ª ×”×ž×¢×¨×›×ª ×›×™×¦×“ ×œ×ž×™×™×Ÿ ×•×œ×§×˜×œ×’ ××ª ×”×¢×¡×§××•×ª ×©×œ×š ×‘××•×¤×Ÿ ××•×˜×•×ž×˜×™.
                  </p>
                </div>
              </header>
        
              <Card className="card">
                <CardHeader>
                  <CardTitle className="flex items-center gap-2 text-xl">
                    <Cpu className="h-5 w-5 text-brand-primary" aria-hidden="true" />
                    ×”×¤×¢×œ×ª ×ž× ×•×¢ ×”×—×•×§×™×
                  </CardTitle>
                  <CardDescription className="text-slate-500 dark:text-slate-400">
                    ×™×¦×¨×ª ×—×•×§×™× ××• ×ž×™×¤×•×™×™× ×—×“×©×™×? ×”×¤×¢×œ ××ª ×ž× ×•×¢ ×”×—×•×§×™× ×¢×œ ×›×œ ×”×™×¡×˜×•×¨×™×™×ª ×”×¢×¡×§××•×ª.
                  </CardDescription>
                </CardHeader>
                <CardContent>
                  <Button
                    className="btn-primary w-full sm:w-auto"
                    onClick={handleApplyRulesRetroactively}
                    disabled={isApplyingRules}
                    aria-label="×”×—×œ ×—×•×§×™× ×¢×œ ×›×œ ×”×”×™×¡×˜×•×¨×™×”"
                  >
                    {isApplyingRules ? (
                      <LoaderCircle className="mr-2 h-4 w-4 animate-spin" aria-hidden="true" />
                    ) : (
                      <PlayCircle className="mr-2 h-4 w-4" aria-hidden="true" />
                    )}
                    {isApplyingRules ? '×ž×¢×‘×“...' : '×”×—×œ ×—×•×§×™× ×¢×œ ×›×œ ×”×”×™×¡×˜×•×¨×™×”'}
                  </Button>
                </CardContent>
              </Card>
        
              <Card className="card">
                <CardHeader className="flex flex-row items-center justify-between">
                  <div>
                    <CardTitle className="flex items-center gap-2 text-xl">
                      <Wand2 className="h-5 w-5 text-brand-primary" aria-hidden="true" />
                      ×—×•×§×™× ××•×˜×•×ž×˜×™×™×
                    </CardTitle>
                    <CardDescription className="text-slate-500 dark:text-slate-400">
                      ×”×’×“×¨ ×—×•×§×™× ×œ×©×™×•×š ××•×˜×•×ž×˜×™ ×©×œ ×¡×¤×§×™× ×œ×§×˜×’×•×¨×™×•×ª ×¢×œ ×‘×¡×™×¡ ×ž×™×œ×ª ×ž×¤×ª×—.
                    </CardDescription>
                  </div>
                  <Button
                    className="btn-primary"
                    onClick={() => handleOpenRuleDialog()}
                    aria-label="×¦×•×¨ ×—×•×§ ×—×“×©"
                  >
                    <PlusCircle className="mr-2 h-4 w-4" aria-hidden="true" />
                    ×—×•×§ ×—×“×©
                  </Button>
                </CardHeader>
                <CardContent role="list" aria-label="×¨×©×™×ž×ª ×—×•×§×™× ××•×˜×•×ž×˜×™×™×">
                  {data.categoryRules.length === 0 ? (
                    <p className="text-sm text-center text-slate-500 dark:text-slate-400 py-4">
                      ××™×Ÿ ×—×•×§×™×. ×œ×—×¥ ×¢×œ '×—×•×§ ×—×“×©' ×›×“×™ ×œ×”×ª×—×™×œ.
                    </p>
                  ) : (
                    data.categoryRules.map((rule) => (
                      <RuleCard key={rule._id} rule={rule} onDelete={handleRuleDelete} />
                    ))
                  )}
                </CardContent>
              </Card>
        
              <Card className="card">
                <CardHeader>
                  <CardTitle className="flex items-center gap-2 text-xl">
                    <Link2 className="h-5 w-5 text-brand-primary" aria-hidden="true" />
                    ×ž×™×¤×•×™×™ ×¡×¤×§×™×
                  </CardTitle>
                  <CardDescription className="text-slate-500 dark:text-slate-400">
                    ×ª×¨×’×•× ×©×ž×•×ª ×¡×¤×§×™× ×’×•×œ×ž×™×™× ×œ×©×ž×•×ª × ×§×™×™× ×•×§×˜×’×•×¨×™×•×ª ×§×‘×•×¢×•×ª.
                  </CardDescription>
                </CardHeader>
                <CardContent role="list" aria-label="×¨×©×™×ž×ª ×ž×™×¤×•×™×™ ×¡×¤×§×™×">
                  {data.merchantMaps.length === 0 ? (
                    <p className="text-sm text-center text-slate-500 dark:text-slate-400 py-4">
                      ××™×Ÿ ×ž×™×¤×•×™×™× ×ž×•×’×“×¨×™×.
                    </p>
                  ) : (
                    data.merchantMaps.map((map) => (
                      <MapCard key={map._id} map={map} onEdit={handleEditMap} onDelete={handleMapDelete} />
                    ))
                  )}
                </CardContent>
              </Card>
        
              <Dialog open={isRuleDialogOpen} onOpenChange={setIsRuleDialogOpen}>
                <DialogContent className="dark:bg-gray-800">
                  <DialogHeader>
                    <DialogTitle className="dark:text-slate-100">
                      {currentRule?._id ? '×¢×¨×™×›×ª ×—×•×§' : '×™×¦×™×¨×ª ×—×•×§ ×—×“×©'}
                    </DialogTitle>
                  </DialogHeader>
                  <div className="grid gap-4 py-4">
                    <div>
                      <Input
                        placeholder="×ž×™×œ×ª ×ž×¤×ª×— (×œ×“×•×’×ž×”: 'Wolt')"
                        value={currentRule?.keyword || ''}
                        onChange={(e) => setCurrentRule({ ...currentRule, keyword: e.target.value })}
                        aria-invalid={!!formErrors.keyword}
                        aria-describedby={formErrors.keyword ? 'keyword-error' : undefined}
                        className="dark:bg-gray-700 dark:text-slate-100 dark:border-gray-600"
                      />
                      {formErrors.keyword && (
                        <p id="keyword-error" className="text-sm text-destructive mt-1">
                          {formErrors.keyword}
                        </p>
                      )}
                    </div>
                    <div>
                      <Select
                        value={currentRule?.category || ''}
                        onValueChange={(value) => setCurrentRule({ ...currentRule, category: value })}
                        aria-invalid={!!formErrors.category}
                        aria-describedby={formErrors.category ? 'category-error' : undefined}
                      >
                        <SelectTrigger className="dark:bg-gray-700 dark:text-slate-100 dark:border-gray-600">
                          <SelectValue placeholder="×‘×—×¨ ×§×˜×’×•×¨×™×” ×œ×©×™×•×š" />
                        </SelectTrigger>
                        <SelectContent className="dark:bg-gray-800 dark:text-slate-100">
                          {data.categories.map((cat) => (
                            <SelectItem key={cat._id} value={cat._id} className="dark:hover:bg-gray-700">
                              {cat.name}
                            </SelectItem>
                          ))}
                        </SelectContent>
                      </Select>
                      {formErrors.category && (
                        <p id="category-error" className="text-sm text-destructive mt-1">
                          {formErrors.category}
                        </p>
                      )}
                    </div>
                  </div>
                  <DialogFooter>
                    <Button
                      variant="ghost"
                      onClick={() => setIsRuleDialogOpen(false)}
                      className="btn-ghost dark:text-slate-300"
                    >
                      ×‘×™×˜×•×œ
                    </Button>
                    <Button onClick={handleSaveRule} className="btn-primary">
                      ×©×ž×•×¨ ×—×•×§
                    </Button>
                  </DialogFooter>
                </DialogContent>
              </Dialog>
        
              <Dialog open={isMapDialogOpen} onOpenChange={setIsMapDialogOpen}>
                {currentMap && (
                  <DialogContent className="dark:bg-gray-800">
                    <DialogHeader>
                      <DialogTitle className="dark:text-slate-100">×¢×¨×™×›×ª ×ž×™×¤×•×™</DialogTitle>
                      <DialogDescription className="font-mono pt-2 text-slate-500 dark:text-slate-400">
                        {currentMap.originalName}
                      </DialogDescription>
                    </DialogHeader>
                    <div className="grid gap-4 py-4">
                      <div>
                        <Input
                          label="×©× × ×§×™"
                          value={currentMap.newName}
                          onChange={(e) => setCurrentMap({ ...currentMap, newName: e.target.value })}
                          aria-invalid={!!formErrors.newName}
                          aria-describedby={formErrors.newName ? 'newName-error' : undefined}
                          className="dark:bg-gray-700 dark:text-slate-100 dark:border-gray-600"
                        />
                        {formErrors.newName && (
                          <p id="newName-error" className="text-sm text-destructive mt-1">
                            {formErrors.newName}
                          </p>
                        )}
                      </div>
                      <div>
                        <Select
                          value={currentMap.category}
                          onValueChange={handleMapCategoryChange}
                          aria-invalid={!!formErrors.category}
                          aria-describedby={formErrors.category ? 'category-error' : undefined}
                        >
                          <SelectTrigger className="dark:bg-gray-700 dark:text-slate-100 dark:border-gray-600">
                            <SelectValue placeholder="×‘×—×¨ ×§×˜×’×•×¨×™×”" />
                          </SelectTrigger>
                          <SelectContent className="dark:bg-gray-800 dark:text-slate-100">
                            {data.categories.map((cat) => (
                              <SelectItem key={cat._id} value={cat._id} className="dark:hover:bg-gray-700">
                                {cat.name}
                              </SelectItem>
                            ))}
                            <SelectItem value={CREATE_NEW_CATEGORY_VALUE} className="dark:hover:bg-gray-700">
                              --- ×”×•×¡×£ ×§×˜×’×•×¨×™×” ×—×“×©×” ---
                            </SelectItem>
                          </SelectContent>
                        </Select>
                        {formErrors.category && (
                          <p id="category-error" className="text-sm text-destructive mt-1">
                            {formErrors.category}
                          </p>
                        )}
                      </div>
                    </div>
                    <DialogFooter>
                      <Button
                        variant="ghost"
                        onClick={() => setIsMapDialogOpen(false)}
                        className="btn-ghost dark:text-slate-300"
                      >
                        ×‘×™×˜×•×œ
                      </Button>
                      <Button onClick={handleMapUpdate} className="btn-primary">
                        ×©×ž×•×¨ ×©×™× ×•×™×™×
                      </Button>
                    </DialogFooter>
                  </DialogContent>
                )}
              </Dialog>
        
              <Dialog open={isCategoryDialogOpen} onOpenChange={setIsCategoryDialogOpen}>
                <DialogContent className="dark:bg-gray-800">
                  <DialogHeader>
                    <DialogTitle className="dark:text-slate-100">×”×•×¡×¤×ª ×§×˜×’×•×¨×™×” ×—×“×©×”</DialogTitle>
                  </DialogHeader>
                  <div className="py-4">
                    <Input
                      placeholder="×©× ×”×§×˜×’×•×¨×™×”..."
                      value={newCategoryName}
                      onChange={(e) => setNewCategoryName(e.target.value)}
                      aria-invalid={!!formErrors.newCategoryName}
                      aria-describedby={formErrors.newCategoryName ? 'newCategoryName-error' : undefined}
                      className="dark:bg-gray-700 dark:text-slate-100 dark:border-gray-600"
                    />
                    {formErrors.newCategoryName && (
                      <p id="newCategoryName-error" className="text-sm text-destructive mt-1">
                        {formErrors.newCategoryName}
                      </p>
                    )}
                  </div>
                  <DialogFooter>
                    <Button
                      variant="ghost"
                      onClick={() => setIsCategoryDialogOpen(false)}
                      className="btn-ghost dark:text-slate-300"
                    >
                      ×‘×™×˜×•×œ
                    </Button>
                    <Button onClick={handleSaveNewCategory} className="btn-primary">
                      ×©×ž×•×¨ ×§×˜×’×•×¨×™×”
                    </Button>
                  </DialogFooter>
                </DialogContent>
              </Dialog>
            </div>
          );
        }
      ðŸ“„ MyLoansPage.jsx
        // client/src/pages/MyLoansPage.jsx
        
        import React, { useState, useEffect } from 'react';
        import api from '@/utils/api';
        import { Link } from 'react-router-dom';
        import { Button } from '@/components/ui/Button';
        // --- ðŸ‘‡ ×”×©×™× ×•×™ ×›××Ÿ: ×ž×™×™×‘××™× ××ª ×”×¨×›×™×‘ ×”×—×“×© ×©×™×¦×¨× ×• ðŸ‘‡ ---
        import LoanSummaryCard from '@/components/loans/LoanSummaryCard';
        
        const MyLoansPage = () => {
          const [loans, setLoans] = useState([]);
          const [loading, setLoading] = useState(true);
          const [error, setError] = useState(null);
        
          useEffect(() => {
            const fetchLoans = async () => {
              try {
                setLoading(true);
                const { data } = await api.get('/loans');
                setLoans(data);
              } catch (err) {
                setError('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×œ×•×•××•×ª.');
                console.error(err);
              } finally {
                setLoading(false);
              }
            };
            fetchLoans();
          }, []);
        
          if (loading) return <div className="text-center p-10">×˜×•×¢×Ÿ × ×ª×•× ×™×...</div>;
          if (error) return <div className="text-center p-10 text-red-500">{error}</div>;
        
          return (
            <div className="max-w-6xl mx-auto p-4 space-y-6">
              <div className="flex justify-between items-center">
                <h1 className="text-2xl font-bold">×”×”×œ×•×•××•×ª ×©×œ×™</h1>
                <Button asChild>
                  <Link to="/loans/new">×”×•×¡×£ ×”×œ×•×•××” ×—×“×©×”</Link>
                </Button>
              </div>
        
              {loans.length > 0 ? (
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                  {/* --- ðŸ‘‡ ×”×©×™× ×•×™ ×›××Ÿ: ×ž×©×ª×ž×©×™× ×‘×¨×›×™×‘ ×”×—×“×© ×‘×ž×§×•× ×œ×”×¦×™×’ ×¡×ª× ×˜×§×¡×˜ ðŸ‘‡ --- */}
                  {loans.map(loan => (
                    <LoanSummaryCard key={loan._id} loan={loan} />
                  ))}
                </div>
              ) : (
                <div className="text-center p-10 bg-gray-50 rounded-lg">
                  <p>×¢×“×™×™×Ÿ ×œ× ×”×•×¡×¤×ª ×”×œ×•×•××•×ª ×œ×ž×¢×§×‘.</p>
                </div>
              )}
            </div>
          );
        };
        
        export default MyLoansPage;
      ðŸ“„ NewLoanPage.jsx
        import React, { useState } from 'react';
        import { useNavigate } from 'react-router-dom';
        import api from '../utils/api';
        import toast from 'react-hot-toast';
        
        function NewLoanPage() {
          const navigate = useNavigate();
          const [formData, setFormData] = useState({
            name: '',
            principal: '',
            interestMargin: '', // ×©×•× ×” ×ž-annualRate
            termInMonths: '',
            startDate: new Date().toISOString().split('T')[0],
            repaymentType: '×©×¤×™×¦×¨',
          });
          const [isLoading, setIsLoading] = useState(false);
        
          const handleChange = (e) => {
            const { name, value } = e.target;
            setFormData(prev => ({ ...prev, [name]: value }));
          };
        
          const handleSubmit = async (e) => {
            e.preventDefault();
            setIsLoading(true);
            try {
              await api.post('/loans', {
                ...formData,
                principal: Number(formData.principal),
                interestMargin: Number(formData.interestMargin), // ×©×•× ×” ×ž-annualRate
                termInMonths: Number(formData.termInMonths),
              });
              toast.success('×”×”×œ×•×•××” × ×•×¦×¨×” ×‘×”×¦×œ×—×”!');
              navigate('/dashboard'); // ××• ×œ××Ÿ ×©×ª×¨×¦×” ×œ× ×•×•×˜ ××—×¨×™
            } catch (error) {
              const errorMsg = error.response?.data?.message || '×©×’×™××” ×‘×™×¦×™×¨×ª ×”×”×œ×•×•××”';
              toast.error(errorMsg);
            } finally {
              setIsLoading(false);
            }
          };
        
          return (
            <div className="max-w-2xl mx-auto p-6 bg-white shadow-md rounded-lg">
              <h1 className="text-2xl font-bold mb-6 text-center">×™×¦×™×¨×ª ×”×œ×•×•××” ×—×“×©×”</h1>
              <form onSubmit={handleSubmit} className="space-y-4">
                {/* ×©×“×•×ª ×©×, ×§×¨×Ÿ, ×ª×§×•×¤×” ×•×ª××¨×™×š × ×©××¨×™× ×–×”×™× */}
                <div>
                  <label htmlFor="name" className="block text-sm font-medium text-gray-700">×©× ×”×”×œ×•×•××”</label>
                  <input type="text" name="name" id="name" required value={formData.name} onChange={handleChange} className="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                </div>
                <div>
                  <label htmlFor="principal" className="block text-sm font-medium text-gray-700">×¡×›×•× ×”×§×¨×Ÿ (â‚ª)</label>
                  <input type="number" name="principal" id="principal" required value={formData.principal} onChange={handleChange} className="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                </div>
        
                {/* --- ×©×™× ×•×™ ×ž×¨×›×–×™ ×›××Ÿ --- */}
                <div>
                  <label htmlFor="interestMargin" className="block text-sm font-medium text-gray-700">×ž×¨×•×•×— ×ž×¨×™×‘×™×ª ×”×¤×¨×™×™× (%)</label>
                  <input type="number" step="0.01" name="interestMargin" id="interestMargin" required value={formData.interestMargin} onChange={handleChange} className="mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="×œ×“×•×’×ž×”: 1.5 ×¢×‘×•×¨ ×¤×¨×™×™× + 1.5%" />
                </div>
                {/* --- ×¡×•×£ ×©×™× ×•×™ --- */}
        
                <div>
                  <label htmlFor="termInMonths" className="block text-sm font-medium text-gray-700">×ª×§×•×¤×” (×—×•×“×©×™×)</label>
                  <input type="number" name="termInMonths" id="termInMonths" required value={formData.termInMonths} onChange={handleChange} className="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                </div>
                <div>
                  <label htmlFor="startDate" className="block text-sm font-medium text-gray-700">×ª××¨×™×š ×”×ª×—×œ×”</label>
                  <input type="date" name="startDate" id="startDate" required value={formData.startDate} onChange={handleChange} className="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                </div>
                <div>
                  <label htmlFor="repaymentType" className="block text-sm font-medium text-gray-700">×©×™×˜×ª ×”×—×–×¨</label>
                  <select name="repaymentType" id="repaymentType" value={formData.repaymentType} onChange={handleChange} className="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                    <option value="×©×¤×™×¦×¨">×©×¤×™×¦×¨</option>
                    <option value="×§×¨×Ÿ ×©×•×•×”">×§×¨×Ÿ ×©×•×•×”</option>
                  </select>
                </div>
                <button type="submit" disabled={isLoading} className="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50">
                  {isLoading ? '×™×•×¦×¨ ×”×œ×•×•××”...' : '×¦×•×¨ ×”×œ×•×•××”'}
                </button>
              </form>
            </div>
          );
        }
        
        export default NewLoanPage;
      ðŸ“„ NewProjectPage.jsx
        import React, { useState } from 'react';
        import { useNavigate } from 'react-router-dom';
        import useProjectsStore from '@/stores/projectsStore';
        import { Button } from '@/components/ui/Button';
        import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';
        import { Input } from '@/components/ui/Input';
        import { Label } from '@/components/ui/label';
        import { Textarea } from '@/components/ui/textarea';
        import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
        
        export default function NewProjectPage() {
          const navigate = useNavigate();
          const { createProject, loading } = useProjectsStore();
          const [projectType, setProjectType] = useState('goal');
          const [projectName, setProjectName] = useState('');
          const [description, setDescription] = useState('');
          const [targetAmount, setTargetAmount] = useState('');
          const [error, setError] = useState('');
        
          const handleSubmit = async (e) => {
            e.preventDefault();
            setError('');
        
            if (!projectName.trim()) {
              setError('×©× ×”×¤×¨×•×™×§×˜ ×”×•× ×©×“×” ×—×•×‘×”.');
              return;
            }
            if (projectType === 'goal' && (!targetAmount || Number(targetAmount) <= 0)) {
              setError('×¡×›×•× ×™×¢×“ ×—×™×™×‘ ×œ×”×™×•×ª ×ž×¡×¤×¨ ×—×™×•×‘×™.');
              return;
            }
        
            const payload = {
              projectName,
              description,
              projectType,
              targetAmount: projectType === 'goal' ? Number(targetAmount) : 0,
            };
        
            try {
              const newProject = await createProject(payload);
              navigate(`/projects/${newProject._id}`);
            } catch (err) {
              setError(err.message || '×©×’×™××” ×‘×™×¦×™×¨×ª ×”×¤×¨×•×™×§×˜.');
            }
          };
        
          return (
            <div className="max-w-2xl mx-auto p-4 sm:p-6 lg:p-8">
              <Card>
                <CardHeader>
                  <CardTitle>×™×¦×™×¨×ª ×¤×¨×•×™×§×˜ ×—×“×©</CardTitle>
                  <CardDescription>×‘×—×¨ ××ª ×¡×•×’ ×”×¤×¨×•×™×§×˜ ×•×ž×œ× ××ª ×”×¤×¨×˜×™×.</CardDescription>
                </CardHeader>
                <CardContent>
                  <form onSubmit={handleSubmit} className="space-y-6">
                    <div>
                      <Label htmlFor="projectType">×¡×•×’ ×”×¤×¨×•×™×§×˜</Label>
                      <Select value={projectType} onValueChange={setProjectType}>
                        <SelectTrigger id="projectType">
                          <SelectValue placeholder="×‘×—×¨ ×¡×•×’..." />
                        </SelectTrigger>
                        <SelectContent>
                          <SelectItem value="goal">×¤×¨×•×™×§×˜ ×™×¢×“ (×—×™×¡×›×•×Ÿ)</SelectItem>
                          <SelectItem value="task">×¤×¨×•×™×§×˜ ×ž×©×™×ž×•×ª</SelectItem>
                        </SelectContent>
                      </Select>
                    </div>
        
                    <div>
                      <Label htmlFor="projectName">×©× ×”×¤×¨×•×™×§×˜</Label>
                      <Input
                        id="projectName"
                        value={projectName}
                        onChange={(e) => setProjectName(e.target.value)}
                        placeholder="×œ×“×•×’×ž×”: ×©×™×¤×•×¥ ×”×ž×˜×‘×—, ×—×•×¤×©×” ×ž×©×¤×—×ª×™×ª"
                        required
                      />
                    </div>
        
                    <div>
                      <Label htmlFor="description">×ª×™××•×¨ (××•×¤×¦×™×•× ×œ×™)</Label>
                      <Textarea
                        id="description"
                        value={description}
                        onChange={(e) => setDescription(e.target.value)}
                        placeholder="×¤×¨×˜×™× × ×•×¡×¤×™× ×¢×œ ×”×¤×¨×•×™×§×˜..."
                      />
                    </div>
        
                    {projectType === 'goal' && (
                      <div>
                        <Label htmlFor="targetAmount">×¡×›×•× ×”×™×¢×“ (×‘×©"×—)</Label>
                        <Input
                          id="targetAmount"
                          type="number"
                          value={targetAmount}
                          onChange={(e) => setTargetAmount(e.target.value)}
                          placeholder="×œ×“×•×’×ž×”: 10000"
                          required
                        />
                      </div>
                    )}
        
                    {error && <p className="text-sm text-red-600">{error}</p>}
        
                    <div className="flex justify-end gap-4">
                      <Button type="button" variant="ghost" onClick={() => navigate('/projects')}>
                        ×‘×™×˜×•×œ
                      </Button>
                      <Button type="submit" disabled={loading}>
                        {loading ? '×™×•×¦×¨...' : '×¦×•×¨ ×¤×¨×•×™×§×˜'}
                      </Button>
                    </div>
                  </form>
                </CardContent>
              </Card>
            </div>
          );
        }
      ðŸ“„ NotFoundPage.jsx
        import { Link } from 'react-router-dom';
        import { Button } from '@/components/ui/Button';
        
        const NotFoundPage = () => {
          return (
            <div className="text-center flex flex-col items-center justify-center h-full">
              <h1 className="text-6xl font-bold text-amber-600">404</h1>
              <p className="text-2xl mt-4 mb-8">××•×¤×¡! ×”×¢×ž×•×“ ×©×—×™×¤×©×ª ×œ× × ×ž×¦×.</p>
              <Button asChild>
                <Link to="/">×—×–×•×¨ ×œ×“×£ ×”×‘×™×ª</Link>
              </Button>
            </div>
          );
        };
        
        export default NotFoundPage;
      ðŸ“„ ProjectPage.jsx
        import React, { useEffect, useState } from 'react';
        import { useParams, Link } from 'react-router-dom';
        import useProjectsStore from '@/stores/projectsStore';
        import { Button } from '@/components/ui/Button';
        import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';
        import { Input } from '@/components/ui/Input';
        import { Label } from '@/components/ui/label';
        import { Progress } from '@/components/ui/progress';
        import { Checkbox } from '@/components/ui/checkbox';
        import { Trash2, Edit } from 'lucide-react';
        
        // --- Goal Project Components ---
        const FundList = ({ funds }) => (
          <div className="space-y-3">
            {funds.map((fund, index) => (
              <div key={index} className="flex justify-between items-center bg-gray-50 p-3 rounded-md">
                <div>
                  <p className="font-medium">{fund.amount.toLocaleString()} â‚ª</p>
                  <p className="text-sm text-gray-500">{fund.destination || '×”×¤×§×“×” ×›×œ×œ×™×ª'}</p>
                </div>
                <p className="text-sm text-gray-500">{new Date(fund.date).toLocaleDateString('he-IL')}</p>
              </div>
            ))}
          </div>
        );
        
        const AddFundForm = ({ projectId }) => {
          const { addFund, loading } = useProjectsStore();
          const [amount, setAmount] = useState('');
          const [destination, setDestination] = useState('');
        
          const handleSubmit = (e) => {
            e.preventDefault();
            if (!amount || Number(amount) <= 0) return;
            addFund(projectId, { amount: Number(amount), destination });
            setAmount('');
            setDestination('');
          };
        
          return (
            <form onSubmit={handleSubmit} className="mt-6 p-4 border rounded-lg space-y-4">
              <h3 className="font-semibold">×”×•×¡×¤×ª ×”×¤×§×“×” ×—×“×©×”</h3>
              <div className="grid sm:grid-cols-2 gap-4">
                <div>
                  <Label htmlFor="amount">×¡×›×•×</Label>
                  <Input id="amount" type="number" value={amount} onChange={e => setAmount(e.target.value)} placeholder="0.00" required />
                </div>
                <div>
                  <Label htmlFor="destination">×ž×§×•×¨/×™×¢×“ (××•×¤×¦×™×•× ×œ×™)</Label>
                  <Input id="destination" value={destination} onChange={e => setDestination(e.target.value)} placeholder="×œ×“×•×’×ž×”: ×ž×©×›×•×¨×ª" />
                </div>
              </div>
              <Button type="submit" disabled={loading}>{loading ? '×ž×•×¡×™×£...' : '×”×•×¡×£'}</Button>
            </form>
          );
        };
        
        
        // --- Task Project Components ---
        const TaskList = ({ tasks, projectId }) => {
            const { toggleTask, deleteTask } = useProjectsStore();
            return (
              <div className="space-y-3">
                {tasks.map(task => (
                  <div key={task._id} className="flex items-center bg-gray-50 p-3 rounded-md">
                    <Checkbox
                      id={`task-${task._id}`}
                      checked={task.done}
                      onCheckedChange={() => toggleTask(projectId, task._id)}
                      className="ml-3"
                    />
                    <label htmlFor={`task-${task._id}`} className={`flex-grow ${task.done ? 'line-through text-gray-500' : ''}`}>
                      {task.name}
                    </label>
                    <span className={`font-semibold mx-4 ${task.done ? 'line-through text-gray-500' : ''}`}>{task.amount.toLocaleString()} â‚ª</span>
                    <Button variant="ghost" size="icon" onClick={() => deleteTask(projectId, task._id)}>
                        <Trash2 className="h-4 w-4 text-gray-500 hover:text-red-600"/>
                    </Button>
                  </div>
                ))}
              </div>
            );
          };
        
          const AddTaskForm = ({ projectId }) => {
            const { addTask, loading } = useProjectsStore();
            const [name, setName] = useState('');
            const [amount, setAmount] = useState('');
        
            const handleSubmit = (e) => {
              e.preventDefault();
              if (!name.trim() || !amount || Number(amount) < 0) return;
              addTask(projectId, { name, amount: Number(amount) });
              setName('');
              setAmount('');
            };
        
            return (
              <form onSubmit={handleSubmit} className="mt-6 p-4 border rounded-lg space-y-4">
                <h3 className="font-semibold">×”×•×¡×¤×ª ×ž×©×™×ž×” ×—×“×©×”</h3>
                <div className="grid sm:grid-cols-2 gap-4">
                  <div>
                    <Label htmlFor="task-name">×©× ×”×ž×©×™×ž×”</Label>
                    <Input id="task-name" value={name} onChange={e => setName(e.target.value)} placeholder="×œ×“×•×’×ž×”: ×§× ×™×™×ª ×¦×‘×¢" required />
                  </div>
                  <div>
                    <Label htmlFor="task-amount">×¢×œ×•×ª ×ž×©×•×¢×¨×ª (×‘×©"×—)</Label>
                    <Input id="task-amount" type="number" value={amount} onChange={e => setAmount(e.target.value)} placeholder="0.00" required />
                  </div>
                </div>
                <Button type="submit" disabled={loading}>{loading ? '×ž×•×¡×™×£...' : '×”×•×¡×£ ×ž×©×™×ž×”'}</Button>
              </form>
            );
          };
        
        // --- Main Page Component ---
        export default function ProjectPage() {
          const { id } = useParams();
          const { activeProject, fetchProject, loading, error } = useProjectsStore();
        
          useEffect(() => {
            fetchProject(id);
          }, [id, fetchProject]);
        
          if (loading && !activeProject) return <div className="text-center p-8">×˜×•×¢×Ÿ ×¤×¨×˜×™ ×¤×¨×•×™×§×˜...</div>;
          if (error) return <div className="text-center p-8 text-red-600">×©×’×™××”: {error.message}</div>;
          if (!activeProject) return <div className="text-center p-8">×œ× × ×ž×¦× ×¤×¨×•×™×§×˜. <Link to="/projects">×—×–×•×¨ ×œ×¨×©×™×ž×”</Link></div>;
        
          const { projectName, description, projectType, currentAmount, targetAmount } = activeProject;
          const percentage = targetAmount > 0 ? Math.round((currentAmount / targetAmount) * 100) : 0;
        
          return (
            <div className="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8">
              <Card>
                <CardHeader>
                  <div className="flex justify-between items-start">
                    <div>
                      <CardTitle className="text-2xl font-bold">{projectName}</CardTitle>
                      <CardDescription className="mt-2">{description}</CardDescription>
                    </div>
                    <Button variant="outline" size="sm"><Edit className="h-4 w-4 mr-2"/> ×¢×¨×•×š</Button>
                  </div>
                  <div className="pt-4">
                    <div className="flex justify-between items-baseline mb-1">
                      <span className="text-lg font-bold text-gray-800">{currentAmount.toLocaleString()} â‚ª</span>
                      <span className="text-sm text-gray-500">×ž×ª×•×š {targetAmount.toLocaleString()} â‚ª</span>
                    </div>
                    <Progress value={percentage} />
                    <p className="text-center text-lg font-bold mt-2 text-gray-800">{percentage}% ×”×•×©×œ×ž×•</p>
                  </div>
                </CardHeader>
                <CardContent>
                  {projectType === 'goal' && (
                    <>
                      <h2 className="text-xl font-semibold mb-4">×”×¤×§×“×•×ª</h2>
                      {activeProject.funds && activeProject.funds.length > 0 ? <FundList funds={activeProject.funds} /> : <p>×¢×“×™×™×Ÿ ×œ× ×‘×•×¦×¢×• ×”×¤×§×“×•×ª.</p>}
                      <AddFundForm projectId={id} />
                    </>
                  )}
                  {projectType === 'task' && (
                    <>
                      <h2 className="text-xl font-semibold mb-4">×ž×©×™×ž×•×ª</h2>
                      {activeProject.tasks && activeProject.tasks.length > 0 ? <TaskList tasks={activeProject.tasks} projectId={id}/> : <p>×¢×“×™×™×Ÿ ×œ× ×”×•×’×“×¨×• ×ž×©×™×ž×•×ª.</p>}
                      <AddTaskForm projectId={id} />
                    </>
                  )}
                </CardContent>
              </Card>
            </div>
          );
        }
      ðŸ“„ ProjectsPage.jsx
        import React, { useEffect } from 'react';
        import { Link, useNavigate } from 'react-router-dom';
        import useProjectsStore from '@/stores/projectsStore';
        import { Button } from '@/components/ui/Button';
        import { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from '@/components/ui/card';
        import { Progress } from '@/components/ui/progress'; // Assuming you have a Progress component
        import { PlusCircle } from 'lucide-react';
        
        // Helper component for a single project card
        const ProjectCard = ({ project }) => {
          const navigate = useNavigate();
          const { targetAmount, currentAmount, projectName, description, projectType, _id } = project;
        
          const percentage = targetAmount > 0 ? Math.round((currentAmount / targetAmount) * 100) : 0;
        
          return (
            <Card
              className="flex flex-col hover:shadow-lg transition-shadow cursor-pointer"
              onClick={() => navigate(`/projects/${_id}`)}
            >
              <CardHeader>
                <div className="flex justify-between items-start">
                  <CardTitle className="text-lg font-bold">{projectName}</CardTitle>
                  <span className={`text-xs font-semibold px-2 py-1 rounded-full ${projectType === 'goal' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'}`}>
                    {projectType === 'goal' ? '×™×¢×“' : '×ž×©×™×ž×•×ª'}
                  </span>
                </div>
                <CardDescription className="pt-1 h-10 overflow-hidden">{description || '××™×Ÿ ×ª×™××•×¨'}</CardDescription>
              </CardHeader>
              <CardContent className="flex-grow">
                <div>
                  <div className="flex justify-between items-baseline mb-1">
                    <span className="text-sm font-medium text-gray-700">
                      {currentAmount.toLocaleString()} â‚ª
                    </span>
                    <span className="text-xs text-gray-500">
                      ×ž×ª×•×š {targetAmount.toLocaleString()} â‚ª
                    </span>
                  </div>
                  <Progress value={percentage} className="w-full" />
                  <p className="text-center text-sm font-bold mt-2 text-gray-800">{percentage}%</p>
                </div>
              </CardContent>
              <CardFooter>
                <Button variant="link" className="w-full">
                  ×¦×¤×” ×‘×¤×¨×˜×™× â†
                </Button>
              </CardFooter>
            </Card>
          );
        };
        
        // Main page component
        export default function ProjectsPage() {
          const { projects, fetchProjects, loading, error } = useProjectsStore();
        
          useEffect(() => {
            fetchProjects();
          }, [fetchProjects]);
        
          if (loading) return <div className="text-center p-8">×˜×•×¢×Ÿ ×¤×¨×•×™×§×˜×™×...</div>;
          if (error) return <div className="text-center p-8 text-red-600">×©×’×™××”: {error.message}</div>;
        
          return (
            <div className="container mx-auto p-4 sm:p-6 lg:p-8">
              <header className="flex justify-between items-center mb-8">
                <h1 className="text-3xl md:text-4xl font-bold text-gray-900">×”×¤×¨×•×™×§×˜×™× ×©×œ×™</h1>
                <Button asChild>
                  <Link to="/projects/new">
                    <PlusCircle className="mr-2 h-4 w-4" />
                    ×¦×•×¨ ×¤×¨×•×™×§×˜ ×—×“×©
                  </Link>
                </Button>
              </header>
        
              {projects.length === 0 ? (
                <div className="text-center py-20 bg-gray-50 rounded-2xl">
                  <h2 className="text-xl font-semibold text-gray-700">×¢×“×™×™×Ÿ ××™×Ÿ ×œ×š ×¤×¨×•×™×§×˜×™×</h2>
                  <p className="text-gray-500 mt-2">×‘×•× × ×ª×—×™×œ ×•× ×™×¦×•×¨ ××ª ×”×¤×¨×•×™×§×˜ ×”×¨××©×•×Ÿ ×©×œ×š!</p>
                </div>
              ) : (
                <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
                  {projects.map(project => (
                    <ProjectCard key={project._id} project={project} />
                  ))}
                </div>
              )}
            </div>
          );
        }
      ðŸ“„ RegisterPage.jsx
        // client/src/pages/RegisterPage.jsx
        
        import { useState, useEffect } from "react";
        import { useNavigate, Link } from "react-router-dom";
        import axios from "axios";
        import { Button } from "@/components/ui/Button";
        
        export default function RegisterPage() {
          const navigate = useNavigate();
          const [form, setForm] = useState({
            name: "",
            email: "",
            password: "",
            confirmPassword: "",
          });
          const [error, setError] = useState("");
          const [loading, setLoading] = useState(false);
        
          // ×‘×¨×’×¢ ×©×”×¢×ž×•×“ ×¢×•×œ×” â€“ ×”×—×œ×¥ ××ª ×”-CSRF token ×•×”×©×¨×ª ×™×¦×™×‘ ××•×ª×• ×‘×¢×•×’×™×™×” XSRF-TOKEN
          useEffect(() => {
            axios
              .get("/csrf-token", { withCredentials: true }) // <-- ×”×ª×™×§×•×Ÿ ×›××Ÿ, ×œ×œ× /api
              .catch((err) => console.error("Can't fetch CSRF token:", err));
          }, []);
        
          const handleChange = (e) =>
            setForm((prev) => ({ ...prev, [e.target.name]: e.target.value }));
        
          const handleSubmit = async (e) => {
            e.preventDefault();
            setError("");
        
            if (form.password !== form.confirmPassword) {
              setError("×”×¡×™×¡×ž××•×ª ×œ× ×ª×•××ž×•×ª");
              return;
            }
        
            setLoading(true);
            try {
              await axios.post(
                "/api/auth/register",
                {
                  name: form.name,
                  email: form.email,
                  password: form.password,
                },
                {
                  withCredentials: true,              // ×©×•×œ×— ×¢×•×’×™×•×ª (×›×•×œ×œ XSRF-TOKEN)
                  headers: {
                    // axios ×™×™×§×¨× ××•×˜×•×ž×˜×™×ª ×œÖ¾X-XSRF-TOKEN ×ž×ª×•×š ×”×¢×•×’×™×™×”,
                    // ××‘×œ ×× ×”×¡×•×•×’ ×©×œ×š ×™×™×—×•×“×™ ××¤×©×¨ ×›××Ÿ ×œ×ž×¤×•×ª ×™×“× ×™×ª:
                    // "X-CSRF-Token": document.cookie
                    //   .split("; ")
                    //   .find((c) => c.startsWith("XSRF-TOKEN="))
                    //   ?.split("=")[1],
                  },
                }
              );
              navigate("/tzitzit");
            } catch (err) {
              setError(err.response?.data?.message || "×©×’×™××” ×‘×”×¨×©×ž×”, × ×¡×” ×©×•×‘");
            } finally {
              setLoading(false);
            }
          };
        
          return (
            <div className="min-h-[calc(100vh-4rem)] flex items-center justify-center bg-gray-50 p-4">
              <form
                onSubmit={handleSubmit}
                className="w-full max-w-md bg-white p-6 rounded-2xl shadow-md"
              >
                <h2 className="text-2xl font-bold mb-6 text-center">×”×¨×©×ž×”</h2>
        
                {error && (
                  <p className="text-center text-red-600 mb-4" role="alert">
                    {error}
                  </p>
                )}
        
                <label className="block mb-4">
                  <span className="text-sm font-medium">×©× ×ž×œ×</span>
                  <input
                    type="text"
                    name="name"
                    value={form.name}
                    onChange={handleChange}
                    required
                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring focus:ring-primary-200 focus:ring-opacity-50"
                  />
                </label>
        
                <label className="block mb-4">
                  <span className="text-sm font-medium">××™×ž×™×™×œ</span>
                  <input
                    type="email"
                    name="email"
                    value={form.email}
                    onChange={handleChange}
                    required
                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring focus:ring-primary-200 focus:ring-opacity-50"
                  />
                </label>
        
                <label className="block mb-4">
                  <span className="text-sm font-medium">×¡×™×¡×ž×”</span>
                  <input
                    type="password"
                    name="password"
                    value={form.password}
                    onChange={handleChange}
                    required
                    minLength={8}
                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring focus:ring-primary-200 focus:ring-opacity-50"
                  />
                </label>
        
                <label className="block mb-6">
                  <span className="text-sm font-medium">××™×ž×•×ª ×¡×™×¡×ž×”</span>
                  <input
                    type="password"
                    name="confirmPassword"
                    value={form.confirmPassword}
                    onChange={handleChange}
                    required
                    minLength={8}
                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring focus:ring-primary-200 focus:ring-opacity-50"
                  />
                </label>
        
                <Button type="submit" size="lg" className="w-full" disabled={loading}>
                  {loading ? "×©×•×œ×—..." : "×”×™×¨×©×"}
                </Button>
        
                <p className="text-center mt-4 text-sm">
                  ×›×‘×¨ ×¨×©×•×?{" "}
                  <Link to="/login" className="text-primary hover:underline">
                    ×”×ª×—×‘×¨ ×›××Ÿ
                  </Link>
                </p>
              </form>
            </div>
          );
        }
      ðŸ“„ Transactions_tab.jsx
        import React, { useState, useEffect, useMemo, useRef } from 'react';
        import api from '@/utils/api';
        import * as XLSX from 'xlsx';
        import { format, startOfMonth, endOfMonth, isWithinInterval } from 'date-fns';
        import { he } from 'date-fns/locale';
        
        // --- ×™×™×‘×•× ×¨×›×™×‘×™ UI ---
        import { Button } from "@/components/ui/Button";
        import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
        import { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle, DialogDescription } from "@/components/ui/dialog";
        import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
        import { Input } from "@/components/ui/Input";
        import { Badge } from "@/components/ui/badge"; // ×”× ×—×” ×©×™×© Badge, ×× ××™×Ÿ ××¤×©×¨ ×œ×”×©×ª×ž×© ×‘-div ×ž×¢×•×¦×‘
        import { Separator } from "@/components/ui/separator"; // ××•×¤×¦×™×•× ×œ×™
        import {
            PlusCircle, UploadCloud, CheckCircle, AlertTriangle, LoaderCircle,
            ArrowUpRight, ArrowDownLeft, Wallet, ShoppingCart, Utensils,
            Car, Home, Receipt, TrendingUp, TrendingDown, FileSpreadsheet
        } from 'lucide-react';
        
        // --- ×”×’×“×¨×•×ª ×§×‘×•×¢×•×ª ---
        const CREATE_NEW_CATEGORY_VALUE = "CREATE_NEW";
        
        // --- ×¤×•× ×§×¦×™×™×ª ×¢×–×¨ ×œ×§×‘×œ×ª ××™×™×§×•×Ÿ ×•×¦×‘×¢ ×œ×¤×™ ×§×˜×’×•×¨×™×” ---
        const getCategoryStyle = (categoryName) => {
            const name = categoryName?.toLowerCase() || '';
            if (name.includes('×¡×•×¤×¨') || name.includes('×ž×–×•×Ÿ')) return { icon: <ShoppingCart className="h-5 w-5" />, bg: 'bg-orange-100', text: 'text-orange-600' };
            if (name.includes('×ž×¡×¢×“×”') || name.includes('××•×›×œ')) return { icon: <Utensils className="h-5 w-5" />, bg: 'bg-red-100', text: 'text-red-600' };
            if (name.includes('×¨×›×‘') || name.includes('×“×œ×§')) return { icon: <Car className="h-5 w-5" />, bg: 'bg-blue-100', text: 'text-blue-600' };
            if (name.includes('×‘×™×ª') || name.includes('×©×›×™×¨×•×ª')) return { icon: <Home className="h-5 w-5" />, bg: 'bg-indigo-100', text: 'text-indigo-600' };
            return { icon: <Receipt className="h-5 w-5" />, bg: 'bg-gray-100', text: 'text-gray-600' };
        };
        
        // --- ×¨×›×™×‘ ×›×¨×˜×™×¡ ×¢×¡×§×” ×ž×¢×•×¦×‘ ---
        const TransactionCard = ({ transaction, onClick }) => {
            const isExpense = transaction.type === '×”×•×¦××”';
            const amountClass = isExpense ? 'text-rose-600' : 'text-emerald-600';
            const sign = isExpense ? '-' : '+';
            const { icon, bg, text } = getCategoryStyle(transaction.category);
        
            return (
                <div
                    onClick={onClick}
                    className="group relative flex items-center justify-between p-4 mb-3 bg-white border border-gray-100 rounded-2xl shadow-sm hover:shadow-md hover:border-gray-200 transition-all duration-300 cursor-pointer"
                >
                    <div className="flex items-center gap-4">
                        <div className={`flex items-center justify-center h-12 w-12 rounded-2xl ${bg} ${text} group-hover:scale-110 transition-transform duration-300`}>
                            {icon}
                        </div>
                        <div>
                            <h4 className="font-bold text-gray-800 text-base">{transaction.description}</h4>
                            <div className="flex items-center gap-2 mt-1">
                                <span className="text-xs font-medium px-2 py-0.5 rounded-full bg-gray-50 text-gray-500 border border-gray-100">
                                    {transaction.category}
                                </span>
                                <span className="text-xs text-gray-400">
                                    {format(new Date(transaction.date), 'dd/MM')}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div className="text-left">
                        <span className={`font-mono font-bold text-lg tracking-tight ${amountClass}`}>
                            {sign}{transaction.amount.toLocaleString(undefined, { minimumFractionDigits: 2 })} â‚ª
                        </span>
                    </div>
                </div>
            );
        };
        
        // --- ×¨×›×™×‘ ×¡×™×›×•× ×—×•×“×©×™ ×ž×•×“×¨× ×™ ---
        const MonthlySummaryCard = ({ transactions }) => {
            const summary = useMemo(() => {
                const now = new Date();
                const start = startOfMonth(now);
                const end = endOfMonth(now);
                const relevantTransactions = transactions.filter(t => isWithinInterval(new Date(t.date), { start, end }));
        
                return relevantTransactions.reduce((acc, curr) => {
                    if (curr.type === '×”×›× ×¡×”') acc.income += curr.amount;
                    else acc.expense += curr.amount;
                    return acc;
                }, { income: 0, expense: 0 });
            }, [transactions]);
        
            const net = summary.income - summary.expense;
            const savingsRate = summary.income > 0 ? ((net / summary.income) * 100).toFixed(1) : 0;
        
            return (
                <div className="grid grid-cols-1 gap-4">
                    {/* ×›×¨×˜×™×¡ ×ž××–×Ÿ ×¨××©×™ */}
                    <Card className="bg-gradient-to-br from-indigo-600 to-violet-700 text-white border-none shadow-xl rounded-3xl overflow-hidden relative">
                        <div className="absolute top-0 left-0 w-full h-full bg-white opacity-5 mix-blend-overlay pointer-events-none"></div>
                        <CardContent className="p-6 relative z-10">
                            <div className="flex justify-between items-start mb-4">
                                <div>
                                    <p className="text-indigo-100 text-sm font-medium">×ž××–×Ÿ × ×•×›×—×™ ({format(new Date(), 'MMMM', { locale: he })})</p>
                                    <h2 className="text-4xl font-extrabold mt-1 tracking-tight">â‚ª{net.toLocaleString()}</h2>
                                </div>
                                <div className="bg-white/20 p-2 rounded-xl backdrop-blur-sm">
                                    <Wallet className="h-6 w-6 text-white" />
                                </div>
                            </div>
                            {net > 0 && (
                                <div className="inline-flex items-center gap-1 bg-green-400/20 px-2 py-1 rounded-lg text-xs font-medium text-green-100 border border-green-400/30">
                                    <TrendingUp className="h-3 w-3" />
                                    ×©×™×¢×•×¨ ×—×™×¡×›×•×Ÿ: {savingsRate}%
                                </div>
                            )}
                        </CardContent>
                    </Card>
        
                    {/* ×¤×™×¨×•×˜ ×”×›× ×¡×•×ª/×”×•×¦××•×ª */}
                    <div className="grid grid-cols-2 gap-4">
                        <Card className="border-none shadow-md bg-emerald-50/50 rounded-2xl">
                            <CardContent className="p-4">
                                <div className="flex items-center gap-2 mb-2 text-emerald-600">
                                    <div className="p-1.5 bg-emerald-100 rounded-lg"><ArrowUpRight className="h-4 w-4" /></div>
                                    <span className="text-sm font-semibold">×”×›× ×¡×•×ª</span>
                                </div>
                                <p className="text-xl font-bold text-emerald-700">â‚ª{summary.income.toLocaleString()}</p>
                            </CardContent>
                        </Card>
                        <Card className="border-none shadow-md bg-rose-50/50 rounded-2xl">
                            <CardContent className="p-4">
                                <div className="flex items-center gap-2 mb-2 text-rose-600">
                                    <div className="p-1.5 bg-rose-100 rounded-lg"><ArrowDownLeft className="h-4 w-4" /></div>
                                    <span className="text-sm font-semibold">×”×•×¦××•×ª</span>
                                </div>
                                <p className="text-xl font-bold text-rose-700">â‚ª{summary.expense.toLocaleString()}</p>
                            </CardContent>
                        </Card>
                    </div>
                </div>
            );
        };
        
        // --- ×¨×›×™×‘ ×¢×–×¨ ×œ×—×œ×•×Ÿ ×¤×™×¨×•×˜ ×¢×¡×§ ---
        const MerchantDetailDialog = ({ isOpen, onClose, transactions, merchantName }) => {
            const details = useMemo(() => {
                if (!merchantName) return { transactions: [], total: 0 };
                const merchantTransactions = transactions.filter(t => t.description === merchantName);
                const total = merchantTransactions.reduce((sum, t) => sum + t.amount, 0);
                return { transactions: merchantTransactions.sort((a,b) => new Date(b.date) - new Date(a.date)), total };
            }, [transactions, merchantName]);
        
            return (
                <Dialog open={isOpen} onOpenChange={onClose}>
                    <DialogContent className="max-w-xl rounded-3xl p-0 overflow-hidden">
                        <div className="bg-slate-900 p-6 text-white">
                            <DialogHeader>
                                <DialogTitle className="text-2xl font-bold">{merchantName}</DialogTitle>
                                <DialogDescription className="text-slate-300">
                                   ×”×™×¡×˜×•×¨×™×™×ª ×¨×›×™×©×•×ª ×•×¤×¢×™×œ×•×ª
                                </DialogDescription>
                            </DialogHeader>
                            <div className="mt-4 flex items-baseline gap-2">
                                <span className="text-3xl font-mono font-bold text-rose-400">â‚ª{details.total.toLocaleString()}</span>
                                <span className="text-sm text-slate-400">×¡×”"×› ×ž×¦×˜×‘×¨</span>
                            </div>
                        </div>
        
                        <div className="p-6 max-h-[50vh] overflow-y-auto bg-gray-50">
                            <div className="space-y-3">
                                {details.transactions.map(trx => (
                                    <div key={trx._id} className="flex justify-between items-center p-3 bg-white rounded-xl shadow-sm border border-gray-100">
                                        <div>
                                            <p className="font-semibold text-gray-800">{format(new Date(trx.date), 'dd MMMM yyyy', { locale: he })}</p>
                                            <p className="text-xs text-gray-500 mt-0.5">{trx.category}</p>
                                        </div>
                                        <p className="font-mono font-bold text-rose-500">â‚ª{trx.amount.toLocaleString()}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                        <DialogFooter className="p-4 bg-white border-t">
                            <Button onClick={onClose} variant="outline" className="w-full rounded-xl">×¡×’×•×¨</Button>
                        </DialogFooter>
                    </DialogContent>
                </Dialog>
            );
        };
        
        
        // --- ×”×“×£ ×”×¨××©×™ ---
        export default function FinanceDashboardPage() {
            // ... State (×–×”×” ×œ×—×œ×•×˜×™×Ÿ ×œ×§×•×“ ×”×ž×§×•×¨×™) ...
            const [transactions, setTransactions] = useState([]);
            const [loading, setLoading] = useState(true);
            const [form, setForm] = useState({ description: '', amount: '', date: new Date().toISOString().slice(0, 10), type: '×”×•×¦××”', category: '', account: 'checking' });
            const [categories, setCategories] = useState([]);
            const [isCategoryDialogOpen, setIsCategoryDialogOpen] = useState(false);
            const [newCategoryName, setNewCategoryName] = useState('');
        
            const [selectedMerchant, setSelectedMerchant] = useState(null);
            const [isMerchantDetailOpen, setIsMerchantDetailOpen] = useState(false);
        
            const [importState, setImportState] = useState('idle');
            const [importerType, setImporterType] = useState('');
            const [parsedTransactions, setParsedTransactions] = useState([]);
            const [unseenMerchants, setUnseenMerchants] = useState([]);
            const [mappings, setMappings] = useState({});
            const [importMessage, setImportMessage] = useState('');
            const [currentMerchantForNewCategory, setCurrentMerchantForNewCategory] = useState(null);
            const fileInputRef = useRef(null);
        
            // ... (×›×œ ×¤×•× ×§×¦×™×•×ª ×”×œ×•×’×™×§×” × ×©××¨×• ×–×”×•×ª: fetchTransactions, analyzeFile ×•×›×•') ...
            const fetchTransactions = async () => {
                setLoading(true);
                try {
                    const response = await api.get('/transactions');
                    setTransactions(response.data);
                } catch (err) {
                    console.error("Failed to fetch transactions", err);
                } finally {
                    setLoading(false);
                }
            };
        
            const fetchCategories = async () => {
                try {
                    const res = await api.get('/categories');
                    setCategories(res.data);
                } catch (err) {
                    console.error("Could not fetch categories", err);
                }
            };
        
            useEffect(() => {
                fetchTransactions();
                fetchCategories();
            }, []);
        
            const handleTransactionClick = (merchantName) => {
                setSelectedMerchant(merchantName);
                setIsMerchantDetailOpen(true);
            };
        
            const handleFormChange = (name, value) => setForm(prev => ({ ...prev, [name]: value }));
        
            const handleCategoryChange = (value) => {
                if (value === CREATE_NEW_CATEGORY_VALUE) setIsCategoryDialogOpen(true);
                else setForm(prev => ({ ...prev, category: value }));
            };
        
            const handleSaveNewCategory = async (contextMerchant = null) => {
                if (!newCategoryName.trim()) return;
                try {
                    const { data: newCategory } = await api.post('/categories', { name: newCategoryName.trim(), type: '×”×•×¦××”' });
                    const updatedCategories = [...categories, newCategory].sort((a, b) => a.name.localeCompare(b.name));
                    setCategories(updatedCategories);
        
                    if (contextMerchant) {
                        handleMappingChange(contextMerchant, 'category', newCategory._id);
                    } else {
                        setForm(prev => ({ ...prev, category: newCategory._id }));
                    }
        
                    setIsCategoryDialogOpen(false);
                    setNewCategoryName('');
                    setCurrentMerchantForNewCategory(null);
                } catch (err) {
                    alert(`×©×’×™××” ×‘×™×¦×™×¨×ª ×§×˜×’×•×¨×™×”: ${err.response?.data?.message || err.message}`);
                }
            };
        
            const handleFormSubmit = async (e) => {
                e.preventDefault();
                if (!form.category) { alert("× × ×œ×‘×—×•×¨ ×§×˜×’×•×¨×™×”."); return; }
                try {
                    const categoryName = categories.find(c => c._id === form.category)?.name || '×›×œ×œ×™';
                    const payload = { ...form, category: categoryName };
                    await api.post('/transactions', payload);
                    fetchTransactions();
                    setForm({ description: '', amount: '', date: new Date().toISOString().slice(0, 10), type: '×”×•×¦××”', category: '', account: 'checking' });
                } catch (error) {
                    alert('×©×’×™××” ×‘×”×•×¡×¤×ª ×”×¢×¡×§×”');
                }
            };
        
            const resetImportProcess = () => {
                setImportState('idle');
                setImporterType('');
                setParsedTransactions([]);
                setUnseenMerchants([]);
                setMappings({});
                setImportMessage('');
                if (fileInputRef.current) fileInputRef.current.value = '';
            };
        
            const handleImportButtonClick = (type) => {
                resetImportProcess();
                setImporterType(type);
                fileInputRef.current?.click();
            };
        
            const handleFileSelected = (event) => {
                const file = event.target.files?.[0];
                if (file) analyzeFile(file, importerType);
            };
        
            const analyzeFile = (file, type) => {
                setImportState('processing');
                setImportMessage('×§×•×¨× ×•×ž× ×ª×— ××ª ×§×•×‘×¥ ×”××§×¡×œ...');
                const reader = new FileReader();
                reader.onload = async (e) => {
                    try {
                        const data = new Uint8Array(e.target.result);
                        const workbook = XLSX.read(data, { type: 'array', cellDates: true });
                        const sheet = workbook.Sheets[workbook.SheetNames[0]];
                        const rawData = XLSX.utils.sheet_to_json(sheet, { header: 1, defval: null });
        
                        const { data: response } = await api.post('/import/upload', { data: rawData, fileType: type });
                        setParsedTransactions(response.transactions);
        
                        if (response.unseenMerchants && response.unseenMerchants.length > 0) {
                            setUnseenMerchants(response.unseenMerchants);
                            const initialMappings = {};
                            response.unseenMerchants.forEach(name => {
                                initialMappings[name] = { newName: name, category: '' };
                            });
                            setMappings(initialMappings);
                            setImportState('mapping');
                        } else {
                            setImportState('confirming');
                        }
                    } catch (error) {
                        setImportMessage(error.response?.data?.message || error.message || '×©×’×™××” ×‘×§×¨×™××ª ×”×§×•×‘×¥.');
                        setImportState('error');
                    }
                };
                reader.readAsArrayBuffer(file);
            };
        
            const handleMappingChange = (originalName, field, value) => {
                if (field === 'category' && value === CREATE_NEW_CATEGORY_VALUE) {
                    setCurrentMerchantForNewCategory(originalName);
                    setIsCategoryDialogOpen(true);
                } else {
                    setMappings(prev => ({ ...prev, [originalName]: { ...prev[originalName], [field]: value } }));
                }
            };
        
            const handleConfirmImport = async () => {
                setImportState('processing');
                setImportMessage('×ž×¢×‘×“ ×¢×¡×§××•×ª ×•×©×•×ž×¨ ×‘×ž×¡×“ ×”× ×ª×•× ×™×...');
        
                const newMappings = Object.entries(mappings)
                    .map(([originalName, values]) => ({
                        originalName,
                        newName: values.newName.trim() || originalName,
                        category: values.category || null,
                    }))
                    .filter(m => m.newName !== m.originalName || m.category);
        
                const finalTransactions = parsedTransactions.map(trx => {
                    const userMapping = mappings[trx.description];
                    if (userMapping) {
                        const newDescription = userMapping.newName.trim() || trx.description;
                        const newCategory = categories.find(c => c._id === userMapping.category)?.name;
                        return {
                            ...trx,
                            description: newDescription,
                            ...(newCategory && { category: newCategory }),
                        };
                    }
                    return trx;
                });
        
                try {
                    const { data: response } = await api.post('/import/process-transactions', {
                        transactions: finalTransactions,
                        newMappings,
                    });
                    setImportMessage(response.message);
                    setImportState('finished');
                    fetchTransactions();
                } catch (error) {
                    setImportMessage(error.response?.data?.message || '×©×’×™××” ×§×¨×™×˜×™×ª ×‘×¢×™×‘×•×“ ×”×§×•×‘×¥.');
                    setImportState('error');
                }
            };
        
            const groupedTransactions = useMemo(() => {
                const groups = {};
                transactions.forEach(t => {
                    const month = format(new Date(t.date), 'LLLL yyyy', { locale: he });
                    if (!groups[month]) groups[month] = [];
                    groups[month].push(t);
                });
                return groups;
            }, [transactions]);
        
            return (
                <div className="min-h-screen bg-gray-50/50 p-4 sm:p-8 font-sans text-slate-900">
                    <div className="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
        
                        {/* ×¦×“ ×™×ž×™×Ÿ - ×¡×™×›×•× ×—×•×“×©×™ ×•×¤×¢×•×œ×•×ª ×ž×”×™×¨×•×ª (×‘×ž×•×‘×™×™×œ ×–×” ×™×”×™×” ×œ×ž×¢×œ×”) */}
                        <aside className="lg:col-span-4 space-y-6 order-1 lg:order-1">
                            <MonthlySummaryCard transactions={transactions} />
        
                            {/* ×˜×•×¤×¡ ×”×•×¡×¤×” ×ž×”×™×¨×” - ×ž×¢×•×¦×‘ ×›×›×¨×˜×™×¡ × ×§×™ */}
                            <Card className="border-none shadow-lg bg-white rounded-3xl overflow-hidden">
                                <CardHeader className="bg-slate-900 text-white p-6">
                                    <CardTitle className="flex items-center gap-2 text-lg">
                                        <PlusCircle className="h-5 w-5 text-indigo-400" />
                                        ×¢×¡×§×” ×—×“×©×”
                                    </CardTitle>
                                </CardHeader>
                                <CardContent className="p-6">
                                    <form onSubmit={handleFormSubmit} className="space-y-4">
                                        <div>
                                            <Input
                                                className="h-12 rounded-xl bg-gray-50 border-gray-200 focus:bg-white transition-all"
                                                type="text"
                                                name="description"
                                                placeholder="×ž×” ×§× ×™× ×•?"
                                                value={form.description}
                                                onChange={(e) => handleFormChange('description', e.target.value)}
                                                required
                                            />
                                        </div>
                                        <div className="grid grid-cols-2 gap-3">
                                            <Input
                                                className="h-12 rounded-xl bg-gray-50 border-gray-200"
                                                type="number"
                                                name="amount"
                                                placeholder="0.00"
                                                value={form.amount}
                                                onChange={(e) => handleFormChange('amount', e.target.value)}
                                                required
                                            />
                                            <Input
                                                className="h-12 rounded-xl bg-gray-50 border-gray-200"
                                                type="date"
                                                name="date"
                                                value={form.date}
                                                onChange={(e) => handleFormChange('date', e.target.value)}
                                                required
                                            />
                                        </div>
                                        <Select value={form.category} onValueChange={handleCategoryChange}>
                                            <SelectTrigger className="h-12 rounded-xl bg-gray-50 border-gray-200"><SelectValue placeholder="×§×˜×’×•×¨×™×”" /></SelectTrigger>
                                            <SelectContent>
                                                {categories.filter(c => c.type === form.type || c.type === '×›×œ×œ×™').map(cat => (<SelectItem key={cat._id} value={cat._id}>{cat.name}</SelectItem>))}
                                                <SelectItem value={CREATE_NEW_CATEGORY_VALUE} className="text-indigo-600 font-medium">âœ¨ ×§×˜×’×•×¨×™×” ×—×“×©×”</SelectItem>
                                            </SelectContent>
                                        </Select>
        
                                        <div className="grid grid-cols-2 gap-3">
                                            <Select value={form.type} onValueChange={(v) => handleFormChange('type', v)}>
                                                <SelectTrigger className="h-11 rounded-xl"><SelectValue/></SelectTrigger>
                                                <SelectContent><SelectItem value="×”×•×¦××”">×”×•×¦××” ðŸ’¸</SelectItem><SelectItem value="×”×›× ×¡×”">×”×›× ×¡×” ðŸ’°</SelectItem></SelectContent>
                                            </Select>
                                            <Select value={form.account} onValueChange={(v) => handleFormChange('account', v)}>
                                                <SelectTrigger className="h-11 rounded-xl"><SelectValue/></SelectTrigger>
                                                <SelectContent><SelectItem value="checking">×¢×•"×©</SelectItem><SelectItem value="cash">×ž×–×•×ž×Ÿ</SelectItem><SelectItem value="deposits">×¤×§×“×•× ×•×ª</SelectItem><SelectItem value="stocks">×”×©×§×¢×•×ª</SelectItem></SelectContent>
                                            </Select>
                                        </div>
        
                                        <Button type="submit" className="w-full h-12 rounded-xl bg-slate-900 hover:bg-slate-800 text-white shadow-lg shadow-slate-900/20 transition-all text-base font-medium">
                                            ×©×ž×•×¨ ×¢×¡×§×”
                                        </Button>
                                    </form>
                                </CardContent>
                            </Card>
        
                            {/* ×™×™×‘×•× - ×›×¨×˜×™×¡ ×ž×™× ×™×ž×œ×™×¡×˜×™ */}
                            <Card className="border-dashed border-2 border-gray-200 bg-transparent shadow-none rounded-2xl">
                                <CardContent className="p-6 flex flex-col items-center justify-center gap-3">
                                    <div className="p-3 bg-white rounded-full shadow-sm">
                                        <FileSpreadsheet className="h-6 w-6 text-gray-400" />
                                    </div>
                                    <h3 className="font-medium text-gray-600">×™×™×‘×•× ×ž××§×¡×œ</h3>
                                    <div className="flex gap-2 w-full">
                                        <Button variant="outline" className="flex-1 rounded-xl bg-white hover:bg-gray-50" onClick={() => handleImportButtonClick('max')}>Max</Button>
                                        <Button variant="outline" className="flex-1 rounded-xl bg-white hover:bg-gray-50" onClick={() => handleImportButtonClick('cal')}>Cal</Button>
                                    </div>
                                    <input type="file" ref={fileInputRef} onChange={handleFileSelected} accept=".xlsx, .xls, .csv" className="hidden" />
                                </CardContent>
                            </Card>
                        </aside>
        
                        {/* ×¦×“ ×©×ž××œ - ×¨×©×™×ž×ª ×”×¢×¡×§××•×ª (×”×ž×¨×›×–) */}
                        <main className="lg:col-span-8 order-2 lg:order-2">
                            <div className="flex items-center justify-between mb-6">
                                <h1 className="text-3xl font-extrabold text-slate-900 tracking-tight">×ª× ×•×¢×•×ª ××—×¨×•× ×•×ª</h1>
                                <div className="text-sm text-gray-500 font-medium bg-white px-3 py-1 rounded-full shadow-sm border">
                                    ×¡×”"×› {transactions.length} ×©×•×¨×•×ª
                                </div>
                            </div>
        
                            {loading ? (
                                <div className="flex flex-col items-center justify-center h-64 text-gray-400">
                                    <LoaderCircle className="h-10 w-10 animate-spin mb-4" />
                                    <p>×˜×•×¢×Ÿ × ×ª×•× ×™×...</p>
                                </div>
                            ) : (
                                <div className="space-y-8">
                                    {Object.entries(groupedTransactions).map(([month, trans]) => (
                                        <section key={month} className="animate-in fade-in slide-in-from-bottom-4 duration-500">
                                            <div className="sticky top-0 z-10 bg-gray-50/95 backdrop-blur py-3 mb-2 flex items-center gap-2">
                                                <div className="h-2 w-2 rounded-full bg-indigo-500"></div>
                                                <h3 className="font-bold text-gray-600 text-lg capitalize">{month}</h3>
                                            </div>
                                            <div className="grid gap-0">
                                                {trans.map(t => <TransactionCard key={t._id} transaction={t} onClick={() => handleTransactionClick(t.description)} />)}
                                            </div>
                                        </section>
                                    ))}
                                    {transactions.length === 0 && (
                                        <div className="text-center py-20 bg-white rounded-3xl border border-dashed border-gray-200">
                                            <div className="inline-block p-4 bg-gray-50 rounded-full mb-4">
                                                <Receipt className="h-8 w-8 text-gray-300" />
                                            </div>
                                            <h3 className="text-xl font-bold text-gray-900">××™×Ÿ ×¢×¡×§××•×ª ×¢×“×™×™×Ÿ</h3>
                                            <p className="text-gray-500 mt-2">×”×ª×—×œ ×œ×”×•×¡×™×£ ×™×“× ×™×ª ××• ×™×™×‘× ×§×•×‘×¥ ××§×¡×œ.</p>
                                        </div>
                                    )}
                                </div>
                            )}
                        </main>
                    </div>
        
                    <MerchantDetailDialog
                        isOpen={isMerchantDetailOpen}
                        onClose={() => setIsMerchantDetailOpen(false)}
                        transactions={transactions}
                        merchantName={selectedMerchant}
                    />
        
                    <Dialog open={isCategoryDialogOpen} onOpenChange={setIsCategoryDialogOpen}>
                        <DialogContent className="rounded-2xl">
                            <DialogHeader>
                                <DialogTitle>×”×•×¡×¤×ª ×§×˜×’×•×¨×™×” ×—×“×©×”</DialogTitle>
                                <DialogDescription>
                                    ×”×–×Ÿ ××ª ×©× ×”×§×˜×’×•×¨×™×” ×”×—×“×©×” ×©×‘×¨×¦×•× ×š ×œ×™×¦×•×¨ ×•×œ×—×¥ ×¢×œ ×©×ž×•×¨.
                                </DialogDescription>
                            </DialogHeader>
                            <div className="py-4"><Input className="rounded-xl h-12" placeholder="×©× ×”×§×˜×’×•×¨×™×”..." value={newCategoryName} onChange={(e) => setNewCategoryName(e.target.value)} /></div>
                            <DialogFooter>
                                <Button type="button" variant="ghost" className="rounded-xl" onClick={() => setIsCategoryDialogOpen(false)}>×‘×™×˜×•×œ</Button>
                                <Button type="button" className="rounded-xl bg-indigo-600 hover:bg-indigo-700" onClick={() => handleSaveNewCategory(currentMerchantForNewCategory)}>×©×ž×•×¨ ×§×˜×’×•×¨×™×”</Button>
                            </DialogFooter>
                        </DialogContent>
                    </Dialog>
        
                    <Dialog open={importState !== 'idle'} onOpenChange={resetImportProcess}>
                        <DialogContent className="max-w-3xl rounded-2xl overflow-hidden">
                            {/* ... (×ª×•×›×Ÿ ×”×“×™××œ×•×’ ×©×œ ×”×™×™×‘×•× × ×©××¨ ×–×”×” ×œ×•×’×™×ª, ××¤×©×¨ ×œ×¢×¦×‘ ×’× ××•×ª×• ×× ×ª×¨×¦×”) ... */}
                            {importState === 'mapping' && (
                                <div>
                                    <DialogHeader><DialogTitle>×ž×™×¤×•×™ ×¡×¤×§×™× ×—×“×©×™×</DialogTitle><DialogDescription>× ×ž×¦××• {unseenMerchants.length} ×¡×¤×§×™× ×©×“×•×¨×©×™× ×ž×™×¤×•×™.</DialogDescription></DialogHeader>
                                    <div className="space-y-3 max-h-[50vh] overflow-y-auto my-6 pr-2">
                                        {unseenMerchants.map(name => (
                                            <div key={name} className="grid grid-cols-1 md:grid-cols-3 gap-4 items-center p-3 rounded-xl bg-gray-50 border border-gray-100">
                                                <span className="truncate font-medium text-sm" title={name}>{name}</span>
                                                <Input className="h-10 rounded-lg bg-white" placeholder="×©× × ×§×™" value={mappings[name]?.newName || ''} onChange={(e) => handleMappingChange(name, 'newName', e.target.value)} />
                                                <Select value={mappings[name]?.category || ''} onValueChange={(v) => handleMappingChange(name, 'category', v)}>
                                                    <SelectTrigger className="h-10 rounded-lg bg-white"><SelectValue placeholder="×‘×—×¨ ×§×˜×’×•×¨×™×”" /></SelectTrigger>
                                                    <SelectContent>
                                                        {categories.map(cat => <SelectItem key={cat._id} value={cat._id}>{cat.name}</SelectItem>)}
                                                        <SelectItem value={CREATE_NEW_CATEGORY_VALUE}>--- ×¦×•×¨ ×§×˜×’×•×¨×™×” ×—×“×©×” ---</SelectItem>
                                                    </SelectContent>
                                                </Select>
                                            </div>
                                        ))}
                                    </div>
                                    <DialogFooter>
                                        <Button type="button" variant="ghost" onClick={resetImportProcess}>×‘×™×˜×•×œ</Button>
                                        <Button type="button" onClick={handleConfirmImport}>×”×ž×©×š ×•×™×™×‘×</Button>
                                    </DialogFooter>
                                </div>
                            )}
                            {/* ×©××¨ ×”×ž×¦×‘×™× (confirming, processing, finished) ×™×›×•×œ×™× ×œ×”×™×©××¨ ×–×”×™× ××• ×œ×¢×‘×•×¨ ×¢×™×¦×•×‘ ×“×•×ž×” ×¢× ×¤×™× ×•×ª ×¢×’×•×œ×•×ª */}
                            {(importState === 'confirming' || importState === 'processing' || importState === 'finished' || importState === 'error') && (
                                <div className="p-6">
                                     {/* ×”×©××¨×ª×™ ××ª ×”×œ×•×’×™×§×” ×”×ž×§×•×¨×™×ª ×›××Ÿ ×›×“×™ ×œ× ×œ×”××¨×™×š ××ª ×”×§×•×“ ×™×•×ª×¨ ×ž×“×™,
                                         ××‘×œ ×”×¢×™×§×¨×•×Ÿ ×”×•× ×œ×”×©×ª×ž×© ×‘-rounded-xl ×•×‘×¦×‘×¢×™× × ×§×™×™× ×™×•×ª×¨ */}
                                     <DialogHeader>
                                        <DialogTitle>{importState === 'processing' ? '×ž×¢×‘×“...' : '××™×©×•×¨'}</DialogTitle>
                                        <DialogDescription>{importMessage}</DialogDescription>
                                     </DialogHeader>
                                     {importState === 'confirming' && (
                                        <>
                                            <div className="my-4 max-h-[40vh] overflow-auto border rounded-xl divide-y">
                                                {parsedTransactions.slice(0, 100).map((trx, i) => <div key={i} className="flex justify-between p-3 text-sm"><span className="font-medium">{trx.description}</span><span>{trx.amount}</span></div>)}
                                            </div>
                                            <DialogFooter className="mt-4">
                                                <Button variant="ghost" onClick={resetImportProcess}>×‘×™×˜×•×œ</Button>
                                                <Button onClick={handleConfirmImport}>××©×¨ ×•×™×™×‘×</Button>
                                            </DialogFooter>
                                        </>
                                     )}
                                     {(importState !== 'confirming') && (
                                        <div className="text-center py-8">
                                            {importState === 'processing' && <LoaderCircle className="mx-auto h-12 w-12 text-indigo-500 animate-spin" />}
                                            {importState === 'finished' && <CheckCircle className="mx-auto h-12 w-12 text-green-500" />}
                                            {importState === 'finished' && <Button onClick={resetImportProcess} className="mt-4">×¡×’×•×¨</Button>}
                                        </div>
                                     )}
                                </div>
                            )}
                        </DialogContent>
                    </Dialog>
                </div>
            );
        }
      ðŸ“„ TzitzitFormPage.jsx
        import { useEffect, useState } from "react";
        import {
          Download,
          CreditCard,
          Pencil,
          Trash2,
          Check,
          X as XIcon,
          PlusCircle,
        } from "lucide-react";
        import * as XLSX from "xlsx";
        import api from "@/utils/api";
        
        // --- Shadcn/UI Components ---
        import { Button } from "@/components/ui/button";
        import {
          Card,
          CardContent,
          CardDescription,
          CardFooter,
          CardHeader,
          CardTitle,
        } from "@/components/ui/card";
        import {
          Table,
          TableBody,
          TableCell,
          TableHead,
          TableHeader,
          TableRow,
        } from "@/components/ui/table";
        import {
          Dialog,
          DialogContent,
          DialogFooter,
          DialogHeader,
          DialogTitle,
        } from "@/components/ui/dialog";
        import {
          Select,
          SelectContent,
          SelectItem,
          SelectTrigger,
          SelectValue,
        } from "@/components/ui/select";
        import { Input } from "@/components/ui/input";
        import { Badge } from "@/components/ui/badge";
        import {
          Tooltip,
          TooltipContent,
          TooltipProvider,
          TooltipTrigger,
        } from "@/components/ui/tooltip";
        
        export default function TzitzitPage() {
          /* ---------- state ---------- */
          const [orders, setOrders] = useState([]);
          const [loading, setLoading] = useState(true);
          const [error, setError] = useState(''); // State for error messages
        
          /* ---------- fetch ---------- */
          useEffect(() => {
            api.get("/tzitzit")
              .then(({ data }) => {
                setOrders(data);
              })
              .catch(err => {
                console.error("Failed to fetch orders:", err);
                setError("×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×. × ×¡×” ×œ×¨×¢× ×Ÿ ××ª ×”×“×£.");
              })
              .finally(() => {
                setLoading(false);
              });
          }, []);
        
          /* ---------- add-form ---------- */
          const [form, setForm] = useState({
            supplier: "",
            date: new Date().toISOString().substring(0, 10),
            type: "×¦×™×¦×™×ª",
            quantity: 1,
            unitPrice: 0,
          });
          const total = form.quantity * form.unitPrice;
        
          const addOrder = async (e) => {
            e.preventDefault();
            try {
              const { data } = await api.post("/tzitzit", form);
              setOrders((o) => [data, ...o]);
              setForm({ ...form, supplier: "", quantity: 1, unitPrice: 0 }); // Reset form
            } catch (err) {
                alert("×©×’×™××” ×‘×”×•×¡×¤×ª ×”×”×–×ž× ×”.");
            }
          };
        
          /* ---------- supplier balances ---------- */
          const suppliers = orders.reduce((acc, o) => {
            const diff = Math.max(0, (o.totalPrice ?? 0) - (o.paidMoney ?? 0));
            if (diff) acc[o.supplier] = (acc[o.supplier] || 0) + diff;
            return acc;
          }, {});
          const outstanding = Object.values(suppliers).reduce((a, b) => a + b, 0);
        
          /* ---------- pay-dialog ---------- */
          const [dlgOpen, setDlgOpen] = useState(false);
          const [dlgSupplier, setDlgSupplier] = useState("");
          const [dlgAmount, setDlgAmount] = useState("");
        
          const openDialog = () => {
            const firstSupplier = Object.keys(suppliers)[0] || "";
            setDlgSupplier(firstSupplier);
            setDlgAmount(firstSupplier ? suppliers[firstSupplier].toFixed(2) : "");
            setDlgOpen(true);
          };
        
          const handleDialogPay = async () => {
            try {
              await api.patch("/tzitzit/pay-supplier-partial", {
                supplier: dlgSupplier,
                amount: Number(dlgAmount) || 0,
              });
              const { data } = await api.get("/tzitzit");
              setOrders(data);
              setDlgOpen(false);
            } catch (err) {
              alert(
                err.response?.data?.message ||
                  "×©×’×™××” ×ž×¦×“ ×”×©×¨×ª (×‘×“×•×§ ××ª ×”Ö¾Console ×œ×¤×¨×˜×™×)"
              );
            }
          };
        
          /* ---------- close single order ---------- */
          const payFull = async (id) => {
            const ord = orders.find((o) => o._id === id);
            if (!ord) return;
            try {
                await api.patch(`/tzitzit/${id}`, { paidMoney: ord.totalPrice });
                setOrders((o) =>
                  o.map((x) => (x._id === id ? { ...x, paidMoney: x.totalPrice } : x))
                );
            } catch (err) {
                alert("×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×ª×©×œ×•×.");
            }
          };
        
          /* ---------- edit / delete ---------- */
          const toggleEdit = (id) =>
            setOrders((o) =>
              o.map((r) =>
                r._id === id
                  ? { ...r, _editing: !r._editing, _local: { ...r } }
                  : r
              )
            );
        
          const handleLocalChange = (id, field, value) =>
            setOrders((o) =>
              o.map((r) =>
                r._id === id ? { ...r, _local: { ...r._local, [field]: value } } : r
              )
            );
        
          const saveEdit = async (id) => {
            const row = orders.find((x) => x._id === id)?._local;
            if (!row) return;
            try {
                await api.patch(`/tzitzit/${id}`, {
                  supplier: row.supplier,
                  date: row.date,
                  type: row.type,
                  quantity: row.quantity,
                  unitPrice: row.unitPrice,
                  paidMoney: row.paidMoney,
                });
                const { data } = await api.get("/tzitzit");
                setOrders(data);
            } catch (err) {
                alert("×©×’×™××” ×‘×©×ž×™×¨×ª ×”×©×™× ×•×™×™×.");
            }
          };
        
          const deleteRow = async (id) => {
            if (!confirm("×œ×ž×—×•×§ ×”×–×ž× ×”?")) return;
            try {
                await api.delete(`/tzitzit/${id}`);
                setOrders((o) => o.filter((r) => r._id !== id));
            } catch (err) {
                alert("×©×’×™××” ×‘×ž×—×™×§×ª ×”×”×–×ž× ×”.");
            }
          };
        
          /* ---------- Excel ---------- */
          const exportExcel = () => {
            const sheet = XLSX.utils.json_to_sheet(
              orders.map((o) => ({
                Date: new Date(o.date).toLocaleDateString("he-IL"),
                Supplier: o.supplier,
                Type: o.type,
                Qty: o.quantity ?? 0,
                UnitPrice: o.unitPrice ?? 0,
                Total: o.totalPrice ?? 0,
                Paid: o.paidMoney ?? 0,
                Status:
                  (o.totalPrice ?? 0) - (o.paidMoney ?? 0) === 0 ? "×¡×’×•×¨" : "×¤×ª×•×—",
              }))
            );
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, sheet, "Tzitzit");
            XLSX.writeFile(wb, "tzitzit_orders.xlsx");
          };
        
          /* ---------- UI ---------- */
          return (
            <TooltipProvider>
              <div className="container mx-auto p-4 md:p-8 space-y-8">
                {/* Header */}
                <div className="flex items-center justify-between">
                  <h1 className="text-3xl font-bold tracking-tight">×”×–×ž× ×•×ª ×¦×™×¦×™×ª / ×˜×œ×™×ª</h1>
                  <div className="flex gap-2">
                    <Button
                      onClick={openDialog}
                      disabled={Object.keys(suppliers).length === 0}
                    >
                      <CreditCard className="ms-2 h-4 w-4" /> ×ª×©×œ×•× ×œ×¡×¤×§
                    </Button>
                    {orders.length > 0 && (
                      <Button variant="outline" onClick={exportExcel}>
                        <Download className="ms-2 h-4 w-4" />
                        ×™×™×¦×•× Excel
                      </Button>
                    )}
                  </div>
                </div>
        
                {/* Add Form */}
                <Card>
                  <CardHeader>
                    <CardTitle>×”×•×¡×¤×ª ×”×–×ž× ×” ×—×“×©×”</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <form onSubmit={addOrder} className="grid gap-4 md:grid-cols-6">
                      <Input
                        placeholder="×¡×¤×§"
                        value={form.supplier}
                        onChange={(e) => setForm({ ...form, supplier: e.target.value })}
                        required
                      />
                      <Input
                        type="date"
                        value={form.date}
                        onChange={(e) => setForm({ ...form, date: e.target.value })}
                        required
                      />
                      <Select
                        value={form.type}
                        onValueChange={(value) => setForm({ ...form, type: value })}
                      >
                        <SelectTrigger>
                          <SelectValue placeholder="×‘×—×¨ ×¡×•×’" />
                        </SelectTrigger>
                        <SelectContent>
                          <SelectItem value="×¦×™×¦×™×ª">×¦×™×¦×™×ª</SelectItem>
                          <SelectItem value="×˜×œ×™×ª">×˜×œ×™×ª</SelectItem>
                        </SelectContent>
                      </Select>
                      <Input
                        type="number"
                        min="1"
                        placeholder="×›×ž×•×ª"
                        value={form.quantity}
                        onChange={(e) => setForm({ ...form, quantity: +e.target.value })}
                      />
                      <Input
                        type="number"
                        min="0"
                        step="0.01"
                        placeholder="×ž×—×™×¨ ×™×—×™×“×”"
                        value={form.unitPrice}
                        onChange={(e) => setForm({ ...form, unitPrice: +e.target.value })}
                      />
                      <Button type="submit" className="md:col-start-6">
                        <PlusCircle className="ms-2 h-4 w-4" />
                        ×”×•×¡×£ ({total.toFixed(2)} â‚ª)
                      </Button>
                    </form>
                  </CardContent>
                </Card>
        
                {/* Data Table */}
                <Card>
                  <CardHeader>
                    <CardTitle>×¨×©×™×ž×ª ×”×–×ž× ×•×ª</CardTitle>
                    <CardDescription>
                      ×¡×”"×› {orders.length} ×”×–×ž× ×•×ª. ×—×•×‘ ×›×•×œ×œ ×¤×ª×•×—: {outstanding.toFixed(2)} â‚ª
                    </CardDescription>
                  </CardHeader>
                  <CardContent>
                    {error && <p className="text-red-500 text-center mb-4">{error}</p>}
                    <Table>
                      <TableHeader>
                        <TableRow>
                          <TableHead>×ª××¨×™×š</TableHead>
                          <TableHead>×¡×¤×§</TableHead>
                          <TableHead>×¡×•×’</TableHead>
                          <TableHead className="text-center">×›×ž×•×ª</TableHead>
                          <TableHead className="text-center">×ž×—×™×¨ ×™×—'</TableHead>
                          <TableHead className="text-center">×¡×”×´×›</TableHead>
                          <TableHead className="text-center">×©×•×œ×</TableHead>
                          <TableHead className="text-center">×¡×˜×˜×•×¡</TableHead>
                          <TableHead className="text-right">×¤×¢×•×œ×•×ª</TableHead>
                        </TableRow>
                      </TableHeader>
                      <TableBody>
                        {loading && (
                          <TableRow>
                            <TableCell colSpan={9} className="h-24 text-center">
                              ×˜×•×¢×Ÿ × ×ª×•× ×™×...
                            </TableCell>
                          </TableRow>
                        )}
                        {!loading &&
                          orders.map((o) =>
                            o._editing ? (
                              <EditableRow
                                key={o._id}
                                order={o}
                                onSave={saveEdit}
                                onCancel={toggleEdit}
                                onLocalChange={handleLocalChange}
                              />
                            ) : (
                              <DisplayRow
                                key={o._id}
                                order={o}
                                onEdit={toggleEdit}
                                onDelete={deleteRow}
                                onPayFull={payFull}
                              />
                            )
                          )}
                      </TableBody>
                    </Table>
                  </CardContent>
                </Card>
        
                {/* Payment Dialog */}
                <Dialog open={dlgOpen} onOpenChange={setDlgOpen}>
                  <DialogContent className="sm:max-w-[425px]">
                    <DialogHeader>
                      <DialogTitle>×ª×©×œ×•× ×œ×¡×¤×§</DialogTitle>
                    </DialogHeader>
                    <div className="grid gap-4 py-4">
                      <Select value={dlgSupplier} onValueChange={(val) => {
                        setDlgSupplier(val);
                        setDlgAmount((suppliers[val] ?? 0).toFixed(2));
                      }}>
                        <SelectTrigger><SelectValue placeholder="×‘×—×¨ ×¡×¤×§" /></SelectTrigger>
                        <SelectContent>
                          {Object.keys(suppliers).map((n) => (
                            <SelectItem key={n} value={n}>{n} (×—×•×‘: {suppliers[n].toFixed(2)} â‚ª)</SelectItem>
                          ))}
                        </SelectContent>
                      </Select>
                      <Input
                        type="number"
                        min="0.01"
                        step="0.01"
                        placeholder="×¡×›×•× ×œ×ª×©×œ×•×"
                        value={dlgAmount}
                        onChange={(e) => setDlgAmount(e.target.value)}
                      />
                    </div>
                    <DialogFooter>
                      <Button variant="outline" onClick={() => setDlgOpen(false)}>×‘×™×˜×•×œ</Button>
                      <Button onClick={handleDialogPay}>×©×œ×</Button>
                    </DialogFooter>
                  </DialogContent>
                </Dialog>
              </div>
            </TooltipProvider>
          );
        }
        
        // --- Helper Components for Table Rows ---
        
        function DisplayRow({ order, onEdit, onDelete, onPayFull }) {
          const diff = Math.max(0, (order.totalPrice ?? 0) - (order.paidMoney ?? 0));
          const status = diff === 0 ? "×¡×’×•×¨" : "×¤×ª×•×—";
          const isClosed = diff === 0;
        
          return (
            <TableRow>
              <TableCell>{new Date(order.date).toLocaleDateString("he-IL")}</TableCell>
              <TableCell className="font-medium">{order.supplier}</TableCell>
              <TableCell>{order.type}</TableCell>
              <TableCell className="text-center">{order.quantity ?? 0}</TableCell>
              <TableCell className="text-center">{(order.unitPrice ?? 0).toFixed(2)}</TableCell>
              <TableCell className="text-center font-semibold">{(order.totalPrice ?? 0).toFixed(2)}</TableCell>
              <TableCell className="text-center">{(order.paidMoney ?? 0).toFixed(2)}</TableCell>
              <TableCell className="text-center">
                <Badge variant={isClosed ? "default" : "secondary"}>
                  {status}
                </Badge>
              </TableCell>
              <TableCell className="text-right">
                <div className="flex justify-end items-center gap-1">
                  {!isClosed && (
                    <Button variant="link" size="sm" className="h-auto p-1" onClick={() => onPayFull(order._id)}>
                      ×¡×’×•×¨ ×¢×¡×§×”
                    </Button>
                  )}
                  <Tooltip>
                    <TooltipTrigger asChild>
                      <Button variant="ghost" size="icon" onClick={() => onEdit(order._id)}>
                        <Pencil className="h-4 w-4" />
                      </Button>
                    </TooltipTrigger>
                    <TooltipContent><p>×¢×¨×™×›×”</p></TooltipContent>
                  </Tooltip>
                  <Tooltip>
                    <TooltipTrigger asChild>
                      <Button variant="ghost" size="icon" className="text-destructive" onClick={() => onDelete(order._id)}>
                        <Trash2 className="h-4 w-4" />
                      </Button>
                    </TooltipTrigger>
                    <TooltipContent><p>×ž×—×™×§×”</p></TooltipContent>
                  </Tooltip>
                </div>
              </TableCell>
            </TableRow>
          );
        }
        
        function EditableRow({ order, onSave, onCancel, onLocalChange }) {
          const l = order._local;
          return (
            <TableRow className="bg-muted/50">
              <TableCell>
                <Input type="date" value={l.date?.substring(0, 10)} onChange={(e) => onLocalChange(order._id, "date", e.target.value)} />
              </TableCell>
              <TableCell>
                <Input value={l.supplier} onChange={(e) => onLocalChange(order._id, "supplier", e.target.value)} />
              </TableCell>
              <TableCell>
                <Select value={l.type} onValueChange={(val) => onLocalChange(order._id, "type", val)}>
                  <SelectTrigger><SelectValue/></SelectTrigger>
                  <SelectContent>
                    <SelectItem value="×¦×™×¦×™×ª">×¦×™×¦×™×ª</SelectItem>
                    <SelectItem value="×˜×œ×™×ª">×˜×œ×™×ª</SelectItem>
                  </SelectContent>
                </Select>
              </TableCell>
              <TableCell>
                <Input type="number" value={l.quantity} onChange={(e) => onLocalChange(order._id, "quantity", +e.target.value)} className="min-w-[70px] text-center" />
              </TableCell>
              <TableCell>
                <Input type="number" value={l.unitPrice} onChange={(e) => onLocalChange(order._id, "unitPrice", +e.target.value)} className="min-w-[80px] text-center" />
              </TableCell>
              <TableCell className="text-center font-semibold">
                {(l.quantity * l.unitPrice).toFixed(2)}
              </TableCell>
              <TableCell>
                <Input type="number" value={l.paidMoney} onChange={(e) => onLocalChange(order._id, "paidMoney", +e.target.value)} className="min-w-[80px] text-center" />
              </TableCell>
              <TableCell></TableCell> {/* Placeholder for Status */}
              <TableCell className="text-right">
                <div className="flex justify-end items-center gap-1">
                  <Tooltip>
                    <TooltipTrigger asChild>
                      <Button variant="ghost" size="icon" onClick={() => onSave(order._id)}>
                        <Check className="h-4 w-4 text-green-600" />
                      </Button>
                    </TooltipTrigger>
                    <TooltipContent><p>×©×ž×™×¨×”</p></TooltipContent>
                  </Tooltip>
                  <Tooltip>
                    <TooltipTrigger asChild>
                      <Button variant="ghost" size="icon" onClick={() => onCancel(order._id)}>
                        <XIcon className="h-4 w-4 text-muted-foreground" />
                      </Button>
                    </TooltipTrigger>
                    <TooltipContent><p>×‘×™×˜×•×œ</p></TooltipContent>
                  </Tooltip>
                </div>
              </TableCell>
            </TableRow>
          );
        }
        
    ðŸ“ stores/
      ðŸ“„ accountStore.js
        // client/src/stores/accountStore.js
        
        import { create } from 'zustand';
        // The import path has been changed to a relative path to avoid alias issues.
        import api from '../utils/api';
        
        export const useAccountStore = create((set) => ({
          accounts: [],
          loading: false,
          error: null,
        
          /**
           * Fetches accounts from the correct endpoint.
           * FIX: This now points to the correct API endpoint (`/dashboard/summary`)
           * and correctly extracts the `accounts` array from the response.
           */
          fetchAccounts: async () => {
            set({ loading: true, error: null });
            try {
              const { data } = await api.get('/dashboard/summary');
              // Ensure we set an array, even if data.accounts is missing.
              set({ accounts: data?.accounts || [], loading: false });
            } catch (err) {
              const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×˜×¢×™× ×ª ×”×—×©×‘×•× ×•×ª';
              set({ error: errorMsg, loading: false, accounts: [] });
              console.error("Failed to fetch accounts:", errorMsg);
            }
          },
        }));
      ðŸ“„ authStore.js
        // client/src/stores/authStore.js
        
        import { create } from 'zustand';
        import { devtools } from 'zustand/middleware';
        // Import the injector function from api.js. Using a relative path for safety.
        import { injectAuthStore } from '../utils/api';
        
        const getInitialState = () => {
          try {
            const user = JSON.parse(localStorage.getItem('user'));
            return { user, isAuthenticated: !!user };
          } catch (error) {
            return { user: null, isAuthenticated: false };
          }
        };
        
        export const useAuthStore = create(
          devtools(
            (set) => ({
              ...getInitialState(),
        
              login: (userData) => {
                if (!userData || !userData._id) {
                  console.error("Login action called with invalid user data:", userData);
                  return;
                }
                localStorage.setItem('user', JSON.stringify(userData));
                set({ user: userData, isAuthenticated: true }, false, 'LOGIN_ACTION');
              },
        
              logout: () => {
                localStorage.removeItem('user');
                set({ user: null, isAuthenticated: false }, false, 'LOGOUT_ACTION');
              },
            }),
            { name: "Auth Store" }
          )
        );
        
        // --- THIS IS THE FIX ---
        // After the store is created, we inject its API into the api.js module.
        // This breaks the circular dependency.
        injectAuthStore(useAuthStore.getState());
        
        // We also subscribe to future changes, although it's less critical for login/logout
        // which don't change at runtime.
        useAuthStore.subscribe(state => {
          injectAuthStore(state);
        });
      ðŸ“„ depositsStore.js
        // client/src/stores/depositsStore.js
        
        import { create } from 'zustand';
        import api from '../utils/api';
        import toast from 'react-hot-toast';
        
        export const useDepositsStore = create((set, get) => ({
          deposits: [],
          loading: false,
          error: null,
        
          // ×¤×¢×•×œ×” ×œ×˜×¢×™× ×ª ×›×œ ×”×¤×™×§×“×•× ×•×ª ×ž×”×©×¨×ª
          fetchDeposits: async () => {
            set({ loading: true, error: null });
            try {
              const { data } = await api.get('/deposits');
              set({ deposits: data || [], loading: false });
            } catch (err) {
              const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×˜×¢×™× ×ª ×”×¤×™×§×“×•× ×•×ª';
              set({ error: errorMsg, loading: false });
              toast.error(errorMsg);
            }
          },
        
          // ×¤×¢×•×œ×” ×œ×”×•×¡×¤×ª ×¤×™×§×“×•×Ÿ ×—×“×©
          addDeposit: async (depositData) => {
            try {
              await api.post('/deposits', depositData);
              toast.success('×”×¤×™×§×“×•×Ÿ × ×•×¡×£ ×‘×”×¦×œ×—×”!');
              get().fetchDeposits(); // ×¨×¢× ×•×Ÿ ×”×¨×©×™×ž×” ×”×ž×œ××” ×ž×”×©×¨×ª
              return true; // ×œ×”×•×“×™×¢ ×œ×˜×•×¤×¡ ×©×”×¤×¢×•×œ×” ×”×¦×œ×™×—×”
            } catch (err) {
              toast.error(err.response?.data?.message || '×©×’×™××” ×‘×”×•×¡×¤×ª ×”×¤×™×§×“×•×Ÿ');
              return false; // ×œ×”×•×“×™×¢ ×œ×˜×•×¤×¡ ×©×”×¤×¢×•×œ×” × ×›×©×œ×”
            }
          },
        
          // ===>> ×”×•×¡×¤×ª ×”×¤×•× ×§×¦×™×•×ª ×”×—×¡×¨×•×ª <<===
        
          // ×¤×¢×•×œ×” ×œ×©×‘×™×¨×ª ×¤×™×§×“×•×Ÿ
          breakDeposit: async (depositId) => {
            try {
              const { data } = await api.post(`/deposits/${depositId}/break`);
              toast.success(data.message || '×”×¤×™×§×“×•×Ÿ × ×©×‘×¨ ×‘×”×¦×œ×—×”!');
              get().fetchDeposits(); // ×¨×¢× ×•×Ÿ ×”×¨×©×™×ž×”
            } catch (err) {
               toast.error(err.response?.data?.message || '×©×’×™××” ×‘×©×‘×™×¨×ª ×”×¤×™×§×“×•×Ÿ');
            }
          },
        
          // ×¤×¢×•×œ×” ×œ×ž×©×™×›×ª ×¤×™×§×“×•×Ÿ
          withdrawDeposit: async (depositId) => {
             try {
              const { data } = await api.post(`/deposits/${depositId}/withdraw`);
              toast.success(data.message || '×”×¤×™×§×“×•×Ÿ × ×¤×¨×¢ ×•× ×ž×©×š ×‘×”×¦×œ×—×”!');
              get().fetchDeposits(); // ×¨×¢× ×•×Ÿ ×”×¨×©×™×ž×”
            } catch (err) {
               toast.error(err.response?.data?.message || '×©×’×™××” ×‘×ž×©×™×›×ª ×”×¤×™×§×“×•×Ÿ');
            }
          }
        }));
      ðŸ“„ financeStore.js
        import { create } from 'zustand';
        import api from '@/utils/api'; // ×©×™×ž×•×© ×‘×ž× ×•×¢ ×”×ª×§×©×•×¨×ª ×”×ž×¨×›×–×™
        
        // ×‘×¨×™×¨×ª ×ž×—×“×œ ×œ×ž×§×¨×” ×©××™×Ÿ ×¤×¨×•×¤×™×œ ×œ×ž×©×ª×ž×©
        const defaultProfile = {
          checking: 0,
          cash: 0,
          deposits: 0,
          stocks: 0,
        };
        
        export const useFinanceStore = create((set, get) => ({
          profile: null,
          loading: true,
          error: null,
        
          // ×¤×¢×•×œ×” ×œ×©×œ×™×¤×ª ×”×¤×¨×•×¤×™×œ ×ž×”×©×¨×ª
          fetchProfile: async () => {
            set({ loading: true, error: null });
            try {
              // ×”× ×ª×™×‘ ×”× ×›×•×Ÿ ×”×•× /api/finances ×›×¤×™ ×©×ž×•×’×“×¨ ×‘×©×¨×ª
              const { data } = await api.get('/finances');
              set({ profile: data || defaultProfile, loading: false });
            } catch (err) {
              const errorMessage = err.response?.data?.message || err.message;
              set({ error: errorMessage, loading: false, profile: defaultProfile });
              console.error("Failed to fetch finance profile:", err);
            }
          },
        
          // ×¤×¢×•×œ×” ×œ×¢×“×›×•×Ÿ ×”×¤×¨×•×¤×™×œ ×‘×©×¨×ª
          updateProfile: async (newProfileData) => {
            const originalProfile = get().profile;
            // ×¢×“×›×•×Ÿ ××•×¤×˜×™×ž×™ ×ž×™×™×“×™ ×©×œ ×”×ž×ž×©×§
            set({ profile: { ...originalProfile, ...newProfileData } });
            try {
              const { data } = await api.post('/finances', newProfileData);
              set({ profile: data }); // ×¢×“×›×•×Ÿ ×¡×•×¤×™ ×¢× ×”×ž×™×“×¢ ×”×ž×“×•×™×§ ×ž×”×©×¨×ª
            } catch (err) {
              const errorMessage = err.response?.data?.message || "×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×¤×¨×•×¤×™×œ";
              set({ error: errorMessage, profile: originalProfile }); // ×”×—×–×¨×ª ×”×ž×¦×‘ ×œ×§×“×ž×•×ª×• ×‘×ž×§×¨×” ×©×œ ×©×’×™××”
              console.error("Failed to update finance profile:", err);
            }
          },
        }));
      ðŸ“„ fundStore.js
        import { create } from 'zustand';
        import api from '@/utils/api';
        import toast from 'react-hot-toast';
        
        export const useFundStore = create((set, get) => ({
          funds: [],
          loading: false,
          error: null,
        
          fetchFunds: async () => {
            set({ loading: true });
            try {
              const { data } = await api.get('/funds');
              set({ funds: data, loading: false });
            } catch (err) {
              toast.error('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×§×¨× ×•×ª');
              set({ error: err.message, loading: false });
            }
          },
        
          addFund: async (fundData) => {
            try {
              const { data: newFund } = await api.post('/funds', fundData);
              set((state) => ({ funds: [newFund, ...state.funds] }));
              toast.success('×”×§×¨×Ÿ × ×•×¡×¤×” ×‘×”×¦×œ×—×”!');
            } catch (err) {
              toast.error(err.response?.data?.message || '×©×’×™××” ×‘×”×•×¡×¤×ª ×”×§×¨×Ÿ');
            }
          },
        
          refreshPrices: async () => {
            const originalFunds = get().funds;
            set({ loading: true });
            toast.loading('×ž×¨×¢× ×Ÿ ×ž×—×™×¨×™×...');
            try {
              const { data } = await api.post('/funds/refresh');
              set({ funds: data, loading: false });
              toast.dismiss();
              toast.success('×”×ž×—×™×¨×™× ×¢×•×“×›× ×•!');
            } catch (err) {
              toast.dismiss();
              toast.error('×©×’×™××” ×‘×¨×¢× ×•×Ÿ ×”×ž×—×™×¨×™×');
              set({ funds: originalFunds, loading: false });
            }
          },
        
          sellFund: async (fundId) => {
             // ... ×œ×•×’×™×§×” ×“×•×ž×” ×¢× ×§×¨×™××ª API ×œ-POST /api/funds/:id/sell
          },
        
          deleteFund: async (fundId) => {
            // ... ×œ×•×’×™×§×” ×“×•×ž×” ×¢× ×§×¨×™××ª API ×œ-DELETE /api/funds/:id
          }
        }));
      ðŸ“„ projectsStore.js
        import { create } from 'zustand';
        import * as projectApi from '@/utils/projects';
        
        const useProjectsStore = create((set, get) => ({
          projects: [],
          activeProject: null,
          loading: false,
          error: null,
        
          // Helper to update a project in the state array and the active project if necessary
          _updateProjectState: (updatedProject) => {
            const projects = get().projects.map(p => p._id === updatedProject._id ? updatedProject : p);
            const activeProject = get().activeProject?._id === updatedProject._id ? updatedProject : get().activeProject;
            return { projects, activeProject };
          },
        
          // --- Actions ---
          fetchProjects: async () => {
            set({ loading: true, error: null });
            try {
              const projects = await projectApi.getProjects();
              set({ projects, loading: false });
            } catch (err) {
              set({ error: err, loading: false });
            }
          },
        
          fetchProject: async (id) => {
            set({ loading: true, error: null });
            try {
              const project = await projectApi.getProject(id);
              const { projects } = get()._updateProjectState(project);
              set({ projects, activeProject: project, loading: false });
            } catch (err) {
              set({ error: err, loading: false });
            }
          },
        
          createProject: async (payload) => {
            set({ loading: true, error: null });
            try {
              const newProject = await projectApi.createProject(payload);
              set(state => ({ projects: [newProject, ...state.projects], loading: false }));
              return newProject;
            } catch (err) {
              set({ error: err, loading: false });
              throw err;
            }
          },
        
          deleteProject: async (id) => {
            set({ loading: true, error: null });
            try {
              await projectApi.deleteProject(id);
              set(state => ({
                projects: state.projects.filter(p => p._id !== id),
                activeProject: state.activeProject?._id === id ? null : state.activeProject,
                loading: false
              }));
            } catch (err) {
              set({ error: err, loading: false });
            }
          },
        
          // --- Task & Fund Actions ---
          // A generic handler for actions that update a single project
          _handleProjectUpdate: async (apiCall) => {
            set({ loading: true, error: null });
            try {
              const updatedProject = await apiCall();
              const newState = get()._updateProjectState(updatedProject);
              set({ ...newState, loading: false });
            } catch (err) {
              set({ error: err, loading: false });
            }
          },
        
          addTask: async (projectId, task) => {
            await get()._handleProjectUpdate(() => projectApi.addTask(projectId, task));
          },
        
          toggleTask: async (projectId, taskId) => {
            await get()._handleProjectUpdate(() => projectApi.toggleTask(projectId, taskId));
          },
        
          deleteTask: async (projectId, taskId) => {
            await get()._handleProjectUpdate(() => projectApi.deleteTask(projectId, taskId));
          },
        
          addFund: async (projectId, fund) => {
            await get()._handleProjectUpdate(() => projectApi.addFund(projectId, fund));
          },
        
        }));
        
        export default useProjectsStore;
      ðŸ“„ stockStore.js
        // client/src/stores/stockStore.js
        
        import { create } from 'zustand';
        import api from '@/utils/api';
        import toast from 'react-hot-toast';
        
        export const useStockStore = create((set, get) => ({
          stocks: [],
          loading: false,
          error: null,
        
          // Helper functions to manage state
          _startLoading: () => set({ loading: true, error: null }),
          _setError: (error) => set({ loading: false, error }),
        
          // Actions
          fetchStocks: async () => {
            get()._startLoading();
            try {
              const { data } = await api.get('/stocks');
              set({ stocks: data, loading: false });
            } catch (err) {
              const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×˜×¢×™× ×ª ×”×ž× ×™×•×ª';
              get()._setError(errorMsg);
              toast.error(errorMsg);
            }
          },
        
          addStock: async (stockData) => {
            get()._startLoading();
            try {
              const { data: newStock } = await api.post('/stocks', stockData);
              set((state) => ({ stocks: [newStock, ...state.stocks], loading: false }));
              toast.success(`×ž× ×™×™×ª ${newStock.ticker} × ×•×¡×¤×” ×‘×”×¦×œ×—×”!`);
            } catch (err) {
              const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×”×•×¡×¤×ª ×ž× ×™×”';
              get()._setError(errorMsg);
              toast.error(errorMsg);
            }
          },
        
          deleteStock: async (stockId) => {
            const originalStocks = get().stocks;
            // Optimistic update
            set((state) => ({
              stocks: state.stocks.filter((s) => s._id !== stockId),
            }));
            try {
              await api.delete(`/stocks/${stockId}`);
              toast.success('×”×ž× ×™×” × ×ž×—×§×”.');
            } catch (err) {
              toast.error('×©×’×™××” ×‘×ž×—×™×§×ª ×”×ž× ×™×”.');
              set({ stocks: originalStocks }); // Revert on error
            }
          },
        
          sellStock: async (stockId) => {
            try {
              const { data } = await api.post(`/stocks/${stockId}/sell`);
              toast.success(data.message);
              get().fetchStocks(); // Refetch all stocks and potentially account balances
            } catch(err) {
              const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×ž×›×™×¨×ª ×”×ž× ×™×”';
              toast.error(errorMsg);
            }
          },
        
          refreshPrices: async () => {
            try {
              const { data } = await api.post('/stocks/refresh-prices');
              set({ stocks: data.stocks });
              toast.success(data.message);
            } catch (err) {
              const errorMsg = err.response?.data?.message || '×©×’×™××” ×‘×¢×“×›×•×Ÿ ×ž×—×™×¨×™×';
              toast.error(errorMsg);
            }
          },
        }));
      ðŸ“„ tzitzitStore.js
        import { create } from "zustand";
        import api from "@/utils/api"; // Now it's safe to import directly
        
        export const useTzitzitStore = create((set) => ({
          orders: [],
          loading: false,
          error: null,
        
          fetchOrders: async () => {
            set({ loading: true, error: null });
            try {
              const { data } = await api.get("/tzitzit");
              set({ orders: data, loading: false });
            } catch (err) {
              const errorMsg = err.response?.data?.message || "×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×";
              set({ error: errorMsg, loading: false });
            }
          },
        
          addOrder: async (orderData) => {
            // This function now returns the new order on success
            // or throws an error on failure.
            try {
              const { data: newOrder } = await api.post("/tzitzit", orderData);
              set((state) => ({
                orders: [newOrder, ...state.orders],
              }));
              return newOrder;
            } catch (err) {
              console.error("Failed to add order:", err);
              throw err;
            }
          },
        
          payOrder: async (id, amount) => {
            try {
              const { data: updatedOrder } = await api.patch(`/tzitzit/${id}/pay`, { amount });
              set((state) => ({
                orders: state.orders.map((o) => (o._id === id ? updatedOrder : o)),
              }));
              return updatedOrder;
            } catch (err) {
              console.error("Failed to pay order:", err);
              throw err;
            }
          },
        }));
    ðŸ“ utils/
      ðŸ“„ api.js
        import axios from 'axios';
        
        // ×ž×©×ª× ×” ×œ×”×—×–×§×ª ×”×¤×•× ×§×¦×™×•×ª ×ž×”-Store ×›×“×™ ×œ×ž× ×•×¢ ×ª×œ×•×ª ×ž×¢×’×œ×™×ª
        let authStoreApi = {
          login: () => console.warn('Auth store not initialized yet (login).'),
          logout: () => console.warn('Auth store not initialized yet (logout).'),
        };
        
        /**
         * ×¤×•× ×§×¦×™×” ×œ×”×–×¨×§×ª ×”-Store ×œ×ª×•×š ×”-API
         */
        export function injectAuthStore(store) {
          authStoreApi = store;
        }
        
        // ×™×¦×™×¨×ª ×ž×•×¤×¢ Axios
        const api = axios.create({
          // ×× ×ž×©×ª×ž×©×™× ×‘-Vite Proxy, ×–×” ×‘×¡×“×¨ ×œ×”×©××™×¨ /api.
          // ×œ×™×™×¦×•×¨, ×¢×“×™×£ ×œ×”×©×ª×ž×© ×‘-import.meta.env.VITE_API_URL
          baseURL: '/api',
          withCredentials: true,
        });
        
        let csrfTokenPromise = null;
        
        // ×¤×•× ×§×¦×™×” ×œ×”×©×’×ª ×˜×•×§×Ÿ CSRF (×ž×•× ×¢×ª ×§×¨×™××•×ª ×›×¤×•×œ×•×ª)
        const getCsrfToken = () => {
          if (!csrfTokenPromise) {
            csrfTokenPromise = api.get('/csrf-token')
              .then(response => {
                const csrfToken = response.data.csrfToken;
                api.defaults.headers.common['X-CSRF-Token'] = csrfToken;
                return csrfToken;
              })
              .catch(error => {
                console.error('Failed to fetch CSRF token', error);
                csrfTokenPromise = null;
                return Promise.reject(error);
              });
          }
          return csrfTokenPromise;
        };
        
        // Interceptor ×œ×‘×§×©×•×ª - ×•×™×“×•× ×©×™×© CSRF
        api.interceptors.request.use(async (config) => {
          // ×“×™×œ×•×’ ×× ×”×‘×§×©×” ×”×™× ×œ×§×‘×œ×ª ×”×˜×•×§×Ÿ ×¢×¦×ž×•
          if (config.url === '/csrf-token') {
            return config;
          }
        
          // ×× ××™×Ÿ ×˜×•×§×Ÿ ×‘×”×“×¨×™×, × × ×¡×” ×œ×”×©×™×’ ××•×ª×•
          if (!api.defaults.headers.common['X-CSRF-Token']) {
            try {
              await getCsrfToken();
            } catch (err) {
              // ×× × ×›×©×œ× ×• ×œ×”×©×™×’ ×˜×•×§×Ÿ, ×™×™×ª×›×Ÿ ×©×”×©×¨×ª ×œ×ž×˜×” ××• ×‘×¢×™×™×ª ×¨×©×ª.
              // × ×ž×©×™×š ×‘×›×œ ×–××ª ×›×“×™ ×©×”×©×¨×ª ×™×—×–×™×¨ ×©×’×™××” ×ž×ª××™×ž×”.
            }
          }
          return config;
        }, (error) => Promise.reject(error));
        
        // ×ž×©×ª× ×™× ×œ× ×™×”×•×œ ×—×™×“×•×© ×˜×•×§×Ÿ (Refresh Token)
        let isRefreshing = false;
        let failedQueue = [];
        
        const processQueue = (error, token = null) => {
          failedQueue.forEach(prom => {
            if (error) {
              prom.reject(error);
            } else {
              prom.resolve(token);
            }
          });
          failedQueue = [];
        };
        
        // Interceptor ×œ×ª×©×•×‘×•×ª - ×˜×™×¤×•×œ ×‘×©×’×™××•×ª 401 ×•×—×™×“×•×© ×˜×•×§×Ÿ
        api.interceptors.response.use(
          (response) => response,
          async (error) => {
            const originalRequest = error.config;
        
            // ×× ×§×™×‘×œ× ×• 401 ×•×–×• ×œ× ×‘×§×©×” ×©×›×‘×¨ × ×™×¡×™× ×• ×œ×—×“×©
            if (error.response?.status === 401 && !originalRequest._retry) {
        
              // ×× ×× ×—× ×• ×›×‘×¨ ×‘××ž×¦×¢ ×ª×”×œ×™×š ×—×™×“×•×©, ×”×›× ×¡ ×œ×ª×•×¨
              if (isRefreshing) {
                return new Promise((resolve, reject) => {
                  failedQueue.push({ resolve, reject });
                })
                .then(() => api(originalRequest))
                .catch((err) => Promise.reject(err));
              }
        
              originalRequest._retry = true;
              isRefreshing = true;
        
              try {
                // ×‘×§×©×ª ×—×™×“×•×© ×˜×•×§×Ÿ
                const { data } = await api.post('/auth/refresh');
        
                // ×¢×“×›×•×Ÿ ×”-Store ×‘×”×¦×œ×—×”
                if (data && data.user) {
                  authStoreApi.login(data.user);
                }
        
                // ×©×—×¨×•×¨ ×”×ª×•×¨
                processQueue(null);
        
                // ×©×œ×™×—×” ×ž×—×“×© ×©×œ ×”×‘×§×©×” ×”×ž×§×•×¨×™×ª
                return api(originalRequest);
              } catch (refreshError) {
                // ×‘×ž×§×¨×” ×©×œ ×›×™×©×œ×•×Ÿ ×‘×—×™×“×•×© (×œ×ž×©×œ ×”×˜×•×§×Ÿ ×¤×’ ×ª×•×§×£ ×œ×’×ž×¨×™)
                processQueue(refreshError, null);
                authStoreApi.logout(); // × ×™×ª×•×§ ×”×ž×©×ª×ž×©
                return Promise.reject(refreshError);
              } finally {
                isRefreshing = false;
              }
            }
            return Promise.reject(error);
          }
        );
        
        export default api;
      ðŸ“„ cn.js
        import { clsx } from 'clsx';
        import { twMerge } from 'tailwind-merge';
        
        export function cn(...inputs) {
          return twMerge(clsx(inputs));
        }
      ðŸ“„ projects.js
        import api from '@/utils/api'; // ×©×™×ž×•×© ×‘×§×•×‘×¥ ×”×ª×§×©×•×¨×ª ×”×ž×¨×›×–×™
        
        // --- Project CRUD ---
        export const getProjects = async () => {
          const { data } = await api.get('/projects');
          return data;
        };
        
        export const getProject = async (id) => {
          const { data } = await api.get(`/projects/${id}`);
          return data;
        };
        
        export const createProject = async (body) => {
          const { data } = await api.post('/projects', body);
          return data;
        };
        
        export const updateProject = async (id, body) => {
          const { data } = await api.patch(`/projects/${id}`, body);
          return data;
        };
        
        export const deleteProject = async (id) => {
          const { data } = await api.delete(`/projects/${id}`);
          return data;
        };
        
        // --- Funds ---
        export const addFund = async (projectId, fund) => {
          const { data } = await api.post(`/projects/${projectId}/funds`, fund);
          return data;
        };
        
        // --- Tasks ---
        export const addTask = async (projectId, task) => {
          const { data } = await api.post(`/projects/${projectId}/tasks`, task);
          return data;
        };
        
        export const toggleTask = async (projectId, taskId) => {
          const { data } = await api.patch(`/projects/${projectId}/tasks/${taskId}/toggle`);
          return data;
        };
        
        export const deleteTask = async (projectId, taskId) => {
          const { data } = await api.delete(`/projects/${projectId}/tasks/${taskId}`);
          return data;
        };
  ðŸ“„ tailwind.config.js
    /** @type {import('tailwindcss').Config} */
    export default {
        darkMode: ["class"],
        content: [
        "./index.html",
        "./src/**/*.{js,ts,jsx,tsx}",
      ],
      theme: {
      	extend: {
      		fontFamily: {
      			sans: [
      				'Assistant',
      				'sans-serif'
      			]
      		},
      		borderRadius: {
      			lg: 'var(--radius)',
      			md: 'calc(var(--radius) - 2px)',
      			sm: 'calc(var(--radius) - 4px)'
      		},
      		colors: {
      			background: 'hsl(var(--background))',
      			foreground: 'hsl(var(--foreground))',
      			card: {
      				DEFAULT: 'hsl(var(--card))',
      				foreground: 'hsl(var(--card-foreground))'
      			},
      			popover: {
      				DEFAULT: 'hsl(var(--popover))',
      				foreground: 'hsl(var(--popover-foreground))'
      			},
      			primary: {
      				DEFAULT: 'hsl(var(--primary))',
      				foreground: 'hsl(var(--primary-foreground))'
      			},
      			secondary: {
      				DEFAULT: 'hsl(var(--secondary))',
      				foreground: 'hsl(var(--secondary-foreground))'
      			},
      			muted: {
      				DEFAULT: 'hsl(var(--muted))',
      				foreground: 'hsl(var(--muted-foreground))'
      			},
      			accent: {
      				DEFAULT: 'hsl(var(--accent))',
      				foreground: 'hsl(var(--accent-foreground))'
      			},
      			destructive: {
      				DEFAULT: 'hsl(var(--destructive))',
      				foreground: 'hsl(var(--destructive-foreground))'
      			},
      			border: 'hsl(var(--border))',
      			input: 'hsl(var(--input))',
      			ring: 'hsl(var(--ring))',
      			chart: {
      				'1': 'hsl(var(--chart-1))',
      				'2': 'hsl(var(--chart-2))',
      				'3': 'hsl(var(--chart-3))',
      				'4': 'hsl(var(--chart-4))',
      				'5': 'hsl(var(--chart-5))'
      			}
      		}
      	}
      },
      plugins: [require("tailwindcss-animate")],
    }
  ðŸ“„ vite.config.js
    import { defineConfig } from 'vite';
    import react from '@vitejs/plugin-react';
    import path from 'path';
    import { fileURLToPath } from 'url';
    
    // This is the robust way to get the directory name in an ES module environment
    const __dirname = path.dirname(fileURLToPath(import.meta.url));
    
    export default defineConfig({
      plugins: [react()],
      resolve: {
        alias: {
          // The '@' alias now points directly to the 'src' directory
          '@': path.resolve(__dirname, 'src'),
        },
      },
      server: {
        port: 5173,
        proxy: {
          '/api': {
            target: 'http://localhost:4000',
            changeOrigin: true,
          },
          '/uploads': {
            target: 'http://localhost:4000',
            changeOrigin: true,
          },
        },
      },
    });
ðŸ“„ directory_structure.txt
ðŸ“„ docker-compose.yml
ðŸ“„ gooZip.py
  import os
  import shutil
  import zipfile
  import tkinter as tk
  from tkinter import filedialog, messagebox
  
  # ×¨×©×™×ž×ª ×ª×™×§×™×•×ª ×©×™×© ×œ×“×œ×’ ×¢×œ×™×”×Ÿ
  SKIP_DIRS = {"node_modules", ".git", "__pycache__"}
  
  def copy_filtered_directory(src, dst):
      """
      ×ž×¢×ª×™×§ ×ª×™×§×™×™×” ×›×•×œ×œ ×ž×‘× ×”, ×ª×•×š ×“×™×œ×•×’ ×¢×œ ×ª×™×§×™×•×ª ×ž×¡×•×™×ž×•×ª ×œ×¤×™ ×©×.
      """
      for root, dirs, files in os.walk(src):
          # ×—×™×©×•×‘ ×”× ×ª×™×‘ ×”×™×—×¡×™ ×›×“×™ ×œ×©×—×–×¨ ××ª ×”×ž×‘× ×”
          rel_path = os.path.relpath(root, src)
          dest_path = os.path.join(dst, rel_path)
          os.makedirs(dest_path, exist_ok=True)
  
          # ×¡×™× ×•×Ÿ ×ª×™×§×™×•×ª ×œ× ×¨×¦×•×™×•×ª
          dirs[:] = [d for d in dirs if d not in SKIP_DIRS]
  
          # ×”×¢×ª×§×ª ×§×‘×¦×™×
          for file in files:
              src_file = os.path.join(root, file)
              dst_file = os.path.join(dest_path, file)
              try:
                  shutil.copy2(src_file, dst_file)
              except Exception as e:
                  print(f"âŒ ×©×’×™××” ×‘×”×¢×ª×§×” ×©×œ {src_file}: {e}")
  
  def zip_directory(source_dir, zip_path):
      """
      ×™×•×¦×¨ ×§×•×‘×¥ ZIP ×ª×•×š ×©×ž×™×¨×” ×¢×œ ×ž×‘× ×” ×ª×™×§×™×•×ª ×ž×œ×.
      """
      with zipfile.ZipFile(zip_path, 'w', zipfile.ZIP_DEFLATED) as zf:
          for root, _, files in os.walk(source_dir):
              for file in files:
                  abs_path = os.path.join(root, file)
                  rel_path = os.path.relpath(abs_path, source_dir)
                  zf.write(abs_path, arcname=rel_path)
  
  def main():
      # ×‘×—×™×¨×ª ×ª×™×§×™×™×ª ×ž×§×•×¨
      root = tk.Tk()
      root.withdraw()
      src_dir = filedialog.askdirectory(title="×‘×—×¨ ×ª×§×™×™×” ×œ×”×¢×ª×§×” ×•×œ×›×™×•×•×¥")
  
      if not src_dir:
          print("âŒ ×œ× × ×‘×—×¨×” ×ª×§×™×™×”.")
          return
  
      # ×‘×—×™×¨×ª ×™×¢×“ ×œ×§×•×‘×¥ ZIP (×›×•×œ×œ ×©× ×§×•×‘×¥)
      zip_path = filedialog.asksaveasfilename(
          title="×‘×—×¨ ×ž×™×§×•× ×•×©× ×œ×§×•×‘×¥ ×”-ZIP",
          defaultextension=".zip",
          filetypes=[("Zip Files", "*.zip")]
      )
  
      if not zip_path:
          print("âŒ ×œ× × ×‘×—×¨ ×ž×™×§×•× ×œ×©×ž×™×¨×ª ×”-ZIP.")
          return
  
      print(f"\nðŸ“‚ ×ž×§×•×¨: {src_dir}")
      print(f"ðŸ“¦ ×™×¢×“ ZIP: {zip_path}")
  
      # ×™×¦×™×¨×ª ×ª×§×™×™×” ×–×ž× ×™×ª ×œ×”×¢×ª×§×”
      temp_copy_dir = os.path.join(os.path.dirname(zip_path), "_temp_filtered_copy")
      if os.path.exists(temp_copy_dir):
          shutil.rmtree(temp_copy_dir)
      os.makedirs(temp_copy_dir)
  
      # ×”×¢×ª×§×ª ×§×‘×¦×™× ×¢× ×¡×™× ×•×Ÿ ×ª×™×§×™×•×ª
      copy_filtered_directory(src_dir, temp_copy_dir)
  
      # ×™×¦×™×¨×ª ×§×•×‘×¥ ZIP
      zip_directory(temp_copy_dir, zip_path)
  
      # × ×™×§×•×™ ×–×ž× ×™
      shutil.rmtree(temp_copy_dir)
  
      print(f"\nâœ… ×§×•×‘×¥ ZIP × ×•×¦×¨ ×‘×”×¦×œ×—×” ×‘× ×ª×™×‘: {zip_path}")
      messagebox.showinfo("×”×¦×œ×—×”", f"×”×§×•×‘×¥ × ×•×¦×¨ ×‘×”×¦×œ×—×”:\n{zip_path}")
  
  if __name__ == "__main__":
      main()
ðŸ“„ net.py
  #!/usr/bin/env python3
  """
  scan_lan.py â€“ ×¡×¨×™×§×” ×ž×”×™×¨×” ×©×œ ×›×œ ×”×ž×›×©×™×¨×™× ×‘×¨×©×ª-LAN ×”×ž×§×•×ž×™×ª.
  
  ×ª×œ×•×™×•×™×•×ª:
  1.  nmap   â€“ ×™×© ×œ×”×ª×§×™×Ÿ ×‘×ž×—×©×‘ (https://nmap.org/download.html)
  2.  Python 3.x (××™×Ÿ ×¡×¤×¨×™×•×ª ×¦×“ ×©×œ×™×©×™ â€“ ×¨×§ stdlib)
  
  ×”×¤×¢×œ×”:
      python scan_lan.py
  """
  import json
  import os
  import shutil
  import socket
  import subprocess
  import sys
  import xml.etree.ElementTree as ET
  
  
  # -----------------------------------------------------------
  #  ×›×œ×™ ×¢×–×¨: ××™×ª×•×¨ ×›×ª×•×‘×ª IP ×ž×§×•×ž×™×ª ×•×”×¡×§×ª ×˜×•×•×— CIDR ×¡×‘×™×¨
  # -----------------------------------------------------------
  def get_local_ip() -> str:
      """×ž×—×–×™×¨ ××ª ×›×ª×•×‘×ª IP ×©×œ ×”×ž×—×©×‘ ×‘×¨×©×ª ×”×ž×§×•×ž×™×ª."""
      with socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as s:
          # "×ž×ª×—×‘×¨" ×œ-8.8.8.8 ×›×“×™ ×©×”-OS ×™×‘×—×¨ ×ž×ž×©×§ ×¨×©×ª ×¤×¢×™×œ
          s.connect(("8.8.8.8", 80))
          return s.getsockname()[0]
  
  
  def guess_cidr(ip: str) -> str:
      """
      ×’×•×–×¨ ×˜×•×•×— CIDR ×ž×”-IP:
        * â€Ž10.x.x.x  â†’ â€Ž10.0.0.0/8
        * â€Ž172.x.y.z â†’ â€Ž172.x.0.0/16
        * ××—×¨×ª (×œ×¨×•×‘ â€Ž192.168.x.y) â†’ â€Ž192.168.x.0/24
      """
      octets = ip.split(".")
      if ip.startswith("10."):
          return "10.0.0.0/8"
      if ip.startswith("172."):
          return f"{octets[0]}.{octets[1]}.0.0/16"
      # ×‘×¨×™×¨×ª-×ž×—×“×œ â€“ /24
      return f"{octets[0]}.{octets[1]}.{octets[2]}.0/24"
  
  
  # -----------------------------------------------------------
  #  ×¡×¨×™×§×ª Nmap ×•-XML Parsing
  # -----------------------------------------------------------
  def run_nmap(network: str) -> str:
      """×ž×¨×™×¥ nmapâ€Ž-sn ×•×ž×—×–×™×¨ ××ª ×¤×œ×˜-XML ×›-string."""
      nmap_bin = shutil.which("nmap")
      if not nmap_bin:
          sys.exit("âŒ  nmap ×œ× ×ž×•×ª×§×Ÿ ××• ×œ× × ×ž×¦× ×‘-PATH â€“ ×”×ª×§×Ÿ ×•×”×¨×¥ ×©×•×‘.")
      cmd = [nmap_bin, "-sn", network, "-oX", "-"]  # STDOUT â‡’ XML
      res = subprocess.run(cmd, capture_output=True, text=True)
      if res.returncode != 0:
          sys.exit(f"âŒ  nmap × ×›×©×œ ({res.returncode}):\n{res.stderr}")
      return res.stdout
  
  
  def parse_nmap_xml(xml_data: str) -> list[dict]:
      """×ž×¤×¢× ×— ××ª ×”-XML ×•×ž×—×–×™×¨ ×¨×©×™×ž×ª dict-×™×: ip, mac, vendor."""
      hosts = []
      root = ET.fromstring(xml_data)
      for host in root.findall("host"):
          if host.findtext("status/@state", default="down") != "up":
              continue
          ip_elem  = host.find("address[@addrtype='ipv4']")
          mac_elem = host.find("address[@addrtype='mac']")
          hosts.append({
              "ip": ip_elem.attrib["addr"] if ip_elem is not None else None,
              "mac": mac_elem.attrib.get("addr") if mac_elem is not None else None,
              "vendor": mac_elem.attrib.get("vendor") if mac_elem is not None else None,
          })
      return hosts
  
  
  # -----------------------------------------------------------
  #  main â€“ ×”×’×™×•×Ÿ ×¨××©×™
  # -----------------------------------------------------------
  def main() -> None:
      local_ip = get_local_ip()
      cidr     = guess_cidr(local_ip)
      print(f"ðŸ”  ×ž×–×”×” ×¨×©×ª: {cidr}  (×”×ž×—×©×‘: {local_ip})")
      xml_out  = run_nmap(cidr)
      devices  = parse_nmap_xml(xml_out)
  
      if not devices:
          print("×œ× × ×ž×¦××• ×ž×›×©×™×¨×™× (××•×œ×™ ×›×•×œ× ×›×‘×•×™×™× / ×—×¡×•×ž×™×-Ping).")
          return
  
      print("\nðŸ“‹  ×ž×›×©×™×¨×™× ×ž×—×•×‘×¨×™×:")
      for dev in devices:
          vendor = f" ({dev['vendor']})" if dev["vendor"] else ""
          print(f" â€¢ {dev['ip']:15}  {dev['mac'] or '---':17}{vendor}")
  
      # ××¤×©×¨ ×’× ×œ×™×™×¦× JSON ×œ×©×™×ž×•×© ×‘×ª×•×›× ×” ××—×¨×ª:
      # with open("lan_devices.json", "w", encoding="utf-8") as f:
      #     json.dump(devices, f, ensure_ascii=False, indent=2)
  
  
  if __name__ == "__main__":
      main()
ðŸš« node_modules/ (× ×¤×¡×œ ×œ×¡×¨×™×§×”)
ðŸ“„ package-lock.json
ðŸ“„ package.json
ðŸ“ python/
  ðŸ“„ folder_copier_gui.py
    #!/usr/bin/env python3
    # -*- coding: utf-8 -*-
    
    import os
    import sys
    import shutil
    import threading
    import multiprocessing
    from pathlib import Path
    from dataclasses import dataclass
    from typing import Optional, Tuple, Iterable, List
    
    from concurrent.futures import ThreadPoolExecutor, ProcessPoolExecutor, as_completed
    
    import tkinter as tk
    from tkinter import ttk, filedialog, messagebox
    
    EXCLUDED_DIR_NAME = "node_modules"
    
    # =========================== COPY JOB ===========================
    
    @dataclass
    class CopyJob:
        src: str
        dst: str
        overwrite: bool
    
    def copy_file_job(job: CopyJob) -> Tuple[bool, str, str, Optional[str]]:
        try:
            src_path = Path(job.src)
            dst_path = Path(job.dst)
    
            if dst_path.exists() and not job.overwrite:
                return True, job.src, job.dst, None
    
            if src_path.is_symlink():
                try:
                    real = src_path.resolve(strict=True)
                    if real.is_file():
                        shutil.copy2(real, dst_path)
                    return True, job.src, job.dst, None
                except Exception as e:
                    return False, job.src, job.dst, f"symlink error: {e}"
    
            shutil.copy2(src_path, dst_path)
            return True, job.src, job.dst, None
    
        except Exception as e:
            return False, job.src, job.dst, str(e)
    
    
    # =========================== WORKER ===========================
    
    class FastCopyWorker:
        def __init__(self, src: Path, dst: Path, overwrite: bool, mode: str,
                     workers: int, quick_mode: bool, ui_callback):
            self.src = src
            self.dst = dst
            self.overwrite = overwrite
            self.mode = mode
            self.workers = max(1, workers)
            self.quick_mode = quick_mode
            self._cancel = False
            self.ui = ui_callback
    
        def cancel(self):
            self._cancel = True
    
        def start(self):
            try:
                if not self.src.exists():
                    self.ui.fatal("×ª×™×§×™×™×ª ×”×ž×§×•×¨ ×œ× ×§×™×™×ž×ª.")
                    self.ui.finished(False)
                    return
    
                if not self.src.is_dir():
                    self.ui.fatal("×”×ž×§×•×¨ ××™× ×• ×ª×™×§×™×™×”.")
                    self.ui.finished(False)
                    return
    
                if str(self.dst.resolve()).startswith(str(self.src.resolve()) + os.sep):
                    self.ui.fatal("×ª×™×§×™×™×ª ×”×™×¢×“ ×‘×ª×•×š ×ª×™×§×™×™×ª ×”×ž×§×•×¨.")
                    self.ui.finished(False)
                    return
    
                self.dst.mkdir(parents=True, exist_ok=True)
    
                # QUICK
                if self.quick_mode:
                    self.ui.log("×ž×¦×‘ ×ž×”×™×¨: ×ž×ª×—×™×œ ×œ×œ× ×¡×¤×™×¨×” ×ž×•×§×“×ž×ª.")
                    jobs_iter = self._collect_jobs(self.src, self.dst)
                    success = self._execute_streaming(jobs_iter)
                    self.ui.finished(success)
                    return
    
                # ACCURATE
                self.ui.log("×ž×¦×‘ ×ž×“×•×™×§: ×¡×•×¤×¨ ×§×‘×¦×™×â€¦")
                jobs = list(self._collect_jobs(self.src, self.dst))
                total = len(jobs)
                self.ui.total_known(total)
                self.ui.log(f"× ×ž×¦××• {total} ×§×‘×¦×™×.")
    
                success = self._execute_jobs(jobs, total)
                self.ui.finished(success)
    
            except Exception as e:
                self.ui.fatal(f"×©×’×™××”: {e}")
                self.ui.finished(False)
    
        def _collect_jobs(self, src: Path, dst: Path) -> Iterable[CopyJob]:
            for root, dirs, files in os.walk(src, topdown=True, followlinks=False):
                if self._cancel:
                    break
    
                # Skip node_modules
                dirs[:] = [d for d in dirs if d != EXCLUDED_DIR_NAME]
    
                root_path = Path(root)
                rel = root_path.relative_to(src)
                target_dir = dst / rel
                target_dir.mkdir(parents=True, exist_ok=True)
    
                for f in files:
                    if self._cancel:
                        break
                    yield CopyJob(str(root_path / f), str(target_dir / f), self.overwrite)
    
        def _get_executor(self):
            if self.mode == "processes":
                return ProcessPoolExecutor(
                    max_workers=self.workers,
                    mp_context=multiprocessing.get_context("spawn")
                )
            return ThreadPoolExecutor(max_workers=self.workers)
    
        def _execute_jobs(self, jobs: List[CopyJob], total: int):
            copied = 0
            errors = 0
    
            with self._get_executor() as ex:
                futures = [ex.submit(copy_file_job, job) for job in jobs]
    
                for fut in as_completed(futures):
                    if self._cancel:
                        self.ui.log("×‘×•×˜×œ ×¢×œ ×™×“×™ ×”×ž×©×ª×ž×©.")
                        return False
    
                    ok, s, d, err = fut.result()
    
                    if not ok:
                        errors += 1
                        self.ui.log(f"×©×’×™××”: {s} â†’ {d}: {err}")
    
                    copied += 1
                    self.ui.progress(copied, total)
    
            if errors:
                self.ui.log(f"×¡×™×•× ×¢× {errors} ×©×’×™××•×ª.")
                return False
    
            self.ui.log("×”×¡×ª×™×™× ×‘×”×¦×œ×—×”.")
            return True
    
        def _execute_streaming(self, jobs_iter: Iterable[CopyJob]):
            copied = 0
            errors = 0
            inflight = set()
    
            with self._get_executor() as ex:
                for job in jobs_iter:
                    if self._cancel:
                        break
    
                    fut = ex.submit(copy_file_job, job)
                    inflight.add(fut)
    
                    done = [f for f in inflight if f.done()]
                    for f in done:
                        inflight.remove(f)
                        ok, s, d, err = f.result()
                        if not ok:
                            errors += 1
                            self.ui.log(f"×©×’×™××”: {s} â†’ {d}: {err}")
    
                        copied += 1
                        self.ui.progress(copied, 0)
    
                for f in as_completed(inflight):
                    ok, s, d, err = f.result()
                    if not ok:
                        errors += 1
                    copied += 1
                    self.ui.progress(copied, 0)
    
            if errors:
                self.ui.log(f"×¡×™×•× ×¢× {errors} ×©×’×™××•×ª.")
                return False
    
            self.ui.log("×”×¡×ª×™×™× ×‘×”×¦×œ×—×”.")
            return True
    
    
    # =========================== UI ===========================
    
    class TkUI:
        def __init__(self, root):
            self.root = root
            root.title("×ž×¢×ª×™×§ ×ª×™×§×™×•×ª â€” Tk Edition")
            root.geometry("850x600")
    
            self.src_var = tk.StringVar()
            self.dst_var = tk.StringVar()
    
            frm = ttk.Frame(root, padding=10)
            frm.pack(fill="both", expand=True)
    
            # Paths
            ttk.Label(frm, text="×ª×™×§×™×™×ª ×ž×§×•×¨:").grid(row=0, column=0, sticky="w")
            ttk.Entry(frm, textvariable=self.src_var, width=60).grid(row=0, column=1, sticky="we")
            ttk.Button(frm, text="×‘×—×¨", command=self.pick_src).grid(row=0, column=2)
    
            ttk.Label(frm, text="×ª×™×§×™×™×ª ×™×¢×“:").grid(row=1, column=0, sticky="w")
            ttk.Entry(frm, textvariable=self.dst_var, width=60).grid(row=1, column=1, sticky="we")
            ttk.Button(frm, text="×‘×—×¨", command=self.pick_dst).grid(row=1, column=2)
    
            # Options
            self.overwrite_var = tk.BooleanVar()
            self.quick_var = tk.BooleanVar(value=True)
    
            ttk.Checkbutton(frm, text="Overwrite", variable=self.overwrite_var).grid(row=2, column=0, sticky="w")
            ttk.Checkbutton(frm, text="Quick Mode", variable=self.quick_var).grid(row=2, column=1, sticky="w")
    
            ttk.Label(frm, text="×ž×•×“:").grid(row=3, column=0, sticky="w")
            self.mode_cb = ttk.Combobox(frm, values=["threads", "processes"], width=10)
            self.mode_cb.set("threads")
            self.mode_cb.grid(row=3, column=1)
    
            ttk.Label(frm, text="×ž×¡' ×¢×•×‘×“×™×:").grid(row=3, column=2, sticky="w")
            self.workers_var = tk.IntVar(value=8)
            ttk.Entry(frm, textvariable=self.workers_var, width=5).grid(row=3, column=3)
    
            # Progress
            self.prog_lbl = ttk.Label(frm, text="×ž×•×›×Ÿ")
            self.prog_lbl.grid(row=4, column=0, sticky="w")
    
            self.prog_bar = ttk.Progressbar(frm, length=400)
            self.prog_bar.grid(row=4, column=1, columnspan=3, sticky="we")
    
            # Buttons
            ttk.Button(frm, text="×”×ª×—×œ", command=self.start_copy).grid(row=5, column=1)
            self.cancel_btn = ttk.Button(frm, text="×‘×˜×œ", command=self.cancel_copy, state="disabled")
            self.cancel_btn.grid(row=5, column=2)
    
            # Log
            self.log_box = tk.Text(frm, height=15, font=("Consolas", 10))
            self.log_box.grid(row=6, column=0, columnspan=4, sticky="nsew")
    
            frm.rowconfigure(6, weight=1)
            frm.columnconfigure(1, weight=1)
    
            self.worker = None
            self.thread = None
    
        # ======== Worker callbacks: no name conflicts ========
    
        def log(self, text: str):
            self.log_box.insert("end", text + "\n")
            self.log_box.see("end")
    
        def fatal(self, msg: str):
            self.log("âŒ " + msg)
            messagebox.showerror("×©×’×™××”", msg)
    
        def total_known(self, total: int):
            self.prog_bar.configure(maximum=total, value=0)
            self.prog_lbl.config(text=f"×¡×š ×”×›×œ: {total}")
    
        def progress(self, copied: int, total: int):
            if total <= 0:
                self.prog_bar.configure(mode="indeterminate")
                self.prog_lbl.config(text=f"{copied} ×§×‘×¦×™× (×ž×¦×‘ ×ž×”×™×¨)")
            else:
                self.prog_bar.configure(mode="determinate", maximum=total, value=copied)
                self.prog_lbl.config(text=f"{copied}/{total}")
    
        def finished(self, success: bool):
            self.cancel_btn.configure(state="disabled")
            self.thread = None
    
            if success:
                self.prog_lbl.config(text="×”×¡×ª×™×™× ×‘×”×¦×œ×—×”")
            else:
                self.prog_lbl.config(text="×”×¡×ª×™×™× (×©×’×™××•×ª / ×‘×™×˜×•×œ)")
    
        # ======== UI Actions ========
    
        def pick_src(self):
            d = filedialog.askdirectory()
            if d:
                self.src_var.set(d)
    
        def pick_dst(self):
            d = filedialog.askdirectory()
            if d:
                self.dst_var.set(d)
    
        def start_copy(self):
            src = Path(self.src_var.get().strip())
            dst = Path(self.dst_var.get().strip())
    
            if not src or not dst:
                messagebox.showwarning("×©×’×™××”", "×—×™×™×‘ ×œ×‘×—×•×¨ ×’× ×ž×§×•×¨ ×•×’× ×™×¢×“")
                return
            if src == dst:
                messagebox.showerror("×©×’×™××”", "×”×ª×™×§×™×•×ª ×–×”×•×ª")
                return
    
            # clear log
            self.log_box.delete("1.0", "end")
    
            mode = self.mode_cb.get()
            workers = int(self.workers_var.get())
            quick = self.quick_var.get()
    
            self.worker = FastCopyWorker(src, dst, self.overwrite_var.get(),
                                         mode, workers, quick, self)
    
            self.thread = threading.Thread(target=self.worker.start, daemon=True)
            self.thread.start()
    
            self.cancel_btn.configure(state="normal")
    
        def cancel_copy(self):
            if self.worker:
                self.worker.cancel()
                self.log("×ž× ×¡×” ×œ×‘×˜×œ...")
    
    
    # =========================== MAIN ===========================
    
    def main():
        multiprocessing.freeze_support()
        root = tk.Tk()
        app = TkUI(root)
        root.mainloop()
    
    if __name__ == "__main__":
        main()
  ðŸ“„ gooZip.py
    import os
    import shutil
    import zipfile
    import tkinter as tk
    from tkinter import filedialog, messagebox
    
    # ×¨×©×™×ž×ª ×ª×™×§×™×•×ª ×©×™×© ×œ×“×œ×’ ×¢×œ×™×”×Ÿ
    SKIP_DIRS = {"node_modules", ".git", "__pycache__"}
    
    def copy_filtered_directory(src, dst):
        """
        ×ž×¢×ª×™×§ ×ª×™×§×™×™×” ×›×•×œ×œ ×ž×‘× ×”, ×ª×•×š ×“×™×œ×•×’ ×¢×œ ×ª×™×§×™×•×ª ×ž×¡×•×™×ž×•×ª ×œ×¤×™ ×©×.
        """
        for root, dirs, files in os.walk(src):
            # ×—×™×©×•×‘ ×”× ×ª×™×‘ ×”×™×—×¡×™ ×›×“×™ ×œ×©×—×–×¨ ××ª ×”×ž×‘× ×”
            rel_path = os.path.relpath(root, src)
            dest_path = os.path.join(dst, rel_path)
            os.makedirs(dest_path, exist_ok=True)
    
            # ×¡×™× ×•×Ÿ ×ª×™×§×™×•×ª ×œ× ×¨×¦×•×™×•×ª
            dirs[:] = [d for d in dirs if d not in SKIP_DIRS]
    
            # ×”×¢×ª×§×ª ×§×‘×¦×™×
            for file in files:
                src_file = os.path.join(root, file)
                dst_file = os.path.join(dest_path, file)
                try:
                    shutil.copy2(src_file, dst_file)
                except Exception as e:
                    print(f"âŒ ×©×’×™××” ×‘×”×¢×ª×§×” ×©×œ {src_file}: {e}")
    
    def zip_directory(source_dir, zip_path):
        """
        ×™×•×¦×¨ ×§×•×‘×¥ ZIP ×ª×•×š ×©×ž×™×¨×” ×¢×œ ×ž×‘× ×” ×ª×™×§×™×•×ª ×ž×œ×.
        """
        with zipfile.ZipFile(zip_path, 'w', zipfile.ZIP_DEFLATED) as zf:
            for root, _, files in os.walk(source_dir):
                for file in files:
                    abs_path = os.path.join(root, file)
                    rel_path = os.path.relpath(abs_path, source_dir)
                    zf.write(abs_path, arcname=rel_path)
    
    def main():
        # ×‘×—×™×¨×ª ×ª×™×§×™×™×ª ×ž×§×•×¨
        root = tk.Tk()
        root.withdraw()
        src_dir = filedialog.askdirectory(title="×‘×—×¨ ×ª×§×™×™×” ×œ×”×¢×ª×§×” ×•×œ×›×™×•×•×¥")
    
        if not src_dir:
            print("âŒ ×œ× × ×‘×—×¨×” ×ª×§×™×™×”.")
            return
    
        # ×‘×—×™×¨×ª ×™×¢×“ ×œ×§×•×‘×¥ ZIP (×›×•×œ×œ ×©× ×§×•×‘×¥)
        zip_path = filedialog.asksaveasfilename(
            title="×‘×—×¨ ×ž×™×§×•× ×•×©× ×œ×§×•×‘×¥ ×”-ZIP",
            defaultextension=".zip",
            filetypes=[("Zip Files", "*.zip")]
        )
    
        if not zip_path:
            print("âŒ ×œ× × ×‘×—×¨ ×ž×™×§×•× ×œ×©×ž×™×¨×ª ×”-ZIP.")
            return
    
        print(f"\nðŸ“‚ ×ž×§×•×¨: {src_dir}")
        print(f"ðŸ“¦ ×™×¢×“ ZIP: {zip_path}")
    
        # ×™×¦×™×¨×ª ×ª×§×™×™×” ×–×ž× ×™×ª ×œ×”×¢×ª×§×”
        temp_copy_dir = os.path.join(os.path.dirname(zip_path), "_temp_filtered_copy")
        if os.path.exists(temp_copy_dir):
            shutil.rmtree(temp_copy_dir)
        os.makedirs(temp_copy_dir)
    
        # ×”×¢×ª×§×ª ×§×‘×¦×™× ×¢× ×¡×™× ×•×Ÿ ×ª×™×§×™×•×ª
        copy_filtered_directory(src_dir, temp_copy_dir)
    
        # ×™×¦×™×¨×ª ×§×•×‘×¥ ZIP
        zip_directory(temp_copy_dir, zip_path)
    
        # × ×™×§×•×™ ×–×ž× ×™
        shutil.rmtree(temp_copy_dir)
    
        print(f"\nâœ… ×§×•×‘×¥ ZIP × ×•×¦×¨ ×‘×”×¦×œ×—×” ×‘× ×ª×™×‘: {zip_path}")
        messagebox.showinfo("×”×¦×œ×—×”", f"×”×§×•×‘×¥ × ×•×¦×¨ ×‘×”×¦×œ×—×”:\n{zip_path}")
    
    if __name__ == "__main__":
        main()
  ðŸ“„ morrning.py
    # rubiks_visual_solver.py
    # ×ž×¢×¨×›×ª ×•×™×–×•××œ×™×ª ×ª×œ×ªÖ¾×ž×ž×“ ×œ×§×•×‘×™×™×ª ×¨×•×‘×™×§ ×¢× ×¡×§×¨×ž×‘×œ, ×ª× ×•×¢×•×ª, "×¤×ª×¨×•×Ÿ" ×¢"×™ Undo,
    # HUD ×¢×©×™×¨ ×‘×¢×‘×¨×™×ª (×¢×ž×™×“ ×œ×™×•× ×™×§×•×“), ×—×œ×§×™×§×™ × ×™×¦×•×¥, ×¨×§×¢ ×—×™, ×•×ž×—×•×•×ª ×¢×›×‘×¨.
    # ×ª×œ×•×™×•×ª: pygame, PyOpenGL, PyOpenGL_accelerate
    # ×‘×“×•×§ ×‘×¤×™×™×ª×•×Ÿ 3.11+ (×›×•×œ×œ 3.13).
    
    import sys
    import math
    import random
    from dataclasses import dataclass
    from typing import List, Tuple, Optional
    
    import pygame
    from pygame.locals import *
    # × ×¢×“×™×£ freetype ×¢×‘×•×¨ ×¢×‘×¨×™×ª/×™×•× ×™×§×•×“; ×× ××™×Ÿ, × ×™×¤×•×œ ×œ-pygame.font
    try:
        import pygame.freetype as ft
        HAS_FT = True
    except Exception:
        HAS_FT = False
    
    from OpenGL.GL import *
    from OpenGL.GLU import *
    
    # ==========================
    # ×¦×‘×¢×™×, ×§×‘×•×¢×™×, ×¢×–×¨
    # ==========================
    
    COLORS = {
        'U': (0.95, 0.95, 0.95),  # ×œ×‘×Ÿ
        'R': (0.90, 0.10, 0.10),  # ××“×•×
        'F': (0.10, 0.70, 0.10),  # ×™×¨×•×§
        'D': (0.98, 0.90, 0.10),  # ×¦×”×•×‘
        'L': (0.98, 0.55, 0.10),  # ×›×ª×•×
        'B': (0.10, 0.30, 0.95),  # ×›×—×•×œ
        'K': (0.07, 0.07, 0.07),  # ×©×—×•×¨ ×œ×ž×¡×’×¨×•×ª
    }
    
    FACES = ['U', 'R', 'F', 'D', 'L', 'B']
    
    # ×¦×™×•×¨
    STICKER_SIZE = 0.96
    GAP = 0.06
    CUBE_HALF = 1.5
    LINE_W = 2.0
    
    # ×× ×™×ž×¦×™×” ×•×ª×¦×•×’×”
    DEFAULT_FPS = 60
    
    def clamp(v, lo, hi):
        return max(lo, min(hi, v))
    
    def ease_out_cubic(t):  # t in [0,1]
        return 1 - pow(1 - t, 3)
    
    def ease_in_out_quad(t):
        return 2*t*t if t < 0.5 else 1 - pow(-2*t + 2, 2)/2
    
    # ==========================
    # ×ž×¦×‘ ×”×§×•×‘×™×™×” ×•×”×ž×”×œ×›×™×
    # ==========================
    
    def rotate_face_cw(face):
        return [[face[2 - j][i] for j in range(3)] for i in range(3)]
    
    def rotate_face_ccw(face):
        return [[face[j][2 - i] for j in range(3)] for i in range(3)]
    
    @dataclass
    class CubeState:
        U: List[List[str]]
        R: List[List[str]]
        F: List[List[str]]
        D: List[List[str]]
        L: List[List[str]]
        B: List[List[str]]
    
        @staticmethod
        def solved():
            return CubeState(
                U=[[ 'U' for _ in range(3)] for _ in range(3)],
                R=[[ 'R' for _ in range(3)] for _ in range(3)],
                F=[[ 'F' for _ in range(3)] for _ in range(3)],
                D=[[ 'D' for _ in range(3)] for _ in range(3)],
                L=[[ 'L' for _ in range(3)] for _ in range(3)],
                B=[[ 'B' for _ in range(3)] for _ in range(3)],
            )
    
        def copy(self):
            return CubeState(
                U=[row[:] for row in self.U],
                R=[row[:] for row in self.R],
                F=[row[:] for row in self.F],
                D=[row[:] for row in self.D],
                L=[row[:] for row in self.L],
                B=[row[:] for row in self.B],
            )
    
    # --- ×ž×”×œ×›×™× ---
    
    def move_U(s: CubeState):
        s.U = rotate_face_cw(s.U)
        s.F[0], s.R[0], s.B[0], s.L[0] = s.L[0][:], s.F[0][:], s.R[0][:], s.B[0][:]
    
    def move_U_prime(s: CubeState):
        s.U = rotate_face_ccw(s.U)
        s.F[0], s.R[0], s.B[0], s.L[0] = s.R[0][:], s.B[0][:], s.L[0][:], s.F[0][:]
    
    def move_D(s: CubeState):
        s.D = rotate_face_cw(s.D)
        s.F[2], s.L[2], s.B[2], s.R[2] = s.R[2][:], s.F[2][:], s.L[2][:], s.B[2][:]
    
    def move_D_prime(s: CubeState):
        s.D = rotate_face_ccw(s.D)
        s.F[2], s.L[2], s.B[2], s.R[2] = s.L[2][:], s.B[2][:], s.R[2][:], s.F[2][:]
    
    def move_R(s: CubeState):
        s.R = rotate_face_cw(s.R)
        colU = [s.U[i][2] for i in range(3)]
        colF = [s.F[i][2] for i in range(3)]
        colD = [s.D[i][2] for i in range(3)]
        colB = [s.B[i][0] for i in range(3)]
        for i in range(3):
            s.U[i][2] = s.F[i][2]
            s.F[i][2] = s.D[i][2]
            s.D[i][2] = colB[2 - i]
            s.B[i][0] = colU[2 - i]
    
    def move_R_prime(s: CubeState):
        s.R = rotate_face_ccw(s.R)
        colU = [s.U[i][2] for i in range(3)]
        colF = [s.F[i][2] for i in range(3)]
        colD = [s.D[i][2] for i in range(3)]
        colB = [s.B[i][0] for i in range(3)]
        for i in range(3):
            s.U[i][2] = colB[2 - i]
            s.F[i][2] = colU[i]
            s.D[i][2] = colF[i]
            s.B[i][0] = colD[2 - i]
    
    def move_L(s: CubeState):
        s.L = rotate_face_cw(s.L)
        colU = [s.U[i][0] for i in range(3)]
        colF = [s.F[i][0] for i in range(3)]
        colD = [s.D[i][0] for i in range(3)]
        colB = [s.B[i][2] for i in range(3)]
        for i in range(3):
            s.U[i][0] = colB[2 - i]
            s.F[i][0] = colU[i]
            s.D[i][0] = colF[i]
            s.B[i][2] = colD[2 - i]
    
    def move_L_prime(s: CubeState):
        s.L = rotate_face_ccw(s.L)
        colU = [s.U[i][0] for i in range(3)]
        colF = [s.F[i][0] for i in range(3)]
        colD = [s.D[i][0] for i in range(3)]
        colB = [s.B[i][2] for i in range(3)]
        for i in range(3):
            s.U[i][0] = colF[i]
            s.F[i][0] = colD[i]
            s.D[i][0] = colB[2 - i]
            s.B[i][2] = colU[2 - i]
    
    def move_F(s: CubeState):
        s.F = rotate_face_cw(s.F)
        rowU = s.U[2][:]
        colR = [s.R[i][0] for i in range(3)]
        rowD = s.D[0][:]
        colL = [s.L[i][2] for i in range(3)]
        s.U[2] = colL[::-1]
        for i in range(3):
            s.R[i][0] = rowU[i]
        s.D[0] = colR[::-1]
        for i in range(3):
            s.L[i][2] = rowD[i]
    
    def move_F_prime(s: CubeState):
        s.F = rotate_face_ccw(s.F)
        rowU = s.U[2][:]
        colR = [s.R[i][0] for i in range(3)]
        rowD = s.D[0][:]
        colL = [s.L[i][2] for i in range(3)]
        s.U[2] = [colR[i] for i in range(3)]
        for i in range(3):
            s.R[i][0] = rowD[i]
        s.D[0] = [colL[2 - i] for i in range(3)]
        for i in range(3):
            s.L[i][2] = rowU[i]
    
    def move_B(s: CubeState):
        s.B = rotate_face_cw(s.B)
        rowU = s.U[0][:]
        colR = [s.R[i][2] for i in range(3)]
        rowD = s.D[2][:]
        colL = [s.L[i][0] for i in range(3)]
        s.U[0] = [colR[i] for i in range(3)][::-1]
        for i in range(3):
            s.R[i][2] = rowD[i]
        s.D[2] = [colL[i] for i in range(3)][::-1]
        for i in range(3):
            s.L[i][0] = rowU[i]
    
    def move_B_prime(s: CubeState):
        s.B = rotate_face_ccw(s.B)
        rowU = s.U[0][:]
        colR = [s.R[i][2] for i in range(3)]
        rowD = s.D[2][:]
        colL = [s.L[i][0] for i in range(3)]
        s.U[0] = [colL[i] for i in range(3)]
        for i in range(3):
            s.R[i][2] = rowU[i]
        s.D[2] = [colR[i] for i in range(3)]
        for i in range(3):
            s.L[i][0] = rowD[i]
    
    def move_double(fn, s: CubeState):
        fn(s); fn(s)
    
    MOVE_FUNCS = {
        'U' : move_U,  "U'": move_U_prime, 'U2': lambda s: move_double(move_U, s),
        'D' : move_D,  "D'": move_D_prime, 'D2': lambda s: move_double(move_D, s),
        'R' : move_R,  "R'": move_R_prime, 'R2': lambda s: move_double(move_R, s),
        'L' : move_L,  "L'": move_L_prime, 'L2': lambda s: move_double(move_L, s),
        'F' : move_F,  "F'": move_F_prime, 'F2': lambda s: move_double(move_F, s),
        'B' : move_B,  "B'": move_B_prime, 'B2': lambda s: move_double(move_B, s),
    }
    
    def invert_move(m: str) -> str:
        if m.endswith("2"): return m
        return m[:-1] if m.endswith("'") else m + "'"
    
    # ==========================
    # ×¨×™× ×“×•×¨
    # ==========================
    
    def draw_square(color, verts):
        glColor3f(*color)
        glBegin(GL_QUADS)
        for v in verts: glVertex3f(*v)
        glEnd()
    
    def draw_border(verts):
        glColor3f(*COLORS['K'])
        glLineWidth(LINE_W)
        glBegin(GL_LINE_LOOP)
        for v in verts: glVertex3f(*v)
        glEnd()
    
    def vadd(a,b): return (a[0]+b[0], a[1]+b[1], a[2]+b[2])
    def vscale(a,s): return (a[0]*s, a[1]*s, a[2]*s)
    
    def face_plane(face_char):
        H = CUBE_HALF
        if face_char == 'U':
            normal=(0,1,0); base=(0,H,0);    axis_u=(1,0,0);  axis_v=(0,0,-1)
        elif face_char == 'D':
            normal=(0,-1,0); base=(0,-H,0);  axis_u=(1,0,0);  axis_v=(0,0,1)
        elif face_char == 'F':
            normal=(0,0,1); base=(0,0,H);    axis_u=(1,0,0);  axis_v=(0,-1,0)
        elif face_char == 'B':
            normal=(0,0,-1); base=(0,0,-H);  axis_u=(-1,0,0); axis_v=(0,-1,0)
        elif face_char == 'R':
            normal=(1,0,0); base=(H,0,0);    axis_u=(0,0,-1); axis_v=(0,-1,0)
        elif face_char == 'L':
            normal=(-1,0,0); base=(-H,0,0);  axis_u=(0,0,1);  axis_v=(0,-1,0)
        else:
            normal=(0,0,0); base=(0,0,0); axis_u=(1,0,0); axis_v=(0,1,0)
        return normal, base, axis_u, axis_v
    
    def draw_face(face_char: str, face_grid: List[List[str]]):
        _, base, axis_u, axis_v = face_plane(face_char)
        cell = (STICKER_SIZE - GAP) / 3.0
        for r in range(3):
            for c in range(3):
                color = COLORS[face_grid[r][c]]
                du = (c - 1) * cell
                dv = (r - 1) * cell
                center = vadd(base, vadd(vscale(axis_u, du), vscale(axis_v, dv)))
                half = cell/2 - GAP/2
                p1 = vadd(center, vadd(vscale(axis_u, -half), vscale(axis_v, -half)))
                p2 = vadd(center, vadd(vscale(axis_u,  half), vscale(axis_v, -half)))
                p3 = vadd(center, vadd(vscale(axis_u,  half), vscale(axis_v,  half)))
                p4 = vadd(center, vadd(vscale(axis_u, -half), vscale(axis_v,  half)))
                verts = [p1,p2,p3,p4]
                draw_square(color, verts)
                draw_border(verts)
    
    def draw_cube(state: CubeState):
        draw_face('U', state.U)
        draw_face('R', state.R)
        draw_face('F', state.F)
        draw_face('D', state.D)
        draw_face('L', state.L)
        draw_face('B', state.B)
    
    # ==========================
    # HUD ×•×˜×§×¡×˜ (×¢×ž×™×“ ×œ×¢×‘×¨×™×ª)
    # ==========================
    
    class TextRenderer:
        def __init__(self, size=18):
            self.size = size
            self.ft_font = None
            self.pg_font = None
            self._init_fonts()
    
        def _try_ft(self, name, sz):
            if not HAS_FT: return None
            try:
                f = ft.SysFont(name, sz, bold=False)
                r = f.get_rect("×‘×“×™×§×” ×˜×§×¡×˜")
                if r.width > 0: return f
            except Exception:
                pass
            return None
    
        def _try_pg(self, name, sz):
            try:
                f = pygame.font.SysFont(name, sz)
                if f.size("×‘×“×™×§×” ×˜×§×¡×˜")[0] > 0: return f
            except Exception:
                pass
            return None
    
        def _init_fonts(self):
            pygame.font.init()
            candidates = ["Noto Sans Hebrew", "Rubik", "Arial", "Segoe UI", "Tahoma"]
            # × ×¡×” freetype
            for nm in candidates:
                ftf = self._try_ft(nm, self.size)
                if ftf:
                    self.ft_font = ftf
                    return
            # × ×¤×™×œ×” ×œ-pygame.font
            for nm in candidates:
                pgf = self._try_pg(nm, self.size)
                if pgf:
                    self.pg_font = pgf
                    return
            # ××—×¨×•×Ÿ
            if HAS_FT:
                self.ft_font = ft.Font(None, self.size)
            else:
                self.pg_font = pygame.font.Font(None, self.size)
    
        def render(self, surface, text, pos, color=(235,235,240), shadow=True):
            x,y = pos
            if self.ft_font:
                if shadow:
                    self.ft_font.render_to(surface, (x+1,y+1), text, (0,0,0,100))
                self.ft_font.render_to(surface, (x,y), text, color)
            else:
                # pygame.font
                try:
                    s = self.pg_font.render(text, True, color)
                except pygame.error:
                    # ×”×¡×¨×ª ×ª×•×•×™× ×‘×¢×™×™×ª×™×™× ×œ×”×¦×’×” ×•×œ× ×œ×”×¤×™×œ ××ª ×”×ª×•×›× ×™×ª
                    safe = text.encode("ascii","ignore").decode() or "."
                    s = self.pg_font.render(safe, True, color)
                if shadow:
                    sh = self.pg_font.render(text, True, (0,0,0))
                    surface.blit(sh, (x+1,y+1))
                surface.blit(s, (x,y))
    
    # ==========================
    # ×—×œ×§×™×§×™× ×¤×©×•×˜×™× ×œ× ×™×¦×•×¥
    # ==========================
    
    class Particle:
        def __init__(self):
            self.reset()
    
        def reset(self, around=(0,0,0)):
            ax, ay, az = around
            # ×ž×™×§×•× ×§×¨×•×‘ ×œ×§×•×‘×™×™×”
            self.x = ax + random.uniform(-2.2, 2.2)
            self.y = ay + random.uniform(-2.2, 2.2)
            self.z = az + random.uniform(-2.2, 2.2)
            self.vy = random.uniform(0.002, 0.01)
            self.life = random.uniform(1.0, 2.5)
            self.size = random.uniform(0.01, 0.04)
            self.color = (random.uniform(0.7,1.0), random.uniform(0.2,0.6), random.uniform(0.8,1.0))
            self.alive = True
    
        def update(self, dt):
            if not self.alive: return
            self.y += self.vy * dt
            self.life -= 0.001 * dt
            if self.life <= 0:
                self.alive = False
    
        def draw(self):
            if not self.alive: return
            glPointSize(max(1.0, self.size*300))
            glBegin(GL_POINTS)
            glColor4f(self.color[0], self.color[1], self.color[2], clamp(self.life/2.5, 0.15, 0.9))
            glVertex3f(self.x, self.y, self.z)
            glEnd()
    
    # ==========================
    # ×‘×§×¨, ×¡×§×¨×ž×‘×œ, ×ª×•×¨ ×ž×”×œ×›×™×
    # ==========================
    
    class RubiksController:
        def __init__(self):
            self.state = CubeState.solved()
            self.history: List[str] = []  # ×”×™×¡×˜×•×¨×™×™×ª ×ž×”×œ×›×™× (×œ×¤×ª×¨×•×Ÿ Undo)
            self.queue: List[str] = []    # ×ª×•×¨ ×‘×™×¦×•×¢ ×× ×™×ž×˜×™×‘×™
            self.last_scramble: List[str] = []
    
        def do_move(self, m: str, record=True):
            MOVE_FUNCS[m](self.state)
            if record:
                self.history.append(m)
    
        def do_moves(self, moves: List[str], record=True):
            for m in moves:
                self.do_move(m, record=record)
    
        def invert_history(self) -> List[str]:
            return [invert_move(m) for m in reversed(self.history)]
    
        def enqueue(self, moves: List[str], clear_queue=False):
            if clear_queue: self.queue.clear()
            self.queue.extend(moves)
    
        def scramble(self, length=25):
            basics = ['U','D','L','R','F','B']
            suffixes = ['', "'", '2']
            moves = []
            prev_axis = None
            for _ in range(length):
                while True:
                    f = random.choice(basics)
                    suf = random.choice(suffixes)
                    m = f + suf
                    axis = 'UD' if f in ['U','D'] else ('LR' if f in ['L','R'] else 'FB')
                    if axis != prev_axis:
                        prev_axis = axis
                        moves.append(m)
                        break
            # × ×ª×—×™×œ ×ž××™×¤×•×¡ ×›×“×™ ×©×”×™×¡×˜×•×¨×™×™×ª ×”×¤×ª×¨×•×Ÿ ×ª×”×™×” ×‘×“×™×•×§ ×”×¡×§×¨×ž×‘×œ
            self.reset()
            self.do_moves(moves, record=True)
            self.last_scramble = moves[:]
            return moves
    
        def reset(self):
            self.state = CubeState.solved()
            self.history.clear()
            self.queue.clear()
    
    # ==========================
    # ×ž×¦×œ×ž×” ×•×§×œ×˜
    # ==========================
    
    class Camera:
        def __init__(self):
            self.rot_x = 28
            self.rot_y = -40
            self.distance = 6.3
            self._dragging = False
            self._last = (0,0)
            self.auto_orbit = True
            self.orbit_speed = 0.12
    
        def apply(self):
            glTranslatef(0, 0, -self.distance)
            glRotatef(self.rot_x, 1, 0, 0)
            glRotatef(self.rot_y, 0, 1, 0)
    
        def update_auto(self, dt):
            if self.auto_orbit:
                self.rot_y += self.orbit_speed * dt
    
        def mouse_down(self, pos):
            self._dragging = True
            self._last = pos
            self.auto_orbit = False
    
        def mouse_up(self):
            self._dragging = False
    
        def mouse_motion(self, pos):
            if not self._dragging: return
            dx = pos[0] - self._last[0]
            dy = pos[1] - self._last[1]
            self.rot_y += dx * 0.3
            self.rot_x = clamp(self.rot_x + dy * 0.3, -89, 89)
            self._last = pos
    
        def mouse_wheel(self, delta):
            self.distance = clamp(self.distance - delta*0.4, 3.5, 12.0)
    
    # ==========================
    # ××¤×œ×™×§×¦×™×”
    # ==========================
    
    class App:
        def __init__(self, width=1100, height=800):
            pygame.init()
            pygame.display.set_caption("×§×•×‘×™×™×ª ×¨×•×‘×™×§ â€“ ×”×“×ž×™×” ×—×™×” (Undo Solver)")
            pygame.display.set_mode((width, height), DOUBLEBUF | OPENGL)
            self.clock = pygame.time.Clock()
            self.width = width
            self.height = height
    
            # OpenGL ×‘×¡×™×¡×™
            glEnable(GL_DEPTH_TEST)
            glEnable(GL_MULTISAMPLE)
            glEnable(GL_BLEND)
            glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)
            glClearColor(0.06, 0.06, 0.09, 1.0)
    
            gluPerspective(45, (width/height), 0.1, 100.0)
    
            self.controller = RubiksController()
            self.camera = Camera()
            self.txt = TextRenderer(size=18)
    
            # ×× ×™×ž×¦×™×™×ª ×ž×”×œ×›×™×
            self.anim_move: Optional[str] = None
            self.anim_elapsed = 0.0
            self.anim_duration_ms = 220  # × ×™×ª×Ÿ ×œ×©×™× ×•×™ ×¢× A
            self.animating_whole_cube = True  # ×¤×©×˜×•×ª: ×¡×™×‘×•×‘ ×›×œ×œ×™
            self.last_dt = 0
    
            # ×—×œ×§×™×§×™×
            self.particles = [Particle() for _ in range(160)]
    
            # UI ×ž×¦×‘×™×
            self.show_help = True
            self.wireframe = False
    
        # --------- ×¦×™×•×¨×™ ×¨×§×¢/×§×¨×§×¢/×ž×¡×’×¨×ª ---------
    
        def draw_background_quad(self):
            # ×’×¨×“×™×× ×˜ ××•×¤×§×™/××œ×›×¡×•× ×™
            glDisable(GL_DEPTH_TEST)
            glMatrixMode(GL_PROJECTION)
            glPushMatrix()
            glLoadIdentity()
            glOrtho(0, 1, 0, 1, -1, 1)
            glMatrixMode(GL_MODELVIEW)
            glPushMatrix()
            glLoadIdentity()
    
            glBegin(GL_QUADS)
            glColor3f(0.05, 0.06, 0.11)
            glVertex2f(0,0)
            glVertex2f(1,0)
            glColor3f(0.10, 0.11, 0.20)
            glVertex2f(1,1)
            glVertex2f(0,1)
            glEnd()
    
            glPopMatrix()
            glMatrixMode(GL_PROJECTION)
            glPopMatrix()
            glMatrixMode(GL_MODELVIEW)
            glEnable(GL_DEPTH_TEST)
    
        def draw_ground_shadow(self):
            # ×“×™×¡×§ ×›×”×” ×ž×ª×—×ª ×œ×§×•×‘×™×™×”
            glPushMatrix()
            glTranslatef(0, -1.9, 0)
            glRotatef(90, 1, 0, 0)
            glColor4f(0,0,0,0.25)
            glBegin(GL_TRIANGLE_FAN)
            glVertex3f(0,0,0)
            for i in range(64):
                ang = i/64 * math.tau
                glVertex3f(math.cos(ang)*2.2, math.sin(ang)*2.2, 0)
            glEnd()
            glPopMatrix()
    
        # --------- HUD ---------
    
        def draw_panel(self, rect, alpha=110):
            x,y,w,h = rect
            surf = pygame.Surface((w,h), pygame.SRCALPHA)
            pygame.draw.rect(surf, (20,25,35,alpha), (0,0,w,h), border_radius=14)
            pygame.display.get_surface().blit(surf, (x,y))
    
        def draw_hud(self, fps):
            screen = pygame.display.get_surface()
            # ×¤×× ×œ ×¢×œ×™×•×Ÿ
            self.draw_panel((10, 10, self.width-20, 88), alpha=90)
            pad = 18
            self.txt.render(screen, "SPACE=×¡×§×¨×ž×‘×œ   S=×¤×ª×¨×•×Ÿ(Undo)   C=××™×¤×•×¡   A=×ž×”×™×¨×•×ª ×× ×™×ž×¦×™×”   W=Wireframe   H=×¢×–×¨×”   ×¢×›×‘×¨=×¡×™×‘×•×‘/×–×•×", (20, 18))
            self.txt.render(screen, f"×ž×”×œ×›×™× ×‘×”×™×¡×˜×•×¨×™×”: {len(self.controller.history)} | ×‘×ª×•×¨: {len(self.controller.queue)} | ×× ×™×ž×¦×™×”: {self.anim_duration_ms}ms | FPS: {int(fps)}", (20, 42))
            if self.controller.last_scramble:
                scr = " ".join(self.controller.last_scramble[:24])
                self.txt.render(screen, f"×¡×§×¨×ž×‘×œ ××—×¨×•×Ÿ: {scr}{' ...' if len(self.controller.last_scramble)>24 else ''}", (20, 66))
    
            # ×¤×× ×œ ×ª×—×ª×•×Ÿ (×¢×–×¨×”)
            if self.show_help:
                h = 120
                self.draw_panel((10, self.height - h - 10, self.width-20, h), alpha=90)
                y = self.height - h
                lines = [
                    "×ª× ×•×¢×•×ª: U/D/L/R/F/B (Shift+××•×ª = ×’×¨×©), ×•×—×™×¦×™× ×œ×¡×™×‘×•×‘ ×ž×¦×œ×ž×”.",
                    "×’×œ×’×œ×ª ×¢×›×‘×¨ ×œ×–×•×. ×—×™×¦×™×/×’×¨×™×¨×” ×œ×œ×›×™×“×ª ×–×•×•×™×ª.",
                    "×¤×ª×¨×•×Ÿ Undo ×ž×—×–×™×¨ ××ª ×›×œ ×”×ž×”×œ×›×™× ×©× ×¢×©×• ×“×¨×š ×”×ž×¢×¨×›×ª (×›×•×œ×œ ×”×¡×§×¨×ž×‘×œ) â€” ×¤×ª×¨×•×Ÿ ×ž×œ× ×œ×¡×§×¨×ž×‘×œ ×”× ×•×›×—×™.",
                ]
                yy = y + 10
                for ln in lines:
                    self.txt.render(screen, ln, (20, yy))
                    yy += 26
    
            # ×¤×¡ ×”×ª×§×“×ž×•×ª ×§×˜×Ÿ ×‘×–×ž×Ÿ ×ž×”×œ×š
            if self.anim_move is not None:
                prog = clamp(self.anim_elapsed / self.anim_duration_ms, 0.0, 1.0)
                prog = ease_out_cubic(prog)
                bar_w = int((self.width - 40) * prog)
                pygame.draw.rect(screen, (60,180,250,220), (20, 102, bar_w, 6), border_radius=3)
    
        # --------- ×§×œ×˜ ---------
    
        def process_input(self):
            for event in pygame.event.get():
                if event.type == QUIT:
                    pygame.quit(); sys.exit(0)
                elif event.type == KEYDOWN:
                    mod = pygame.key.get_mods()
                    shift = (mod & KMOD_SHIFT) != 0
                    if event.key == K_ESCAPE:
                        pygame.quit(); sys.exit(0)
                    elif event.key == K_SPACE:
                        self.controller.scramble(25)
                    elif event.key == K_s:
                        sol = self.controller.invert_history()
                        self.controller.enqueue(sol, clear_queue=True)
                        self.controller.history.clear()
                    elif event.key == K_c:
                        self.controller.reset()
                    elif event.key == K_a:
                        # ×ž×”×™×¨/××™×˜×™
                        self.anim_duration_ms = 90 if self.anim_duration_ms == 220 else 220
                    elif event.key == K_h:
                        self.show_help = not self.show_help
                    elif event.key == K_w:
                        self.wireframe = not self.wireframe
                        glPolygonMode(GL_FRONT_AND_BACK, GL_LINE if self.wireframe else GL_FILL)
                    elif event.key in (K_LEFT, K_RIGHT, K_UP, K_DOWN):
                        if event.key == K_LEFT:  self.camera.rot_y -= 7
                        if event.key == K_RIGHT: self.camera.rot_y += 7
                        if event.key == K_UP:    self.camera.rot_x -= 7
                        if event.key == K_DOWN:  self.camera.rot_x += 7
                    else:
                        keymap = {K_u:'U', K_d:'D', K_l:'L', K_r:'R', K_f:'F', K_b:'B'}
                        if event.key in keymap:
                            m = keymap[event.key] + ("'" if shift else "")
                            self.controller.enqueue([m])
                elif event.type == MOUSEBUTTONDOWN:
                    if event.button == 1:
                        self.camera.mouse_down(event.pos)
                    elif event.button == 4:  # ×’×œ×’×œ×ª ×œ×ž×¢×œ×”
                        self.camera.mouse_wheel(+1)
                    elif event.button == 5:  # ×’×œ×’×œ×ª ×œ×ž×˜×”
                        self.camera.mouse_wheel(-1)
                elif event.type == MOUSEBUTTONUP:
                    if event.button == 1:
                        self.camera.mouse_up()
                elif event.type == MOUSEMOTION:
                    self.camera.mouse_motion(event.pos)
    
        # --------- ×× ×™×ž×¦×™×™×ª ×ž×”×œ×š ---------
    
        def start_next_animation_if_needed(self):
            if self.anim_move is None and self.controller.queue:
                self.anim_move = self.controller.queue.pop(0)
                self.anim_elapsed = 0.0
    
        def advance_animation(self, dt_ms):
            if self.anim_move is None: return
            self.anim_elapsed += dt_ms
            t = clamp(self.anim_elapsed / self.anim_duration_ms, 0.0, 1.0)
            if t >= 1.0 - 1e-3:
                # ×”×©×œ× ××ª ×”×ž×”×œ×š ×‘×¤×•×¢×œ (×”-state ×›×‘×¨ ×™×ª×¢×“×›×Ÿ)
                MOVE_FUNCS[self.anim_move](self.controller.state)
                self.controller.history.append(self.anim_move)
                self.anim_move = None
                self.anim_elapsed = 0.0
    
        def apply_animation_rotation(self):
            if self.anim_move is None: return
            # ×¤×©×˜×•×ª: ×ž×¡×•×‘×‘ ××ª ×›×œ ×”×§×•×‘×™×™×” ×¡×‘×™×‘ ×¦×™×¨ ×›×œ×œ×™ ×›×“×™ ×œ×ª×ª ×ª×—×•×©×ª ×ª× ×•×¢×”.
            axis_map = {
                'U': (0,1,0), "U'": (0,1,0), 'U2': (0,1,0),
                'D': (0,-1,0), "D'": (0,-1,0), 'D2': (0,-1,0),
                'R': (1,0,0), "R'": (1,0,0), 'R2': (1,0,0),
                'L': (-1,0,0), "L'": (-1,0,0), 'L2': (-1,0,0),
                'F': (0,0,1), "F'": (0,0,1), 'F2': (0,0,1),
                'B': (0,0,-1), "B'": (0,0,-1), 'B2': (0,0,-1),
            }
            ax = axis_map[self.anim_move]
            # ×™×¢×“: 90 ××• 180 ×ž×¢×œ×•×ª; ×›×™×•×•×Ÿ ×œ×¤×™ ×’×¨×©
            target = 180.0 if self.anim_move.endswith("2") else 90.0
            sign = -1.0 if self.anim_move.endswith("'") else 1.0
            t = clamp(self.anim_elapsed / self.anim_duration_ms, 0.0, 1.0)
            ang = ease_in_out_quad(t) * target * sign
            glRotatef(ang, ax[0], ax[1], ax[2])
    
        # --------- ×œ×•×œ××ª ×”×¦×™×•×¨ ---------
    
        def draw_scene(self, dt_ms):
            # ×¨×§×¢ ×“×•Ö¾×ž×ž×“×™
            self.draw_background_quad()
    
            # 3D
            glClear(GL_DEPTH_BUFFER_BIT)
            glPushMatrix()
            self.camera.apply()
            self.camera.update_auto(dt_ms)
    
            # ×¦×œ/×§×¨×§×¢
            self.draw_ground_shadow()
    
            # ×—×œ×§×™×§×™×
            for p in self.particles:
                if not p.alive:
                    p.reset()
                p.update(dt_ms)
                p.draw()
    
            # ×ª××•×¨×” ×ž×–×•×™×¤×ª ×§×œ×” (×©×™× ×•×™ ×‘×”×™×¨×•×ª ×œ×¤×™ ×–×•×•×™×ª)
            glEnable(GL_POLYGON_OFFSET_FILL)
            glPolygonOffset(1.0, 1.0)
    
            # ×¡×™×‘×•×‘ ×× ×™×ž×¦×™×™×ª ×ž×”×œ×š
            glPushMatrix()
            self.apply_animation_rotation()
    
            # ×¦×™×•×¨ ×”×§×•×‘×™×™×”
            draw_cube(self.controller.state)
            glPopMatrix()
    
            glDisable(GL_POLYGON_OFFSET_FILL)
            glPopMatrix()
    
            # HUD
            self.draw_hud(self.clock.get_fps())
            pygame.display.flip()
    
        # --------- ×¨×™×¦×” ---------
    
        def run(self):
            while True:
                dt_ms = self.clock.tick(DEFAULT_FPS)
                self.last_dt = dt_ms
                self.process_input()
                self.start_next_animation_if_needed()
                self.advance_animation(dt_ms)
                self.draw_scene(dt_ms)
    
    # ==========================
    # main
    # ==========================
    
    def main():
        try:
            App().run()
        except Exception as e:
            # ×”×“×¤×¡×” ×™×“×™×“×•×ª×™×ª â€” ×‘×œ×™ ×œ×”×¤×™×œ ××ª ×—×œ×•×Ÿ ×”×ž×¡×•×£ ×‘×©×§×˜
            print("××™×¨×¢×” ×©×’×™××”:", e)
            try:
                pygame.quit()
            except Exception:
                pass
    
    if __name__ == "__main__":
        main()
  ðŸ“„ net.py
    #!/usr/bin/env python3
    """
    scan_lan.py â€“ ×¡×¨×™×§×” ×ž×”×™×¨×” ×©×œ ×›×œ ×”×ž×›×©×™×¨×™× ×‘×¨×©×ª-LAN ×”×ž×§×•×ž×™×ª.
    
    ×ª×œ×•×™×•×™×•×ª:
    1.  nmap   â€“ ×™×© ×œ×”×ª×§×™×Ÿ ×‘×ž×—×©×‘ (https://nmap.org/download.html)
    2.  Python 3.x (××™×Ÿ ×¡×¤×¨×™×•×ª × ×™×— ×”×—×¦×“ ×©×œ×™×©×™ â€“ ×¨×§ stdlib)
    
    ×”×¤×¢×œ×”:
        python scan_lan.py
    """
    import json
    import os
    import shutil
    import socket
    import subprocess
    import sys
    import xml.etree.ElementTree as ET
    
    
    # -----------------------------------------------------------
    #  ×›×œ×™ ×¢×–×¨: ××™×ª×•×¨ ×›×ª×•×‘×ª IP ×ž×§×•×ž×™×ª ×•×”×¡×§×ª ×˜×•×•×— CIDR ×¡×‘×™×¨
    # -----------------------------------------------------------
    def get_local_ip() -> str:
        """×ž×—×–×™×¨ ××ª ×›×ª×•×‘×ª IP ×©×œ ×”×ž×—×©×‘ ×‘×¨×©×ª ×”×ž×§×•×ž×™×ª."""
        with socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as s:
            # "×ž×ª×—×‘×¨" ×œ-8.8.8.8 ×›×“×™ ×©×”-OS ×™×‘×—×¨ ×ž×ž×©×§ ×¨×©×ª ×¤×¢×™×œ
            s.connect(("8.8.8.8", 80))
            return s.getsockname()[0]
    
    
    def guess_cidr(ip: str) -> str:
        """
        ×’×•×–×¨ ×˜×•×•×— CIDR ×ž×”-IP:
          * â€Ž10.x.x.x  â†’ â€Ž10.0.0.0/8
          * â€Ž172.x.y.z â†’ â€Ž172.x.0.0/16
          * ××—×¨×ª (×œ×¨×•×‘ â€Ž192.168.x.y) â†’ â€Ž192.168.x.0/24
        """
        octets = ip.split(".")
        if ip.startswith("10."):
            return "10.0.0.0/8"
        if ip.startswith("172."):
            return f"{octets[0]}.{octets[1]}.0.0/16"
        # ×‘×¨×™×¨×ª-×ž×—×“×œ â€“ /24
        return f"{octets[0]}.{octets[1]}.{octets[2]}.0/24"
    
    
    # -----------------------------------------------------------
    #  ×¡×¨×™×§×ª Nmap ×•-XML Parsing
    # -----------------------------------------------------------
    def run_nmap(network: str) -> str:
        """×ž×¨×™×¥ nmapâ€Ž-sn ×•×ž×—×–×™×¨ ××ª ×¤×œ×˜-XML ×›-string."""
        nmap_bin = shutil.which("nmap")
        if not nmap_bin:
            sys.exit("âŒ  nmap ×œ× ×ž×•×ª×§×Ÿ ××• ×œ× × ×ž×¦× ×‘-PATH â€“ ×”×ª×§×Ÿ ×•×”×¨×¥ ×©×•×‘.")
        cmd = [nmap_bin, "-sn", network, "-oX", "-"]  # STDOUT â‡’ XML
        res = subprocess.run(cmd, capture_output=True, text=True)
        if res.returncode != 0:
            sys.exit(f"âŒ  nmap × ×›×©×œ ({res.returncode}):\n{res.stderr}")
        return res.stdout
    
    
    def parse_nmap_xml(xml_data: str) -> list[dict]:
        """×ž×¤×¢× ×— ××ª ×”-XML ×•×ž×—×–×™×¨ ×¨×©×™×ž×ª dict-×™×: ip, mac, vendor."""
        hosts = []
        root = ET.fromstring(xml_data)
        for host in root.findall("host"):
            if host.findtext("status/@state", default="down") != "up":
                continue
            ip_elem  = host.find("address[@addrtype='ipv4']")
            mac_elem = host.find("address[@addrtype='mac']")
            hosts.append({
                "ip": ip_elem.attrib["addr"] if ip_elem is not None else None,
                "mac": mac_elem.attrib.get("addr") if mac_elem is not None else None,
                "vendor": mac_elem.attrib.get("vendor") if mac_elem is not None else None,
            })
        return hosts
    
    
    # -----------------------------------------------------------
    #  main â€“ ×”×’×™×•×Ÿ ×¨××©×™
    # -----------------------------------------------------------
    def main() -> None:
        local_ip = get_local_ip()
        cidr     = guess_cidr(local_ip)
        print(f"ðŸ”  ×ž×–×”×” ×¨×©×ª: {cidr}  (×”×ž×—×©×‘: {local_ip})")
        xml_out  = run_nmap(cidr)
        devices  = parse_nmap_xml(xml_out)
    
        if not devices:
            print("×œ× × ×ž×¦××• ×ž×›×©×™×¨×™× (××•×œ×™ ×›×•×œ× ×›×‘×•×™×™× / ×—×¡×•×ž×™×-Ping).")
            return
    
        print("\nðŸ“‹  ×ž×›×©×™×¨×™× ×ž×—×•×‘×¨×™×:")
        for dev in devices:
            vendor = f" ({dev['vendor']})" if dev["vendor"] else ""
            print(f" â€¢ {dev['ip']:15}  {dev['mac'] or '---':17}{vendor}")
    
        # ××¤×©×¨ ×’× ×œ×™×™×¦× JSON ×œ×©×™×ž×•×© ×‘×ª×•×›× ×” ××—×¨×ª:
        # with open("lan_devices.json", "w", encoding="utf-8") as f:
        #     json.dump(devices, f, ensure_ascii=False, indent=2)
    
    
    if __name__ == "__main__":
        main()
  ðŸ“„ simpel.py
    import os
    import tkinter as tk
    from tkinter import filedialog, messagebox
    
    MAX_DEPTH = 5
    SKIP_DIRS = {"node_modules", ".git", "__pycache__","package-lock.json"}
    PRINT_CONTENT_EXTENSIONS = {".py", ".js", ".ts", ".jsx", ".tsx", ".html", ".css",".prisma", ".mjs", ".cjs", ".env", ".md", "Dockerfile","docker-compose.yml", ".jsonc", ".eslintrc.json", "tsconfig.json"}
    
    
    def scan_directory(path, indent=0, output_lines=None, current_depth=0, print_content=False):
        if output_lines is None:
            output_lines = []
    
        if current_depth > MAX_DEPTH:
            output_lines.append("  " * indent + "ðŸ”½ ... (×¢×•×“ ×ª×™×§×™×•×ª ×”×•×¡×ª×¨×•)")
            return output_lines
    
        try:
            items = sorted(os.listdir(path))
        except PermissionError:
            output_lines.append("  " * indent + f"[â›” ××™×Ÿ ×”×¨×©××”]: {path}")
            return output_lines
    
        for item in items:
            full_path = os.path.join(path, item)
    
            if os.path.isdir(full_path) and item in SKIP_DIRS:
                print(f"â­ï¸ ×ž×“×œ×’ ×¢×œ ×ª×™×§×™×™×”: {full_path}")
                output_lines.append("  " * indent + f"ðŸš« {item}/ (× ×¤×¡×œ ×œ×¡×¨×™×§×”)")
                continue
    
            print(f"â–¶ï¸ ×¡×•×¨×§: {full_path}")
    
            if os.path.isdir(full_path):
                output_lines.append("  " * indent + f"ðŸ“ {item}/")
                scan_directory(full_path, indent + 1, output_lines, current_depth + 1, print_content)
            else:
                output_lines.append("  " * indent + f"ðŸ“„ {item}")
                ext = os.path.splitext(item)[1].lower()
                if print_content and ext in PRINT_CONTENT_EXTENSIONS:
                    try:
                        with open(full_path, "r", encoding="utf-8", errors="ignore") as f:
                            lines = f.readlines()
                            for line in lines:
                                output_lines.append("  " * (indent + 1) + line.rstrip())
                    except Exception as e:
                        output_lines.append("  " * (indent + 1) + f"[×©×’×™××” ×‘×§×¨×™××”: {e}]")
    
        return output_lines
    
    def ask_include_content():
        root = tk.Tk()
        root.withdraw()
        result = messagebox.askyesno(
            "×”×× ×œ×›×œ×•×œ ×ª×•×›×Ÿ ×§×‘×¦×™×?",
            "×”×× ××ª×” ×¨×•×¦×” ×©×”×§×•×“ ×™×“×¤×™×¡ ×’× ××ª ×ª×•×›×Ÿ ×§×‘×¦×™ ×”×§×•×“ (×•×œ× ×¨×§ ××ª ×©×ž×•×ª×™×”×)?"
        )
        return result
    
    def main():
        root = tk.Tk()
        root.withdraw()
        folder_path = filedialog.askdirectory(title="×‘×—×¨ ×ª×§×™×™×” ×œ×¡×¨×™×§×”")
    
        if not folder_path:
            print("âŒ ×œ× × ×‘×—×¨×” ×ª×§×™×™×”.")
            return
    
        include_content = ask_include_content()
        print(f"\nðŸ“‚ ×¡×•×¨×§ ××ª: {folder_path} (×¢×“ ×¢×•×ž×§ {MAX_DEPTH})")
        print(f"ðŸ“„ ×›×•×œ×œ ×ª×•×›×Ÿ ×§×‘×¦×™×: {'×›×Ÿ' if include_content else '×œ×'}\n")
    
        structure_lines = scan_directory(folder_path, print_content=include_content)
    
        print("\nðŸ“‹ ×ž×‘× ×” ×ž×œ×:\n")
        for line in structure_lines:
            print(line)
    
        output_file = os.path.join(folder_path, "directory_structure.txt")
        with open(output_file, "w", encoding="utf-8") as f:
            f.write("\n".join(structure_lines))
    
        print(f"\nâœ… × ×©×ž×¨ ×‘: {output_file}")
    
    if __name__ == "__main__":
        main()
  ðŸ“„ skriptName.py
    import os
    import tkinter as tk
    from tkinter import filedialog, messagebox
    from datetime import datetime
    
    # ×¢×•×ž×§ ×ž×§×¡×™×ž×œ×™
    MAX_DEPTH = 7
    
    # ×ª×™×§×™×•×ª ×©×ž×•×ª×¨ ×œ×¡×¨×•×§ ×‘×¨×ž×” ×”×¢×œ×™×•× ×” ×‘×œ×‘×“
    ALLOWED_ROOT_DIRS = {"client", "server"}
    
    # ×ª×™×§×™×•×ª ×©×™×© ×œ×“×œ×’ ×¢×œ×™×”×Ÿ ×‘×ª×•×š client/server
    SKIP_DIRS = {"node_modules", ".git", "__pycache__", "package-lock.json", ".venv",".wwebjs_cache",".wwebjs_auth"}
    
    # ×§×‘×¦×™× ×©×™×© ×œ×“×œ×’ ×¢×œ×™×”×
    SKIP_FILES = {
        "index-DEKCV7q4.js","×ª×™×¢×•×“"
    }
    
    # ×¡×™×•×ž×•×ª ×©×ž×•×ª×¨ ×œ×”×¦×™×’
    PRINT_CONTENT_EXTENSIONS = {".js", ".ts", ".html", ".css", ".jsx", ".md"}
    
    
    def scan_directory(path, indent=0, output_lines=None, current_depth=0, print_content=False):
        if output_lines is None:
            output_lines = []
    
        # ×¢×•×ž×§ ×ž×§×¡×™×ž×œ×™
        if current_depth > MAX_DEPTH:
            output_lines.append("  " * indent + "ðŸ”½ ... (×”×¢×•×ž×§ ×”×’×™×¢ ×œ×ž×§×¡×™×ž×•×)")
            return output_lines
    
        try:
            items = sorted(os.listdir(path))
        except Exception as e:
            output_lines.append("  " * indent + f"[×©×’×™××” ×‘×’×™×©×”]: {e}")
            return output_lines
    
        for item in items:
            full_path = os.path.join(path, item)
    
            # ×©×œ×‘ 1: ×‘×¨×ž×” ×”×¨××©×•× ×”, ×œ× ×œ×¡×¨×•×§ ×©×•× ×“×‘×¨ ×—×•×¥ ×ž-client/server
            if indent == 0 and item not in ALLOWED_ROOT_DIRS:
                continue
    
            # ×©×œ×‘ 2: ×“×™×œ×•×’ ×¢×œ ×ª×™×§×™×•×ª ××¡×•×¨×•×ª
            if os.path.isdir(full_path) and item in SKIP_DIRS:
                output_lines.append("  " * indent + f"ðŸš« {item}/ (× ×¤×¡×œ ×œ×¡×¨×™×§×”)")
                continue
    
            # ×©×œ×‘ 3: ×“×™×œ×•×’ ×¢×œ ×§×‘×¦×™× ××¡×•×¨×™×
            if not os.path.isdir(full_path) and item in SKIP_FILES:
                output_lines.append("  " * indent + f"ðŸš« {item} (× ×¤×¡×œ ×œ×¡×¨×™×§×”)")
                continue
    
            # ×ª×™×§×™×™×” ×¨×’×™×œ×”
            if os.path.isdir(full_path):
                output_lines.append("  " * indent + f"ðŸ“ {item}/")
                scan_directory(full_path, indent + 1, output_lines, current_depth + 1, print_content)
    
            # ×§×•×‘×¥
            else:
                ext = os.path.splitext(item)[1].lower()
    
                if ext not in PRINT_CONTENT_EXTENSIONS:
                    continue
    
                output_lines.append("  " * indent + f"ðŸ“„ {item}")
    
                if print_content:
                    try:
                        with open(full_path, "r", encoding="utf-8", errors="ignore") as f:
                            for line in f:
                                output_lines.append("  " * (indent + 1) + line.rstrip())
                    except Exception as e:
                        output_lines.append("  " * (indent + 1) + f"[×©×’×™××” ×‘×§×¨×™××”: {e}]")
    
        return output_lines
    
    
    def ask_include_content():
        root = tk.Tk()
        root.withdraw()
        result = messagebox.askyesno(
            "×”×× ×œ×›×œ×•×œ ×ª×•×›×Ÿ ×§×‘×¦×™×?",
            "×œ×›×œ×•×œ ××ª ×ª×•×›×Ÿ ×§×‘×¦×™ ×”×§×•×“ (×•×œ× ×¨×§ ××ª ×©×ž×•×ª×™×”×)?"
        )
        root.destroy()
        return result
    
    
    def main():
        root = tk.Tk()
        root.withdraw()
    
        folder_path = filedialog.askdirectory(title="×‘×—×¨ ×ª×§×™×™×” ×œ×¡×¨×™×§×”")
    
        if not folder_path:
            print("âŒ ×œ× × ×‘×—×¨×” ×ª×§×™×™×”.")
            return
    
        include_content = ask_include_content()
        print(f"\nðŸ“‚ ×¡×•×¨×§ ××ª: {folder_path}")
    
        structure_lines = scan_directory(folder_path, print_content=include_content)
    
        print("\nðŸ“‹ ×”×¡×¨×™×§×” ×”×¡×ª×™×™×ž×”. ×©×•×ž×¨ ×§×‘×¦×™×...")
    
        # ×™×¦×™×¨×ª ×©× ×§×•×‘×¥ ×“×™× ×ž×™ ×œ×¤×™ ×ª××¨×™×š ×•×©×¢×”
        timestamp = datetime.now().strftime("%d%m%y%H%M")
        filename = f"{timestamp}.txt"
    
        # × ×ª×™×‘×™ ×©×ž×™×¨×”
        desktop_path = os.path.join(os.path.expanduser("~"), "Desktop")
        custom_path = r"G:\×”××—×¡×•×Ÿ ×©×œ×™\update"
    
        output_file_desktop = os.path.join(desktop_path, filename)
        output_file_custom = os.path.join(custom_path, filename)
    
        try:
            # ×©×ž×™×¨×” ×œ×©×•×œ×—×Ÿ ×¢×‘×•×“×”
            with open(output_file_desktop, "w", encoding="utf-8") as f:
                f.write("\n".join(structure_lines))
    
            # ×©×ž×™×¨×” ×œ×ª×™×§×™×™×” ×©×”×’×“×¨×ª
            with open(output_file_custom, "w", encoding="utf-8") as f:
                f.write("\n".join(structure_lines))
    
            print(f"\nâœ… × ×©×ž×¨ ×‘×”×¦×œ×—×” ×’× ×‘×©×•×œ×—×Ÿ ×”×¢×‘×•×“×” ×•×’× ×‘×ª×™×§×™×™×” ×©×œ×š:")
            print(output_file_desktop)
            print(output_file_custom)
    
            messagebox.showinfo(
                "×”×¦×œ×—×”",
                f"×”×§×•×‘×¥ × ×©×ž×¨ ×‘×”×¦×œ×—×”:\n\n"
                f"{output_file_desktop}\n"
                f"{output_file_custom}"
            )
    
        except Exception as e:
            print(f"\nâŒ ×©×’×™××” ×‘×©×ž×™×¨×”: {e}")
            messagebox.showerror("×©×’×™××”", f"×œ× ×”×¦×œ×—×ª×™ ×œ×©×ž×•×¨ ××ª ×”×§×•×‘×¥:\n{e}")
    
    
    if __name__ == "__main__":
        main()
  ðŸ“„ to_copy.py
    import os
    import shutil
    import tkinter as tk
    from tkinter import filedialog, messagebox
    
    # --- ×”×’×“×¨×•×ª ×’×œ×•×‘×œ×™×•×ª ---
    
    # ×¢×•×ž×§ ×ž×§×¡×™×ž×œ×™ (×œ×¡×¨×™×§×ª ×”×˜×§×¡×˜ ×‘×œ×‘×“)
    MAX_DEPTH = 7
    
    # ×ª×™×§×™×•×ª ×©×™×© ×œ×“×œ×’ ×¢×œ×™×”×Ÿ (×’× ×‘×”×¢×ª×§×” ×•×’× ×‘×¡×¨×™×§×”)
    SKIP_DIRS = {"node_modules", ".git", "__pycache__", "package-lock.json", ".venv"}
    
    # ×§×‘×¦×™× ×©×™×© ×œ×“×œ×’ ×¢×œ×™×”× (×’× ×‘×”×¢×ª×§×” ×•×’× ×‘×¡×¨×™×§×”)
    SKIP_FILES = {
        "index-DEKCV7q4.js",
    }
    
    # ×¡×™×•×ž×•×ª ×©×ž×•×ª×¨ ×œ×”×¦×™×’ (×¨×§ ×‘×¡×¨×™×§×ª ×”×˜×§×¡×˜)
    PRINT_CONTENT_EXTENSIONS = {".js", ".ts", ".html", ".css", ".jsx", ".md"}
    
    
    # --- ×¤×•× ×§×¦×™×” 1: ×”×¢×ª×§×” ×ž×¡×•× × ×ª ---
    
    def copy_filtered_directory(src_path, dest_path, indent=0, stats=None):
        """
        ×ž×¢×ª×™×§ ×ª×™×§×™×™×” ×©×œ×ž×”, ×ª×•×š ×“×™×œ×•×’ ×¢×œ ×ª×™×§×™×•×ª ×•×§×‘×¦×™× ×‘×¨×©×™×ž×•×ª ×”-SKIP.
        """
        if stats is None:
            stats = {'copied': 0, 'skipped': 0, 'errors': 0}
    
        try:
            if not os.path.exists(dest_path):
                os.makedirs(dest_path, exist_ok=True)
    
            items = sorted(os.listdir(src_path))
        except Exception as e:
            print("  " * indent + f"[×©×’×™××” ×‘×’×™×©×” ×œ-{src_path}]: {e}")
            stats['errors'] += 1
            return stats
    
        for item in items:
            full_src_path = os.path.join(src_path, item)
            full_dest_path = os.path.join(dest_path, item)
    
            # ×‘×“×™×§×” ×× ×–×• ×ª×™×§×™×™×”
            if os.path.isdir(full_src_path):
                # ×©×œ×‘ 1: ×“×™×œ×•×’ ×¢×œ ×ª×™×§×™×•×ª ××¡×•×¨×•×ª
                if item in SKIP_DIRS:
                    print("  " * indent + f"ðŸš« {item}/ (×ž×“×œ×’ ×‘×”×¢×ª×§×”)")
                    stats['skipped'] += 1
                    continue
    
                # ×ª×™×§×™×™×” ×ž×•×ª×¨×ª - ×”×ž×©×š ×¨×§×•×¨×¡×™×‘×™
                copy_filtered_directory(full_src_path, full_dest_path, indent + 1, stats)
    
            # ×–×” ×§×•×‘×¥
            else:
                # ×©×œ×‘ 2: ×“×™×œ×•×’ ×¢×œ ×§×‘×¦×™× ××¡×•×¨×™×
                if item in SKIP_FILES:
                    print("  " * indent + f"ðŸš« {item} (×ž×“×œ×’ ×‘×”×¢×ª×§×”)")
                    stats['skipped'] += 1
                    continue
    
                # ×§×•×‘×¥ ×ž×•×ª×¨ - ×”×¢×ª×§ ××•×ª×•
                try:
                    # ×™×¦×™×¨×ª ×ª×™×§×™×™×ª ××‘ ×× ×¦×¨×™×š
                    os.makedirs(os.path.dirname(full_dest_path), exist_ok=True)
                    shutil.copy2(full_src_path, full_dest_path)
                    stats['copied'] += 1
                except Exception as e:
                    print("  " * indent + f"âŒ ×©×’×™××” ×‘×”×¢×ª×§×ª {item}: {e}")
                    stats['errors'] += 1
    
        return stats
    
    # --- ×¤×•× ×§×¦×™×” 2: ×¡×¨×™×§×ª ×ž×‘× ×” (×ž×”×¡×§×¨×™×¤×˜ ×”×ž×§×•×¨×™ ×©×œ×š) ---
    
    def scan_directory(path, indent=0, output_lines=None, current_depth=0, print_content=False):
        """
        ×¡×•×¨×§ ××ª ×ž×‘× ×” ×”×ª×™×§×™×™×” ×•×™×•×¦×¨ ×¨×©×™×ž×ª ×˜×§×¡×˜.
        """
        if output_lines is None:
            output_lines = []
    
        if current_depth > MAX_DEPTH:
            output_lines.append("  " * indent + "ðŸ”½ ... (×”×¢×•×ž×§ ×”×’×™×¢ ×œ×ž×§×¡×™×ž×•×)")
            return output_lines
    
        try:
            items = sorted(os.listdir(path))
        except Exception as e:
            output_lines.append("  " * indent + f"[×©×’×™××” ×‘×’×™×©×”]: {e}")
            return output_lines
    
        for item in items:
            full_path = os.path.join(path, item)
    
            # ×©×œ×‘ 1: ×“×™×œ×•×’ ×¢×œ ×ª×™×§×™×•×ª ××¡×•×¨×•×ª
            if os.path.isdir(full_path) and item in SKIP_DIRS:
                output_lines.append("  " * indent + f"ðŸš« {item}/ (× ×¤×¡×œ ×œ×¡×¨×™×§×”)")
                continue
    
            # ×©×œ×‘ 2: ×“×™×œ×•×’ ×¢×œ ×§×‘×¦×™× ××¡×•×¨×™×
            if not os.path.isdir(full_path) and item in SKIP_FILES:
                output_lines.append("  " * indent + f"ðŸš« {item} (× ×¤×¡×œ ×œ×¡×¨×™×§×”)")
                continue
    
            # ×ª×™×§×™×™×” ×¨×’×™×œ×”
            if os.path.isdir(full_path):
                output_lines.append("  " * indent + f"ðŸ“ {item}/")
                scan_directory(full_path, indent + 1, output_lines, current_depth + 1, print_content)
    
            # ×§×•×‘×¥
            else:
                ext = os.path.splitext(item)[1].lower()
                if ext not in PRINT_CONTENT_EXTENSIONS:
                    continue  # ×ž×“×œ×’ ×¢×œ ×§×‘×¦×™× ×œ× ×¨×œ×•×•× ×˜×™×™× (×›×ž×• ×ª×ž×•× ×•×ª) ×‘×¡×¨×™×§×”
    
                output_lines.append("  " * indent + f"ðŸ“„ {item}")
    
                if print_content:
                    try:
                        with open(full_path, "r", encoding="utf-8", errors="ignore") as f:
                            for line in f:
                                output_lines.append("  " * (indent + 1) + line.rstrip())
                    except Exception as e:
                        output_lines.append("  " * (indent + 1) + f"[×©×’×™××” ×‘×§×¨×™××”: {e}]")
    
        return output_lines
    
    
    # --- ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ (×ž×”×¡×§×¨×™×¤×˜ ×”×ž×§×•×¨×™) ---
    
    def ask_include_content():
        root = tk.Tk()
        root.withdraw()
        result = messagebox.askyesno(
            "×©×œ×‘ 2: ×”×× ×œ×›×œ×•×œ ×ª×•×›×Ÿ ×§×‘×¦×™×?",
            "×”×”×¢×ª×§×” ×”×¡×ª×™×™×ž×”.\n×›×¢×ª × ×¡×¨×•×§ ××ª ×”×ª×™×§×™×™×” ×”×—×“×©×”.\n\n×”×× ×œ×›×œ×•×œ ××ª ×ª×•×›×Ÿ ×§×‘×¦×™ ×”×§×•×“ (×•×œ× ×¨×§ ××ª ×©×ž×•×ª×™×”×)?"
        )
        root.destroy()
        return result
    
    
    # --- ×¤×•× ×§×¦×™×” ×¨××©×™×ª (Main) ---
    
    def main():
        root = tk.Tk()
        root.withdraw()
    
        # --- ×—×œ×§ 1: ×‘×—×™×¨×ª ×ª×™×§×™×•×ª ---
        source_path = filedialog.askdirectory(title="×©×œ×‘ 1: ×‘×—×¨ ×ª×™×§×™×™×ª ×ž×§×•×¨ (×ž××™×¤×” ×œ×”×¢×ª×™×§)")
        if not source_path:
            print("âŒ ×‘×•×˜×œ - ×œ× × ×‘×—×¨×” ×ª×™×§×™×™×ª ×ž×§×•×¨.")
            return
    
        dest_path = filedialog.askdirectory(title="×©×œ×‘ 1: ×‘×—×¨ ×ª×™×§×™×™×ª ×™×¢×“ (×œ××Ÿ ×œ×”×¢×ª×™×§)")
        if not dest_path:
            print("âŒ ×‘×•×˜×œ - ×œ× × ×‘×—×¨×” ×ª×™×§×™×™×ª ×™×¢×“.")
            return
    
        if os.path.normpath(source_path) == os.path.normpath(dest_path):
            messagebox.showerror("×©×’×™××”", "×ª×™×§×™×™×ª ×”×ž×§×•×¨ ×•×ª×™×§×™×™×ª ×”×™×¢×“ ×œ× ×™×›×•×œ×•×ª ×œ×”×™×•×ª ×–×”×•×ª.")
            return
    
        # --- ×—×œ×§ 2: ×‘×™×¦×•×¢ ×”×”×¢×ª×§×” ---
        print(f"\n--- ×©×œ×‘ 1: ×ž×ª×—×™×œ ×”×¢×ª×§×” ×ž×¡×•× × ×ª ---")
        print(f"   ×ž×§×•×¨: {source_path}")
        print(f"   ×™×¢×“:  {dest_path}\n")
    
        copy_stats = copy_filtered_directory(source_path, dest_path)
    
        print(f"\n--- ×¡×™×•× ×©×œ×‘ 1: ×”×”×¢×ª×§×” ×”×•×©×œ×ž×” ---")
        print(f"   ×§×‘×¦×™× ×©×”×•×¢×ª×§×•: {copy_stats['copied']}")
        print(f"   ×¤×¨×™×˜×™× ×©×“×•×œ×’×•: {copy_stats['skipped']}")
        print(f"   ×©×’×™××•×ª: {copy_stats['errors']}")
    
        # --- ×—×œ×§ 3: ×‘×™×¦×•×¢ ×”×¡×¨×™×§×” ---
        print(f"\n--- ×©×œ×‘ 2: ×ž×ª×—×™×œ ×¡×¨×™×§×ª ×ž×‘× ×” ---")
        print(f"   ×¡×•×¨×§ ××ª ×ª×™×§×™×™×ª ×”×™×¢×“: {dest_path}")
    
        include_content = ask_include_content()
        structure_lines = scan_directory(dest_path, print_content=include_content)
    
        print("--- ×¡×™×•× ×©×œ×‘ 2: ×”×¡×¨×™×§×” ×”×•×©×œ×ž×”. ×©×•×ž×¨ ×§×•×‘×¥ ×¡×™×›×•×... ---")
    
        # --- ×—×œ×§ 4: ×©×ž×™×¨×ª ×§×•×‘×¥ ×”×¡×™×›×•× ---
        try:
            # ×—×™×©×•×‘ ×©× ×•× ×ª×™×‘ ×”×§×•×‘×¥ ×œ×¤×™ ×”×“×¨×™×©×” ×©×œ×š
            dest_folder_name = os.path.basename(os.path.normpath(dest_path))
            parent_dir = os.path.dirname(os.path.normpath(dest_path))
            output_file_name = f"{dest_folder_name}.txt"
            output_file_path = os.path.join(parent_dir, output_file_name)
    
            with open(output_file_path, "w", encoding="utf-8") as f:
                f.write("\n".join(structure_lines))
    
            success_msg = (
                f"âœ… ×”×ª×”×œ×™×š ×”×ž×©×•×œ×‘ ×”×¦×œ×™×—!\n\n"
                f"1. ×”×ª×™×§×™×™×” ×”×•×¢×ª×§×” (×œ×œ× ×§×‘×¦×™ ×–×‘×œ) ××œ:\n{dest_path}\n\n"
                f"2. ×§×•×‘×¥ ×¡×™×›×•× ×”×ž×‘× ×” × ×©×ž×¨ ×œ×™×“×”:\n{output_file_path}"
            )
            print(f"\n{success_msg}")
            messagebox.showinfo("×”×¦×œ×—×”", success_msg)
    
        except Exception as e:
            error_msg = f"âŒ ×©×’×™××” ×‘×©×ž×™×¨×ª ×§×•×‘×¥ ×”×¡×™×›×•×: {e}"
            print(f"\n{error_msg}")
            messagebox.showerror("×©×’×™××”", error_msg)
    
    
    if __name__ == "__main__":
        main()
ðŸ“ server/
  ðŸ“„ .env
  ðŸ“„ .env.example
  ðŸ“„ app.js
    import 'dotenv/config';
    import express from 'express';
    import cors from 'cors';
    import helmet from 'helmet';
    import cookieParser from 'cookie-parser';
    import mongoSanitize from 'express-mongo-sanitize';
    import csurf from 'csurf';
    import mongoose from 'mongoose';
    
    // ×™×™×‘×•× × ×ª×™×‘×™×
    import authRoutes from './routes/auth.js';
    import dashboardRoutes from './routes/dashboardRoutes.js';
    import fundRoutes from './routes/fundRoutes.js';
    import tzitzitRoutes from './routes/tzitzitCreate.js';
    import projectRoutes from './routes/projectRoutes.js';
    import dataRoutes from "./routes/dataRoutes.js";
    import financeRoutes from './routes/financeRoutes.js';
    import transactionRoutes from './routes/transactionRoutes.js';
    import importRoutes from './routes/importRoutes.js';
    import categoryRoutes from './routes/categoryRoutes.js';
    import managementRoutes from './routes/managementRoutes.js';
    import stockRoutes from './routes/stockRoutes.js';
    import depositRoutes from './routes/depositRoutes.js';
    import loanRoutes from './routes/loanRoutes.js';
    import rateRoutes from './routes/rateRoutes.js';
    
    // ×™×™×‘×•× ×ž×™×“×œ×•×•×¨
    import rateLimiter from './middlewares/rateLimiter.js';
    import { requireAuth } from './middlewares/authMiddleware.js';
    
    // ×—×™×‘×•×¨ ×œ×ž×¡×“ ×”× ×ª×•× ×™×
    const connectDB = async () => {
      try {
        const conn = await mongoose.connect(process.env.MONGO_URI);
        console.log(`âœ” MongoDB Connected: ${conn.connection.host}`);
      } catch (error) {
        console.error(`âŒ MongoDB Connection Error: ${error.message}`);
        process.exit(1);
      }
    };
    // ×”×¤×¢×œ×ª ×”×—×™×‘×•×¨
    await connectDB();
    
    const app = express();
    
    // --- ×”×’×“×¨×•×ª ××‘×˜×—×” ×‘×¡×™×¡×™×•×ª ---
    app.use(helmet({
      crossOriginResourcePolicy: false // ×ž××¤×©×¨ ×˜×¢×™× ×ª ×ª×ž×•× ×•×ª ×× ×¦×¨×™×š
    }));
    
    app.use(cors({
      origin: process.env.CLIENT_URL || 'http://localhost:5173',
      credentials: true
    }));
    
    // ðŸ’¥ ×ª×™×§×•×Ÿ ×§×¨×™×˜×™: ×”×’×“×œ×ª ×ž×’×‘×œ×ª ×”×’×•×“×œ ×œ×ž× ×™×¢×ª ×©×’×™××•×ª ×‘×™×™×‘×•× ×§×‘×¦×™× (413 Payload Too Large) ðŸ’¥
    app.use(express.json({ limit: '50mb' }));
    app.use(express.urlencoded({ extended: true, limit: '50mb' }));
    
    app.use(cookieParser());
    app.use(mongoSanitize());
    
    // --- ×”×’×“×¨×ª CSRF ---
    const csrfProtection = csurf({
      cookie: {
        httpOnly: true,
        secure: process.env.NODE_ENV === 'production',
        sameSite: 'strict'
      },
    });
    
    // --- × ×ª×™×‘×™× ×¦×™×‘×•×¨×™×™× (×œ×œ× CSRF ×‘×”×›×¨×—, ××• ×ž×•×—×¨×’×™×) ---
    app.use('/api/import', importRoutes);
    app.use('/api/auth', authRoutes);
    
    // Endpoint ×œ×§×‘×œ×ª ×”-CSRF Token
    // ×”×•×¡×¤×ª×™ ×›××Ÿ ××ª rateLimiter ×›×¤×™ ×©×”×™×” ×‘×ž×§×•×¨ ×›×“×™ ×œ×”×’×Ÿ ×¢×œ ×”× ×ª×™×‘ ×”×–×”
    app.get('/api/csrf-token', rateLimiter, csrfProtection, (req, res) => {
      res.json({ csrfToken: req.csrfToken() });
    });
    
    // --- ×”×¤×¢×œ×ª ×”×’× ×ª CSRF ×¢×œ ×›×œ ×”× ×ª×™×‘×™× ×ž×›××Ÿ ×•×ž×˜×” ---
    app.use(csrfProtection);
    
    // --- × ×ª×™×‘×™× ×ž×•×’× ×™× ---
    app.use('/api/dashboard', requireAuth, dashboardRoutes);
    app.use('/api/tzitzit', requireAuth, tzitzitRoutes);
    app.use('/api/projects', requireAuth, projectRoutes);
    app.use("/api/data", requireAuth, dataRoutes);
    app.use(["/api/finance", "/api/finances"], requireAuth, financeRoutes);
    app.use('/api/transactions', requireAuth, transactionRoutes);
    app.use('/api/categories', requireAuth, categoryRoutes);
    app.use('/api/management', requireAuth, managementRoutes);
    app.use('/api/stocks', requireAuth, stockRoutes);
    app.use('/api/deposits', requireAuth, depositRoutes);
    app.use('/api/funds', requireAuth, fundRoutes);
    app.use('/api/loans', requireAuth, loanRoutes); // ×”×•×¡×¤×ª×™ requireAuth ×œ×™×ª×¨ ×‘×™×˜×—×•×Ÿ
    app.use('/api/rates', requireAuth, rateRoutes);
    
    // ×˜×™×¤×•×œ ×‘×©×’×™××•×ª 404
    app.use('*', (req, res) => {
      res.status(404).json({ message: 'API endpoint not found' });
    });
    
    // ×˜×™×¤×•×œ ×‘×©×’×™××•×ª ×’×œ×•×‘×œ×™ (Error Handler)
    app.use((err, req, res, next) => {
      if (err.code === 'EBADCSRFTOKEN') {
        return res.status(403).json({ message: 'Form has been tampered with (CSRF Invalid)' });
      }
      console.error(err);
      res.status(500).json({ message: 'Internal Server Error' });
    });
    
    const PORT = process.env.PORT || 4000;
    app.listen(PORT, () => console.log(`ðŸš€ Server running on port ${PORT}`));
    
    export default app;
  ðŸ“ config/
    ðŸ“„ db.js
      import mongoose from 'mongoose';
      
      const connectDB = async () => {
        try {
          const conn = await mongoose.connect(process.env.MONGO_URI);
          console.log(`âœ” MongoDB Connected: ${conn.connection.host}`);
        } catch (error) {
          console.error(`âŒ MongoDB Connection Error: ${error.message}`);
          process.exit(1);
        }
      };
      
      export default connectDB;
    ðŸ“„ middlewares.js
      import express from 'express';
      import cors from 'cors';
      import cookieParser from 'cookie-parser';
      import morgan from 'morgan';
      import helmet from 'helmet';
      import { publicLimiter } from '../middlewares/rateLimiter.js';
      
      export const configureMiddlewares = (app) => {
        app.use(helmet());
        app.use(cors({
          origin: process.env.CLIENT_URL,
          credentials: true,
        }));
        app.use(express.json({ limit: '10kb' }));
        app.use(express.urlencoded({ extended: true }));
        app.use(cookieParser());
      
        if (process.env.NODE_ENV === 'development') {
          app.use(morgan('dev'));
        }
      
        app.use(publicLimiter);
      };
    ðŸ“„ routes.js
      import csurf              from 'csurf';
      import authRoutes         from '../routes/auth.js';
      import tzitzitRoutes      from '../routes/tzitzitRoutes.js';
      
      /* ×—×“×© */
      import projectRoutes      from '../routes/projectRoutes.js';
      
      import { requireAuth }    from '../middlewares/authMiddleware.js';
      
      export const configureRoutes = (app) => {
        /* ---------- ×ž×¡×œ×•×œ×™× ×¦×™×‘×•×¨×™×™× ---------- */
        app.use('/api/auth', authRoutes);
      
        /* ---------- ×”×’× ×ª CSRF ---------- */
        const csrfProtection = csurf({
          cookie: {
            httpOnly : true,
            secure   : process.env.NODE_ENV === 'production',
            sameSite : 'strict',
          },
        });
      
        // × ×§×•×“×ª ×§×‘×œ×ª ×˜×•×§×Ÿ
        app.get('/api/csrf-token', csrfProtection, (req, res) => {
          res.json({ csrfToken: req.csrfToken() });
        });
      
        // ×œ×”×—×™×œ CSRF ×¢×œ ×›×œ ×ž×” ×©×ž×ª×—×ª
        app.use(csrfProtection);
      
        /* ---------- ×ž×¡×œ×•×œ×™× ×ž×•×’× ×™× ---------- */
        app.use('/api/tzitzit',  requireAuth, tzitzitRoutes);
      
        /* ---------- ×ž×¡×œ×•×œ ×ž×•×’×Ÿ ×—×“×©: ×¤×¨×•×™×§×˜×™× ×›×¡×¤×™×™× ---------- */
        app.use('/api/projects', requireAuth, projectRoutes);
      };
  ðŸ“ controllers/
    ðŸ“„ accountController.js
      // server/controllers/transactionController.js
      import Transaction from '../models/Transaction.js';
      import Account     from '../models/Account.js';
      
      /** â˜‘ï¸ ×¢×–×¨ ×¤× ×™×ž×™ ×œ×¢×“×›×•×Ÿ ×™×ª×¨×” */
      async function adjustBalance(accountId, diff) {
        await Account.findByIdAndUpdate(accountId, { $inc: { balance: diff } });
      }
      
      /** GET /api/transactions?from=yyyy-mm-dd&to=yyyy-mm-dd&category=... */
      export async function getAll(req, res) {
        const { from, to, category } = req.query;
        const filter = { userId: req.user._id };
        if (from && to)  filter.date = { $gte: new Date(from), $lte: new Date(to) };
        if (category && category !== '×›×œ ×”×§×˜×’×•×¨×™×•×ª') filter.category = category;
        const data = await Transaction.find(filter).sort({ date: -1 });
        res.json(data);
      }
      
      /** POST /api/transactions */
      export async function create(req, res) {
        const { date, type, category, amount, description, accountId } = req.body;
        if (!date || !amount)
          return res.status(400).json({ msg: '×ª××¨×™×š ×•×¡×›×•× ×—×•×‘×”' });
      
        const doc = await Transaction.create({
          userId: req.user._id,
          date,
          type,
          category,
          amount,
          description,
          account: accountId,
        });
      
        await adjustBalance(
          accountId,
          type === '×”×›× ×¡×”' ? amount : -amount
        );
      
        res.status(201).json(doc);
      }
      
      /** PUT /api/transactions/:id */
      export async function update(req, res) {
        const { id } = req.params;
        const trx = await Transaction.findOne({ _id: id, userId: req.user._id });
        if (!trx) return res.status(404).json({ msg: '×œ× × ×ž×¦×' });
      
        // ×”×—×–×¨ ××ª ×”×™×ª×¨×” ×”×™×©× ×”
        await adjustBalance(
          trx.account,
          trx.type === '×”×›× ×¡×”' ? -trx.amount : trx.amount
        );
      
        // ×¢×“×›×•×Ÿ ×©×“×•×ª ×ž×•×ª×¨×™×
        Object.assign(trx, req.body);
        await trx.save();
      
        // ×¢×“×›×Ÿ ×™×ª×¨×” ×—×“×©×”
        await adjustBalance(
          trx.account,
          trx.type === '×”×›× ×¡×”' ? trx.amount : -trx.amount
        );
      
        res.json(trx);
      }
      
      /** DELETE /api/transactions/:id */
      export async function remove(req, res) {
        const { id } = req.params;
        const trx = await Transaction.findOneAndDelete({
          _id: id,
          userId: req.user._id,
        });
        if (!trx) return res.status(404).json({ msg: '×œ× × ×ž×¦×' });
      
        await adjustBalance(
          trx.account,
          trx.type === '×”×›× ×¡×”' ? -trx.amount : trx.amount
        );
      
        res.json({ ok: true });
      }
      export default { getAll, create, update, remove };
    ðŸ“„ authController.js
      import bcrypt from 'bcrypt';
      import jwt from 'jsonwebtoken';
      import User from '../models/userModel.js';
      import { createAndSendTokens } from '../utils/tokenHandler.js';
      
      export const registerUser = async (req, res) => {
        const { name, email, password, role } = req.body;
        if (!name || !email || !password)
          return res.status(400).json({ message: '×©×, ××™×ž×™×™×œ ×•×¡×™×¡×ž×” ×”× ×©×“×•×ª ×—×•×‘×”' });
        const exists = await User.findOne({ email });
        if (exists)
          return res.status(400).json({ message: '×ž×©×ª×ž×© ×¢× ××™×ž×™×™×œ ×–×” ×›×‘×¨ ×§×™×™×' });
        const strong = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\da-zA-Z]).{8,}$/;
        if (!strong.test(password))
          return res.status(400).json({ message: '×”×¡×™×¡×ž×” ×—×œ×©×” ×ž×“×™. × ×“×¨×©×™× 8 ×ª×•×•×™×, ××•×ª ×’×“×•×œ×”, ×§×˜× ×”, ×ž×¡×¤×¨ ×•×ª×• ×ž×™×•×—×“.' });
        const hash = await bcrypt.hash(password, 12);
        const finalRole = role === 'admin' ? 'admin' : 'user';
        const user = await User.create({ name, email, passwordHash: hash, role: finalRole });
        const userPayload = { _id: user._id, name: user.name, email: user.email, role: user.role };
        createAndSendTokens(user, res);
        return res.status(201).json({ message: "×”×”×¨×©×ž×” ×”×•×©×œ×ž×” ×‘×”×¦×œ×—×”", user: userPayload });
      };
      
      export const loginUser = async (req, res) => {
        const { email, password } = req.body;
        if (!email || !password)
          return res.status(400).json({ message: '×—×¡×¨ ××™×ž×™×™×œ ××• ×¡×™×¡×ž×”' });
        const user = await User.findOne({ email });
        if (!user)
          return res.status(401).json({ message: '×ž×©×ª×ž×© ×œ× ×§×™×™×' });
        if (user.isLocked)
          return res.status(423).json({ message: '×”×—×©×‘×•×Ÿ × ×¢×•×œ ×–×ž× ×™×ª' });
        if (!(await bcrypt.compare(password, user.passwordHash))) {
          await user.incrementLoginAttempts();
          return res.status(401).json({ message: '×¡×™×¡×ž×” ×©×’×•×™×”' });
        }
        await user.resetLoginAttempts();
        const userPayload = { _id: user._id, name: user.name, email: user.email, role: user.role };
        createAndSendTokens(user, res);
        return res.status(200).json({ message: "×”×ª×—×‘×¨×ª ×‘×”×¦×œ×—×”", user: userPayload });
      };
      
      export const logout = async (req, res) => {
          res.clearCookie('jwt');
          res.clearCookie('refreshToken');
          return res.sendStatus(204);
      };
      
      export const refresh = async (req, res) => {
        const { refreshToken } = req.cookies;
        if (!refreshToken) {
          return res.status(401).json({ message: 'No refresh token provided.' });
        }
        try {
          const decoded = jwt.verify(refreshToken, process.env.JWT_REFRESH_SECRET);
          const user = await User.findById(decoded.id);
          if (!user || user.tokenVersion !== decoded.v) {
            return res.status(403).json({ message: 'Forbidden. Please log in again.' });
          }
          createAndSendTokens(user, res);
          const userPayload = { _id: user._id, name: user.name, email: user.email, role: user.role };
          return res.status(200).json({ message: "Tokens refreshed successfully", user: userPayload });
        } catch (error) {
          return res.status(403).json({ message: 'Invalid or expired refresh token.' });
        }
      };
    ðŸ“„ categoryController.js
      import mongoose from 'mongoose';
      import Category  from '../models/Category.js';
      import AppError  from '../utils/AppError.js';
      
      /*--------------------------------------------------------------------
        GET /api/categories â€“ ×©×œ×™×¤×ª ×›×œ ×”×§×˜×’×•×¨×™×•×ª
      --------------------------------------------------------------------*/
      export const getCategories = async (req, res, next) => {
        try {
          const categories = await Category.find().sort({ name: 1 });
          return res.json(categories);
        } catch (err) {
          return next(new AppError('×©×’×™××” ×‘×©×œ×™×¤×ª ×§×˜×’×•×¨×™×•×ª', 500));
        }
      };
      
      /*--------------------------------------------------------------------
        POST /api/categories â€“ ×™×¦×™×¨×ª ×§×˜×’×•×¨×™×” ×—×“×©×”
      --------------------------------------------------------------------*/
      export const createCategory = async (req, res, next) => {
        try {
          const { name, type = '×”×•×¦××”' } = req.body;
      
          if (!name?.trim())
            return next(new AppError('×©× ×§×˜×’×•×¨×™×” ×”×•× ×©×“×” ×—×•×‘×”', 400));
      
          const exists = await Category.findOne({ name: name.trim() });
          if (exists)
            return next(new AppError('×§×˜×’×•×¨×™×” ×‘×©× ×–×” ×›×‘×¨ ×§×™×™×ž×ª', 409));
      
          const newCategory = await Category.create({ name: name.trim(), type });
          return res.status(201).json(newCategory);
        } catch (err) {
          if (err.code === 11000)
            return next(new AppError('×§×˜×’×•×¨×™×” ×‘×©× ×–×” ×›×‘×¨ ×§×™×™×ž×ª', 409));
      
          return next(new AppError('×©×’×™××” ×‘×™×¦×™×¨×ª ×§×˜×’×•×¨×™×” ×—×“×©×”', 500));
        }
      };
      
      /*--------------------------------------------------------------------
        PUT /api/categories/:id â€“ ×¢×“×›×•×Ÿ ×§×˜×’×•×¨×™×” ×§×™×™×ž×ª
      --------------------------------------------------------------------*/
      export const updateCategory = async (req, res, next) => {
        try {
          const { id } = req.params;
          if (!mongoose.Types.ObjectId.isValid(id))
            return next(new AppError('×ž×–×”×” ×§×˜×’×•×¨×™×” ×œ× ×ª×§×™×Ÿ', 400));
      
          const { name, type } = req.body;
          if (!name?.trim() && !type)
            return next(new AppError('××™×Ÿ × ×ª×•× ×™× ×œ×¢×“×›×•×Ÿ', 400));
      
          const updates = {};
          if (name?.trim()) {
            const dup = await Category.findOne({ name: name.trim(), _id: { $ne: id } });
            if (dup)
              return next(new AppError('×§×˜×’×•×¨×™×” ×‘×©× ×–×” ×›×‘×¨ ×§×™×™×ž×ª', 409));
            updates.name = name.trim();
          }
          if (type) updates.type = type;
      
          const updated = await Category.findByIdAndUpdate(id, updates, { new: true });
          if (!updated)
            return next(new AppError('×§×˜×’×•×¨×™×” ×œ× × ×ž×¦××”', 404));
      
          return res.json(updated);
        } catch (err) {
          return next(new AppError('×©×’×™××” ×‘×¢×“×›×•×Ÿ ×§×˜×’×•×¨×™×”', 500));
        }
      };
      
      /*--------------------------------------------------------------------
        DELETE /api/categories/:id â€“ ×ž×—×™×§×ª ×§×˜×’×•×¨×™×”
      --------------------------------------------------------------------*/
      export const deleteCategory = async (req, res, next) => {
        try {
          const { id } = req.params;
          if (!mongoose.Types.ObjectId.isValid(id))
            return next(new AppError('×ž×–×”×” ×§×˜×’×•×¨×™×” ×œ× ×ª×§×™×Ÿ', 400));
      
          const deleted = await Category.findByIdAndDelete(id);
          if (!deleted)
            return next(new AppError('×§×˜×’×•×¨×™×” ×œ× × ×ž×¦××”', 404));
      
          return res.status(204).send(); //  No Content
        } catch (err) {
          return next(new AppError('×©×’×™××” ×‘×ž×—×™×§×ª ×§×˜×’×•×¨×™×”', 500));
        }
      };
    ðŸ“„ dashboardController.js
      // server/controllers/dashboardController.js
      import Transaction from '../models/Transaction.js';
      import Project from '../models/Project.js';
      import Account from '../models/Account.js';
      import { startOfMonth, subMonths, endOfMonth } from 'date-fns';
      
      export const getDashboardData = async (req, res, next) => {
          try {
              const userId = req.user._id; // ×ž×’×™×¢ ×ž×”-requireAuth middleware
              const today = new Date();
      
              // 1. ×”×’×“×¨×ª ×˜×•×•×—×™ ×ª××¨×™×›×™×
              const thisMonthStart = startOfMonth(today);
              const prevMonthStart = startOfMonth(subMonths(today, 1));
              const prevMonthEnd = endOfMonth(subMonths(today, 1));
      
              // 2. ×‘×™×¦×•×¢ ×›×œ ×”×©××™×œ×ª×•×ª ×‘×ž×§×‘×™×œ ×œ×©×™×¤×•×¨ ×‘×™×¦×•×¢×™×
              const [
                  accounts,
                  monthlyAggregation,
                  categoryAggregation,
                  projects,
                  balanceChartDataRaw
              ] = await Promise.all([
                  Account.find({ userId }).lean(),
                  Transaction.aggregate([
                      { $match: { userId, date: { $gte: prevMonthStart } } },
                      { $group: {
                          _id: { month: { $month: "$date" }, type: "$type" },
                          total: { $sum: "$amount" }
                      }}
                  ]),
                  Transaction.aggregate([
                       { $match: { userId, type: '×”×•×¦××”', date: { $gte: prevMonthStart } } },
                       { $group: {
                           _id: { category: "$category", month: { $month: "$date" } },
                           total: { $sum: "$amount" }
                       }}
                  ]),
                  Project.find({ owner: userId }).sort({ createdAt: -1 }).lean(),
                  Transaction.aggregate([
                      { $match: { userId } },
                      { $sort: { date: 1 } },
                      { $group: {
                          _id: { $dateToString: { format: "%Y-%m-%d", date: "$date" } },
                          dailyChange: { $sum: { $cond: [{ $eq: ["$type", "×”×›× ×¡×”"] }, "$amount", { $multiply: ["$amount", -1] }] }}
                      }},
                      { $sort: { _id: 1 } }
                  ])
              ]);
      
              // 3. ×¢×™×‘×•×“ × ×ª×•× ×™ ×¡×™×›×•× ×—×•×“×©×™
              const thisMonthNum = today.getMonth() + 1;
              const prevMonthNum = prevMonthStart.getMonth() + 1;
              const monthlySummary = {
                  thisMonth: { income: 0, expense: 0 },
                  prevMonth: { income: 0, expense: 0 }
              };
              monthlyAggregation.forEach(item => {
                  const target = item._id.month === thisMonthNum ? monthlySummary.thisMonth : monthlySummary.prevMonth;
                  if (item._id.type === '×”×›× ×¡×”') target.income = item.total;
                  if (item._id.type === '×”×•×¦××”') target.expense = item.total;
              });
      
              // 4. ×¢×™×‘×•×“ × ×ª×•× ×™ ×§×˜×’×•×¨×™×•×ª
              const categorySummary = {};
              categoryAggregation.forEach(item => {
                  const categoryName = item._id.category;
                  if (!categorySummary[categoryName]) {
                      categorySummary[categoryName] = { current: 0, previous: 0 };
                  }
                  if (item._id.month === thisMonthNum) {
                      categorySummary[categoryName].current = item.total;
                  } else {
                      categorySummary[categoryName].previous = item.total;
                  }
              });
      
              // 5. ×¢×™×‘×•×“ × ×ª×•× ×™ ×’×¨×£
              let cumulativeBalance = 0;
              const balanceChartData = balanceChartDataRaw.map(item => {
                  cumulativeBalance += item.dailyChange;
                  return { date: item._id, balance: cumulativeBalance };
              });
      
              // 6. ×”×¨×›×‘×ª ×”×ª×’×•×‘×” ×”×¡×•×¤×™×ª
              res.json({
                  accounts,
                  monthlySummary,
                  categorySummary,
                  projects,
                  balanceChartData
              });
      
          } catch (error) {
              next(error); // ×”×¢×‘×¨×ª ×”×©×’×™××” ×œ-errorHandler
          }
      };
    ðŸ“„ dataController.js
      import DataRecord from "../models/DataRecordModel.js";
      
      // @desc   ×©×ž×™×¨×ª ×¨×©×•×ž×ª × ×ª×•× ×™× ×—×“×©×”
      // @route  POST /api/data/save
      // @access Private
      export const saveDataRecord = async (req, res) => {
        try {
          const { value1, value2 } = req.body;
      
          // ×”×ª×™×§×•×Ÿ: ×©×™×ž×•×© ×‘-req.user._id (×¢× ×§×• ×ª×—×ª×•×Ÿ) ×•×‘×“×™×§×” ×©×”×•× ×§×™×™×
          const userId = req.user?._id;
      
          // ×‘×“×™×§×” ×©×ž×–×”×” ×”×ž×©×ª×ž×© ××›×Ÿ ×§×™×™× ×‘×‘×§×©×”
          if (!userId) {
            // ×× ×”×ž×–×”×” ×—×¡×¨, ×–×” ×ž×¦×‘×™×¢ ×¢×œ ×‘×¢×™×” ×‘-middleware ×©×œ ×”××™×ž×•×ª
            console.error("Error: User ID is missing from the request after authentication.");
            return res.status(401).json({ message: "×œ× × ×™×ª×Ÿ ×œ×–×”×•×ª ××ª ×”×ž×©×ª×ž×© ×ž×”×‘×§×©×”." });
          }
      
          // ×‘×“×™×§×” ×©×”×¢×¨×›×™× ×©×”×ª×§×‘×œ×• ×”× ××›×Ÿ ×ž×¡×¤×¨×™×
          if (typeof value1 !== "number" || typeof value2 !== "number") {
            return res.status(400).json({ message: "×™×© ×œ×¡×¤×§ ×¢×¨×›×™× ×ž×¡×¤×¨×™×™×" });
          }
      
          // ×™×¦×™×¨×ª ×”×¨×©×•×ž×” ×”×—×“×©×” ×‘×ž×¡×“ ×”× ×ª×•× ×™×
          const newRecord = await DataRecord.create({
            user: userId,
            value1,
            value2,
          });
      
          // ×× ×”×”×¦×œ×—×”, ×”×—×–×¨×ª ×”×•×“×¢×” ×ž×ª××™×ž×”
          res.status(201).json({ message: "×”× ×ª×•× ×™× × ×©×ž×¨×• ×‘×”×¦×œ×—×”!" });
      
        } catch (error) {
          // ×‘×ž×§×¨×” ×©×œ ×©×’×™××”, ×¨×™×©×•× ×ž×œ× ×©×œ×” ×‘×§×•× ×¡×•×œ ×©×œ ×”×©×¨×ª ×œ×¦×•×¨×›×™ ×“×™×‘××’×™× ×’
          console.error("Error in saveDataRecord controller:", error);
          res.status(500).json({ message: "×©×’×™××ª ×©×¨×ª ×¤× ×™×ž×™×ª", error: error.message });
        }
      };
    ðŸ“„ depositController.js
      // server/controllers/depositController.js
      import Deposit from '../models/Deposit.js';
      import Account from '../models/Account.js';
      import { add_months } from '../utils/dateHelpers.js';
      
      // ×§×‘×œ×ª ×›×œ ×”×¤×™×§×“×•× ×•×ª ×©×œ ×”×ž×©×ª×ž×©
      export const getDeposits = async (req, res) => {
        // ××™×Ÿ ×©×™× ×•×™ ×›××Ÿ, ×”×©×“×” ×”×—×“×© ×™×™×©×œ×£ ××•×˜×•×ž×˜×™×ª
        const deposits = await Deposit.find({ user: req.user.id, status: 'active' }).sort({ endDate: 1 });
        res.json(deposits);
      };
      
      // ×”×•×¡×¤×ª ×¤×™×§×“×•×Ÿ ×—×“×©
      export const addDeposit = async (req, res) => {
        // --- ×©×™× ×•×™ ---
        // ×”×•×¡×¤×ª exitPoints ×œ×“×¡×˜×¨×§×˜×•×¨×™×–×¦×™×”, ×¢× ×¢×¨×š ×‘×¨×™×¨×ª ×ž×—×“×œ ×œ×ž×§×¨×” ×©×œ× × ×©×œ×—
        const { name, principal, annualInterestRate, startDate, durationValue, durationUnit, sourceAccount, exitPoints = [] } = req.body;
        // --- ×¡×•×£ ×©×™× ×•×™ ---
      
        if (!name || !principal || !annualInterestRate || !startDate || !durationValue || !durationUnit) {
          return res.status(400).json({ message: '× × ×œ×ž×œ× ××ª ×›×œ ×”×©×“×•×ª' });
        }
      
        const endDate = add_months(new Date(startDate), durationUnit === '×©× ×™×' ? durationValue * 12 : durationValue);
      
        // --- ×©×™× ×•×™ ---
        // ×”×•×¡×¤×ª exitPoints ×œ××•×‘×™×™×§×˜ ×©× ×©×ž×¨ ×‘×ž×¡×“ ×”× ×ª×•× ×™×
        const deposit = await Deposit.create({
            ...req.body,
            user: req.user.id,
            endDate,
            exitPoints // ×”×•×¡×¤×ª ×”×©×“×” ×”×—×“×©
        });
        // --- ×¡×•×£ ×©×™× ×•×™ ---
      
        if (sourceAccount && sourceAccount !== "×œ×œ× ×”×•×¨×“×” ×ž×—×©×‘×•×Ÿ") {
          await Account.findOneAndUpdate(
            { userId: req.user.id, name: sourceAccount },
            { $inc: { balance: -principal } }
          );
        }
      
        res.status(201).json(deposit);
      };
      
      // --- ××™×Ÿ ×¦×•×¨×š ×‘×©×™× ×•×™×™× ×‘×¤×•× ×§×¦×™×•×ª ×”×‘××•×ª ×‘×©×œ×‘ ×–×” ---
      // ×©×‘×™×¨×ª ×¤×™×§×“×•×Ÿ
      export const breakDeposit = async (req, res) => {
        const deposit = await Deposit.findOne({ _id: req.params.id, user: req.user.id });
        if (!deposit) return res.status(404).send();
      
        await Account.findOneAndUpdate({ userId: req.user.id, name: '×¢×•"×©' }, { $inc: { balance: deposit.principal } }, { upsert: true });
      
        deposit.status = 'broken';
        await deposit.save();
      
        res.json({ message: '×”×¤×™×§×“×•×Ÿ × ×©×‘×¨ ×•×”×§×¨×Ÿ ×”×•×¢×‘×¨×” ×œ×¢×•"×©' });
      };
      
      // ×ž×©×™×›×ª ×¤×™×§×“×•×Ÿ ×‘×¡×•×£ ×ª×§×•×¤×”
      export const withdrawDeposit = async (req, res) => {
        const deposit = await Deposit.findOne({ _id: req.params.id, user: req.user.id });
        if (!deposit) return res.status(404).send();
      
        if (new Date() < deposit.endDate) {
          return res.status(400).json({ message: '×”×¤×™×§×“×•×Ÿ ×˜×¨× ×”×’×™×¢ ×œ×ž×•×¢×“ ×”×¤×™×¨×¢×•×Ÿ' });
        }
      
        const finalValue = deposit.futureValue;
        await Account.findOneAndUpdate({ userId: req.user.id, name: '×¢×•"×©' }, { $inc: { balance: finalValue } }, { upsert: true });
      
        deposit.status = 'matured';
        await deposit.save();
      
        res.json({ message: `×”×¤×™×§×“×•×Ÿ × ×¤×¨×¢. ×¡×›×•× ×©×œ ${finalValue.toFixed(2)} â‚ª ×”×•×¢×‘×¨ ×œ×¢×•"×©` });
      };
    ðŸ“„ financeController.js
      import FinanceProfile from '../models/FinanceProfile.js';
      
      // @desc   ×§×‘×œ×ª ×”×¤×¨×•×¤×™×œ ×”×¤×™× × ×¡×™ ×©×œ ×”×ž×©×ª×ž×© ×”×ž×—×•×‘×¨
      // @route  GET /api/finances
      // @access Private
      export const getFinanceProfile = async (req, res) => {
        try {
          // ×”×©×ª×ž×©× ×• ×‘-req.user._id ×›×“×™ ×œ×ž×¦×•× ××ª ×”×¤×¨×•×¤×™×œ ×”× ×›×•×Ÿ
          let profile = await FinanceProfile.findOne({ user: req.user._id });
      
          // ×× ×œ×ž×©×ª×ž×© ×¢×“×™×™×Ÿ ××™×Ÿ ×¤×¨×•×¤×™×œ, × ×™×¦×•×¨ ××•×‘×™×™×§×˜ ×–×ž× ×™ ×¢× ×¢×¨×›×™ ×‘×¨×™×¨×ª ×ž×—×“×œ
          if (!profile) {
            profile = {
              user: req.user._id,
              checking: 0,
              cash: 0,
              deposits: 0,
              stocks: 0,
            };
          }
      
          res.json(profile);
        } catch (error) {
          console.error('Error fetching finance profile:', error);
          res.status(500).json({ message: '×©×’×™××ª ×©×¨×ª' });
        }
      };
      
      // @desc   ×¢×“×›×•×Ÿ (××• ×™×¦×™×¨×”) ×©×œ ×”×¤×¨×•×¤×™×œ ×”×¤×™× × ×¡×™
      // @route  POST /api/finances
      // @access Private
      export const updateFinanceProfile = async (req, res) => {
        const { checking, cash, deposits, stocks } = req.body;
      
        const profileData = {
          user: req.user._id,
          checking: Number(checking) || 0,
          cash: Number(cash) || 0,
          deposits: Number(deposits) || 0,
          stocks: Number(stocks) || 0,
        };
      
        try {
          // findOneAndUpdate ×¢× upsert:true ×™×¢×“×›×Ÿ ××ª ×”×¤×¨×•×¤×™×œ ×× ×”×•× ×§×™×™×, ××• ×™×™×¦×•×¨ ××•×ª×• ×× ×œ×.
          const updatedProfile = await FinanceProfile.findOneAndUpdate(
            { user: req.user._id }, // ×ª× ××™ ×”×—×™×¤×•×©
            profileData,            // ×”× ×ª×•× ×™× ×œ×¢×“×›×•×Ÿ
            { new: true, upsert: true, setDefaultsOnInsert: true } // ××¤×©×¨×•×™×•×ª
          );
      
          res.json(updatedProfile);
        } catch (error) {
          console.error('Error updating finance profile:', error);
          res.status(500).json({ message: '×©×’×™××ª ×©×¨×ª ×‘×¢×“×›×•×Ÿ ×”×¤×¨×•×¤×™×œ' });
        }
      };
    ðŸ“„ fundController.js
      import Fund from '../models/Fund.js';
      import Account from '../models/Account.js';
      import { getFundPriceBizportal } from '../utils/fundScraper.js';
      
      // GET /api/funds - ×§×‘×œ×ª ×›×œ ×”×§×¨× ×•×ª ×©×œ ×”×ž×©×ª×ž×©
      export const getFunds = async (req, res, next) => {
        try {
          const funds = await Fund.find({ user: req.user.id }).sort({ createdAt: -1 });
          res.json(funds);
        } catch (error) {
          next(error);
        }
      };
      
      // POST /api/funds - ×”×•×¡×¤×ª ×§×¨×Ÿ ×—×“×©×”
      export const addFund = async (req, res, next) => {
        try {
          const { fund_number, purchase_price_agorot, invested_amount, sourceAccount } = req.body;
      
          // ×•×œ×™×“×¦×™×” ×‘×¡×™×¡×™×ª ×©×œ ×”×§×œ×˜
          if (!fund_number || purchase_price_agorot === undefined || invested_amount === undefined) {
            return res.status(400).json({ message: '×©×“×•×ª ×—×•×‘×” ×—×¡×¨×™×: ×ž×¡×¤×¨ ×§×¨×Ÿ, ×ž×—×™×¨ ×§× ×™×™×” ×•×¡×›×•× ×”×©×§×¢×”.' });
          }
      
          const purchase_price = parseFloat(purchase_price_agorot) / 100.0;
      
          if (isNaN(purchase_price)) {
            return res.status(400).json({ message: '×ž×—×™×¨ ×”×§× ×™×™×” ×©×”×•×–×Ÿ ××™× ×• ×ž×¡×¤×¨ ×ª×§×™×Ÿ.' });
          }
      
          const current_price = await getFundPriceBizportal(fund_number);
      
          // ×”×•×¨×“×” ×ž×—×©×‘×•×Ÿ ×ž×§×•×¨ (×× ×”×•×’×“×¨)
          if (sourceAccount && sourceAccount !== "×œ×œ× ×”×•×¨×“×”") {
            await Account.findOneAndUpdate(
              { userId: req.user.id, name: sourceAccount },
              { $inc: { balance: -parseFloat(invested_amount) } }
            );
          }
      
          // ×‘× ×™×™×ª ×”××•×‘×™×™×§×˜ ×‘××•×¤×Ÿ ×ž×¤×•×¨×© ×‘×ž×§×•× ×©×™×ž×•×© ×‘-...req.body
          const newFund = await Fund.create({
            user: req.user.id,
            fund_number,
            purchase_price,
            invested_amount: parseFloat(invested_amount),
            current_price,
            last_updated: new Date()
          });
      
          res.status(201).json(newFund);
      
        } catch (error) {
          // ×”×¢×‘×¨×ª ×”×©×’×™××” ×œ-middleware ×”×›×œ×œ×™ ×œ×˜×™×¤×•×œ ×‘×©×’×™××•×ª
          next(error);
        }
      };
      
      // POST /api/funds/refresh - ×¨×¢× ×•×Ÿ ×›×œ ×”×ž×—×™×¨×™×
      export const refreshAllPrices = async (req, res, next) => {
        try {
          const funds = await Fund.find({ user: req.user.id });
          for (const fund of funds) {
            const price = await getFundPriceBizportal(fund.fund_number);
            if (price > 0) {
              fund.current_price = price;
              fund.last_updated = new Date();
              await fund.save();
            }
          }
          const updatedFunds = await Fund.find({ user: req.user.id }).sort({ createdAt: -1 });
          res.json(updatedFunds);
        } catch(error) {
          next(error);
        }
      };
      
      // POST /api/funds/:id/sell - "×ž×›×™×¨×”" ×©×œ ×§×¨×Ÿ
      export const sellFund = async (req, res, next) => {
        try {
          const fund = await Fund.findById(req.params.id);
          if (!fund || String(fund.user) !== req.user.id) {
            return res.status(404).json({ message: 'Fund not found' });
          }
      
          const value = fund.current_value;
          await Account.findOneAndUpdate(
              { userId: req.user.id, name: '×¢×•"×©' },
              { $inc: { balance: value } },
              { upsert: true }
          );
      
          await fund.deleteOne();
          res.json({ message: `Fund ${fund.fund_number} sold. ${value.toFixed(2)} ILS added to checking account.` });
        } catch(error) {
          next(error);
        }
      };
      
      // DELETE /api/funds/:id - ×ž×—×™×§×ª ×§×¨×Ÿ
      export const deleteFund = async (req, res, next) => {
        try {
          const fund = await Fund.findOneAndDelete({ _id: req.params.id, user: req.user.id });
          if (!fund) {
              return res.status(404).json({ message: 'Fund not found' });
          }
          res.status(204).send();
        } catch(error) {
          next(error);
        }
      };
    ðŸ“„ importController.js
      // server/controllers/importController.js
      
      import { cleanCalFile, cleanMaxFile } from '../utils/excelCleaners.js';
      import { parseTransactions } from '../utils/excelParser.js';
      import Transaction from '../models/Transaction.js';
      import FinanceProfile from '../models/FinanceProfile.js';
      import MerchantMap from '../models/MerchantMap.js';
      import AppError from '../utils/AppError.js';
      
      export const uploadAndParse = async (req, res, next) => {
        const { data, fileType } = req.body;
        const userId = req.user._id;
      
        if (!data || !fileType) {
          return next(new AppError('Data and fileType are required.', 400));
        }
      
        try {
          const cleaner = fileType === 'cal' ? cleanCalFile : cleanMaxFile;
          const cleanedData = cleaner(data);
          const { transactions, unseenMerchants } = await parseTransactions(cleanedData, fileType, userId);
      
          res.json({ transactions, unseenMerchants });
        } catch (error) {
          console.error(`Error parsing file type ${fileType}:`, error);
          return next(new AppError(`×©×’×™××” ×‘×¤×¢× ×•×— ×”×§×•×‘×¥: ${error.message}`, 500));
        }
      };
      
      export const processTransactions = async (req, res, next) => {
        const { transactions, newMappings } = req.body;
        const userId = req.user._id;
      
        if (!Array.isArray(transactions)) {
          return next(new AppError('Transactions array is required.', 400));
        }
      
        try {
          if (newMappings && newMappings.length > 0) {
            const mappingDocs = newMappings.map(m => ({
              originalName: m.originalName,
              newName: m.newName,
              category: m.category || null,
            }));
            await MerchantMap.insertMany(mappingDocs, { ordered: false }).catch(err => {
              if (err.code !== 11000) throw err;
            });
          }
      
          // --- ðŸ‘‡ ×”×ª×™×§×•×Ÿ ×›××Ÿ: ×œ× ×ž×•×—×§×™× ×™×•×ª×¨, ×¨×§ ×ž×•×¡×™×¤×™× ---
          let insertedCount = 0;
          if (transactions.length > 0) {
              try {
                  // ordered: false - ×™×ž×©×™×š ×’× ×× ×—×œ×§ ×ž×”×¨×©×•×ž×•×ª × ×›×©×œ×•×ª (×‘×’×œ×œ ×›×¤×™×œ×•×ª)
                  const result = await Transaction.insertMany(transactions, { ordered: false });
                  insertedCount = result.length;
              } catch (error) {
                  // ×× ×”×©×’×™××” ×”×™× ×©×’×™××ª ×›×¤×™×œ×•×ª, × ×¡×¤×•×¨ ×›×ž×” ×¢×¡×§××•×ª ×›×Ÿ ×”×¦×œ×™×—×• ×œ×”×™×›× ×¡
                  if (error.code === 11000 && error.result && Array.isArray(error.result.insertedDocs)) {
                      insertedCount = error.result.insertedDocs.length;
                  } else {
                      // ×× ×–×• ×©×’×™××” ××—×¨×ª, × ×–×¨×•×§ ××•×ª×” ×”×œ××”
                      throw error;
                  }
              }
          }
          // --- ðŸ‘† ×¢×“ ×›××Ÿ ×”×ª×™×§×•×Ÿ ---
      
          const aggregation = await Transaction.aggregate([
            { $match: { user: userId } },
            {
              $group: {
                _id: '$account',
                total: { $sum: { $cond: [{ $eq: ['$type', '×”×›× ×¡×”'] }, '$amount', { $multiply: ['$amount', -1] }] } }
              }
            }
          ]);
      
          const newBalances = { checking: 0, cash: 0, deposits: 0, stocks: 0 };
          aggregation.forEach(item => {
            if (newBalances.hasOwnProperty(item._id)) {
              newBalances[item._id] = item.total;
            }
          });
      
          await FinanceProfile.updateOne({ user: userId }, { $set: newBalances }, { upsert: true });
      
          res.json({ message: `×”×™×™×‘×•× ×”×•×©×œ×! × ×•×¡×¤×• ${insertedCount} ×¢×¡×§××•×ª ×—×“×©×•×ª.` });
        } catch (error) {
          console.error("Error processing transactions:", error);
          return next(new AppError(`×©×’×™××” ×‘×¢×™×‘×•×“ ×”×¢×¡×§××•×ª: ${error.message}`, 500));
        }
      };
    ðŸ“„ loanController.js
      import Loan from '../models/Loan.js';
      import RateHistory from '../models/RateHistory.js'; // ×™×™×‘×•× ×ž×•×“×œ ×”×¨×™×‘×™×•×ª
      import { calculateDynamicSchedule } from '../utils/loanCalculator.js';
      
      export const createLoan = async (req, res, next) => {
        try {
          // ×©×™× ×œ×‘: ×× ×—× ×• ×›×‘×¨ ×œ× ×ž×—×©×‘×™× ××ª ×œ×•×— ×”×¡×™×œ×•×§×™×Ÿ ×›××Ÿ
          const { name, principal, interestMargin, termInMonths, startDate, repaymentType } = req.body;
      
          // ×‘×‘×§×©×ª ×™×¦×™×¨×”, ×”-annualRate ×©× ×©×œ×— ×ž×”×œ×§×•×— ×”×•× ×‘×¢×¦× ×”×ž×¨×•×•×—
          const newLoan = await Loan.create({
            user: req.user.id,
            name,
            principal,
            interestMargin: interestMargin, // × ×©×ž×•×¨ ××ª ×”×ž×¨×•×•×—
            termInMonths,
            startDate,
            repaymentType,
          });
          res.status(201).json(newLoan);
        } catch (error) {
          next(error);
        }
      };
      
      export const getLoans = async (req, res, next) => {
        try {
          const loans = await Loan.find({ user: req.user.id }).sort({ createdAt: -1 });
          res.status(200).json(loans);
        } catch (error) {
          next(error);
        }
      };
      
      export const getLoanById = async (req, res, next) => {
        try {
          const loan = await Loan.findOne({ _id: req.params.id, user: req.user.id }).lean(); // lean() for performance
          if (!loan) {
            return res.status(404).json({ message: '×”×œ×•×•××” ×œ× × ×ž×¦××”' });
          }
      
          // ×©×œ×™×¤×ª ×”×™×¡×˜×•×¨×™×™×ª ×”×¨×™×‘×™×•×ª
          const rateHistory = await RateHistory.find({ indexName: 'prime' }).sort({ date: 'asc' }).lean();
      
          // ×—×™×©×•×‘ ×“×™× ×ž×™ ×©×œ ×œ×•×— ×”×¡×™×œ×•×§×™×Ÿ
          const amortizationSchedule = calculateDynamicSchedule({ loan, rateHistory });
      
          // ×”×¨×›×‘×ª ×”××•×‘×™×™×§×˜ ×”×ž×œ× ×©×™×•×—×–×¨ ×œ×œ×§×•×—
          const fullLoanDetails = {
            ...loan,
            amortizationSchedule
          };
      
          res.status(200).json(fullLoanDetails);
        } catch (error) {
          next(error);
        }
      };
    ðŸ“„ managementController.js
      // server/controllers/managementController.js
      import Category from '../models/Category.js';
      import MerchantMap from '../models/MerchantMap.js';
      import CategoryRule from '../models/CategoryRule.js';
      import Transaction from '../models/Transaction.js';
      import { body, validationResult } from 'express-validator';
      
      // @desc   ×©×œ×™×¤×ª ×›×œ × ×ª×•× ×™ ×”× ×™×”×•×œ (×§×˜×’×•×¨×™×•×ª, ×ž×™×¤×•×™×™× ×•×—×•×§×™×)
      // @route  GET /api/management
      export const getManagementData = async (req, res) => {
        try {
          const [categories, merchantMaps, categoryRules] = await Promise.all([
            Category.find().sort({ name: 1 }),
            MerchantMap.find().populate('category', 'name').sort({ newName: 1 }),
            CategoryRule.find().populate('category', 'name').sort({ keyword: 1 }),
          ]);
      
          res.json({ categories, merchantMaps, categoryRules });
        } catch (error) {
          res.status(500).json({ message: '×©×’×™××ª ×©×¨×ª ×‘×©×œ×™×¤×ª × ×ª×•× ×™ ×”× ×™×”×•×œ' });
        }
      };
      
      // --- × ×™×”×•×œ ×ž×™×¤×•×™×™ ×¡×¤×§×™× (Merchant Maps) ---
      
      export const updateMerchantMap = async (req, res) => {
        const { newName, category } = req.body;
        try {
          const updatedMap = await MerchantMap.findByIdAndUpdate(
            req.params.id,
            { newName, category },
            { new: true }
          ).populate('category', 'name');
          if (!updatedMap) return res.status(404).json({ message: '×ž×™×¤×•×™ ×œ× × ×ž×¦×' });
          res.json(updatedMap);
        } catch (error) {
          res.status(500).json({ message: '×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×ž×™×¤×•×™' });
        }
      };
      
      export const deleteMerchantMap = async (req, res) => {
        try {
          const deletedMap = await MerchantMap.findByIdAndDelete(req.params.id);
          if (!deletedMap) return res.status(404).json({ message: '×ž×™×¤×•×™ ×œ× × ×ž×¦×' });
          res.status(204).send(); // No Content
        } catch (error) {
          res.status(500).json({ message: '×©×’×™××” ×‘×ž×—×™×§×ª ×”×ž×™×¤×•×™' });
        }
      };
      
      // --- × ×™×”×•×œ ×—×•×§×™ ×§×˜×’×•×¨×™×” (Category Rules) ---
      
      export const createCategoryRule = async (req, res) => {
        const { keyword, category } = req.body;
        try {
          const newRule = await CategoryRule.create({ keyword, category });
          const populatedRule = await newRule.populate('category', 'name');
          res.status(201).json(populatedRule);
        } catch (error) {
           if (error.code === 11000) {
              return res.status(409).json({ message: '×—×•×§ ×¢× ×ž×™×œ×ª ×ž×¤×ª×— ×–×• ×›×‘×¨ ×§×™×™×.' });
          }
          res.status(500).json({ message: '×©×’×™××” ×‘×™×¦×™×¨×ª ×—×•×§ ×—×“×©' });
        }
      };
      
      export const updateCategoryRule = async (req, res) => {
        const { category } = req.body;
        try {
          const updatedRule = await CategoryRule.findByIdAndUpdate(
            req.params.id,
            { category },
            { new: true }
          ).populate('category', 'name');
          if (!updatedRule) return res.status(404).json({ message: '×—×•×§ ×œ× × ×ž×¦×' });
          res.json(updatedRule);
        } catch (error) {
          res.status(500).json({ message: '×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×—×•×§' });
        }
      };
      
      export const deleteCategoryRule = async (req, res) => {
        try {
          const deletedRule = await CategoryRule.findByIdAndDelete(req.params.id);
          if (!deletedRule) return res.status(404).json({ message: '×—×•×§ ×œ× × ×ž×¦×' });
          res.status(204).send(); // No Content
        } catch (error) {
          res.status(500).json({ message: '×©×’×™××” ×‘×ž×—×™×§×ª ×”×—×•×§' });
        }
      };
      
      // @desc   ×”×¤×¢×œ×ª ×›×œ ×”×—×•×§×™× ×•×”×ž×™×¤×•×™×™× ×¨×˜×¨×•××§×˜×™×‘×™×ª ×¢×œ ×›×œ ×”×¢×¡×§××•×ª
      // @route  POST /api/management/apply-rules
      export const applyRulesRetroactively = async (req, res) => {
        try {
          const userId = req.user.id;
      
          const [rules, maps] = await Promise.all([
            CategoryRule.find().populate('category').lean(),
            MerchantMap.find().populate('category').lean()
          ]);
          const merchantMapsCache = new Map(maps.map(m => [m.originalName, m]));
          const transactions = await Transaction.find({ user: userId });
      
          let updatedCount = 0;
          const bulkOps = [];
      
          for (const trx of transactions) {
            const originalDescription = trx.rawDescription || trx.description;
            let newDescription = trx.description;
            let newCategoryName = trx.category;
            let categoryFound = false;
      
            // ×©×œ×‘ 1: ×‘×“×™×§×ª ×ž×™×¤×•×™ ×œ× ×™×§×•×™ ×”×©× ×•×œ×§×˜×’×•×¨×™×” ×‘×¢×“×™×¤×•×ª ×¨××©×•× ×”
            const directMap = merchantMapsCache.get(originalDescription);
            if (directMap) {
              newDescription = directMap.newName;
              if (directMap.category) {
                newCategoryName = directMap.category.name;
                categoryFound = true;
              }
            }
      
            // ×©×œ×‘ 2: ×× ×”×ž×™×¤×•×™ ×œ× ×§×‘×¢ ×§×˜×’×•×¨×™×”, ×‘×“×•×§ ×—×•×§×™×
            if (!categoryFound) {
              for (const rule of rules) {
                if (newDescription.toLowerCase().includes(rule.keyword.toLowerCase())) {
                  if (rule.category) {
                    newCategoryName = rule.category.name;
                    break;
                  }
                }
              }
            }
      
            // ×©×œ×‘ 3: ×× ×ž×©×”×• ×”×©×ª× ×”, ×”×•×¡×£ ×œ×¤×¢×•×œ×ª ×”×¢×“×›×•×Ÿ
            if (trx.category !== newCategoryName || trx.description !== newDescription) {
              updatedCount++;
              bulkOps.push({
                updateOne: {
                  filter: { _id: trx._id },
                  update: { $set: { category: newCategoryName, description: newDescription } }
                }
              });
            }
          }
      
          if (bulkOps.length > 0) {
            await Transaction.bulkWrite(bulkOps);
          }
      
          res.json({ message: '×”×—×œ×ª ×”×—×•×§×™× ×”×•×©×œ×ž×” ×‘×”×¦×œ×—×”.', updatedCount });
      
        } catch (error) {
          console.error('Error applying rules retroactively:', error);
          res.status(500).json({ message: '×©×’×™××ª ×©×¨×ª ×‘×¢×ª ×”×—×œ×ª ×”×—×•×§×™×' });
        }
      };
    ðŸ“„ projectController.js
      import Project from '../models/Project.js';
      import AppError from '../utils/AppError.js';
      
      /**
       * Helper function to ensure a user owns the project they are trying to access.
       * Throws an error if the project is not found or the user is not the owner.
       * @param {object} project - The Mongoose project document.
       * @param {string} userId - The ID of the user making the request.
       */
      const assertProjectOwner = (project, userId) => {
        if (!project) throw new AppError('Project not found', 404);
        if (String(project.owner) !== String(userId)) throw new AppError('Not authorized', 403);
      };
      
      // --- Main CRUD Operations ---
      
      export const getProjects = async (req, res, next) => {
        try {
          const projects = await Project.find({ owner: req.user.id }).sort({ createdAt: -1 });
          res.json(projects);
        } catch (err) { next(err); }
      };
      
      export const getProject = async (req, res, next) => {
        try {
          const project = await Project.findById(req.params.id);
          assertProjectOwner(project, req.user.id);
          res.json(project);
        } catch (err) { next(err); }
      };
      
      export const createProject = async (req, res, next) => {
        try {
          const { projectName, description, projectType, targetAmount, dueDate, tasks = [], funds = [] } = req.body;
          if (!['goal', 'task'].includes(projectType)) throw new AppError('Invalid projectType', 400);
      
          const project = new Project({
            owner: req.user.id,
            projectName, description, projectType, targetAmount, dueDate, tasks, funds
          });
      
          await project.save();
          res.status(201).json(project);
        } catch (err) { next(err); }
      };
      
      export const updateProject = async (req, res, next) => {
        try {
          const project = await Project.findById(req.params.id);
          assertProjectOwner(project, req.user.id);
          const allowed = ['projectName', 'description', 'targetAmount', 'dueDate'];
          allowed.forEach(k => { if (req.body[k] !== undefined) project[k] = req.body[k]; });
          await project.save();
          res.json(project);
        } catch (err) { next(err); }
      };
      
      export const deleteProject = async (req, res, next) => {
        try {
          const project = await Project.findById(req.params.id);
          assertProjectOwner(project, req.user.id);
          await project.deleteOne();
          res.status(204).end();
        } catch (err) { next(err); }
      };
      
      // --- Sub-document Operations ---
      
      export const addFund = async (req, res, next) => {
        try {
          const project = await Project.findById(req.params.id);
          assertProjectOwner(project, req.user.id);
          if (project.projectType !== 'goal') throw new AppError('Funds are only allowed for "goal" projects', 400);
          project.funds.push(req.body);
          await project.save();
          res.status(201).json(project);
        } catch (err) { next(err); }
      };
      
      export const addTask = async (req, res, next) => {
          try {
              const project = await Project.findById(req.params.id);
              assertProjectOwner(project, req.user.id);
              if (project.projectType !== 'task') throw new AppError('Tasks are only allowed for "task" projects', 400);
              project.tasks.push(req.body);
              await project.save();
              res.status(201).json(project);
          } catch(err) { next(err); }
      };
      
      export const toggleTask = async (req, res, next) => {
          try {
              const project = await Project.findById(req.params.id);
              assertProjectOwner(project, req.user.id);
              const task = project.tasks.id(req.params.taskId);
              if (!task) throw new AppError('Task not found', 404);
              task.done = !task.done;
              await project.save();
              res.json(project);
          } catch(err) { next(err); }
      };
      
      export const deleteTask = async (req, res, next) => {
          try {
              const project = await Project.findById(req.params.id);
              assertProjectOwner(project, req.user.id);
              const task = project.tasks.id(req.params.taskId);
              if (task) {
                  task.deleteOne();
                  await project.save();
              }
              res.status(204).end();
          } catch(err) { next(err); }
      };
    ðŸ“„ rateController.js
      import RateHistory from '../models/RateHistory.js';
      
      export const updatePrimeRate = async (req, res, next) => {
        try {
          const { rate, date } = req.body;
          if (rate === undefined || !date) {
            return res.status(400).json({ message: 'Rate and date are required.' });
          }
      
          // `findOneAndUpdate` ×¢× `upsert` ×™×¢×“×›×Ÿ ×× ×§×™×™× ×ª××¨×™×š ×–×”×”, ××• ×™×™×¦×•×¨ ×¨×©×•×ž×” ×—×“×©×”
          const newRate = await RateHistory.findOneAndUpdate(
            { date: new Date(date), indexName: 'prime' },
            { rate: parseFloat(rate) },
            { new: true, upsert: true, setDefaultsOnInsert: true }
          );
      
          res.status(201).json({ message: 'Prime rate updated successfully.', rate: newRate });
        } catch (error) {
          next(error);
        }
      };
    ðŸ“„ stockController.js
      // server/controllers/stockController.js
      
      import yahooFinance from 'yahoo-finance2';
      import Stock from '../models/Stock.js';
      import Account from '../models/Account.js'; // Assuming you have this model from finance part
      import AppError from '../utils/AppError.js';
      
      const USD_TO_SHEKEL = 3.7; // Consider making this a dynamic value
      
      // Helper to fetch price for a single ticker
      const fetchPrice = async (ticker) => {
        try {
          const result = await yahooFinance.quote(ticker);
          return result?.regularMarketPrice ?? 0;
        } catch (error) {
          console.error(`Failed to fetch price for ${ticker}:`, error);
          return 0;
        }
      };
      
      /** GET /api/stocks - Get all stocks for a user */
      export const getAllStocks = async (req, res, next) => {
        try {
          const stocks = await Stock.find({ user: req.user.id }).sort({ createdAt: -1 });
          res.json(stocks);
        } catch (err) {
          next(new AppError('Failed to fetch stocks.', 500));
        }
      };
      
      /** POST /api/stocks - Add a new stock */
      export const addStock = async (req, res, next) => {
        const { ticker, purchasePrice, investedAmount, sourceAccountName } = req.body;
      
        if (!ticker || !purchasePrice || !investedAmount) {
          return next(new AppError('Ticker, purchase price, and invested amount are required.', 400));
        }
      
        try {
          const currentPrice = await fetchPrice(ticker);
          if (currentPrice === 0) {
              console.warn(`Could not fetch initial price for ${ticker}. It will be updated later.`);
          }
      
          const newStock = await Stock.create({
            user: req.user.id,
            ticker: ticker.toUpperCase(),
            purchasePrice,
            investedAmount,
            currentPrice,
            lastUpdated: new Date(),
          });
      
          // Optional: Deduct from an account if provided
          if (sourceAccountName && sourceAccountName !== "×œ×œ× ×”×•×¨×“×”") {
              const account = await Account.findOne({ userId: req.user.id, name: sourceAccountName });
              if (account) {
                  const costILS = investedAmount * USD_TO_SHEKEL;
                  account.balance -= costILS;
                  await account.save();
              }
          }
      
          res.status(201).json(newStock);
        } catch (err) {
          next(new AppError('Failed to add stock.', 500));
        }
      };
      
      /** DELETE /api/stocks/:id - Delete a stock */
      export const deleteStock = async (req, res, next) => {
          try {
              const stock = await Stock.findOneAndDelete({ _id: req.params.id, user: req.user.id });
              if (!stock) {
                  return next(new AppError('Stock not found or user not authorized.', 404));
              }
              res.status(204).send();
          } catch (err) {
              next(new AppError('Failed to delete stock.', 500));
          }
      };
      
      /** POST /api/stocks/:id/sell - Sell a stock */
      export const sellStock = async (req, res, next) => {
          try {
              const stock = await Stock.findOne({ _id: req.params.id, user: req.user.id });
              if (!stock) {
                  return next(new AppError('Stock not found or user not authorized.', 404));
              }
      
              const valueILS = stock.currentValueILS;
      
              // Assuming a default 'checking' account exists
              const account = await Account.findOneAndUpdate(
                  { userId: req.user.id, name: '×¢×•"×©' },
                  { $inc: { balance: valueILS } },
                  { new: true, upsert: true }
              );
      
              await stock.deleteOne();
      
              res.json({ message: `Sold ${stock.ticker}. â‚ª${valueILS.toFixed(2)} was deposited to ${account.name}.` });
          } catch (err) {
              next(new AppError('Failed to sell stock.', 500));
          }
      };
      
      /** POST /api/stocks/refresh-prices - Refresh all stock prices */
      export const refreshPrices = async (req, res, next) => {
          try {
              const stocks = await Stock.find({ user: req.user.id });
              let updatedCount = 0;
      
              const promises = stocks.map(async (stock) => {
                  const newPrice = await fetchPrice(stock.ticker);
                  if (newPrice > 0 && newPrice !== stock.currentPrice) {
                      stock.currentPrice = newPrice;
                      stock.lastUpdated = new Date();
                      await stock.save();
                      updatedCount++;
                  }
              });
      
              await Promise.all(promises);
      
              const updatedStocks = await Stock.find({ user: req.user.id }).sort({ createdAt: -1 });
      
              res.json({
                  message: `${updatedCount} stock prices updated.`,
                  stocks: updatedStocks,
              });
          } catch (err) {
              next(new AppError('Failed to refresh stock prices.', 500));
          }
      };
    ðŸ“„ transactionController.js
      import mongoose from 'mongoose';
      import Transaction from '../models/Transaction.js';
      import FinanceProfile from '../models/FinanceProfile.js';
      
      // ... ×¤×•× ×§×¦×™×™×ª getTransactions × ×©××¨×ª ×œ×œ× ×©×™× ×•×™ ...
      export const getTransactions = async (req, res) => {
        try {
          const transactions = await Transaction.find({ user: req.user._id }).sort({ date: -1 });
          res.json(transactions);
        } catch (error) {
          res.status(500).json({ message: '×©×’×™××ª ×©×¨×ª' });
        }
      };
      
      
      // @desc   ×”×•×¡×¤×ª ×¢×¡×§×” ×—×“×©×” ×•×¢×“×›×•×Ÿ ×”×™×ª×¨×” ×‘×—×©×‘×•×Ÿ
      // @route  POST /api/transactions
      export const addTransaction = async (req, res) => {
        const { date, description, amount, type, category, account } = req.body;
      
        if (!date || !description || !amount || !type || !account) {
          return res.status(400).json({ message: '× × ×œ×ž×œ× ××ª ×›×œ ×©×“×•×ª ×”×—×•×‘×”' });
        }
      
        // --- ×‘×“×™×§×” ×× ×”×¡×‘×™×‘×” ×ª×•×ž×›×ª ×‘×˜×¨× ×–×§×¦×™×•×ª ---
        const supportsTransactions = process.env.DB_SUPPORTS_TRANSACTIONS === 'true';
      
        if (supportsTransactions) {
          // --- ×œ×•×’×™×§×” ×œ×¡×‘×™×‘×ª Production (×¢× ×˜×¨× ×–×§×¦×™×”) ---
          const session = await mongoose.startSession();
          session.startTransaction();
          try {
            const newTransaction = new Transaction({ user: req.user._id, date, description, amount: Number(amount), type, category, account });
            await newTransaction.save({ session });
      
            const amountToUpdate = type === '×”×›× ×¡×”' ? Number(amount) : -Number(amount);
            await FinanceProfile.updateOne({ user: req.user._id }, { $inc: { [account]: amountToUpdate } }, { session });
      
            await session.commitTransaction();
            res.status(201).json(newTransaction);
          } catch (error) {
            await session.abortTransaction();
            console.error("Error adding transaction with session:", error);
            res.status(500).json({ message: '×©×’×™××” ×‘×”×•×¡×¤×ª ×”×¢×¡×§×”' });
          } finally {
            session.endSession();
          }
        } else {
          // --- ×œ×•×’×™×§×” ×œ×¡×‘×™×‘×ª ×¤×™×ª×•×— ×ž×§×•×ž×™×ª (×‘×œ×™ ×˜×¨× ×–×§×¦×™×”) ---
          try {
            const newTransaction = await Transaction.create({ user: req.user._id, date, description, amount: Number(amount), type, category, account });
            const amountToUpdate = type === '×”×›× ×¡×”' ? Number(amount) : -Number(amount);
            await FinanceProfile.updateOne({ user: req.user._id }, { $inc: { [account]: amountToUpdate } });
            res.status(201).json(newTransaction);
          } catch (error) {
            console.error("Error adding transaction without session:", error);
            res.status(500).json({ message: '×©×’×™××” ×‘×”×•×¡×¤×ª ×”×¢×¡×§×”' });
          }
        }
      };
  ðŸ“„ createAdmin.js
    import mongoose from 'mongoose';
    import dotenv from 'dotenv';
    import bcrypt from 'bcrypt';
    import User from './models/userModel.js';
    
    dotenv.config();
    
    const createAdmin = async () => {
      try {
        await mongoose.connect(process.env.MONGO_URI);
        console.log('âœ… ×ž×—×•×‘×¨ ×œÖ¾MongoDB');
    
        const email = 'yosefdaean@gmail.com';
        const password = '0546205955'; // ×©× ×” ×œ×¡×™×¡×ž×” ×—×–×§×”
        const existing = await User.findOne({ email });
    
        if (existing) {
          console.log('âš ï¸ ×ž×©×ª×ž×© ×›×‘×¨ ×§×™×™×');
          return process.exit(0);
        }
    
        const hashedPassword = await bcrypt.hash(password, 12);
    
        await User.create({
          email,
          password: hashedPassword,
          role: 'admin',
        });
    
        console.log(`ðŸŽ‰ × ×•×¦×¨ ×ž×©×ª×ž×© ×ž× ×”×œ: ${email}`);
        process.exit(0);
      } catch (err) {
        console.error('âŒ ×©×’×™××” ×‘×™×¦×™×¨×ª ×ž× ×”×œ:', err);
        process.exit(1);
      }
    };
    
    createAdmin();
  ðŸ“ credentials/
    ðŸ“„ ca3.json
  ðŸ“„ import-script.js
    import mongoose from 'mongoose';
    import sqlite3 from 'sqlite3';
    import dotenv from 'dotenv';
    
    // ×˜×¢×™× ×ª ×”×ž×•×“×œ×™× ×ž×ž×¡×“ ×”× ×ª×•× ×™× ×”×—×“×©
    import User from './models/userModel.js';
    import Transaction from './models/Transaction.js';
    import FinanceProfile from './models/FinanceProfile.js';
    
    dotenv.config();
    
    // ===================================================================
    // --- âš™ï¸ ×”×’×“×¨×•×ª: ×©× ×” ××ª 3 ×”×¢×¨×›×™× ×”×‘××™× ---
    // ===================================================================
    
    // 1. ×›×ª×•×‘×ª ×”×—×™×‘×•×¨ ×œ×ž×¡×“ ×”× ×ª×•× ×™× ×”×—×“×© (MongoDB)
    const MONGO_URI = process.env.MONGO_URI || 'mongodb://localhost:27017/your_db_name';
    
    // 2. ×”× ×ª×™×‘ ×”×ž×œ× ×œ×§×•×‘×¥ ×ž×¡×“ ×”× ×ª×•× ×™× ×”×™×©×Ÿ (SQLite)
    const SQLITE_DB_PATH = 'C:/path/to/your/fin3an3ce.db'; // <-- ×©× ×” ×œ× ×ª×™×‘ ×”×ž×“×•×™×§ ×©×œ×š!
    
    // 3. ×›×ª×•×‘×ª ×”××™×ž×™×™×œ ×©×œ ×”×ž×©×ª×ž×© ×‘××ª×¨ ×©××œ×™×• ××ª×” ×¨×•×¦×” ×œ×™×™×‘× ××ª ×”× ×ª×•× ×™×
    const USER_EMAIL = 'your-email@example.com'; // <-- ×©× ×” ×œ××™×ž×™×™×œ ×©×œ×š!
    
    // ===================================================================
    
    const accountMapper = (oldAccountName) => {
      if (!oldAccountName) return 'checking';
      const name = oldAccountName.toLowerCase();
      if (name.includes('×¢×•"×©') || name.includes('checking')) return 'checking';
      if (name.includes('×ž×–×•×ž×Ÿ') || name.includes('cash')) return 'cash';
      return 'checking'; // ×‘×¨×™×¨×ª ×ž×—×“×œ
    };
    
    const runImport = async () => {
      console.log('--- ×ž×ª×—×™×œ ×¡×§×¨×™×¤×˜ ×™×™×‘×•× ×—×“-×¤×¢×ž×™ ---');
    
      // ×”×ª×—×‘×¨×•×ª ×œ-MongoDB
      try {
        await mongoose.connect(MONGO_URI);
        console.log('âœ… ×”×ª×—×‘×¨×•×ª ×œ-MongoDB ×”×¦×œ×™×—×”.');
      } catch (error) {
        console.error('âŒ ×©×’×™××” ×‘×”×ª×—×‘×¨×•×ª ×œ-MongoDB:', error.message);
        return;
      }
    
      // ×ž×¦×™××ª ×”×ž×©×ª×ž×© ×‘-MongoDB
      const user = await User.findOne({ email: USER_EMAIL });
      if (!user) {
        console.error(`âŒ ×œ× × ×ž×¦× ×ž×©×ª×ž×© ×¢× ×”××™×ž×™×™×œ: ${USER_EMAIL}`);
        await mongoose.disconnect();
        return;
      }
      console.log(`âœ… × ×ž×¦× ×ž×©×ª×ž×©: ${user.name} (${user._id})`);
    
      // ×§×¨×™××ª ×”× ×ª×•× ×™× ×ž-SQLite
      const db = new sqlite3.Database(SQLITE_DB_PATH, sqlite3.OPEN_READONLY, (err) => {
        if (err) return console.error('âŒ ×©×’×™××” ×‘×¤×ª×™×—×ª ×§×•×‘×¥ SQLite:', err.message);
      });
    
      console.log('ðŸ“– ×§×•×¨× × ×ª×•× ×™× ×ž×§×•×‘×¥ SQLite...');
      db.all("SELECT date, description, amount, type, category, account FROM transactions", [], async (err, rows) => {
        if (err) {
          console.error('âŒ ×©×’×™××” ×‘×§×¨×™××ª ×˜×‘×œ×ª ×”×¢×¡×§××•×ª:', err.message);
          db.close();
          await mongoose.disconnect();
          return;
        }
        console.log(`ðŸ“Š × ×ž×¦××• ${rows.length} ×¢×¡×§××•×ª ×‘×§×•×‘×¥ ×”×™×©×Ÿ.`);
        db.close();
    
        // ×¢×™×‘×•×“ ×•×”×›× ×ª ×”× ×ª×•× ×™× ×œ×”×›× ×¡×”
        const transactionsToInsert = rows.map(row => ({
          user: user._id,
          date: new Date(row.date),
          description: row.description || '×œ×œ× ×ª×™××•×¨',
          amount: Math.abs(Number(row.amount)) || 0,
          type: row.type === 'expense' || row.type === '×”×•×¦××”' ? '×”×•×¦××”' : '×”×›× ×¡×”',
          category: row.category || '×›×œ×œ×™',
          account: accountMapper(row.account),
        }));
    
        try {
          // ×‘×™×¦×•×¢ ×¤×¢×•×œ×•×ª ×‘-MongoDB
          console.log('ðŸ—‘ï¸ ×ž×•×—×§ ×¢×¡×§××•×ª ×§×™×™×ž×•×ª ×¢×‘×•×¨ ×”×ž×©×ª×ž×©...');
          await Transaction.deleteMany({ user: user._id });
    
          console.log(`âž• ×ž×›× ×™×¡ ${transactionsToInsert.length} ×¢×¡×§××•×ª ×—×“×©×•×ª...`);
          await Transaction.insertMany(transactionsToInsert);
    
          console.log('ðŸ§® ×ž×—×©×‘ ×ž×—×“×© ×™×ª×¨×•×ª ×‘×—×©×‘×•× ×•×ª...');
          const aggregation = await Transaction.aggregate([
            { $match: { user: user._id } },
            { $group: {
                _id: '$account',
                total: { $sum: { $cond: [{ $eq: ['$type', '×”×›× ×¡×”'] }, '$amount', { $multiply: ['$amount', -1] }] } }
            }}
          ]);
    
          const newBalances = { checking: 0, cash: 0, deposits: 0, stocks: 0 };
          aggregation.forEach(item => {
            if (newBalances.hasOwnProperty(item._id)) newBalances[item._id] = item.total;
          });
    
          await FinanceProfile.updateOne({ user: user._id }, { $set: newBalances }, { upsert: true });
          console.log('ðŸ”„ ×”×™×ª×¨×•×ª ×¢×•×“×›× ×• ×‘×”×¦×œ×—×”.');
    
          console.log('\nðŸŽ‰ðŸŽ‰ðŸŽ‰ ×”×™×™×‘×•× ×”×•×©×œ× ×‘×”×¦×œ×—×”! ðŸŽ‰ðŸŽ‰ðŸŽ‰');
    
        } catch (dbError) {
          console.error('âŒ ×©×’×™××” ×§×¨×™×˜×™×ª ×‘×ž×”×œ×š ×”×›×ª×™×‘×” ×œ-MongoDB:', dbError);
        } finally {
          await mongoose.disconnect();
          console.log('ðŸ”š × ×•×ª×§×” ×”×ª×§×©×•×¨×ª ×¢× ×ž×¡×“ ×”× ×ª×•× ×™×.');
        }
      });
    };
    
    runImport();
  ðŸ“ middlewares/
    ðŸ“„ authMiddleware.js
      import jwt from 'jsonwebtoken';
      
      export const requireAuth = async (req, res, next) => {
        // The cookie name 'jwt' is correct.
        const token = req.cookies.jwt;
      
        if (!token) {
          return res.status(401).json({ message: '×œ× ×ž×—×•×‘×¨' });
        }
      
        try {
          // âœ… ×”×ª×™×§×•×Ÿ: ×©×™×ž×•×© ×‘×ž×¤×ª×— ×”×¡×•×“×™ ×”× ×›×•×Ÿ ×©×ž×•×’×“×¨ ×‘-tokenHandler.js
          const decoded = jwt.verify(token, process.env.JWT_ACCESS_SECRET);
      
          // We attach the user's ID and role to the request object
          req.user = { id: decoded.id, role: decoded.role };
      
          next();
        } catch (err) {
          // This will catch expired or invalid tokens
          return res.status(401).json({ message: '×˜×•×§×Ÿ ×œ× ×—×•×§×™ / ×¤×’ ×ª×•×§×£' });
        }
      };
      
      export const requireAdmin = (req, res, next) => {
        // This middleware should run *after* requireAuth
        if (req.user?.role !== 'admin') {
          return res.status(403).json({ message: '×”×¨×©××ª ×ž× ×”×œ × ×“×¨×©×ª' });
        }
        next();
      };
    ðŸ“„ errorHandler.js
      // Global error handler
      export const errorHandler = (err, req, res, next) => {
        console.error("ðŸ’¥ ERROR:", err);
      
        if (err.code === 'EBADCSRFTOKEN') {
          return res.status(403).json({ message: 'Invalid or missing CSRF token.' });
        }
      
        err.statusCode = err.statusCode || 500;
        err.status = err.status || 'error';
        err.message = err.message || 'Something went very wrong!';
      
        res.status(err.statusCode).json({
          status: err.status,
          message: err.message,
          ...(process.env.NODE_ENV === 'development' && { stack: err.stack }),
        });
      };
      
      // Wrapper for async route handlers to catch errors and pass them to the global handler
      export const catchAsync = fn => {
        return (req, res, next) => {
          fn(req, res, next).catch(next);
        };
      };
    ðŸ“„ rateLimiter.js
      import rateLimit from 'express-rate-limit';
      
      const isDev = process.env.NODE_ENV !== 'production';
      
      /* Limiter ×›×œ×œ×™ */
      export const publicLimiter = isDev
        ? (_req, _res, next) => next()
        : rateLimit({
            windowMs: 10 * 60 * 1000,
            max: 100,
            standardHeaders: true,
            legacyHeaders: false,
          });
      
      /* Limiter ×œ-/api/products */
      export const productsLimiter = isDev
        ? (_req, _res, next) => next()
        : rateLimit({
            windowMs: 10 * 60 * 1000,
            max: 300,
            standardHeaders: true,
            legacyHeaders: false,
          });
      
      /* ×‘×¨×™×¨×ª-×ž×—×“×œ */
      export default publicLimiter;
    ðŸ“„ requireAdmin.js
      import jwt from 'jsonwebtoken';
      
      export default function requireAdmin(req, res, next) {
        const token = req.cookies.token;
        if (!token) return res.status(401).json({ message: '×œ× ×ž×—×•×‘×¨' });
      
        try {
          const decoded = jwt.verify(token, process.env.JWT_SECRET);
          if (decoded.role !== 'admin')
            return res.status(403).json({ message: '×”×¨×©××ª ×ž× ×”×œ × ×“×¨×©×ª' });
      
          req.user = decoded;
          next();
        } catch {
          return res.status(401).json({ message: '×˜×•×§×Ÿ ×œ× ×ª×§×£/×¤×’' });
        }
      }
    ðŸ“„ requireAuth.js
      import jwt from 'jsonwebtoken';
      import User from '../models/userModel.js';
      
      export default async function requireAuth(req, res, next) {
        try {
          const token = req.cookies?.jwt;
          if (!token) {
            return res.status(401).json({ msg: 'Unauthorized: No token provided' });
          }
      
          const decoded = jwt.verify(token, process.env.JWT_ACCESS_SECRET);
      
          const user = await User.findById(decoded.id).select('-passwordHash');
          if (!user) {
            return res.status(401).json({ msg: 'Unauthorized: User not found' });
          }
      
          req.user = user;
          next();
        } catch (error) {
          // ×©×œ×— ×‘×—×–×¨×” ××ª ×”×•×“×¢×ª ×”×©×’×™××” ×”×ž×“×•×™×§×ª ×ž×”×¡×¤×¨×™×™×” ×œ×¦×•×¨×š ××‘×—×•×Ÿ
          return res.status(401).json({ msg: `Unauthorized: ${error.message}` });
        }
      }
    ðŸ“„ requireRefresh.js
      import jwt from "jsonwebtoken";
      import User from "../models/userModel.js";
      
      export default async function requireRefresh(req, res, next) {
        const token = req.cookies?.refreshToken;
        if (!token) return res.status(401).json({ message: "No refresh-token" });
      
        try {
          const { id } = jwt.verify(token, process.env.REFRESH_SECRET); // â† ××•×ª×• ×¡×•×“
          const user = await User.findById(id).select("-passwordHash");
          if (!user) return res.status(401).json({ message: "User not found" });
      
          req.user = user;
          next();
        } catch (err) {                                // â† ×—×™×™×‘ ×œ×§×‘×œ err
          console.log("âŒ verify refresh failed:", err.message);
          res.status(401).json({ message: "Invalid or expired refresh-token" });
        }
      }
  ðŸ“ models/
    ðŸ“„ Account.js
      // server/models/Account.js
      import mongoose from 'mongoose';
      
      const accountSchema = new mongoose.Schema(
        {
          userId:  { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
          name:    { type: String, required: true },
          balance: { type: Number, default: 0 },
        },
        { timestamps: true }
      );
      
      const Account = mongoose.model('Account', accountSchema);
      
      /* ×™×¦×•× ×›×¤×•×œ â€” ×œ×©× ×™ ×”×¢×•×œ×ž×•×ª */
      export default Account;          // ES-Modules
      export { Account };              // ×™×™×‘×•× ×©×ž×™ ×× ×ª×¨×¦×”
      // CommonJS fallback (×× ×§×•×“ ×™×©×Ÿ ×“×•×¨×©):
      // eslint-disable-next-line no-undef
      if (typeof module !== 'undefined') module.exports = Account;
    ðŸ“„ Category.js
      import mongoose from 'mongoose';
      
      const categorySchema = new mongoose.Schema({
        // ×”×¡×¨× ×• ××ª ×©×“×” ×”×ž×©×ª×ž×©
        name: {
          type: String,
          required: true,
          trim: true,
          unique: true, // ×©× ×”×§×˜×’×•×¨×™×” ×—×™×™×‘ ×œ×”×™×•×ª ×™×™×—×•×“×™ ×‘×›×œ ×”×ž×¢×¨×›×ª
        },
        type: {
          type: String,
          enum: ['×”×•×¦××”', '×”×›× ×¡×”', '×›×œ×œ×™'],
          default: '×”×•×¦××”',
        },
      }, {
        timestamps: true,
      });
      
      export default mongoose.model('Category', categorySchema);
    ðŸ“„ CategoryRule.js
      import mongoose from 'mongoose';
      
      const categoryRuleSchema = new mongoose.Schema({
        // ×ž×™×œ×ª ×”×ž×¤×ª×— ×œ×—×™×¤×•×© ×‘×©× ×”×¡×¤×§, ×œ×ž×©×œ "×¡×•×¤×¨", "×“×œ×§", "AMZN"
        keyword: {
          type: String,
          required: true,
          trim: true,
          unique: true, // ×›×œ ×ž×™×œ×ª ×ž×¤×ª×— ×”×™× ×™×™×—×•×“×™×ª
        },
        // ×”×§×™×©×•×¨ ×œ×§×˜×’×•×¨×™×” ×©××œ×™×” ×™×© ×œ×©×™×™×š ××ª ×”×¢×¡×§×” ×× × ×ž×¦××” ×ž×™×œ×ª ×”×ž×¤×ª×—
        category: {
          type: mongoose.Schema.Types.ObjectId,
          ref: 'Category',
          required: true,
        },
        // × ×™×ª×Ÿ ×œ×”×•×¡×™×£ ×¢×“×™×¤×•×ª ×‘×¢×ª×™×“, ×›×“×™ ×œ×˜×¤×œ ×‘×ž×§×¨×™× ×©×ž×¡×¤×¨ ×—×•×§×™× ×ž×ª××™×ž×™×
        // priority: { type: Number, default: 0 }
      }, {
        timestamps: true,
      });
      
      export default mongoose.model('CategoryRule', categoryRuleSchema);
    ðŸ“„ DataRecordModel.js
      import mongoose from "mongoose";
      
      const dataRecordSchema = new mongoose.Schema(
        {
          // ×¢×¨×š ×ž×¡×¤×¨×™ 3: ×ž×–×”×” ×”×ž×©×ª×ž×© ×©×©×œ×— ××ª ×”× ×ª×•× ×™×
          user: {
            type: mongoose.Schema.Types.ObjectId,
            required: true,
            ref: "User", // ×§×™×©×•×¨ ×œ×ž×•×“×œ ×”×ž×©×ª×ž×© ×©×œ×š
          },
          // ×¢×¨×š ×ž×¡×¤×¨×™ 1: ×ž×”×œ×§×•×—
          value1: {
            type: Number,
            required: true,
          },
          // ×¢×¨×š ×ž×¡×¤×¨×™ 2: ×ž×”×œ×§×•×—
          value2: {
            type: Number,
            required: true,
          },
        },
        {
          // ×¢×¨×š ×ž×¡×¤×¨×™ 4: ×—×•×ª×ž×ª ×–×ž×Ÿ ××•×˜×•×ž×˜×™×ª ×©×œ ×ž×•× ×’×•
          timestamps: true, // ×ž×•×¡×™×£ createdAt ×•-updatedAt
        }
      );
      
      export default mongoose.model("DataRecord", dataRecordSchema);
    ðŸ“„ Deposit.js
      // server/models/Deposit.js
      import mongoose from 'mongoose';
      
      const depositSchema = new mongoose.Schema({
        user: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true, index: true },
        name: { type: String, required: true, trim: true },
        principal: { type: Number, required: true, min: 0 },
        annualInterestRate: { type: Number, required: true, min: 0 },
        startDate: { type: Date, required: true },
        endDate: { type: Date, required: true },
        status: {
          type: String,
          enum: ['active', 'broken', 'matured'],
          default: 'active'
        },
        sourceAccount: { type: String, trim: true },
        // --- ×”×•×¡×¤×” ---
        exitPoints: {
          type: [Date], // ×”×’×“×¨×” ×›×©×“×” ×ž×¡×•×’ ×ž×¢×¨×š ×©×œ ×ª××¨×™×›×™×
          default: []   // ×¢×¨×š ×‘×¨×™×¨×ª ×ž×—×“×œ ×”×•× ×ž×¢×¨×š ×¨×™×§
        }
        // --- ×¡×•×£ ×”×•×¡×¤×” ---
      }, {
        timestamps: true,
        toJSON: { virtuals: true },
        toObject: { virtuals: true }
      });
      
      depositSchema.virtual('futureValue').get(function() {
        const years = (this.endDate.getTime() - this.startDate.getTime()) / (1000 * 60 * 60 * 24 * 365.25);
        return this.principal * (1 + (this.annualInterestRate / 100) * years);
      });
      
      export default mongoose.model('Deposit', depositSchema);
    ðŸ“„ FinanceProfile.js
      import mongoose from 'mongoose';
      
      const financeProfileSchema = new mongoose.Schema({
        // ×§×™×©×•×¨ ×™×™×—×•×“×™ ×œ×ž×©×ª×ž×© (××—×“ ×¢×œ ××—×“)
        user: {
          type: mongoose.Schema.Types.ObjectId,
          ref: 'User', // ×•×“× ×©×–×” ×©× ×ž×•×“×œ ×”×ž×©×ª×ž×© ×©×œ×š
          required: true,
          unique: true, // ×ž×‘×˜×™×— ×©×œ×›×œ ×ž×©×ª×ž×© ×™×”×™×” ×¨×§ ×¤×¨×•×¤×™×œ ××—×“
        },
        checking: { // ×¢×•"×©
          type: Number,
          default: 0,
        },
        cash: { // ×ž×–×•×ž×Ÿ
          type: Number,
          default: 0,
        },
        deposits: { // ×¤×§×“×•× ×•×ª
          type: Number,
          default: 0,
        },
        stocks: { // ×ž× ×™×•×ª ×•×§×¨× ×•×ª
          type: Number,
          default: 0,
        },
      }, {
        timestamps: true, // ×ž×•×¡×™×£ ××•×˜×•×ž×˜×™×ª ×ª××¨×™×š ×™×¦×™×¨×” ×•×¢×“×›×•×Ÿ
      });
      
      export default mongoose.model('FinanceProfile', financeProfileSchema);
    ðŸ“„ Fund.js
      import mongoose from 'mongoose';
      
      const fundSchema = new mongoose.Schema(
        {
          user: {
            type: mongoose.Schema.Types.ObjectId,
            ref: 'User',
            required: true,
            index: true,
          },
          fund_number: {
            type: String,
            required: true,
            trim: true,
          },
          purchase_price: {
            type: Number,
            required: true,
          },
          invested_amount: {
            type: Number,
            required: true,
          },
          current_price: {
            type: Number,
            default: 0,
          },
          last_updated: {
            type: Date,
          },
        },
        {
          timestamps: true,
          toJSON: { virtuals: true },
          toObject: { virtuals: true },
        }
      );
      
      // Virtual properties ×œ×—×™×©×•×‘×™× ×“×™× ×ž×™×™×, ×‘×“×•×ž×” ×œ×§×•×“ ×”×¤×™×™×ª×•×Ÿ
      fundSchema.virtual('units').get(function () {
        if (this.purchase_price > 0) {
          return this.invested_amount / this.purchase_price;
        }
        return 0;
      });
      
      fundSchema.virtual('current_value').get(function () {
        return this.units * this.current_price;
      });
      
      fundSchema.virtual('profit').get(function () {
        return (this.current_price - this.purchase_price) * this.units;
      });
      
      export default mongoose.model('Fund', fundSchema);
    ðŸ“„ Loan.js
      import mongoose from 'mongoose';
      
      const loanSchema = new mongoose.Schema(
        {
          user: {
            type: mongoose.Schema.Types.ObjectId,
            ref: 'User',
            required: true,
            index: true,
          },
          name: {
            type: String,
            required: [true, '×©× ×”×”×œ×•×•××” ×”×•× ×©×“×” ×—×•×‘×”'],
            trim: true,
          },
          principal: {
            type: Number,
            required: [true, '×¡×›×•× ×”×§×¨×Ÿ ×”×•× ×©×“×” ×—×•×‘×”'],
          },
          // ×©×“×” ×”×¨×™×‘×™×ª ×©×•× ×” ×›×“×™ ×œ×©×ž×•×¨ ×¨×§ ××ª ×”×ž×¨×•×•×— ×ž×¢×œ ×”×¤×¨×™×™×
          interestMargin: {
            type: Number,
            required: true,
            default: 0,
          },
          termInMonths: {
            type: Number,
            required: [true, '×ª×§×•×¤×ª ×”×”×œ×•×•××” ×‘×—×•×“×©×™× ×”×•× ×©×“×” ×—×•×‘×”'],
          },
          startDate: {
            type: Date,
            required: [true, '×ª××¨×™×š ×ª×—×™×œ×ª ×”×”×œ×•×•××” ×”×•× ×©×“×” ×—×•×‘×”'],
          },
          repaymentType: {
            type: String,
            enum: ['×©×¤×™×¦×¨', '×§×¨×Ÿ ×©×•×•×”'],
            required: true,
          },
          // ----- ×©×“×” ×–×” ×ž×•×¡×¨ -----
          // amortizationSchedule: [paymentSchema],
        },
        {
          timestamps: true,
        }
      );
      
      export default mongoose.model('Loan', loanSchema);
    ðŸ“„ MerchantMap.js
      import mongoose from 'mongoose';
      
      const merchantMapSchema = new mongoose.Schema({
        // ×”×¡×¨× ×• ××ª ×©×“×” ×”×ž×©×ª×ž×©
        originalName: {
          type: String,
          required: true,
          trim: true,
          unique: true, // ×”×©× ×”×ž×§×•×¨×™ ×—×™×™×‘ ×œ×”×™×•×ª ×™×™×—×•×“×™ ×‘×›×œ ×”×ž×¢×¨×›×ª
        },
        newName: {
          type: String,
          required: true,
          trim: true,
        },
        category: {
          type: mongoose.Schema.Types.ObjectId,
          ref: 'Category',
          required: false,
        },
      }, {
        timestamps: true,
      });
      
      export default mongoose.model('MerchantMap', merchantMapSchema);
    ðŸ“„ Project.js
      import mongoose from 'mongoose';
      
      /*
       * Sub-schemas for tasks and funds, embedded within a project.
       */
      const taskSchema = new mongoose.Schema({
        name: { type: String, required: true, trim: true },
        amount: { type: Number, required: true, min: 0 },
        done: { type: Boolean, default: false },
      });
      
      const fundSchema = new mongoose.Schema({
        amount: { type: Number, required: true, min: 0 },
        destination: { type: String, trim: true },
        date: { type: Date, default: Date.now },
      });
      
      /*
       * Main project schema.
       */
      const projectSchema = new mongoose.Schema({
        owner: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true, index: true },
        projectName: { type: String, required: true, trim: true },
        description: { type: String, trim: true },
        projectType: { type: String, required: true, enum: ['goal', 'task'] },
      
        // Fields for "goal" type projects
        targetAmount: {
          type: Number,
          min: 0,
          // Required only if the project type is 'goal'
          required() { return this.projectType === 'goal'; },
        },
        currentAmount: { type: Number, min: 0, default: 0 },
      
        // Embedded documents based on project type
        tasks: [taskSchema],
        funds: [fundSchema],
      
        dueDate: { type: Date },
      }, { timestamps: true });
      
      /**
       * Middleware (pre-save hook) to automatically calculate current and target amounts.
       * This logic runs before any `save()` operation on a project document.
       */
      projectSchema.pre('save', function (next) {
        if (this.projectType === 'goal') {
          // For goal projects, currentAmount is the sum of all funds.
          this.currentAmount = (this.funds || []).reduce((sum, f) => sum + f.amount, 0);
        } else if (this.projectType === 'task') {
          // For task projects, currentAmount is the sum of completed tasks,
          // and targetAmount is the sum of all tasks.
          const doneSum = (this.tasks || []).filter(t => t.done).reduce((sum, t) => sum + t.amount, 0);
          const totalSum = (this.tasks || []).reduce((sum, t) => sum + t.amount, 0);
          this.currentAmount = doneSum;
          this.targetAmount = totalSum;
        }
        next();
      });
      
      export default mongoose.model('Project', projectSchema);
    ðŸ“„ RateHistory.js
      import mongoose from 'mongoose';
      
      const rateHistorySchema = new mongoose.Schema(
        {
          // ×”×ª××¨×™×š ×©×ž×ž× ×• ×”×¨×™×‘×™×ª ×‘×ª×•×§×£
          date: {
            type: Date,
            required: true,
            unique: true, // ×œ× × ××¤×©×¨ ×©× ×™ ×¢×“×›×•× ×™× ×‘××•×ª×• ×ª××¨×™×š
          },
          // ×©×™×¢×•×¨ ×”×¨×™×‘×™×ª ×‘××—×•×–×™× (×œ×ž×©×œ, 6.25 ×¢×‘×•×¨ 6.25%)
          rate: {
            type: Number,
            required: true,
          },
          indexName: { // ×©× ×”×ž×“×“, ×œ×ž×§×¨×” ×©×ª×¨×¦×” ×œ×”×•×¡×™×£ ×ž×“×“×™× ××—×¨×™× ×‘×¢×ª×™×“
            type: String,
            default: 'prime',
            required: true,
          }
        },
        {
          timestamps: true,
          versionKey: false,
        }
      );
      
      rateHistorySchema.index({ date: -1, indexName: 1 });
      
      export default mongoose.model('RateHistory', rateHistorySchema);
    ðŸ“„ Stock.js
      // server/models/Stock.js
      
      import mongoose from 'mongoose';
      
      const stockSchema = new mongoose.Schema(
        {
          user: {
            type: mongoose.Schema.Types.ObjectId,
            ref: 'User',
            required: true,
            index: true,
          },
          ticker: {
            type: String,
            required: true,
            uppercase: true,
            trim: true,
          },
          purchasePrice: {
            type: Number,
            required: true,
          },
          investedAmount: {
            type: Number,
            required: true,
          },
          currentPrice: {
            type: Number,
            default: 0,
          },
          lastUpdated: {
            type: Date,
          },
        },
        {
          timestamps: true,
          toJSON: { virtuals: true },
          toObject: { virtuals: true },
        }
      );
      
      // Virtual property to calculate shares on the fly
      stockSchema.virtual('shares').get(function () {
        if (this.purchasePrice > 0) {
          return this.investedAmount / this.purchasePrice;
        }
        return 0;
      });
      
      // Virtual property for current value in ILS
      stockSchema.virtual('currentValueILS').get(function () {
        const USD_TO_SHEKEL = 3.7; // It's better to manage this rate globally
        return this.shares * this.currentPrice * USD_TO_SHEKEL;
      });
      
      // Virtual property for profit/loss in USD
      stockSchema.virtual('profitUSD').get(function () {
        return (this.currentPrice - this.purchasePrice) * this.shares;
      });
      
      
      export default mongoose.model('Stock', stockSchema);
    ðŸ“„ Transaction.js
      // server/models/Transaction.js
      import mongoose from 'mongoose';
      
      const transactionSchema = new mongoose.Schema({
        user: {
          type: mongoose.Schema.Types.ObjectId,
          ref: 'User',
          required: true,
        },
        date: {
          type: Date,
          required: true,
        },
        description: {
          type: String,
          default: '',
        },
        // â—€ï¸ --- ×©×“×” ×—×“×© ---
        // ×©×•×ž×¨ ××ª ×”×©× ×”×ž×§×•×¨×™ ×”×’×•×œ×ž×™ ×›×¤×™ ×©×”×•×¤×™×¢ ×‘×§×•×‘×¥ ×”×™×™×‘×•×
        rawDescription: {
          type: String,
          default: '',
        },
        // --- ×¡×•×£ ---
        amount: {
          type: Number,
          required: true,
        },
        type: {
          type: String,
          enum: ['×”×•×¦××”', '×”×›× ×¡×”'],
          required: true,
        },
        category: {
          type: String,
          default: '×›×œ×œ×™',
        },
        account: {
          type: String,
          enum: ['checking', 'cash', 'deposits', 'stocks'],
          required: true,
        }
      }, {
        timestamps: true,
      });
      
      transactionSchema.index({ user: 1, date: 1, description: 1, amount: 1, type: 1 }, { unique: true });
      
      export default mongoose.model('Transaction', transactionSchema);
    ðŸ“„ TzitzitOrder.js
      import mongoose from 'mongoose';
      
      const TzitzitOrderSchema = new mongoose.Schema(
        {
          user:       { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
      
          supplier:   { type: String,  required: true, trim: true },
          date:       { type: Date,    required: true },
          type:       { type: String,  enum: ['×¦×™×¦×™×ª', '×˜×œ×™×ª'], required: true },
      
          quantity:   { type: Number,  required: true, min: 1 },
          unitPrice:  { type: Number,  required: true, min: 0 },
      
          /* â€¼ï¸  ×”×©×“×” ×©×”×™×” ×—×¡×¨  â€“ ×›×ž×” ×›×‘×¨ ×©×•×œ× */
          paidMoney:  { type: Number,  default: 0,     min: 0 },
        },
        {
          timestamps: true,
          toJSON:  { virtuals: true },
          toObject:{ virtuals: true },
        }
      );
      
      /* virtual â€“ totalPrice ×ž×—×•×©×‘ ××•×˜×•×ž×˜×™×ª */
      TzitzitOrderSchema.virtual('totalPrice').get(function () {
        return (this.quantity ?? 0) * (this.unitPrice ?? 0);
      });
      
      export default mongoose.model('TzitzitOrder', TzitzitOrderSchema);
    ðŸ“„ User.js
      import mongoose from 'mongoose';
      
      const userSchema = new mongoose.Schema(
        {
          name: {
            type: String,
            required: true
          },
          email: {
            type: String,
            required: true,
            unique: true,
            lowercase: true,
            trim: true
          },
          // ×©×•× ×” ×ž-password ×œ-passwordHash ×›×“×™ ×œ×”×ª××™× ×œ×§×•× ×˜×¨×•×œ×¨
          passwordHash: {
            type: String,
            required: true
          },
          role: {
            type: String,
            enum: ['user', 'admin'],
            default: 'user'
          },
          // ×©×“×•×ª × ×“×¨×©×™× ×œ× ×™×”×•×œ ××‘×˜×—×” ×•×¨×¢× ×•×Ÿ ×˜×•×§× ×™×
          tokenVersion: {
            type: Number,
            default: 0
          },
          loginAttempts: {
            type: Number,
            default: 0
          },
          lockUntil: {
            type: Date
          }
        },
        { timestamps: true }
      );
      
      // --- ×•×™×¨×˜×•××œ×™× (Virtuals) ---
      // ×ž××¤×©×¨ ×œ×§×•× ×˜×¨×•×œ×¨ ×œ×‘×“×•×§ user.isLocked ×‘×œ×™ ×œ×©×ž×•×¨ ××ª ×–×” ×‘×ž×¡×“
      userSchema.virtual('isLocked').get(function () {
        return !!(this.lockUntil && this.lockUntil > Date.now());
      });
      
      // --- ×ž×ª×•×“×•×ª (Instance Methods) ---
      
      // ××™×¤×•×¡ × ×™×¡×™×•× ×•×ª ×”×ª×—×‘×¨×•×ª (× ×§×¨× ××—×¨×™ ×”×ª×—×‘×¨×•×ª ×ž×•×¦×œ×—×ª)
      userSchema.methods.resetLoginAttempts = async function () {
        this.loginAttempts = 0;
        this.lockUntil = undefined;
        await this.save();
      };
      
      // ×”×¢×œ××ª ×ž×•× ×” × ×™×¡×™×•× ×•×ª ×•× ×¢×™×œ×” ×× ×¦×¨×™×š
      userSchema.methods.incrementLoginAttempts = async function () {
        // ×× ×”×—×©×‘×•×Ÿ ×›×‘×¨ × ×¢×•×œ ×•×¢×“×™×™×Ÿ ×œ× ×¢×‘×¨ ×”×–×ž×Ÿ, ××œ ×ª×¢×©×” ×›×œ×•×
        if (this.lockUntil && this.lockUntil > Date.now()) {
          return;
        }
      
        // ×¢×“×›×•×Ÿ ×”×ž×•× ×”
        this.loginAttempts += 1;
      
        // × ×¢×™×œ×” ××—×¨×™ 5 × ×™×¡×™×•× ×•×ª ×›×•×©×œ×™× ×œ×ž×©×š ×©×¢×”
        if (this.loginAttempts >= 5) {
          this.lockUntil = Date.now() + 60 * 60 * 1000; // ×©×¢×” ××—×ª
        }
      
        await this.save();
      };
      
      const User = mongoose.models.User || mongoose.model('User', userSchema);
      
      export default User;
    ðŸ“„ centerModel.js
      import mongoose from 'mongoose';
      
      const centerSchema = new mongoose.Schema(
        {
          name: {
            type: String,
            required: [true, '×©× ×ž×¨×›×– ×—×•×‘×”'],
            unique: true,
            trim: true,
          },
          address: {
            type: String,
            trim: true,
          },
          active: {
            type: Boolean,
            default: true,
          },
          capacity: {
            type: Number,
            default: 0, // 0 = ×œ×œ× ×”×’×‘×œ×”
            min: 0,
          },
        },
        {
          timestamps: true,
          versionKey: false,
        }
      );
      
      export default mongoose.model('Center', centerSchema);
    ðŸ“„ userModel.js
      import mongoose from 'mongoose';
      
      const MAX_FAILED = 5;       // × ×¢×™×œ×” ××—×¨×™ 5 ×›×©×œ×•× ×•×ª
      const LOCK_MS    = 10 * 60 * 1000; // 10 ×“×§×•×ª
      
      const cartItemSchema = new mongoose.Schema({
        product: {
          type: mongoose.Schema.Types.ObjectId,
          ref: 'Product',
          required: true,
        },
        quantity: {
          type: Number,
          required: true,
          min: 1,
          default: 1,
        },
      }, { _id: false });
      
      const userSchema = new mongoose.Schema(
        {
          // ðŸ‘‡ --- ×”×•×¡×¤× ×• ××ª ×”×©×“×” ×”×–×” ×›×“×™ ×œ×”×ª××™× ×œ×§×•× ×˜×¨×•×œ×¨ --- ðŸ‘‡
          name: {
            type: String,
            required: [true, '×©× ×—×•×‘×”'],
            trim: true,
          },
          // ðŸ‘† --- ×¢×“ ×›××Ÿ --- ðŸ‘†
      
          email: {
            type: String,
            required: [true, '××™×ž×™×™×œ ×—×•×‘×”'],
            unique: true,
            lowercase: true,
            trim: true,
            match: [/^\S+@\S+\.\S+$/, '×¤×•×¨×ž×˜ ××™×ž×™×™×œ ×œ× ×ª×§×™×Ÿ'],
          },
          passwordHash: {
            type: String,
            required: [true, '×¡×™×¡×ž×” ×—×•×‘×”'],
            minlength: 60,
          },
          role: {
            type: String,
            enum: ['user', 'admin'],
            default: 'user',
          },
          cart: {
            type: [cartItemSchema],
            default: [],
          },
          twoFactorEnabled: { type: Boolean, default: false },
          totpSecret: { type: String, default: '' },
          failedLoginAttempts: { type: Number, default: 0 },
          lockUntil: { type: Date, default: null },
          tokenVersion: { type: Number, default: 0 },
        },
        {
          timestamps: true,
          versionKey: false,
        }
      );
      
      userSchema.virtual('isLocked').get(function () {
        return !!(this.lockUntil && this.lockUntil > Date.now());
      });
      
      userSchema.methods.incrementLoginAttempts = function () {
        if (this.isLocked) return;
        const updates = { $inc: { failedLoginAttempts: 1 } };
        if (this.failedLoginAttempts + 1 >= MAX_FAILED) {
          updates.$set = { lockUntil: Date.now() + LOCK_MS };
        }
        return this.updateOne(updates);
      };
      
      userSchema.methods.resetLoginAttempts = function () {
        if (this.failedLoginAttempts || this.lockUntil) {
          return this.updateOne({ failedLoginAttempts: 0, lockUntil: null });
        }
      };
      
      export default mongoose.models.User || mongoose.model('User', userSchema);
  ðŸš« node_modules/ (× ×¤×¡×œ ×œ×¡×¨×™×§×”)
  ðŸ“„ package-lock.json
  ðŸ“„ package.json
  ðŸ“ routes/
    ðŸ“„ adminCenters.js
      import express from 'express';
      import requireAdmin from '../middlewares/requireAdmin.js';
      import {
        getAllCenters,
        createCenter,
        deleteCenter,
      } from '../controllers/admin/centerAdminController.js';
      
      const router = express.Router();
      router.use(requireAdmin);
      
      router.get('/',    getAllCenters);
      router.post('/',   createCenter);
      router.delete('/:id', deleteCenter);
      
      export default router;
    ðŸ“„ adminOrders.js
      import express from 'express';
      import requireAdmin from '../middlewares/requireAdmin.js';
      import {
        getAllOrders,
        updateOrderStatus,
        deleteOrder,
      } from '../controllers/admin/orderAdminController.js';
      
      const router = express.Router();
      router.use(requireAdmin);
      
      router.get('/',    getAllOrders);
      router.put('/:id', updateOrderStatus);
      router.delete('/:id', deleteOrder);
      
      export default router;
    ðŸ“„ adminUsers.js
      import express from 'express';
      import requireAdmin from '../middlewares/requireAdmin.js';
      import {
        getAllUsers,
        updateUserRole,
        deleteUser,
      } from '../controllers/admin/userAdminController.js';
      
      const router = express.Router();
      router.use(requireAdmin);
      
      router.get('/',    getAllUsers);
      router.put('/:id', updateUserRole);
      router.delete('/:id', deleteUser);
      
      export default router;
    ðŸ“„ auth.js
      // server/routes/auth.js
      
      import express from 'express';
      // ðŸ‘‡ --- ×”×ª×™×§×•×Ÿ ×›××Ÿ: ×©×™×ž×•×© ×‘×©×ž×•×ª ×”×¤×•× ×§×¦×™×•×ª ×”× ×›×•× ×™× --- ðŸ‘‡
      import { registerUser, loginUser, logout, refresh } from '../controllers/authController.js';
      
      const router = express.Router();
      
      // ðŸ‘‡ --- ×•×’× ×›××Ÿ, ×›×“×™ ×œ×”×ª××™× ×œ×©×ž×•×ª ×”×—×“×©×™× --- ðŸ‘‡
      router.post('/register', registerUser);
      router.post('/login', loginUser);
      router.post('/logout', logout);
      router.post('/refresh', refresh);
      
      export default router;
    ðŸ“„ cartRoutes.js
      import express from 'express';
      import { getCart, updateCart } from '../controllers/cartController.js';
      import { requireAuth } from '../middlewares/authMiddleware.js';
      
      const router = express.Router();
      
      router.route('/')
        .get(requireAuth, getCart)
        .post(requireAuth, updateCart);
      
      export default router;
    ðŸ“„ categoryRoutes.js
      import express from 'express';
      import { body, param } from 'express-validator';
      import { getCategories, createCategory, updateCategory, deleteCategory } from '../controllers/categoryController.js';
      import requireAuth            from '../middlewares/requireAuth.js';
      import { handleValidationErrors } from '../utils/validators.js'; // ×›×‘×¨ ×§×™×™× ×‘×›×œ×™-×”×¢×–×¨ ×©×œ×š
      
      const router = express.Router();
      router.use(requireAuth);
      
      router.route('/')
        .get(getCategories)
        .post(
          [
            body('name').trim().notEmpty().withMessage('×—×•×‘×” ×œ×¦×™×™×Ÿ ×©× ×§×˜×’×•×¨×™×”'),
            body('type').optional().isIn(['×”×•×¦××”', '×”×›× ×¡×”', '×›×œ×œ×™'])
              .withMessage("×”-type ×—×™×™×‘ ×œ×”×™×•×ª '×”×•×¦××”', '×”×›× ×¡×”' ××• '×›×œ×œ×™'"),
            handleValidationErrors
          ],
          createCategory
        );
      
      router.route('/:id')
        .put(param('id').isMongoId(), updateCategory)
        .delete(param('id').isMongoId(), deleteCategory);
      
      export default router;
    ðŸ“„ dashboardRoutes.js
      // server/routes/dashboardRoutes.js
      import express from 'express';
      import { getDashboardData } from '../controllers/dashboardController.js';
      import { requireAuth } from '../middlewares/authMiddleware.js';
      
      const router = express.Router();
      
      // ×›×œ ×”× ×ª×™×‘×™× ×‘×§×•×‘×¥ ×–×” ×“×•×¨×©×™× ××™×ž×•×ª
      router.use(requireAuth);
      
      // × ×ª×™×‘ ×œ×§×‘×œ×ª ×›×œ ×¡×™×›×•× ×”× ×ª×•× ×™× ×œ×“×©×‘×•×¨×“
      router.get('/summary', getDashboardData);
      
      export default router;
    ðŸ“„ dataRoutes.js
      import express from "express";
      import { saveDataRecord } from "../controllers/dataController.js";
      // ×©×•×¨×” ×–×• ×ž×©×ª× ×”
      import requireAuth from "../middlewares/requireAuth.js"; // <-- ×”×ª×™×§×•×Ÿ ×›××Ÿ
      
      const router = express.Router();
      
      router.post("/save", requireAuth, saveDataRecord);
      
      export default router;
    ðŸ“„ depositRoutes.js
      // server/routes/depositRoutes.js
      import express from 'express';
      import { getDeposits, addDeposit, breakDeposit, withdrawDeposit } from '../controllers/depositController.js';
      
      const router = express.Router();
      
      // ×›×œ ×”× ×ª×™×‘×™× ×›××Ÿ ×™×”×™×• ×ª×—×ª /api/deposits ×•×“×•×¨×©×™× ××™×ž×•×ª
      router.get('/', getDeposits);
      router.post('/', addDeposit);
      router.post('/:id/break', breakDeposit);       // ×¤×¢×•×œ×” ×œ×©×‘×™×¨×ª ×¤×™×§×“×•×Ÿ
      router.post('/:id/withdraw', withdrawDeposit); // ×¤×¢×•×œ×” ×œ×ž×©×™×›×ª ×¤×™×§×“×•×Ÿ
      
      export default router;
    ðŸ“„ financeRoutes.js
      import express from 'express';
      // ðŸ‘‡ --- ×”×ª×™×§×•×Ÿ ×›××Ÿ: ×©×™×ž×•×© ×‘×©×ž×•×ª ×”×¤×•× ×§×¦×™×•×ª ×”× ×›×•× ×™× ×ž×”×§×•× ×˜×¨×•×œ×¨ --- ðŸ‘‡
      import { getFinanceProfile, updateFinanceProfile } from '../controllers/financeController.js';
      import requireAuth from '../middlewares/requireAuth.js';
      
      const router = express.Router();
      
      // ×›×œ ×”× ×ª×™×‘×™× ×›××Ÿ ×“×•×¨×©×™× ××™×ž×•×ª ×ž×©×ª×ž×©
      router.use(requireAuth);
      
      router.route('/')
        .get(getFinanceProfile) // <-- ×©×™×ž×•×© ×‘×©× ×”×ž×¢×•×“×›×Ÿ
        .post(updateFinanceProfile); // <-- ×©×™×ž×•×© ×‘×©× ×”×ž×¢×•×“×›×Ÿ
      
      export default router;
    ðŸ“„ fundRoutes.js
      import express from 'express';
      import { getFunds, addFund, refreshAllPrices, sellFund, deleteFund } from '../controllers/fundController.js';
      
      const router = express.Router();
      
      router.route('/')
        .get(getFunds)
        .post(addFund);
      
      router.post('/refresh', refreshAllPrices);
      router.post('/:id/sell', sellFund);
      router.delete('/:id', deleteFund);
      
      export default router;
    ðŸ“„ importRoutes.js
      // server/routes/importRoutes.js
      
      import express from 'express';
      import { uploadAndParse, processTransactions } from '../controllers/importController.js';
      import requireAuth from '../middlewares/requireAuth.js';
      
      const router = express.Router();
      
      // ×›×œ ×”× ×ª×™×‘×™× ×‘×¨××•×˜×¨ ×–×” ×“×•×¨×©×™× ××™×ž×•×ª
      router.use(requireAuth);
      
      // × ×ª×™×‘ ×—×“×© ×œ×©×œ×‘ ×”×¨××©×•×Ÿ: ×”×¢×œ××” ×•×¤×¢× ×•×—
      router.post('/upload', uploadAndParse);
      
      // × ×ª×™×‘ ×§×™×™× ×œ×©×œ×‘ ×”×©× ×™: ×¢×™×‘×•×“ ×¡×•×¤×™ ×•×©×ž×™×¨×”
      router.post('/process-transactions', processTransactions);
      
      export default router;
    ðŸ“„ loanRoutes.js
      // server/routes/loanRoutes.js
      
      import express from 'express';
      import { createLoan, getLoans, getLoanById } from '../controllers/loanController.js';
      import { requireAuth } from '../middlewares/authMiddleware.js';
      
      const router = express.Router();
      
      router.use(requireAuth);
      
      router.route('/')
        .get(getLoans)
        .post(createLoan);
      
      router.route('/:id')
        .get(getLoanById);
      
      export default router;
    ðŸ“„ managementRoutes.js
      import express from 'express';
      import requireAuth from '../middlewares/requireAuth.js';
      import {
        getManagementData,
        updateMerchantMap,
        deleteMerchantMap,
        createCategoryRule,
        updateCategoryRule,
        deleteCategoryRule,
        applyRulesRetroactively // â—€ï¸ 1. ×”×•×¡×¤×ª ×”×¤×•× ×§×¦×™×” ×”×—×“×©×” ×œ×™×™×‘×•×
      } from '../controllers/managementController.js';
      import { param } from 'express-validator';
      
      const router = express.Router();
      
      // ×›×œ ×”×¤×¢×•×œ×•×ª ×“×•×¨×©×•×ª ××™×ž×•×ª
      router.use(requireAuth);
      
      // ×©×œ×™×¤×ª ×›×œ ×”× ×ª×•× ×™× ×œ×“×£ ×”× ×™×”×•×œ
      router.get('/', getManagementData);
      
      // × ×™×”×•×œ ×ž×™×¤×•×™×™ ×¡×¤×§×™×
      router.route('/merchant-maps/:id')
        .put(param('id').isMongoId(), updateMerchantMap)
        .delete(param('id').isMongoId(), deleteMerchantMap);
      
      // × ×™×”×•×œ ×—×•×§×™ ×§×˜×’×•×¨×™×•×ª
      router.route('/category-rules')
        .post(createCategoryRule);
      
      router.route('/category-rules/:id')
        .put(param('id').isMongoId(), updateCategoryRule)
        .delete(param('id').isMongoId(), deleteCategoryRule);
      
      // â—€ï¸ 2. ×”×•×¡×¤×ª ×”× ×ª×™×‘ ×”×—×“×© ×œ×”×¤×¢×œ×” ×¨×˜×¨×•××§×˜×™×‘×™×ª
      router.post('/apply-rules', applyRulesRetroactively);
      
      export default router;
    ðŸ“„ orderRoutes.js
      import express from 'express';
      // âœ¨ ×”×ª×™×§×•×Ÿ: ×ž×™×™×‘××™× ×ž×”×§×•× ×˜×¨×•×œà¤° ×”× ×§×™ ×©×œ ×”×œ×§×•×—, ×œ× ×ž×”-admin
      import { getMyOrders } from '../controllers/orderController.js';
      import { requireAuth } from '../middlewares/authMiddleware.js';
      
      const router = express.Router();
      
      // ×ž×’×“×™×¨ ××ª ×”× ×ª×™×‘ /api/orders/my-orders
      router.get('/my-orders', requireAuth, getMyOrders);
      
      export default router;
    ðŸ“„ orders.js
      import { Router } from 'express';
      // Import order controllers here
      const router = Router();
      
      // Example route
      router.get('/', (req, res) => {
        res.json({ message: 'This will return all orders for the logged in user' });
      });
      
      export default router;
    ðŸ“„ projectRoutes.js
      import express from 'express';
      import {
          getProjects, getProject, createProject, updateProject, deleteProject,
          addFund, addTask, toggleTask, deleteTask
      } from '../controllers/projectController.js';
      
      const router = express.Router();
      
      // Note: The `requireAuth` middleware is applied in `app.js` before this router is used.
      
      // --- Base Project Routes ---
      router.route('/')
        .get(getProjects)
        .post(createProject);
      
      router.route('/:id')
        .get(getProject)
        .patch(updateProject)
        .delete(deleteProject);
      
      // --- Routes for Goal-type Projects ---
      router.post('/:id/funds', addFund);
      
      // --- Routes for Task-type Projects ---
      router.post('/:id/tasks', addTask);
      router.patch('/:id/tasks/:taskId/toggle', toggleTask);
      router.delete('/:id/tasks/:taskId', deleteTask);
      
      export default router;
    ðŸ“„ rateRoutes.js
      import express from 'express';
      import { updatePrimeRate } from '../controllers/rateController.js';
      import { requireAdmin } from '../middlewares/authMiddleware.js'; // × × ×™×— ×©×¨×§ ×ž× ×”×œ ×™×›×•×œ ×œ×¢×“×›×Ÿ
      
      const router = express.Router();
      
      router.post('/prime', requireAdmin, updatePrimeRate);
      
      export default router;
    ðŸ“„ stockRoutes.js
      // server/routes/stockRoutes.js
      
      import express from 'express';
      import {
        getAllStocks,
        addStock,
        deleteStock,
        sellStock,
        refreshPrices,
      } from '../controllers/stockController.js';
      
      const router = express.Router();
      
      // All routes here are protected by the requireAuth middleware applied in app.js
      
      router.route('/')
        .get(getAllStocks)
        .post(addStock);
      
      router.post('/refresh-prices', refreshPrices);
      
      router.route('/:id')
        .delete(deleteStock);
      
      router.post('/:id/sell', sellStock);
      
      export default router;
    ðŸ“„ transactionRoutes.js
      import express from 'express';
      import { getTransactions, addTransaction } from '../controllers/transactionController.js';
      import requireAuth from '../middlewares/requireAuth.js';
      
      const router = express.Router();
      
      // ×›×œ ×”× ×ª×™×‘×™× ×›××Ÿ ×“×•×¨×©×™× ××™×ž×•×ª
      router.use(requireAuth);
      
      router.route('/')
        .get(getTransactions)
        .post(addTransaction);
      
      export default router;
    ðŸ“„ tzitzitCreate.js
      import express from 'express';
      import { body, param } from 'express-validator';
      import csrf from 'csurf';
      
      import requireAuth from '../middlewares/requireAuth.js';
      import { publicLimiter } from '../middlewares/rateLimiter.js';
      import TzitzitOrder from '../models/TzitzitOrder.js';
      import { appendOrder } from '../utils/googleSheets.js';
      
      const router = express.Router();
      const csrfProtection = csrf({ cookie: true });
      
      /* ---------- GET ---------- */
      router.get('/', publicLimiter, requireAuth, async (req, res, next) => {
        try {
          const orders = await TzitzitOrder
            .find({ user: req.user._id }) // <-- ×ª×•×§×Ÿ
            .sort({ date: -1 });
          res.json(orders);
        } catch (err) { next(err); }
      });
      
      /* ---------- POST ---------- */
      router.post(
        '/',
        publicLimiter,
        requireAuth,
        csrfProtection,
        body('supplier').notEmpty(),
        body('date').isISO8601().toDate(),
        body('type').isIn(['×¦×™×¦×™×ª', '×˜×œ×™×ª']),
        body('quantity').isInt({ min: 1 }),
        body('unitPrice').isFloat({ min: 0 }),
        async (req, res, next) => {
          try {
            const order = await TzitzitOrder.create({ ...req.body, user: req.user._id }); // <-- ×ª×•×§×Ÿ
      
            await appendOrder(
              [
                new Date(order.date).toLocaleDateString('he-IL'),
                order.type,
                order.quantity,
                order.unitPrice,
                order.totalPrice,
                order.paidMoney,
              ],
              order.supplier
            );
      
            res.status(201).json(order);
          } catch (err) { next(err); }
        }
      );
      
      /* ---------- ×ª×©×œ×•× ×—×œ×§×™ ×œ×¡×¤×§ ---------- */
      router.patch(
        '/pay-supplier-partial',
        publicLimiter,
        requireAuth,
        csrfProtection, // ×”×•×¡×¤× ×• ×”×’× ×ª CSRF ×’× ×œ×›××Ÿ
        body('supplier').notEmpty(),
        body('amount').isFloat({ min: 0.01 }),
        async (req, res, next) => {
          try {
            let remaining = Number(req.body.amount);
            const queue = await TzitzitOrder.find({
            user: req.user._id,
            supplier: req.body.supplier,
            // quantity * unitPrice  >  paidMoney
            $expr: {
              $gt: [
                { $multiply: ['$quantity', '$unitPrice'] },
               '$paidMoney',
                ],
               },
              }).sort({ date: 1 });
      
            for (const ord of queue) {
              const owed = ord.totalPrice - ord.paidMoney;
              if (remaining >= owed) {
                ord.paidMoney = ord.totalPrice;
                remaining   -= owed;
              } else {
                ord.paidMoney += remaining;
                remaining     = 0;
              }
              await ord.save();
              if (!remaining) break;
            }
            res.json({ remaining });
          } catch (err) { next(err); }
        }
      );
      
      /* ---------- PATCH /:id ---------- */
      router.patch(
        '/:id([0-9a-fA-F]{24})',
        publicLimiter,
        requireAuth,
        csrfProtection, // ×”×•×¡×¤× ×• ×”×’× ×ª CSRF ×’× ×œ×›××Ÿ
        param('id').isMongoId(),
        async (req, res, next) => {
          try {
            const ord = await TzitzitOrder.findOne({ _id: req.params.id, user: req.user._id }); // <-- ×ª×•×§×Ÿ
            if (!ord) return res.status(404).json({ message: '×œ× × ×ž×¦×' });
      
            // Update allowed fields
            const allowedUpdates = ['supplier', 'date', 'type', 'quantity', 'unitPrice', 'paidMoney'];
            allowedUpdates.forEach(key => {
              if (req.body[key] !== undefined) {
                ord[key] = req.body[key];
              }
            });
      
            await ord.save();
            res.json(ord);
          } catch (err) { next(err); }
        }
      );
      
      /* ---------- DELETE /:id ---------- */
      router.delete(
        '/:id([0-9a-fA-F]{24})',
        publicLimiter,
        requireAuth,
        csrfProtection, // ×”×•×¡×¤× ×• ×”×’× ×ª CSRF ×’× ×œ×›××Ÿ
        param('id').isMongoId(),
        async (req, res, next) => {
          try {
            const r = await TzitzitOrder.deleteOne({ _id: req.params.id, user: req.user._id }); // <-- ×ª×•×§×Ÿ
            if (!r.deletedCount) return res.status(404).json({ message: '×œ× × ×ž×¦×' });
            res.json({ success: true });
          } catch (err) { next(err); }
        }
      );
      
      export default router;
  ðŸ“ scripts/
    ðŸ“„ makeAdmin.js
      import mongoose from 'mongoose';
      import dotenv from 'dotenv';
      import User from '../models/userModel.js';
      
      // ×˜×¢×Ÿ ××ª .env ×ž×”×©×•×¨×© ×©×œ server
      dotenv.config({ path: './.env', override: true });
      
      console.log('ðŸ” Connecting to:', process.env.MONGO_URI);
      
      const promoteToAdmin = async () => {
        await mongoose.connect(process.env.MONGO_URI);
      
        const email = 'yosefdaean@gmail.com'; // â† ×”××™×ž×™×™×œ ×©×‘×¨×¦×•× ×š ×œ×§×“×
      
        const user = await User.findOne({ email });
        if (!user) {
          console.log('âŒ ×”×ž×©×ª×ž×© ×œ× × ×ž×¦×');
          process.exit(1);
        }
      
        user.role = 'admin';
        await user.save();
      
        console.log(`âœ… ×”×ž×©×ª×ž×© ${email} ×§×•×“× ×œ×ª×¤×§×™×“ ×ž× ×”×œ`);
        process.exit(0);
      };
      
      promoteToAdmin();
  ðŸ“„ setLoading(false))
  ðŸ“„ setSaving(false))
  ðŸ“ stores/
    ðŸ“„ authStore.js
      // src/stores/authStore.js
      
      import { create } from 'zustand';
      
      // ×¤×•× ×§×¦×™×” ×©×§×•×¨××ª ××ª ×¤×¨×˜×™ ×”×ž×©×ª×ž×© ×ž×”××—×¡×•×Ÿ ×”×ž×§×•×ž×™ ×©×œ ×”×“×¤×“×¤×Ÿ
      const getInitialState = () => {
        try {
          const user = JSON.parse(localStorage.getItem('user'));
          return {
            user: user,
            isAuthenticated: !!user, // ×”×•×¤×š ××ª ×”×ª×•×¦××” ×œ-true ×× ×™×© ×ž×©×ª×ž×©, ×•-false ×× ××™×Ÿ
          };
        } catch (error) {
          return { user: null, isAuthenticated: false };
        }
      };
      
      export const useAuthStore = create((set) => ({
        ...getInitialState(), // ×§×•×‘×¢ ××ª ×”×ž×¦×‘ ×”×”×ª×—×œ×ª×™ ×›×©×”××¤×œ×™×§×¦×™×” × ×˜×¢× ×ª
      
        // ×¤×¢×•×œ×” ×©×§×•×¨××™× ×œ×” ××—×¨×™ ×”×ª×—×‘×¨×•×ª ×ž×•×¦×œ×—×ª
        login: (userData) => {
          localStorage.setItem('user', JSON.stringify(userData));
          set({ user: userData, isAuthenticated: true });
        },
      
        // ×¤×¢×•×œ×” ×©×§×•×¨××™× ×œ×” ×‘×¢×ª ×”×ª× ×ª×§×•×ª
        logout: () => {
          localStorage.removeItem('user');
          set({ user: null, isAuthenticated: false });
        },
      }));
    ðŸ“„ projectsStore.js
      // client/src/stores/projectsStore.js
      
      import { create } from 'zustand';
      import {
        getProjects,
        getProject,
        createProject,
        updateProject,
        deleteProject,
        addFund,
        addTask,
        toggleTask,
        deleteTask,
      } from '../utils/projects';
      
      /**
       * Zustand store ×œ× ×™×”×•×œ ×ž×¦×‘ "Projects" (×™×¢×“×™× / ×ž×©×™×ž×•×ª) ×‘×¦×“â€‘×œ×§×•×—.
       *
       * â”€ ×”× ×ª×•× ×™× × ×©×ž×¨×™× ×‘×–×™×›×¨×•×Ÿ ×”×’×œ×•×‘×œ×™ ×©×œ ×”××¤×œ×™×§×¦×™×”.
       * â”€ ×›×œ ×¤×¢×•×œ×” ×ž×¢×“×›× ×ª ××ª ×”â€‘state ×‘××•×¤×Ÿ ××™×¡×˜× ×˜×™×‘×™ (optimistic) ×•××– ×ž××ž×ª×ª ×ž×•×œ ×”×©×¨×ª.
       */
      const useProjectsStore = create((set, get) => ({
        /* -------------------------------------------------------
         * State
         * ----------------------------------------------------- */
        projects: [],      // ×›×œ ×”×¤×¨×•×™×§×˜×™× ×©×œ ×”×ž×©×ª×ž×©
        active: null,      // ×¤×¨×•×™×§×˜ ×¤×ª×•×— ×›×¨×’×¢ (object) ××• null
        loading: false,    // true ×‘×–×ž×Ÿ ×¤×¢×•×œ×” ×â€‘×¡×™× ×›×¨×•× ×™×ª
        error: null,       // ××•×‘×™×™×§×˜ ×©×’×™××” ××—×¨×•×Ÿ ××• null
      
        /* -------------------------------------------------------
         * Internal helpers
         * ----------------------------------------------------- */
        _start: () => set({ loading: true, error: null }),
        _success: (overrides = {}) => set({ loading: false, ...overrides }),
        _fail: (error) => set({ loading: false, error }),
      
        /* -------------------------------------------------------
         * Actions â€“ CRUD ×‘×¡×™×¡×™
         * ----------------------------------------------------- */
        fetchProjects: async () => {
          const { _start, _success, _fail } = get();
          try {
            _start();
            const projects = await getProjects();
            _success({ projects });
          } catch (err) {
            _fail(err);
          }
        },
      
        fetchProject: async (id) => {
          const { _start, _success, _fail } = get();
          try {
            _start();
            const project = await getProject(id);
            // ×¢×“×›×Ÿ ××• ×”×•×¡×£ ×œâ€‘projects
            const projects = [...get().projects];
            const idx = projects.findIndex((p) => p._id === id);
            if (idx > -1) projects[idx] = project; else projects.unshift(project);
            _success({ projects, active: project });
          } catch (err) {
            _fail(err);
          }
        },
      
        createProject: async (payload) => {
          const { _start, _success, _fail } = get();
          try {
            _start();
            const project = await createProject(payload);
            _success({ projects: [project, ...get().projects] });
          } catch (err) {
            _fail(err);
          }
        },
      
        updateProject: async (id, payload) => {
          const { _start, _success, _fail } = get();
          try {
            _start();
            const updated = await updateProject(id, payload);
            const projects = get().projects.map((p) => (p._id === id ? updated : p));
            const active   = get().active && get().active._id === id ? updated : get().active;
            _success({ projects, active });
          } catch (err) {
            _fail(err);
          }
        },
      
        deleteProject: async (id) => {
          const { _start, _success, _fail } = get();
          try {
            _start();
            await deleteProject(id);
            const projects = get().projects.filter((p) => p._id !== id);
            const active   = get().active && get().active._id === id ? null : get().active;
            _success({ projects, active });
          } catch (err) {
            _fail(err);
          }
        },
      
        /* -------------------------------------------------------
         * Goalâ€‘type helpers (Funds)
         * ----------------------------------------------------- */
        addFund: async (projectId, fund) => {
          const { _start, _success, _fail } = get();
          try {
            _start();
            const updated = await addFund(projectId, fund);
            const projects = get().projects.map((p) => (p._id === projectId ? updated : p));
            const active   = get().active && get().active._id === projectId ? updated : get().active;
            _success({ projects, active });
          } catch (err) {
            _fail(err);
          }
        },
      
        /* -------------------------------------------------------
         * Taskâ€‘type helpers (Tasks)
         * ----------------------------------------------------- */
        addTask: async (projectId, task) => {
          const { _start, _success, _fail } = get();
          try {
            _start();
            const updated = await addTask(projectId, task);
            const projects = get().projects.map((p) => (p._id === projectId ? updated : p));
            const active   = get().active && get().active._id === projectId ? updated : get().active;
            _success({ projects, active });
          } catch (err) {
            _fail(err);
          }
        },
      
        toggleTask: async (projectId, taskId) => {
          const { _start, _success, _fail } = get();
          try {
            _start();
            const updated = await toggleTask(projectId, taskId);
            const projects = get().projects.map((p) => (p._id === projectId ? updated : p));
            const active   = get().active && get().active._id === projectId ? updated : get().active;
            _success({ projects, active });
          } catch (err) {
            _fail(err);
          }
        },
      
        deleteTask: async (projectId, taskId) => {
          const { _start, _success, _fail } = get();
          try {
            _start();
            const updated = await deleteTask(projectId, taskId);
            const projects = get().projects.map((p) => (p._id === projectId ? updated : p));
            const active   = get().active && get().active._id === projectId ? updated : get().active;
            _success({ projects, active });
          } catch (err) {
            _fail(err);
          }
        },
      }));
      
      export default useProjectsStore;
  ðŸ“ uploads/
    ðŸ“„ image-1751473830176.jpg
    ðŸ“„ test.jpg
  ðŸ“ utils/
    ðŸ“„ AppError.js
      class AppError extends Error {
        constructor(message, statusCode) {
          super(message);
          this.statusCode = statusCode;
          this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';
          this.isOperational = true; // To distinguish from programming errors
          Error.captureStackTrace(this, this.constructor);
        }
      }
      
      export default AppError;
    ðŸ“„ dateHelpers.js
      // server/utils/dateHelpers.js
      
      /**
       * ×ž×•×¡×™×£ ×ž×¡×¤×¨ ×—×•×“×©×™× ×œ×ª××¨×™×š × ×ª×•×Ÿ.
       * ×ž×˜×¤×œ ×‘×ž×§×¨×™ ×§×¦×” ×›×ž×• ×”×•×¡×¤×ª ×—×•×“×© ×œ-31 ×‘×™× ×•××¨.
       * @param {Date} baseDate - ×ª××¨×™×š ×”×”×ª×—×œ×”
       * @param {number} months - ×ž×¡×¤×¨ ×”×—×•×“×©×™× ×œ×”×•×¡×¤×”
       * @returns {Date} - ×”×ª××¨×™×š ×”×—×“×©
       */
      export function add_months(baseDate, months) {
        const d = new Date(baseDate);
        const originalDay = d.getDate();
      
        // setMonth ×ž×˜×¤×œ ××•×˜×•×ž×˜×™×ª ×‘×ž×¢×‘×¨ ×œ×©× ×” ×”×‘××”
        d.setMonth(d.getMonth() + months);
      
        // ×× ×”×™×•× ×‘×—×•×“×© ×”×©×ª× ×” (×œ×ž×©×œ, ×”×•×¡×¤×ª ×—×•×“×© ×œ-31.1 ×”×¤×›×” ×œ-2.3 ×‘×ž×§×•× ×¡×•×£ ×¤×‘×¨×•××¨),
        // ×× ×—× ×• ×ž×ª×§× ×™× ××ª ×–×” ×œ×™×•× ×”××—×¨×•×Ÿ ×©×œ ×”×—×•×“×© ×”×§×•×“×.
        if (d.getDate() !== originalDay) {
          d.setDate(0);
        }
        return d;
      }
    ðŸ“„ excelCleaners.js
      // server/utils/excelCleaners.js
      
      /**
       * ×¤×•× ×§×¦×™×™×ª ×¢×–×¨ ×’× ×¨×™×ª ×œ××™×ª×•×¨ ×˜×‘×œ×ª ×”× ×ª×•× ×™× ×‘×ª×•×š ×§×•×‘×¥ ××§×¡×œ.
       * @param {Array<Array<string>>} data ×”× ×ª×•× ×™× ×”×’×•×œ×ž×™×™× ×ž×”×’×™×œ×™×•×Ÿ.
       * @param {string[]} keyHeaders ×¨×©×™×ž×ª ×›×•×ª×¨×•×ª ×—×•×‘×” ×©×—×™×™×‘×•×ª ×œ×”×•×¤×™×¢ ×‘×©×•×¨×ª ×”×›×•×ª×¨×•×ª.
       * @returns {{headers: string[], dataRows: Array<Array<string>>}}
       */
      function findTableData(data, keyHeaders) {
        const headerRowIndex = data.findIndex(row =>
          Array.isArray(row) && keyHeaders.every(header =>
            row.some(cell => typeof cell === 'string' && cell.trim().includes(header))
          )
        );
      
        if (headerRowIndex === -1) {
          throw new Error(`×œ× ×”×¦×œ×—× ×• ×œ×–×”×•×ª ××ª ×©×•×¨×ª ×”×›×•×ª×¨×•×ª. ×•×“× ×©×”×§×•×‘×¥ ×ž×›×™×œ ×¢×ž×•×“×•×ª: ${keyHeaders.join(', ')}.`);
        }
      
        const headers = data[headerRowIndex].map(h => String(h || '').trim().replace(/\s+/g, ' '));
        const rowsAfterHeaders = data.slice(headerRowIndex + 1);
      
        const dataRows = rowsAfterHeaders.filter(row =>
          Array.isArray(row) && row.filter(cell => cell != null && String(cell).trim() !== '').length >= 2
        );
      
        return { headers, dataRows };
      }
      
      /**
       * ×ž× ×§×” ×•×ž×¢×‘×“ ×§×•×‘×¥ ×¢×¡×§××•×ª ×©×œ ×—×‘×¨×ª "×ž×§×¡".
       */
      export function cleanMaxFile(data) {
        const { headers, dataRows } = findTableData(data, ['×ª××¨×™×š ×¢×¡×§×”', '×©× ×‘×™×ª ×”×¢×¡×§', '×¡×›×•× ×—×™×•×‘']);
      
        if (dataRows.length < 1) {
          throw new Error("×œ× × ×ž×¦××• × ×ª×•× ×™× ×‘×§×•×‘×¥ '×ž×§×¡' ×œ××—×¨ ×”× ×™×§×•×™.");
        }
      
        return dataRows.map(rowArray => {
          let rowObject = {};
          headers.forEach((header, index) => {
            if (header) {
              rowObject[header] = rowArray[index];
            }
          });
          return rowObject;
        });
      }
      
      /**
       * ×ž× ×§×” ×•×ž×¢×‘×“ ×§×•×‘×¥ ×¢×¡×§××•×ª ×©×œ ×—×‘×¨×ª "×›××œ".
       * ×”×œ×•×’×™×§×” ×ž×–×”×” ××ª ×ª×—×™×œ×ª ×”× ×ª×•× ×™× ×•×ž×ž×¤×” ××•×ª× ×œ×¤×™ ×ž×™×§×•× ×§×‘×•×¢ ×©×œ ×¢×ž×•×“×•×ª.
       */
      export function cleanCalFile(data) {
          // ×©×œ×‘ 1: ×ž×¦× ××ª ×”××™× ×“×§×¡ ×©×œ ×©×•×¨×ª ×”×›×•×ª×¨×•×ª ×›×“×™ ×œ×“×¢×ª ×ž××™×¤×” ×œ×”×ª×—×™×œ
          const headerRowIndex = data.findIndex(row =>
              Array.isArray(row) &&
              row.some(cell => typeof cell === 'string' && cell.includes('×ª××¨×™×š')) &&
              row.some(cell => typeof cell === 'string' && cell.includes('×©× ×‘×™×ª ×¢×¡×§'))
          );
      
          if (headerRowIndex === -1) {
              throw new Error("×§×•×‘×¥ '×›××œ' ×œ× ×ª×§×™×Ÿ: ×œ× ×”×¦×œ×—× ×• ×œ×–×”×•×ª ××ª ×©×•×¨×ª ×”×›×•×ª×¨×•×ª. ×•×“× ×©×”×§×•×‘×¥ ×ž×›×™×œ ××ª ×”×¢×ž×•×“×•×ª ×”× ×“×¨×©×•×ª.");
          }
      
          // ×©×œ×‘ 2: ×—×œ×¥ ××ª ×©×•×¨×•×ª ×”× ×ª×•× ×™× ×©×ž×ª×—×™×œ×•×ª ×ž×™×“ ××—×¨×™ ×”×›×•×ª×¨×•×ª
          const dataRows = data.slice(headerRowIndex + 1);
      
          // ×©×œ×‘ 3: ×¡× ×Ÿ ×©×•×¨×•×ª ×œ× ×¨×œ×•×•× ×˜×™×•×ª (×¨×™×§×•×ª ××• ×©×•×¨×•×ª ×¡×™×›×•×)
          const finalRows = dataRows.filter(row =>
              Array.isArray(row) &&
              row[0] && // ×—×™×™×‘ ×œ×”×™×•×ª ×¢×¨×š ×‘×¢×ž×•×“×ª ×”×ª××¨×™×š (××™× ×“×§×¡ 0)
              row[1]    // ×—×™×™×‘ ×œ×”×™×•×ª ×¢×¨×š ×‘×¢×ž×•×“×ª ×©× ×‘×™×ª ×”×¢×¡×§ (××™× ×“×§×¡ 1)
          );
      
          if (finalRows.length < 1) {
              throw new Error("×œ× × ×ž×¦××• ×©×•×¨×•×ª × ×ª×•× ×™× ×ª×§×™× ×•×ª ×‘×§×•×‘×¥ '×›××œ' ×œ××—×¨ ×”× ×™×§×•×™.");
          }
      
          // --- ðŸ‘‡ ×”×ª×™×§×•×Ÿ ×›××Ÿ: ×ž×™×¤×•×™ ×œ×¤×™ ×ž×™×§×•× ×§×‘×•×¢ ×©×œ ×©×œ×•×© ×”×¢×ž×•×“×•×ª ×”×¨××©×•× ×•×ª ---
          return finalRows.map(rowArray => {
              return {
                  "×ª××¨×™×š ×¢×¡×§×”": rowArray[0],
                  "×©× ×‘×™×ª ×”×¢×¡×§": rowArray[1],
                  // ×¢×ž×•×“×” 3 ×”×™× ×”×¡×›×•×, ×•× ×™×ª×Ÿ ×œ×” ×©× ×§×‘×•×¢ ×©×”×§×•×“ ×ž×¦×¤×” ×œ×•
                  "×¡×›×•× ×—×™×•×‘": rowArray[2]
              };
          });
      }
    ðŸ“„ excelParser.js
      // server/utils/excelParser.js
      import MerchantMap from '../models/MerchantMap.js';
      import CategoryRule from '../models/CategoryRule.js';
      
      function parseDate(dateInput) {
        if (dateInput instanceof Date && !isNaN(dateInput.getTime())) {
          return dateInput;
        }
        if (!dateInput) return null;
      
        const dateStr = String(dateInput).trim();
      
        const parts = dateStr.match(/^(\d{1,2})[-/](\d{1,2})[-/](\d{4})$/);
        if (parts) {
          const day = parseInt(parts[1], 10);
          const month = parseInt(parts[2], 10);
          const year = parseInt(parts[3], 10);
          if (year > 1900 && month >= 1 && month <= 12 && day >= 1 && day <= 31) {
            const date = new Date(Date.UTC(year, month - 1, day));
            if (!isNaN(date.getTime())) return date;
          }
        }
      
        const isoDate = new Date(dateStr);
        if (!isNaN(isoDate.getTime())) return isoDate;
      
        return null;
      }
      
      const createTransactionObject = (row, userId, type) => {
          const date = parseDate(row["×ª××¨×™×š ×¢×¡×§×”"]);
          if (!date || !row["×©× ×‘×™×ª ×”×¢×¡×§"]) return null;
      
          let amount, transactionType;
          if (type === 'max') {
              const chargeAmount = parseFloat(String(row["×¡×›×•× ×—×™×•×‘"]).replace(/,/g, ''));
              const creditAmount = parseFloat(String(row["×¡×›×•× ×–×™×›×•×™"]).replace(/,/g, ''));
              if (!isNaN(chargeAmount) && chargeAmount !== 0) {
                  amount = Math.abs(chargeAmount);
                  transactionType = chargeAmount > 0 ? '×”×•×¦××”' : '×”×›× ×¡×”';
              } else if (!isNaN(creditAmount) && creditAmount !== 0) {
                  amount = Math.abs(creditAmount);
                  transactionType = '×”×›× ×¡×”';
              } else {
                  return null;
              }
          } else { // 'cal'
              const amountValue = row["×¡×›×•× ×‘×©\"×—"] || row["×¡×›×•× ×¢×¡×§×”"] || row["×¡×›×•× ×—×™×•×‘"];
              if (amountValue == null) return null;
              amount = parseFloat(String(amountValue).replace(/,/g, ''));
              if (isNaN(amount)) return null;
              transactionType = amount < 0 ? '×”×›× ×¡×”' : '×”×•×¦××”';
              amount = Math.abs(amount);
          }
      
          return {
              user: userId,
              date,
              description: row["×©× ×‘×™×ª ×”×¢×¡×§"],
              rawDescription: row["×©× ×‘×™×ª ×”×¢×¡×§"],
              amount,
              type: transactionType,
              account: 'checking',
              category: row['×§×˜×’×•×¨×™×”']?.trim() || '×›×œ×œ×™',
          };
      };
      
      export async function parseTransactions(cleanedData, fileType, userId) {
          const mapper = (row) => createTransactionObject(row, userId, fileType);
          const initialTransactions = cleanedData.map(mapper).filter(Boolean);
      
          const [merchantMaps, categoryRules] = await Promise.all([
              MerchantMap.find({}).populate('category').lean(),
              CategoryRule.find({}).populate('category').lean(),
          ]);
      
          const merchantMapCache = new Map(merchantMaps.map(m => [m.originalName, m]));
          const merchantsThatNeedMapping = new Set();
      
          const transactions = initialTransactions.map(trx => {
              const originalDescription = trx.rawDescription;
              let finalDescription = trx.description;
              let finalCategoryName = trx.category;
              let categoryFound = false;
      
              // ×©×œ×‘ 1: ×‘×“×™×§×ª ×ž×™×¤×•×™
              const mapping = merchantMapCache.get(originalDescription);
              if (mapping) {
                  finalDescription = mapping.newName;
                  if (mapping.category) {
                      finalCategoryName = mapping.category.name;
                      categoryFound = true;
                  }
              }
      
              // ×©×œ×‘ 2: ×× ×”×ž×™×¤×•×™ ×œ× ×§×‘×¢ ×§×˜×’×•×¨×™×”, ×‘×“×•×§ ×—×•×§×™×
              if (!categoryFound) {
                  for (const rule of categoryRules) {
                      if (finalDescription.toLowerCase().includes(rule.keyword.toLowerCase())) {
                          if (rule.category) {
                              finalCategoryName = rule.category.name;
                              categoryFound = true;
                              break;
                          }
                      }
                  }
              }
      
              // ×©×œ×‘ 3: ×× ×¢×“×™×™×Ÿ ××™×Ÿ ×§×˜×’×•×¨×™×”, ×”×•×¡×£ ×œ×¨×©×™×ž×ª ×”×ž×™×¤×•×™ ×”×™×“× ×™
              if (!categoryFound) {
                  merchantsThatNeedMapping.add(originalDescription);
              }
      
              return { ...trx, description: finalDescription, category: finalCategoryName };
          });
      
          return { transactions, unseenMerchants: Array.from(merchantsThatNeedMapping) };
      }
    ðŸ“„ fundScraper.js
      import axios from 'axios';
      import * as cheerio from 'cheerio';
      
      export const getFundPriceBizportal = async (fundNumber) => {
        const url = `https://www.bizportal.co.il/mutualfunds/quote/generalview/${fundNumber}`;
        try {
          const { data } = await axios.get(url, { timeout: 8000 });
          const $ = cheerio.load(data);
          const priceText = $("div.num").first().text().trim().replace(/,/g, '');
      
          if (priceText) {
            const priceAgorot = parseFloat(priceText);
            return priceAgorot / 100.0; // ×”×ž×¨×” ×ž××’×•×¨×•×ª ×œ×©×§×œ×™×
          }
          return 0.0;
        } catch (error) {
          console.error(`Failed to fetch price for fund ${fundNumber}:`, error.message);
          return 0.0;
        }
      };
    ðŸ“„ googleSheets.js
      import { google } from 'googleapis';
      import path from 'path';
      
      const { GOOGLE_SERVICE_ACCOUNT, GOOGLE_SHEET_ID } = process.env;
      if (!GOOGLE_SERVICE_ACCOUNT) throw new Error('GOOGLE_SERVICE_ACCOUNT missing');
      if (!GOOGLE_SHEET_ID)       throw new Error('GOOGLE_SHEET_ID missing');
      
      const auth = new google.auth.GoogleAuth({
        keyFile: path.resolve(GOOGLE_SERVICE_ACCOUNT),
        scopes: ['https://www.googleapis.com/auth/spreadsheets'],
      });
      const sheets = google.sheets({ version: 'v4', auth });
      
      /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ public helper â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      export async function appendOrder(row, tab) {
        await ensureSheet(tab);
      
        /* ×”-range ×—×™×™×‘ ×œ×”×™×•×ª ×¢× ×’×¨×©×™×™× ×× ×”×©× ×›×•×œ×œ ×ª×•×•×™× ×œ×-×œ×˜×™× ×™×™× / ×¨×•×•×—×™× */
        const range = `'${tab}'!A1`;
      
        await sheets.spreadsheets.values.append({
          spreadsheetId: GOOGLE_SHEET_ID,
          range,
          valueInputOption: 'USER_ENTERED',
          requestBody: { values: [row] },
        });
      }
      
      /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ create sheet if missing â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      async function ensureSheet(title) {
        const meta = await sheets.spreadsheets.get({
          spreadsheetId: GOOGLE_SHEET_ID,
          fields: 'sheets.properties.title',
        });
      
        const exists = meta.data.sheets.some(
          (s) => s.properties.title === title
        );
        if (exists) return;
      
        await sheets.spreadsheets.batchUpdate({
          spreadsheetId: GOOGLE_SHEET_ID,
          requestBody: {
            requests: [{ addSheet: { properties: { title } } }],
          },
        });
      }
    ðŸ“„ loanCalculator.js
      /**
       * ×ž×—×–×™×¨ ××ª ×”×¨×™×‘×™×ª ×©×”×™×™×ª×” ×‘×ª×•×§×£ ×œ×ª××¨×™×š ×ž×¡×•×™×.
       * @param {Date} date - ×”×ª××¨×™×š ×œ×‘×“×™×§×”.
       * @param {Array<object>} rateHistory - ×ž×¢×¨×š ×ž×ž×•×™×Ÿ ×©×œ ×”×™×¡×˜×•×¨×™×™×ª ×¨×™×‘×™×•×ª.
       * @returns {number} - ×©×™×¢×•×¨ ×”×¨×™×‘×™×ª.
       */
      function getRateForDate(date, rateHistory) {
        // ×ž×•×¦× ××ª ×”×¢×“×›×•×Ÿ ×”××—×¨×•×Ÿ ×©×§×¨×” ×œ×¤× ×™ ××• ×‘××•×ª×• ×ª××¨×™×š ×ª×©×œ×•×
        const applicableRate = rateHistory
          .filter(r => r.date <= date)
          .pop();
      
        // ×× ×œ× × ×ž×¦× (×œ×ž×©×œ, ×”×œ×•×•××” ×”×ª×—×™×œ×” ×œ×¤× ×™ ×©×”×ª×—×œ× ×• ×œ×ª×¢×“), ×”×©×ª×ž×© ×‘×¨×™×‘×™×ª ×”×¨××©×•× ×” ×”×™×“×•×¢×”
        return applicableRate ? applicableRate.rate : (rateHistory[0]?.rate || 0);
      }
      
      /**
       * ×ž×—×©×‘ ×œ×•×— ×¡×™×œ×•×§×™×Ÿ ×“×™× ×ž×™ ×”×ž×‘×•×¡×¡ ×¢×œ ×”×™×¡×˜×•×¨×™×™×ª ×¨×™×‘×™×•×ª ×ž×©×ª× ×”.
       * @returns {Array<object>} ×ž×¢×¨×š ××•×‘×™×™×§×˜×™× ×”×ž×™×™×¦×’ ××ª ×œ×•×— ×”×¡×™×œ×•×§×™×Ÿ.
       */
      export function calculateDynamicSchedule({ loan, rateHistory }) {
        const { principal, termInMonths, startDate, repaymentType, interestMargin } = loan;
        const schedule = [];
        let remainingBalance = principal;
        const principalPerMonth = repaymentType === '×§×¨×Ÿ ×©×•×•×”' ? principal / termInMonths : 0;
      
        for (let i = 1; i <= termInMonths; i++) {
          const paymentDate = new Date(startDate);
          paymentDate.setMonth(paymentDate.getMonth() + i);
      
          const primeRate = getRateForDate(paymentDate, rateHistory);
          const annualRate = primeRate + interestMargin;
          const monthlyInterestRate = annualRate / 100 / 12;
      
          const interestPayment = remainingBalance * monthlyInterestRate;
          let principalPayment, totalPayment;
      
          if (repaymentType === '×©×¤×™×¦×¨') {
            // ×‘×©×¤×™×¦×¨ ×¦×¨×™×š ×œ×—×©×‘ ××ª ×”×”×—×–×¨ ×”×—×•×“×©×™ ×ž×—×“×© ×‘×›×œ ×¤×¢× ×©×”×¨×™×‘×™×ª ×ž×©×ª× ×”, ××• ×‘×›×œ ×—×•×“×©
            // ×”×—×™×©×•×‘ ×ž×ª×‘×¡×¡ ×¢×œ ×”×™×ª×¨×” ×”× ×•×›×—×™×ª, ×”×¨×™×‘×™×ª ×”× ×•×›×—×™×ª, ×•×ž×¡×¤×¨ ×”×ª×©×œ×•×ž×™× ×©× ×•×ª×¨×•
            const remainingTerm = termInMonths - i + 1;
            const monthlyPayment = remainingBalance * (monthlyInterestRate * Math.pow(1 + monthlyInterestRate, remainingTerm)) / (Math.pow(1 + monthlyInterestRate, remainingTerm) - 1);
            totalPayment = monthlyPayment;
            principalPayment = monthlyPayment - interestPayment;
          } else { // ×§×¨×Ÿ ×©×•×•×”
            principalPayment = principalPerMonth;
            totalPayment = principalPayment + interestPayment;
          }
      
          remainingBalance -= principalPayment;
      
          schedule.push({
            paymentNumber: i,
            date: paymentDate,
            principal: parseFloat(principalPayment.toFixed(2)),
            interest: parseFloat(interestPayment.toFixed(2)),
            totalPayment: parseFloat(totalPayment.toFixed(2)),
            remainingBalance: parseFloat(Math.max(0, remainingBalance).toFixed(2)),
            rate: annualRate, // ×”×•×¡×¤×ª ×”×¨×™×‘×™×ª ×©×”×™×™×ª×” ×‘×ª×•×§×£ ×œ××•×ª×• ×—×•×“×©
          });
        }
        return schedule;
      }
    ðŸ“„ tokenHandler.js
      import jwt from 'jsonwebtoken';
      
      const signAccessToken = (payload) =>
        jwt.sign(payload, process.env.JWT_ACCESS_SECRET, { expiresIn: '15m' });
      
      const signRefreshToken = (payload) =>
        jwt.sign(payload, process.env.JWT_REFRESH_SECRET, { expiresIn: '7d' });
      
      export const createAndSendTokens = (user, res) => {
        const accessToken = signAccessToken({ id: user._id, role: user.role });
        const refreshToken = signRefreshToken({ id: user._id, v: user.tokenVersion });
      
        const secure = process.env.NODE_ENV === 'production';
      
        res
          .cookie('jwt', accessToken, {
            httpOnly: true,
            sameSite: 'strict',
            secure,
            maxAge: 15 * 60 * 1000,
          })
          .cookie('refreshToken', refreshToken, {
            httpOnly: true,
            sameSite: 'strict',
            secure,
            maxAge: 7 * 24 * 60 * 60 * 1000,
          });
      };
    ðŸ“„ validators.js
      import { body, validationResult } from 'express-validator';
      import AppError from './AppError.js';
      
      const handleValidationErrors = (req, res, next) => {
        const errors = validationResult(req);
        if (!errors.isEmpty()) {
          const message = errors.array().map(err => err.msg).join('. ');
          return next(new AppError(message, 400));
        }
        next();
      };
      
      export const registerValidator = [
        body('email').isEmail().withMessage('Please provide a valid email address.'),
        body('password').isLength({ min: 6 }).withMessage('Password must be at least 6 characters long.'),
        handleValidationErrors,
      ];
      
      export const loginValidator = [
        body('email').isEmail().withMessage('Please provide a valid email.'),
        body('password').notEmpty().withMessage('Password is required.'),
        handleValidationErrors,
      ];
      
      export const productValidator = [
        body('name').notEmpty().withMessage('Product name is required.'),
        body('price').isFloat({ gt: 0 }).withMessage('Price must be a positive number.'),
        body('description').notEmpty().withMessage('Description is required.'),
        body('category').isIn(['main', 'side', 'dessert', 'drink']).withMessage('Invalid category.'),
        handleValidationErrors,
      ];
      
      export { handleValidationErrors };
ðŸ“„ skriptName.py
  import os
  import tkinter as tk
  from tkinter import filedialog, messagebox
  
  MAX_DEPTH = 5
  SKIP_DIRS = {"node_modules", ".git", "__pycache__"}
  PRINT_CONTENT_EXTENSIONS = {".py", ".js", ".ts", ".html", ".css",".jsx" }
  
  def scan_directory(path, indent=0, output_lines=None, current_depth=0, print_content=False):
      if output_lines is None:
          output_lines = []
  
      if current_depth > MAX_DEPTH:
          output_lines.append("  " * indent + "ðŸ”½ ... (×¢×•×“ ×ª×™×§×™×•×ª ×”×•×¡×ª×¨×•)")
          return output_lines
  
      try:
          items = sorted(os.listdir(path))
      except PermissionError:
          output_lines.append("  " * indent + f"[â›” ××™×Ÿ ×”×¨×©××”]: {path}")
          return output_lines
  
      for item in items:
          full_path = os.path.join(path, item)
  
          if os.path.isdir(full_path) and item in SKIP_DIRS:
              print(f"â­ï¸ ×ž×“×œ×’ ×¢×œ ×ª×™×§×™×™×”: {full_path}")
              output_lines.append("  " * indent + f"ðŸš« {item}/ (× ×¤×¡×œ ×œ×¡×¨×™×§×”)")
              continue
  
          print(f"â–¶ï¸ ×¡×•×¨×§: {full_path}")
  
          if os.path.isdir(full_path):
              output_lines.append("  " * indent + f"ðŸ“ {item}/")
              scan_directory(full_path, indent + 1, output_lines, current_depth + 1, print_content)
          else:
              output_lines.append("  " * indent + f"ðŸ“„ {item}")
              ext = os.path.splitext(item)[1].lower()
              if print_content and ext in PRINT_CONTENT_EXTENSIONS:
                  try:
                      with open(full_path, "r", encoding="utf-8", errors="ignore") as f:
                          lines = f.readlines()
                          for line in lines:
                              output_lines.append("  " * (indent + 1) + line.rstrip())
                  except Exception as e:
                      output_lines.append("  " * (indent + 1) + f"[×©×’×™××” ×‘×§×¨×™××”: {e}]")
  
      return output_lines
  
  def ask_include_content():
      root = tk.Tk()
      root.withdraw()
      result = messagebox.askyesno(
          "×”×× ×œ×›×œ×•×œ ×ª×•×›×Ÿ ×§×‘×¦×™×?",
          "×”×× ××ª×” ×¨×•×¦×” ×©×”×§×•×“ ×™×“×¤×™×¡ ×’× ××ª ×ª×•×›×Ÿ ×§×‘×¦×™ ×”×§×•×“ (×•×œ× ×¨×§ ××ª ×©×ž×•×ª×™×”×)?"
      )
      return result
  
  def main():
      root = tk.Tk()
      root.withdraw()
      folder_path = filedialog.askdirectory(title="×‘×—×¨ ×ª×§×™×™×” ×œ×¡×¨×™×§×”")
  
      if not folder_path:
          print("âŒ ×œ× × ×‘×—×¨×” ×ª×§×™×™×”.")
          return
  
      include_content = ask_include_content()
      print(f"\nðŸ“‚ ×¡×•×¨×§ ××ª: {folder_path} (×¢×“ ×¢×•×ž×§ {MAX_DEPTH})")
      print(f"ðŸ“„ ×›×•×œ×œ ×ª×•×›×Ÿ ×§×‘×¦×™×: {'×›×Ÿ' if include_content else '×œ×'}\n")
  
      structure_lines = scan_directory(folder_path, print_content=include_content)
  
      print("\nðŸ“‹ ×ž×‘× ×” ×ž×œ×:\n")
      for line in structure_lines:
          print(line)
  
      output_file = os.path.join(folder_path, "directory_structure.txt")
      with open(output_file, "w", encoding="utf-8") as f:
          f.write("\n".join(structure_lines))
  
      print(f"\nâœ… × ×©×ž×¨ ×‘: {output_file}")
  
  if __name__ == "__main__":
      main()
ðŸ“„ vc.html
  <!DOCTYPE html>
  <html lang="he" dir="rtl">
  <head>
      <meta charset="UTF-8">
      <title>×‘×“×™×§×ª ×ª×ž×•× ×”</title>
      <style>
          body { font-family: sans-serif; text-align: center; padding-top: 50px; }
          img { border: 2px solid #ccc; margin-top: 20px; }
      </style>
  </head>
  <body>
      <h1>×‘×“×™×§×” ×¤×©×•×˜×”</h1>
      <p>×× ×”×ª×ž×•× ×” ×ž×•×¤×™×¢×” ×ž×ª×—×ª, ×”×©×¨×ª ×©×œ×š ×ž×’×™×© ×ª×ž×•× ×•×ª ×›×ž×• ×©×¦×¨×™×š.</p>
      <img
          src="http://localhost:4000/uploads/test.jpg"
          alt="×ª×ž×•× ×ª ×‘×“×™×§×”"
          width="500"
      />
  </body>
  </html>